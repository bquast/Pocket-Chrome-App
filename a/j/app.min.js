function e(){}function t(e,t){return{"value":e,"label":t}}function n(e,t,i,n,a,s){if("undefined"!=typeof e){"undefined"==typeof n&&(n=["bottom"]),"object"==typeof n&&n.length&&"centered"==n[0]&&(n=[]);var r='<div class="detail">';if("string"==typeof t&&(r+="<h5>"+t+"</h5>"),"string"==typeof i)for(var o=i.split("|"),l=0;l<o.length;l++)r+="<p>"+o[l]+"</p>";r+="</div>";var c=new Mt("alt-tooltip",r,$("#container"),{"positions":n,"onlyCentered":n==[]?!0:!1,"disableHideOnScroll":!0,"smallArrow":!0,"xOffset":0,"noClickDismiss":!0,"confirmButton":a?!0:!1,"confirmCallback":s?s:null});return c.object.addClass("alt-tooltip"),c.show(e),c}}function s(e){var t=$('<div class="confirmation_dialog"></div>'),i=new Mt("confirmation",t,null,{"onHide":e.cancel?e.cancel.action:e.onHide?e.onHide:null,"onShow":e.onShow,"xOffset":e.xOffset?e.xOffset:0});e.title&&t.append("<h5>"+e.title+"</h5>"),e.message&&t.append("<p>"+e.message+"</p>"),e.cancel||(e.cancel={}),e.cancel&&e.cancel.title||(e.cancel.title=Pt.callTrans("cta.cancel"));var n=$('<a class="button button-small button-secondary" href="#">'+e.cancel.title+"</a>");n.click(function(t){t.stopPropagation(),t.preventDefault(),e.cancel.action&&e.cancel.action(),i.show(!1)}),t.append(n);var a;e.confirm&&(a=$('<a class="button button-small button-important" href="#">'+e.confirm.title+"</a>"),a.click(function(t){t.stopPropagation(),t.preventDefault(),e.confirm.action&&e.confirm.action(),i.show(!1)}),t.append(a)),t.append('<div class="clear"></div>'),i.show(e.anchor)}function r(e){"object"==typeof e&&(e.hover(function(t){t.preventDefault();var i=$(".hint");i.length||(i=$('<div class="hint hint-bottom"></div>'),$("body").append(i));var n=e.data("title");n&&"string"!=typeof e.attr("title")||(n=e.attr("title"),e.removeAttr("title"),e.data("title",n)),i.text(n);var a=Math.floor(e.offset().left+e.width()/2-i.outerWidth()/2),s="hint-bottom";0>a?(s="hint-bottomright",a=Math.floor(e.offset().left)):a+i.outerWidth()>$(window).width()&&(s="hint-bottomleft",a=Math.floor(e.offset().left-i.outerWidth()/2)),i.css({"left":a+"px","top":Math.floor(e.offset().top+e.height())+8+"px"}),i.removeClass("hint-bottom hint-bottomleft hint-bottomright").addClass(s+" "+s+"active")},function(e){e.preventDefault(),$(".hint").removeClass("hint-bottomactive hint-bottomleftactive hint-bottomrightactive")}),e.click(function(e){e.preventDefault(),$(".hint").removeClass("hint-bottomactive hint-bottomleftactive hint-bottomrightactive")}))}function o(){return chrome.storage?!0:!1}function l(e){var t="url(";return t+=o()?chrome.runtime.getURL("a/"+e):e,t+=")"}function c(){$(window).scrollTop(0)}function u(e,t){if(o()){var i={};i[e]=t,chrome.storage.local.set(i)}else localStorage.setItem(e,t)}function d(e,t){if(o())chrome.storage.local.get(e,t);else{var i=localStorage[e],n={};n[e]=i,t(n)}}function h(e){var t=$.Deferred();return d(e,function(i){t.resolve(i[e])}),t.promise()}function f(e){o()?chrome.storage.local.remove(e):localStorage.removeItem(e)}function p(e,t){e.getTime||(e=new Date(e));var i=1,n=60*i,a=60*n,s=24*a,r=new Date,o=(e.getTime()-r.getTime())/1e3*-1,l={};l.day=Math.floor(o/s),l.hour=Math.floor((o-l.day*s)/a),l.minute=Math.floor((o-l.day*s-l.hour*a)/n);var c;return c=0>o?"":1*n>o?Pt.callTrans("queue.justnow"):2*n>o?Pt.callTrans("queue.minago",null,null,"1"):45*n>o?Pt.callTrans("queue.minsago",null,null,l.minute):120*n>o?Pt.callTrans("queue.hourago",null,null,"1"):24*a>o?Pt.callTrans("queue.hoursago",null,null,l.hour):48*a>o?Pt.callTrans("queue.dayago",null,null,"1"):7*s>o?Pt.callTrans("queue.daysago",null,null,l.day):(t?"on ":"")+moment(e).lang(zt.language).format("LL")}function g(e,t,i){if(i){var n=new Date;n.setTime(n.getTime()+24*i*60*60*1e3);var a="; expires="+n.toGMTString()}else var a="";document.cookie=e+"="+t+a+"; path=/"}function m(e){for(var t=e+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var a=i[n];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return null}function v(e){return String(e).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function _(e){return e=e.replace(/\\u([\d\w]{4})/gi,function(e,t){return String.fromCharCode(parseInt(t,16))}),unescape(e)}function y(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function b(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.top-300<=(window.innerHeight||document.documentElement.clientHeight)&&t.left<=(window.innerWidth||document.documentElement.clientWidth)}function w(){var e=-1;if("Microsoft Internet Explorer"==navigator.appName){var t=navigator.userAgent,i=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=i.exec(t)&&(e=parseFloat(RegExp.$1))}return e>-1}function S(e){return e=e.replace(/\\'/g,"'"),e=e.replace(/\\"/g,'"'),e=e.replace(/\\0/g,"\x00"),e=e.replace(/\\\\/g,"\\")}function T(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function k(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return"string"!=typeof e?"":String(e).replace(/[&<>"']/g,function(e){return t[e]})}function x(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"};return"string"!=typeof e?"":String(e).replace(/(&amp;|&lt;|&gt;|&quot;|&#39;)/g,function(e){return t[e]})}function C(e){return/^https?\:/i.test(e)}function D(e){return/^[_a-z0-9-\+]+(\.[_a-z0-9-\+]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,6})$/i.test(e)}function L(e){var t=/\/\/([^\/]*)/.exec(e);return t?t[1].replace(/^www\./,""):!1}function I(e){return"http://getpocket.com/redirect?url="+encodeURIComponent(e)}function M(e,t,i){if(e&&(vars=i?"f="+i:"",parts=z(e),"http"==parts.protocol||"https"==parts.protocol)){var n=/\.(jpg|gif|jpeg|png|ico)$/i.exec(parts.file),a=n?n[1]:!1;a||(a="jpg",vars+="&ne=1");var s="";parts.query&&(s="/QS/"+encodeURIComponent(encodeURIComponent(parts.query)));var r="";return t&&(r="/RS/"+t),e="http://img.readitlater.com/i/"+parts.host+parts.directory+parts.file.replace("."+a,"")+s+r+(s&&!r?"/image":"")+"."+a+(vars?"?"+vars:"")}}function A(e,t){var i=e[0],n=e[1],a=e[2],s=e[3];i=P(i,n,a,s,t[0],7,-680876936),s=P(s,i,n,a,t[1],12,-389564586),a=P(a,s,i,n,t[2],17,606105819),n=P(n,a,s,i,t[3],22,-1044525330),i=P(i,n,a,s,t[4],7,-176418897),s=P(s,i,n,a,t[5],12,1200080426),a=P(a,s,i,n,t[6],17,-1473231341),n=P(n,a,s,i,t[7],22,-45705983),i=P(i,n,a,s,t[8],7,1770035416),s=P(s,i,n,a,t[9],12,-1958414417),a=P(a,s,i,n,t[10],17,-42063),n=P(n,a,s,i,t[11],22,-1990404162),i=P(i,n,a,s,t[12],7,1804603682),s=P(s,i,n,a,t[13],12,-40341101),a=P(a,s,i,n,t[14],17,-1502002290),n=P(n,a,s,i,t[15],22,1236535329),i=q(i,n,a,s,t[1],5,-165796510),s=q(s,i,n,a,t[6],9,-1069501632),a=q(a,s,i,n,t[11],14,643717713),n=q(n,a,s,i,t[0],20,-373897302),i=q(i,n,a,s,t[5],5,-701558691),s=q(s,i,n,a,t[10],9,38016083),a=q(a,s,i,n,t[15],14,-660478335),n=q(n,a,s,i,t[4],20,-405537848),i=q(i,n,a,s,t[9],5,568446438),s=q(s,i,n,a,t[14],9,-1019803690),a=q(a,s,i,n,t[3],14,-187363961),n=q(n,a,s,i,t[8],20,1163531501),i=q(i,n,a,s,t[13],5,-1444681467),s=q(s,i,n,a,t[2],9,-51403784),a=q(a,s,i,n,t[7],14,1735328473),n=q(n,a,s,i,t[12],20,-1926607734),i=F(i,n,a,s,t[5],4,-378558),s=F(s,i,n,a,t[8],11,-2022574463),a=F(a,s,i,n,t[11],16,1839030562),n=F(n,a,s,i,t[14],23,-35309556),i=F(i,n,a,s,t[1],4,-1530992060),s=F(s,i,n,a,t[4],11,1272893353),a=F(a,s,i,n,t[7],16,-155497632),n=F(n,a,s,i,t[10],23,-1094730640),i=F(i,n,a,s,t[13],4,681279174),s=F(s,i,n,a,t[0],11,-358537222),a=F(a,s,i,n,t[3],16,-722521979),n=F(n,a,s,i,t[6],23,76029189),i=F(i,n,a,s,t[9],4,-640364487),s=F(s,i,n,a,t[12],11,-421815835),a=F(a,s,i,n,t[15],16,530742520),n=F(n,a,s,i,t[2],23,-995338651),i=O(i,n,a,s,t[0],6,-198630844),s=O(s,i,n,a,t[7],10,1126891415),a=O(a,s,i,n,t[14],15,-1416354905),n=O(n,a,s,i,t[5],21,-57434055),i=O(i,n,a,s,t[12],6,1700485571),s=O(s,i,n,a,t[3],10,-1894986606),a=O(a,s,i,n,t[10],15,-1051523),n=O(n,a,s,i,t[1],21,-2054922799),i=O(i,n,a,s,t[8],6,1873313359),s=O(s,i,n,a,t[15],10,-30611744),a=O(a,s,i,n,t[6],15,-1560198380),n=O(n,a,s,i,t[13],21,1309151649),i=O(i,n,a,s,t[4],6,-145523070),s=O(s,i,n,a,t[11],10,-1120210379),a=O(a,s,i,n,t[2],15,718787259),n=O(n,a,s,i,t[9],21,-343485551),e[0]=H(i,e[0]),e[1]=H(n,e[1]),e[2]=H(a,e[2]),e[3]=H(s,e[3])}function E(e,t,i,n,a,s){return t=H(H(t,e),H(n,s)),H(t<<a|t>>>32-a,i)}function P(e,t,i,n,a,s,r){return E(t&i|~t&n,e,t,a,s,r)}function q(e,t,i,n,a,s,r){return E(t&n|i&~n,e,t,a,s,r)}function F(e,t,i,n,a,s,r){return E(t^i^n,e,t,a,s,r)}function O(e,t,i,n,a,s,r){return E(i^(t|~n),e,t,a,s,r)}function R(e){txt="";var t,i=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)A(n,N(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(A(n,a),t=0;16>t;t++)a[t]=0;return a[14]=8*i,A(n,a),n}function N(e){var t,i=[];for(t=0;64>t;t+=4)i[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return i}function j(e){for(var t="",i=0;4>i;i++)t+=Ft[e>>8*i+4&15]+Ft[e>>8*i&15];return t}function U(e){for(var t=0;t<e.length;t++)e[t]=j(e[t]);return e.join("")}function Y(e){return U(R(e))}function H(e,t){return e+t&4294967295}function H(e,t){var i=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(i>>16);return n<<16|65535&i}function z(e){for(var t=z.options,i=t.parser[t.strictMode?"strict":"loose"].exec(e),n={},a=14;a--;)n[t.key[a]]=i[a]||"";return n[t.q.name]={},n[t.key[12]].replace(t.q.parser,function(e,i,a){i&&(n[t.q.name][i]=a)}),n}function W(){this.ready=!1}function B(){this.pages={},this.helper={},this.defaultPage="queue",this.urlHead="/a/",this.router={"home":"queue","queue":"queue","favorites":"queue","archive":"queue","options":"options","read":"reader","login":"login"},this.USERS_META_WEB_GSF_SETTINGS=45,this.USERS_META_WEB_DISPLAY_SETTINGS=46,this.data=new Ut}function G(e){logger.log("Start caching: "+e.given_url),this.cancelled=!1,this.item=e,this.dbServer=Kt.helper.db.server}function V(){this.itemsCaching=[],this.itemDownloaders=[]}function J(){}function K(e){return"#"+e}function Q(e){return"."+e}function X(){this.created=!1,this.loadedTags=!1,this.selectedTag,this.rows={},this.tags=[],this.deleteClickedFlag=!1,this.scrollKit={"pinnedDirection":0,"lastScrollY":$(window).scrollTop()},this.contentDiv,this.wrapper,this.layoutInfoCache={"headersHeight":0,"footersHeight":0},this.isHorizontallyOffset=!1}function Z(){this.syncing=!1,this.caching=!1,this.fetching=!1,this.sending=!1,this.getting=!1,this.waitingForGet=!1,this.firstFetchFinished=!1,this.hasSyncedUserSettings=!1,this.hasSyncedRediscovery=!1,this.sendRequest=void 0,this.getRequest=void 0,this.dbServer=Kt.helper.db.server}function et(){this.nav="queue",this.defaultSection="Queue",this.defaultView="grid",this.css=[],this.scripts=[],this.location=0,this.pageSize=30,this.remaining=!0,this.offset=0,this.data=new ei,this.lastScrollTop=0,this.items=[],this.itemsByID={},this.sortingByNewestToOldest=!1,this.initialView=!0,this.itemHighlight=null,this.bulkEditMode=!1,this.topicDetail={},this.topicDetailActive=!1,this.loadedItems=!1,this.sawEmptyNotice=!1,this.archiveTooltipPending=!1,this.tag_cxt_tags_cnt=0,this.tag_cxt_suggested_available=0,this.tag_cxt_entered=0,this.tag_cxt_suggested=0,this.tag_cxt_removed=0,this.recentSearches=[]}function tt(e){if(!e)return"";var t="";for(authorId in e)t+='<span class="author">'+nt(e[authorId].name)+"</span>, ";return t.replace(/, $/,"")}function it(e,t,i,n){if(!e)return"";var a="",s=[];if(t)for(tagId in e){var r=k(e[tagId]),o="tag";n&&r==n&&(o="tag tag-search-match"),-1==$.inArray(r,s)&&(a+='<a class="'+o+'" href="'+ai.tagUrlPrefix+encodeURIComponent(r)+'">'+r+"</a>",i||(a+=", "),s.push(r))}else for(tagId in e){var r=k(e[tagId].tag);if($.trim(r).length){var o="tag";n&&r==n&&(o="tag tag-search-match"),-1==$.inArray(r,s)&&(n&&r==n?a='<a class="'+o+'" href="'+ai.tagUrlPrefix+encodeURIComponent(r)+'">'+r+"</a>"+a:a+='<a class="'+o+'" href="'+ai.tagUrlPrefix+encodeURIComponent(r)+'">'+r+"</a>",i||(a+=", "),s.push(r))}}return a.replace(/, $/,"")}function nt(e){return(e.match(/^[A-Z\s\'\-]{1,}/)||e.match(/^[a-z\s\'\-]{1,}$/))&&(e=at(e.toLowerCase())),e}function at(e){return(e+"").replace(/^([a-z])|\s+([a-z])/g,function(e){return e.toUpperCase()})}function st(e){return M("http://"+e+"/favicon.ico",!1,"fi")}function rt(e,t,i){return e.width>=t&&t*e.height/e.width>=i}function ot(e){return{"width":e.width(),"height":e.height()}}function lt(e,t,i){var n=Math.floor(i/t);e.css("height",n*t+"px")}function ct(e,t){return e.sort_id<t.sort_id?-1:e.sort_id>t.sort_id?1:0}function ut(e,t){return parseInt(t.time_added)-parseInt(e.time_added)}function dt(e,t){return parseInt(e.time_added)-parseInt(t.time_added)}function ht(e,t){return e.resolved_title.localCompare(t.resolved_title)}function ft(e,t){return e.resolved_url.localCompare(t.resolved_url)}function pt(){this.topY=120,this.nav="reader",this.styleMenu=!1;var e=navigator.userAgent,t=e.match(/Firefox/)||e.match(/IE/);this.yHitMethod=t?"screen":"page",this.pendingPosition=void 0}!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function i(e){var t=e.length,i=Z.type(e);return"function"===i||Z.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e}function n(e,t,i){if(Z.isFunction(t))return Z.grep(e,function(e,n){return!!t.call(e,n,e)!==i});if(t.nodeType)return Z.grep(e,function(e){return e===t!==i});if("string"==typeof t){if(ot.test(t))return Z.filter(t,e,i);t=Z.filter(t,e)}return Z.grep(e,function(e){return B.call(t,e)>=0!==i})}function a(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function s(e){var t=pt[e]={};return Z.each(e.match(ft)||[],function(e,i){t[i]=!0}),t}function r(){Q.removeEventListener("DOMContentLoaded",r,!1),e.removeEventListener("load",r,!1),Z.ready()}function o(){Object.defineProperty(this.cache={},0,{"get":function(){return{}}}),this.expando=Z.expando+Math.random()}function l(e,t,i){var n;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(bt,"-$1").toLowerCase(),i=e.getAttribute(n),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:yt.test(i)?Z.parseJSON(i):i}catch(a){}_t.set(e,t,i)}else i=void 0;return i}function c(){return!0}function u(){return!1}function d(){try{return Q.activeElement}catch(e){}}function h(e,t){return Z.nodeName(e,"table")&&Z.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function f(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function p(e){var t=Ft.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function g(e,t){for(var i=0,n=e.length;n>i;i++)vt.set(e[i],"globalEval",!t||vt.get(t[i],"globalEval"))}function m(e,t){var i,n,a,s,r,o,l,c;if(1===t.nodeType){if(vt.hasData(e)&&(s=vt.access(e),r=vt.set(t,s),c=s.events)){delete r.handle,r.events={};for(a in c)for(i=0,n=c[a].length;n>i;i++)Z.event.add(t,a,c[a][i])}_t.hasData(e)&&(o=_t.access(e),l=Z.extend({},o),_t.set(t,l))}}function v(e,t){var i=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&Z.nodeName(e,t)?Z.merge([e],i):i}function _(e,t){var i=t.nodeName.toLowerCase();"input"===i&&kt.test(e.type)?t.checked=e.checked:("input"===i||"textarea"===i)&&(t.defaultValue=e.defaultValue)}function y(t,i){var n,a=Z(i.createElement(t)).appendTo(i.body),s=e.getDefaultComputedStyle&&(n=e.getDefaultComputedStyle(a[0]))?n.display:Z.css(a[0],"display");return a.detach(),s}function b(e){var t=Q,i=jt[e];return i||(i=y(e,t),"none"!==i&&i||(Nt=(Nt||Z("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Nt[0].contentDocument,t.write(),t.close(),i=y(e,t),Nt.detach()),jt[e]=i),i}function w(e,t,i){var n,a,s,r,o=e.style;return i=i||Ht(e),i&&(r=i.getPropertyValue(t)||i[t]),i&&(""!==r||Z.contains(e.ownerDocument,e)||(r=Z.style(e,t)),Yt.test(r)&&Ut.test(t)&&(n=o.width,a=o.minWidth,s=o.maxWidth,o.minWidth=o.maxWidth=o.width=r,r=i.width,o.width=n,o.minWidth=a,o.maxWidth=s)),void 0!==r?r+"":r}function S(e,t){return{"get":function(){return e()?(delete this.get,void 0):(this.get=t).apply(this,arguments)}}}function T(e,t){if(t in e)return t;for(var i=t[0].toUpperCase()+t.slice(1),n=t,a=Jt.length;a--;)if(t=Jt[a]+i,t in e)return t;return n}function k(e,t,i){var n=Wt.exec(t);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):t}function x(e,t,i,n,a){for(var s=i===(n?"border":"content")?4:"width"===t?1:0,r=0;4>s;s+=2)"margin"===i&&(r+=Z.css(e,i+St[s],!0,a)),n?("content"===i&&(r-=Z.css(e,"padding"+St[s],!0,a)),"margin"!==i&&(r-=Z.css(e,"border"+St[s]+"Width",!0,a))):(r+=Z.css(e,"padding"+St[s],!0,a),"padding"!==i&&(r+=Z.css(e,"border"+St[s]+"Width",!0,a)));return r}function C(e,t,i){var n=!0,a="width"===t?e.offsetWidth:e.offsetHeight,s=Ht(e),r="border-box"===Z.css(e,"boxSizing",!1,s);if(0>=a||null==a){if(a=w(e,t,s),(0>a||null==a)&&(a=e.style[t]),Yt.test(a))return a;n=r&&(K.boxSizingReliable()||a===e.style[t]),a=parseFloat(a)||0}return a+x(e,t,i||(r?"border":"content"),n,s)+"px"}function D(e,t){for(var i,n,a,s=[],r=0,o=e.length;o>r;r++)n=e[r],n.style&&(s[r]=vt.get(n,"olddisplay"),i=n.style.display,t?(s[r]||"none"!==i||(n.style.display=""),""===n.style.display&&Tt(n)&&(s[r]=vt.access(n,"olddisplay",b(n.nodeName)))):(a=Tt(n),"none"===i&&a||vt.set(n,"olddisplay",a?i:Z.css(n,"display"))));for(r=0;o>r;r++)n=e[r],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?s[r]||"":"none"));return e}function L(e,t,i,n,a){return new L.prototype.init(e,t,i,n,a)}function $(){return setTimeout(function(){Kt=void 0}),Kt=Z.now()}function I(e,t){var i,n=0,a={"height":e};for(t=t?1:0;4>n;n+=2-t)i=St[n],a["margin"+i]=a["padding"+i]=e;return t&&(a.opacity=a.width=e),a}function M(e,t,i){for(var n,a=(ii[t]||[]).concat(ii["*"]),s=0,r=a.length;r>s;s++)if(n=a[s].call(i,t,e))return n}function A(e,t,i){var n,a,s,r,o,l,c,u,d=this,h={},f=e.style,p=e.nodeType&&Tt(e),g=vt.get(e,"fxshow");i.queue||(o=Z._queueHooks(e,"fx"),null==o.unqueued&&(o.unqueued=0,l=o.empty.fire,o.empty.fire=function(){o.unqueued||l()}),o.unqueued++,d.always(function(){d.always(function(){o.unqueued--,Z.queue(e,"fx").length||o.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[f.overflow,f.overflowX,f.overflowY],c=Z.css(e,"display"),u="none"===c?vt.get(e,"olddisplay")||b(e.nodeName):c,"inline"===u&&"none"===Z.css(e,"float")&&(f.display="inline-block")),i.overflow&&(f.overflow="hidden",d.always(function(){f.overflow=i.overflow[0],f.overflowX=i.overflow[1],f.overflowY=i.overflow[2]}));for(n in t)if(a=t[n],Xt.exec(a)){if(delete t[n],s=s||"toggle"===a,a===(p?"hide":"show")){if("show"!==a||!g||void 0===g[n])continue;p=!0}h[n]=g&&g[n]||Z.style(e,n)}else c=void 0;if(Z.isEmptyObject(h))"inline"===("none"===c?b(e.nodeName):c)&&(f.display=c);else{g?"hidden"in g&&(p=g.hidden):g=vt.access(e,"fxshow",{}),s&&(g.hidden=!p),p?Z(e).show():d.done(function(){Z(e).hide()}),d.done(function(){var t;vt.remove(e,"fxshow");for(t in h)Z.style(e,t,h[t])});for(n in h)r=M(p?g[n]:0,n,d),n in g||(g[n]=r.start,p&&(r.end=r.start,r.start="width"===n||"height"===n?1:0))}}function E(e,t){var i,n,a,s,r;for(i in e)if(n=Z.camelCase(i),a=t[n],s=e[i],Z.isArray(s)&&(a=s[1],s=e[i]=s[0]),i!==n&&(e[n]=s,delete e[i]),r=Z.cssHooks[n],r&&"expand"in r){s=r.expand(s),delete e[n];for(i in s)i in e||(e[i]=s[i],t[i]=a)}else t[n]=a}function P(e,t,i){var n,a,s=0,r=ti.length,o=Z.Deferred().always(function(){delete l.elem}),l=function(){if(a)return!1;for(var t=Kt||$(),i=Math.max(0,c.startTime+c.duration-t),n=i/c.duration||0,s=1-n,r=0,l=c.tweens.length;l>r;r++)c.tweens[r].run(s);return o.notifyWith(e,[c,s,i]),1>s&&l?i:(o.resolveWith(e,[c]),!1)},c=o.promise({"elem":e,"props":Z.extend({},t),"opts":Z.extend(!0,{"specialEasing":{}},i),"originalProperties":t,"originalOptions":i,"startTime":Kt||$(),"duration":i.duration,"tweens":[],"createTween":function(t,i){var n=Z.Tween(e,c.opts,t,i,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},"stop":function(t){var i=0,n=t?c.tweens.length:0;if(a)return this;for(a=!0;n>i;i++)c.tweens[i].run(1);return t?o.resolveWith(e,[c,t]):o.rejectWith(e,[c,t]),this}}),u=c.props;for(E(u,c.opts.specialEasing);r>s;s++)if(n=ti[s].call(c,e,u,c.opts))return n;return Z.map(u,M,c),Z.isFunction(c.opts.start)&&c.opts.start.call(e,c),Z.fx.timer(Z.extend(l,{"elem":e,"anim":c,"queue":c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function q(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,a=0,s=t.toLowerCase().match(ft)||[];if(Z.isFunction(i))for(;n=s[a++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function F(e,t,i,n){function a(o){var l;return s[o]=!0,Z.each(e[o]||[],function(e,o){var c=o(t,i,n);return"string"!=typeof c||r||s[c]?r?!(l=c):void 0:(t.dataTypes.unshift(c),a(c),!1)}),l}var s={},r=e===wi;return a(t.dataTypes[0])||!s["*"]&&a("*")}function O(e,t){var i,n,a=Z.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((a[i]?e:n||(n={}))[i]=t[i]);return n&&Z.extend(!0,e,n),e}function R(e,t,i){for(var n,a,s,r,o=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(a in o)if(o[a]&&o[a].test(n)){l.unshift(a);break}if(l[0]in i)s=l[0];else{for(a in i){if(!l[0]||e.converters[a+" "+l[0]]){s=a;break}r||(r=a)}s=s||r}return s?(s!==l[0]&&l.unshift(s),i[s]):void 0}function N(e,t,i,n){var a,s,r,o,l,c={},u=e.dataTypes.slice();if(u[1])for(r in e.converters)c[r.toLowerCase()]=e.converters[r];for(s=u.shift();s;)if(e.responseFields[s]&&(i[e.responseFields[s]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=s,s=u.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(r=c[l+" "+s]||c["* "+s],!r)for(a in c)if(o=a.split(" "),o[1]===s&&(r=c[l+" "+o[0]]||c["* "+o[0]])){r===!0?r=c[a]:c[a]!==!0&&(s=o[0],u.unshift(o[1]));break}if(r!==!0)if(r&&e["throws"])t=r(t);else try{t=r(t)}catch(d){return{"state":"parsererror","error":r?d:"No conversion from "+l+" to "+s}}}return{"state":"success","data":t}}function j(e,t,i,n){var a;if(Z.isArray(t))Z.each(t,function(t,a){i||xi.test(e)?n(e,a):j(e+"["+("object"==typeof a?t:"")+"]",a,i,n)});else if(i||"object"!==Z.type(t))n(e,t);else for(a in t)j(e+"["+a+"]",t[a],i,n)}function U(e){return Z.isWindow(e)?e:9===e.nodeType&&e.defaultView}var Y=[],H=Y.slice,z=Y.concat,W=Y.push,B=Y.indexOf,G={},V=G.toString,J=G.hasOwnProperty,K={},Q=e.document,X="2.1.1",Z=function(e,t){return new Z.fn.init(e,t)},et=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,tt=/^-ms-/,it=/-([\da-z])/gi,nt=function(e,t){return t.toUpperCase()};Z.fn=Z.prototype={"jquery":X,"constructor":Z,"selector":"","length":0,"toArray":function(){return H.call(this)},"get":function(e){return null!=e?0>e?this[e+this.length]:this[e]:H.call(this)},"pushStack":function(e){var t=Z.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},"each":function(e,t){return Z.each(this,e,t)},"map":function(e){return this.pushStack(Z.map(this,function(t,i){return e.call(t,i,t)}))},"slice":function(){return this.pushStack(H.apply(this,arguments))},"first":function(){return this.eq(0)},"last":function(){return this.eq(-1)},"eq":function(e){var t=this.length,i=+e+(0>e?t:0);return this.pushStack(i>=0&&t>i?[this[i]]:[])},"end":function(){return this.prevObject||this.constructor(null)},"push":W,"sort":Y.sort,"splice":Y.splice},Z.extend=Z.fn.extend=function(){var e,t,i,n,a,s,r=arguments[0]||{},o=1,l=arguments.length,c=!1;for("boolean"==typeof r&&(c=r,r=arguments[o]||{},o++),"object"==typeof r||Z.isFunction(r)||(r={}),o===l&&(r=this,o--);l>o;o++)if(null!=(e=arguments[o]))for(t in e)i=r[t],n=e[t],r!==n&&(c&&n&&(Z.isPlainObject(n)||(a=Z.isArray(n)))?(a?(a=!1,s=i&&Z.isArray(i)?i:[]):s=i&&Z.isPlainObject(i)?i:{},r[t]=Z.extend(c,s,n)):void 0!==n&&(r[t]=n));return r},Z.extend({"expando":"jQuery"+(X+Math.random()).replace(/\D/g,""),"isReady":!0,"error":function(e){throw new Error(e)},"noop":function(){},"isFunction":function(e){return"function"===Z.type(e)},"isArray":Array.isArray,"isWindow":function(e){return null!=e&&e===e.window},"isNumeric":function(e){return!Z.isArray(e)&&e-parseFloat(e)>=0},"isPlainObject":function(e){return"object"!==Z.type(e)||e.nodeType||Z.isWindow(e)?!1:e.constructor&&!J.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},"isEmptyObject":function(e){var t;for(t in e)return!1;return!0},"type":function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?G[V.call(e)]||"object":typeof e},"globalEval":function(e){var t,i=eval;e=Z.trim(e),e&&(1===e.indexOf("use strict")?(t=Q.createElement("script"),t.text=e,Q.head.appendChild(t).parentNode.removeChild(t)):i(e))},"camelCase":function(e){return e.replace(tt,"ms-").replace(it,nt)},"nodeName":function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},"each":function(e,t,n){var a,s=0,r=e.length,o=i(e);if(n){if(o)for(;r>s&&(a=t.apply(e[s],n),a!==!1);s++);else for(s in e)if(a=t.apply(e[s],n),a===!1)break}else if(o)for(;r>s&&(a=t.call(e[s],s,e[s]),a!==!1);s++);else for(s in e)if(a=t.call(e[s],s,e[s]),a===!1)break;return e},"trim":function(e){return null==e?"":(e+"").replace(et,"")},"makeArray":function(e,t){var n=t||[];return null!=e&&(i(Object(e))?Z.merge(n,"string"==typeof e?[e]:e):W.call(n,e)),n},"inArray":function(e,t,i){return null==t?-1:B.call(t,e,i)},"merge":function(e,t){for(var i=+t.length,n=0,a=e.length;i>n;n++)e[a++]=t[n];return e.length=a,e},"grep":function(e,t,i){for(var n,a=[],s=0,r=e.length,o=!i;r>s;s++)n=!t(e[s],s),n!==o&&a.push(e[s]);return a},"map":function(e,t,n){var a,s=0,r=e.length,o=i(e),l=[];if(o)for(;r>s;s++)a=t(e[s],s,n),null!=a&&l.push(a);else for(s in e)a=t(e[s],s,n),null!=a&&l.push(a);return z.apply([],l)},"guid":1,"proxy":function(e,t){var i,n,a;return"string"==typeof t&&(i=e[t],t=e,e=i),Z.isFunction(e)?(n=H.call(arguments,2),a=function(){return e.apply(t||this,n.concat(H.call(arguments)))},a.guid=e.guid=e.guid||Z.guid++,a):void 0},"now":Date.now,"support":K}),Z.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){G["[object "+t+"]"]=t.toLowerCase()});var at=function(e){function t(e,t,i,n){var a,s,r,o,l,c,d,f,p,g;if((t?t.ownerDocument||t:j)!==A&&M(t),t=t||A,i=i||[],!e||"string"!=typeof e)return i;if(1!==(o=t.nodeType)&&9!==o)return[];if(P&&!n){if(a=_t.exec(e))if(r=a[1]){if(9===o){if(s=t.getElementById(r),!s||!s.parentNode)return i;if(s.id===r)return i.push(s),i}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(r))&&R(t,s)&&s.id===r)return i.push(s),i}else{if(a[2])return Z.apply(i,t.getElementsByTagName(e)),i;if((r=a[3])&&w.getElementsByClassName&&t.getElementsByClassName)return Z.apply(i,t.getElementsByClassName(r)),i}if(w.qsa&&(!q||!q.test(e))){if(f=d=N,p=t,g=9===o&&e,1===o&&"object"!==t.nodeName.toLowerCase()){for(c=x(e),(d=t.getAttribute("id"))?f=d.replace(bt,"\\$&"):t.setAttribute("id",f),f="[id='"+f+"'] ",l=c.length;l--;)c[l]=f+h(c[l]);p=yt.test(e)&&u(t.parentNode)||t,g=c.join(",")}if(g)try{return Z.apply(i,p.querySelectorAll(g)),i}catch(m){}finally{d||t.removeAttribute("id")}}}return D(e.replace(lt,"$1"),t,i,n)}function i(){function e(i,n){return t.push(i+" ")>S.cacheLength&&delete e[t.shift()],e[i+" "]=n}var t=[];return e}function n(e){return e[N]=!0,e}function a(e){var t=A.createElement("div");try{return!!e(t)}catch(i){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function s(e,t){for(var i=e.split("|"),n=e.length;n--;)S.attrHandle[i[n]]=t}function r(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||V)-(~e.sourceIndex||V);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function o(e){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===e}}function l(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function c(e){return n(function(t){return t=+t,n(function(i,n){for(var a,s=e([],i.length,t),r=s.length;r--;)i[a=s[r]]&&(i[a]=!(n[a]=i[a]))})})}function u(e){return e&&typeof e.getElementsByTagName!==G&&e}function d(){}function h(e){for(var t=0,i=e.length,n="";i>t;t++)n+=e[t].value;return n}function f(e,t,i){var n=t.dir,a=i&&"parentNode"===n,s=Y++;return t.first?function(t,i,s){for(;t=t[n];)if(1===t.nodeType||a)return e(t,i,s)}:function(t,i,r){var o,l,c=[U,s];if(r){for(;t=t[n];)if((1===t.nodeType||a)&&e(t,i,r))return!0}else for(;t=t[n];)if(1===t.nodeType||a){if(l=t[N]||(t[N]={}),(o=l[n])&&o[0]===U&&o[1]===s)return c[2]=o[2];if(l[n]=c,c[2]=e(t,i,r))return!0}}}function p(e){return e.length>1?function(t,i,n){for(var a=e.length;a--;)if(!e[a](t,i,n))return!1;return!0}:e[0]}function g(e,i,n){for(var a=0,s=i.length;s>a;a++)t(e,i[a],n);return n}function m(e,t,i,n,a){for(var s,r=[],o=0,l=e.length,c=null!=t;l>o;o++)(s=e[o])&&(!i||i(s,n,a))&&(r.push(s),c&&t.push(o));return r}function v(e,t,i,a,s,r){return a&&!a[N]&&(a=v(a)),s&&!s[N]&&(s=v(s,r)),n(function(n,r,o,l){var c,u,d,h=[],f=[],p=r.length,v=n||g(t||"*",o.nodeType?[o]:o,[]),_=!e||!n&&t?v:m(v,h,e,o,l),y=i?s||(n?e:p||a)?[]:r:_;if(i&&i(_,y,o,l),a)for(c=m(y,f),a(c,[],o,l),u=c.length;u--;)(d=c[u])&&(y[f[u]]=!(_[f[u]]=d));if(n){if(s||e){if(s){for(c=[],u=y.length;u--;)(d=y[u])&&c.push(_[u]=d);s(null,y=[],c,l)}for(u=y.length;u--;)(d=y[u])&&(c=s?tt.call(n,d):h[u])>-1&&(n[c]=!(r[c]=d))}}else y=m(y===r?y.splice(p,y.length):y),s?s(null,r,y,l):Z.apply(r,y)})}function _(e){for(var t,i,n,a=e.length,s=S.relative[e[0].type],r=s||S.relative[" "],o=s?1:0,l=f(function(e){return e===t},r,!0),c=f(function(e){return tt.call(t,e)>-1},r,!0),u=[function(e,i,n){return!s&&(n||i!==L)||((t=i).nodeType?l(e,i,n):c(e,i,n))}];a>o;o++)if(i=S.relative[e[o].type])u=[f(p(u),i)];else{if(i=S.filter[e[o].type].apply(null,e[o].matches),i[N]){for(n=++o;a>n&&!S.relative[e[n].type];n++);return v(o>1&&p(u),o>1&&h(e.slice(0,o-1).concat({"value":" "===e[o-2].type?"*":""})).replace(lt,"$1"),i,n>o&&_(e.slice(o,n)),a>n&&_(e=e.slice(n)),a>n&&h(e))}u.push(i)}return p(u)}function y(e,i){var a=i.length>0,s=e.length>0,r=function(n,r,o,l,c){var u,d,h,f=0,p="0",g=n&&[],v=[],_=L,y=n||s&&S.find.TAG("*",c),b=U+=null==_?1:Math.random()||.1,w=y.length;for(c&&(L=r!==A&&r);p!==w&&null!=(u=y[p]);p++){if(s&&u){for(d=0;h=e[d++];)if(h(u,r,o)){l.push(u);break}c&&(U=b)}a&&((u=!h&&u)&&f--,n&&g.push(u))}if(f+=p,a&&p!==f){for(d=0;h=i[d++];)h(g,v,r,o);if(n){if(f>0)for(;p--;)g[p]||v[p]||(v[p]=Q.call(l));v=m(v)}Z.apply(l,v),c&&!n&&v.length>0&&f+i.length>1&&t.uniqueSort(l)}return c&&(U=b,L=_),g};return a?n(r):r}var b,w,S,T,k,x,C,D,L,$,I,M,A,E,P,q,F,O,R,N="sizzle"+-new Date,j=e.document,U=0,Y=0,H=i(),z=i(),W=i(),B=function(e,t){return e===t&&(I=!0),0},G="undefined",V=1<<31,J={}.hasOwnProperty,K=[],Q=K.pop,X=K.push,Z=K.push,et=K.slice,tt=K.indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(this[t]===e)return t;return-1},it="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",at="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",st=at.replace("w","w#"),rt="\\["+nt+"*("+at+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+st+"))|)"+nt+"*\\]",ot=":("+at+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+rt+")*)|.*)\\)|)",lt=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),ct=new RegExp("^"+nt+"*,"+nt+"*"),ut=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),dt=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),ht=new RegExp(ot),ft=new RegExp("^"+st+"$"),pt={"ID":new RegExp("^#("+at+")"),"CLASS":new RegExp("^\\.("+at+")"),"TAG":new RegExp("^("+at.replace("w","w*")+")"),"ATTR":new RegExp("^"+rt),"PSEUDO":new RegExp("^"+ot),"CHILD":new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),"bool":new RegExp("^(?:"+it+")$","i"),"needsContext":new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},gt=/^(?:input|select|textarea|button)$/i,mt=/^h\d$/i,vt=/^[^{]+\{\s*\[native \w/,_t=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,bt=/'|\\/g,wt=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),St=function(e,t,i){var n="0x"+t-65536;
return n!==n||i?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{Z.apply(K=et.call(j.childNodes),j.childNodes),K[j.childNodes.length].nodeType}catch(Tt){Z={"apply":K.length?function(e,t){X.apply(e,et.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}w=t.support={},k=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},M=t.setDocument=function(e){var t,i=e?e.ownerDocument||e:j,n=i.defaultView;return i!==A&&9===i.nodeType&&i.documentElement?(A=i,E=i.documentElement,P=!k(i),n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",function(){M()},!1):n.attachEvent&&n.attachEvent("onunload",function(){M()})),w.attributes=a(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=a(function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=vt.test(i.getElementsByClassName)&&a(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),w.getById=a(function(e){return E.appendChild(e).id=N,!i.getElementsByName||!i.getElementsByName(N).length}),w.getById?(S.find.ID=function(e,t){if(typeof t.getElementById!==G&&P){var i=t.getElementById(e);return i&&i.parentNode?[i]:[]}},S.filter.ID=function(e){var t=e.replace(wt,St);return function(e){return e.getAttribute("id")===t}}):(delete S.find.ID,S.filter.ID=function(e){var t=e.replace(wt,St);return function(e){var i=typeof e.getAttributeNode!==G&&e.getAttributeNode("id");return i&&i.value===t}}),S.find.TAG=w.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==G?t.getElementsByTagName(e):void 0}:function(e,t){var i,n=[],a=0,s=t.getElementsByTagName(e);if("*"===e){for(;i=s[a++];)1===i.nodeType&&n.push(i);return n}return s},S.find.CLASS=w.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==G&&P?t.getElementsByClassName(e):void 0},F=[],q=[],(w.qsa=vt.test(i.querySelectorAll))&&(a(function(e){e.innerHTML="<select msallowclip=''><option selected=''></option></select>",e.querySelectorAll("[msallowclip^='']").length&&q.push("[*^$]="+nt+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||q.push("\\["+nt+"*(?:value|"+it+")"),e.querySelectorAll(":checked").length||q.push(":checked")}),a(function(e){var t=i.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&q.push("name"+nt+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),q.push(",.*:")})),(w.matchesSelector=vt.test(O=E.matches||E.webkitMatchesSelector||E.mozMatchesSelector||E.oMatchesSelector||E.msMatchesSelector))&&a(function(e){w.disconnectedMatch=O.call(e,"div"),O.call(e,"[s!='']:x"),F.push("!=",ot)}),q=q.length&&new RegExp(q.join("|")),F=F.length&&new RegExp(F.join("|")),t=vt.test(E.compareDocumentPosition),R=t||vt.test(E.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},B=t?function(e,t){if(e===t)return I=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!w.sortDetached&&t.compareDocumentPosition(e)===n?e===i||e.ownerDocument===j&&R(j,e)?-1:t===i||t.ownerDocument===j&&R(j,t)?1:$?tt.call($,e)-tt.call($,t):0:4&n?-1:1)}:function(e,t){if(e===t)return I=!0,0;var n,a=0,s=e.parentNode,o=t.parentNode,l=[e],c=[t];if(!s||!o)return e===i?-1:t===i?1:s?-1:o?1:$?tt.call($,e)-tt.call($,t):0;if(s===o)return r(e,t);for(n=e;n=n.parentNode;)l.unshift(n);for(n=t;n=n.parentNode;)c.unshift(n);for(;l[a]===c[a];)a++;return a?r(l[a],c[a]):l[a]===j?-1:c[a]===j?1:0},i):A},t.matches=function(e,i){return t(e,null,null,i)},t.matchesSelector=function(e,i){if((e.ownerDocument||e)!==A&&M(e),i=i.replace(dt,"='$1']"),!(!w.matchesSelector||!P||F&&F.test(i)||q&&q.test(i)))try{var n=O.call(e,i);if(n||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(a){}return t(i,A,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==A&&M(e),R(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==A&&M(e);var i=S.attrHandle[t.toLowerCase()],n=i&&J.call(S.attrHandle,t.toLowerCase())?i(e,t,!P):void 0;return void 0!==n?n:w.attributes||!P?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,i=[],n=0,a=0;if(I=!w.detectDuplicates,$=!w.sortStable&&e.slice(0),e.sort(B),I){for(;t=e[a++];)t===e[a]&&(n=i.push(a));for(;n--;)e.splice(i[n],1)}return $=null,e},T=t.getText=function(e){var t,i="",n=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=T(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[n++];)i+=T(t);return i},S=t.selectors={"cacheLength":50,"createPseudo":n,"match":pt,"attrHandle":{},"find":{},"relative":{">":{"dir":"parentNode","first":!0}," ":{"dir":"parentNode"},"+":{"dir":"previousSibling","first":!0},"~":{"dir":"previousSibling"}},"preFilter":{"ATTR":function(e){return e[1]=e[1].replace(wt,St),e[3]=(e[3]||e[4]||e[5]||"").replace(wt,St),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},"CHILD":function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},"PSEUDO":function(e){var t,i=!e[6]&&e[2];return pt.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&ht.test(i)&&(t=x(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},"filter":{"TAG":function(e){var t=e.replace(wt,St).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},"CLASS":function(e){var t=H[e+" "];return t||(t=new RegExp("(^|"+nt+")"+e+"("+nt+"|$)"))&&H(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==G&&e.getAttribute("class")||"")})},"ATTR":function(e,i,n){return function(a){var s=t.attr(a,e);return null==s?"!="===i:i?(s+="","="===i?s===n:"!="===i?s!==n:"^="===i?n&&0===s.indexOf(n):"*="===i?n&&s.indexOf(n)>-1:"$="===i?n&&s.slice(-n.length)===n:"~="===i?(" "+s+" ").indexOf(n)>-1:"|="===i?s===n||s.slice(0,n.length+1)===n+"-":!1):!0}},"CHILD":function(e,t,i,n,a){var s="nth"!==e.slice(0,3),r="last"!==e.slice(-4),o="of-type"===t;return 1===n&&0===a?function(e){return!!e.parentNode}:function(t,i,l){var c,u,d,h,f,p,g=s!==r?"nextSibling":"previousSibling",m=t.parentNode,v=o&&t.nodeName.toLowerCase(),_=!l&&!o;if(m){if(s){for(;g;){for(d=t;d=d[g];)if(o?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=g="only"===e&&!p&&"nextSibling"}return!0}if(p=[r?m.firstChild:m.lastChild],r&&_){for(u=m[N]||(m[N]={}),c=u[e]||[],f=c[0]===U&&c[1],h=c[0]===U&&c[2],d=f&&m.childNodes[f];d=++f&&d&&d[g]||(h=f=0)||p.pop();)if(1===d.nodeType&&++h&&d===t){u[e]=[U,f,h];break}}else if(_&&(c=(t[N]||(t[N]={}))[e])&&c[0]===U)h=c[1];else for(;(d=++f&&d&&d[g]||(h=f=0)||p.pop())&&((o?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++h||(_&&((d[N]||(d[N]={}))[e]=[U,h]),d!==t)););return h-=a,h===n||h%n===0&&h/n>=0}}},"PSEUDO":function(e,i){var a,s=S.pseudos[e]||S.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return s[N]?s(i):s.length>1?(a=[e,e,"",i],S.setFilters.hasOwnProperty(e.toLowerCase())?n(function(e,t){for(var n,a=s(e,i),r=a.length;r--;)n=tt.call(e,a[r]),e[n]=!(t[n]=a[r])}):function(e){return s(e,0,a)}):s}},"pseudos":{"not":n(function(e){var t=[],i=[],a=C(e.replace(lt,"$1"));return a[N]?n(function(e,t,i,n){for(var s,r=a(e,null,n,[]),o=e.length;o--;)(s=r[o])&&(e[o]=!(t[o]=s))}):function(e,n,s){return t[0]=e,a(t,null,s,i),!i.pop()}}),"has":n(function(e){return function(i){return t(e,i).length>0}}),"contains":n(function(e){return function(t){return(t.textContent||t.innerText||T(t)).indexOf(e)>-1}}),"lang":n(function(e){return ft.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(wt,St).toLowerCase(),function(t){var i;do if(i=P?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===e||0===i.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),"target":function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},"root":function(e){return e===E},"focus":function(e){return e===A.activeElement&&(!A.hasFocus||A.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},"enabled":function(e){return e.disabled===!1},"disabled":function(e){return e.disabled===!0},"checked":function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},"selected":function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},"empty":function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},"parent":function(e){return!S.pseudos.empty(e)},"header":function(e){return mt.test(e.nodeName)},"input":function(e){return gt.test(e.nodeName)},"button":function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},"text":function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},"first":c(function(){return[0]}),"last":c(function(e,t){return[t-1]}),"eq":c(function(e,t,i){return[0>i?i+t:i]}),"even":c(function(e,t){for(var i=0;t>i;i+=2)e.push(i);return e}),"odd":c(function(e,t){for(var i=1;t>i;i+=2)e.push(i);return e}),"lt":c(function(e,t,i){for(var n=0>i?i+t:i;--n>=0;)e.push(n);return e}),"gt":c(function(e,t,i){for(var n=0>i?i+t:i;++n<t;)e.push(n);return e})}},S.pseudos.nth=S.pseudos.eq;for(b in{"radio":!0,"checkbox":!0,"file":!0,"password":!0,"image":!0})S.pseudos[b]=o(b);for(b in{"submit":!0,"reset":!0})S.pseudos[b]=l(b);return d.prototype=S.filters=S.pseudos,S.setFilters=new d,x=t.tokenize=function(e,i){var n,a,s,r,o,l,c,u=z[e+" "];if(u)return i?0:u.slice(0);for(o=e,l=[],c=S.preFilter;o;){(!n||(a=ct.exec(o)))&&(a&&(o=o.slice(a[0].length)||o),l.push(s=[])),n=!1,(a=ut.exec(o))&&(n=a.shift(),s.push({"value":n,"type":a[0].replace(lt," ")}),o=o.slice(n.length));for(r in S.filter)!(a=pt[r].exec(o))||c[r]&&!(a=c[r](a))||(n=a.shift(),s.push({"value":n,"type":r,"matches":a}),o=o.slice(n.length));if(!n)break}return i?o.length:o?t.error(e):z(e,l).slice(0)},C=t.compile=function(e,t){var i,n=[],a=[],s=W[e+" "];if(!s){for(t||(t=x(e)),i=t.length;i--;)s=_(t[i]),s[N]?n.push(s):a.push(s);s=W(e,y(a,n)),s.selector=e}return s},D=t.select=function(e,t,i,n){var a,s,r,o,l,c="function"==typeof e&&e,d=!n&&x(e=c.selector||e);if(i=i||[],1===d.length){if(s=d[0]=d[0].slice(0),s.length>2&&"ID"===(r=s[0]).type&&w.getById&&9===t.nodeType&&P&&S.relative[s[1].type]){if(t=(S.find.ID(r.matches[0].replace(wt,St),t)||[])[0],!t)return i;c&&(t=t.parentNode),e=e.slice(s.shift().value.length)}for(a=pt.needsContext.test(e)?0:s.length;a--&&(r=s[a],!S.relative[o=r.type]);)if((l=S.find[o])&&(n=l(r.matches[0].replace(wt,St),yt.test(s[0].type)&&u(t.parentNode)||t))){if(s.splice(a,1),e=n.length&&h(s),!e)return Z.apply(i,n),i;break}}return(c||C(e,d))(n,t,!P,i,yt.test(e)&&u(t.parentNode)||t),i},w.sortStable=N.split("").sort(B).join("")===N,w.detectDuplicates=!!I,M(),w.sortDetached=a(function(e){return 1&e.compareDocumentPosition(A.createElement("div"))}),a(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||s("type|href|height|width",function(e,t,i){return i?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&a(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||s("value",function(e,t,i){return i||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),a(function(e){return null==e.getAttribute("disabled")})||s(it,function(e,t,i){var n;return i?void 0:e[t]===!0?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),t}(e);Z.find=at,Z.expr=at.selectors,Z.expr[":"]=Z.expr.pseudos,Z.unique=at.uniqueSort,Z.text=at.getText,Z.isXMLDoc=at.isXML,Z.contains=at.contains;var st=Z.expr.match.needsContext,rt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ot=/^.[^:#\[\.,]*$/;Z.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?Z.find.matchesSelector(n,e)?[n]:[]:Z.find.matches(e,Z.grep(t,function(e){return 1===e.nodeType}))},Z.fn.extend({"find":function(e){var t,i=this.length,n=[],a=this;if("string"!=typeof e)return this.pushStack(Z(e).filter(function(){for(t=0;i>t;t++)if(Z.contains(a[t],this))return!0}));for(t=0;i>t;t++)Z.find(e,a[t],n);return n=this.pushStack(i>1?Z.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},"filter":function(e){return this.pushStack(n(this,e||[],!1))},"not":function(e){return this.pushStack(n(this,e||[],!0))},"is":function(e){return!!n(this,"string"==typeof e&&st.test(e)?Z(e):e||[],!1).length}});var lt,ct=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ut=Z.fn.init=function(e,t){var i,n;if(!e)return this;if("string"==typeof e){if(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ct.exec(e),!i||!i[1]&&t)return!t||t.jquery?(t||lt).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof Z?t[0]:t,Z.merge(this,Z.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:Q,!0)),rt.test(i[1])&&Z.isPlainObject(t))for(i in t)Z.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return n=Q.getElementById(i[2]),n&&n.parentNode&&(this.length=1,this[0]=n),this.context=Q,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):Z.isFunction(e)?"undefined"!=typeof lt.ready?lt.ready(e):e(Z):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),Z.makeArray(e,this))};ut.prototype=Z.fn,lt=Z(Q);var dt=/^(?:parents|prev(?:Until|All))/,ht={"children":!0,"contents":!0,"next":!0,"prev":!0};Z.extend({"dir":function(e,t,i){for(var n=[],a=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(a&&Z(e).is(i))break;n.push(e)}return n},"sibling":function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}}),Z.fn.extend({"has":function(e){var t=Z(e,this),i=t.length;return this.filter(function(){for(var e=0;i>e;e++)if(Z.contains(this,t[e]))return!0})},"closest":function(e,t){for(var i,n=0,a=this.length,s=[],r=st.test(e)||"string"!=typeof e?Z(e,t||this.context):0;a>n;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(r?r.index(i)>-1:1===i.nodeType&&Z.find.matchesSelector(i,e))){s.push(i);break}return this.pushStack(s.length>1?Z.unique(s):s)},"index":function(e){return e?"string"==typeof e?B.call(Z(e),this[0]):B.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},"add":function(e,t){return this.pushStack(Z.unique(Z.merge(this.get(),Z(e,t))))},"addBack":function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Z.each({"parent":function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},"parents":function(e){return Z.dir(e,"parentNode")},"parentsUntil":function(e,t,i){return Z.dir(e,"parentNode",i)},"next":function(e){return a(e,"nextSibling")},"prev":function(e){return a(e,"previousSibling")},"nextAll":function(e){return Z.dir(e,"nextSibling")},"prevAll":function(e){return Z.dir(e,"previousSibling")},"nextUntil":function(e,t,i){return Z.dir(e,"nextSibling",i)},"prevUntil":function(e,t,i){return Z.dir(e,"previousSibling",i)},"siblings":function(e){return Z.sibling((e.parentNode||{}).firstChild,e)},"children":function(e){return Z.sibling(e.firstChild)},"contents":function(e){return e.contentDocument||Z.merge([],e.childNodes)}},function(e,t){Z.fn[e]=function(i,n){var a=Z.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(a=Z.filter(n,a)),this.length>1&&(ht[e]||Z.unique(a),dt.test(e)&&a.reverse()),this.pushStack(a)}});var ft=/\S+/g,pt={};Z.Callbacks=function(e){e="string"==typeof e?pt[e]||s(e):Z.extend({},e);var t,i,n,a,r,o,l=[],c=!e.once&&[],u=function(s){for(t=e.memory&&s,i=!0,o=a||0,a=0,r=l.length,n=!0;l&&r>o;o++)if(l[o].apply(s[0],s[1])===!1&&e.stopOnFalse){t=!1;break}n=!1,l&&(c?c.length&&u(c.shift()):t?l=[]:d.disable())},d={"add":function(){if(l){var i=l.length;!function s(t){Z.each(t,function(t,i){var n=Z.type(i);"function"===n?e.unique&&d.has(i)||l.push(i):i&&i.length&&"string"!==n&&s(i)})}(arguments),n?r=l.length:t&&(a=i,u(t))}return this},"remove":function(){return l&&Z.each(arguments,function(e,t){for(var i;(i=Z.inArray(t,l,i))>-1;)l.splice(i,1),n&&(r>=i&&r--,o>=i&&o--)}),this},"has":function(e){return e?Z.inArray(e,l)>-1:!(!l||!l.length)},"empty":function(){return l=[],r=0,this},"disable":function(){return l=c=t=void 0,this},"disabled":function(){return!l},"lock":function(){return c=void 0,t||d.disable(),this},"locked":function(){return!c},"fireWith":function(e,t){return!l||i&&!c||(t=t||[],t=[e,t.slice?t.slice():t],n?c.push(t):u(t)),this},"fire":function(){return d.fireWith(this,arguments),this},"fired":function(){return!!i}};return d},Z.extend({"Deferred":function(e){var t=[["resolve","done",Z.Callbacks("once memory"),"resolved"],["reject","fail",Z.Callbacks("once memory"),"rejected"],["notify","progress",Z.Callbacks("memory")]],i="pending",n={"state":function(){return i},"always":function(){return a.done(arguments).fail(arguments),this},"then":function(){var e=arguments;return Z.Deferred(function(i){Z.each(t,function(t,s){var r=Z.isFunction(e[t])&&e[t];a[s[1]](function(){var e=r&&r.apply(this,arguments);e&&Z.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[s[0]+"With"](this===n?i.promise():this,r?[e]:arguments)})}),e=null}).promise()},"promise":function(e){return null!=e?Z.extend(e,n):n}},a={};return n.pipe=n.then,Z.each(t,function(e,s){var r=s[2],o=s[3];n[s[1]]=r.add,o&&r.add(function(){i=o},t[1^e][2].disable,t[2][2].lock),a[s[0]]=function(){return a[s[0]+"With"](this===a?n:this,arguments),this},a[s[0]+"With"]=r.fireWith}),n.promise(a),e&&e.call(a,a),a},"when":function(e){var t,i,n,a=0,s=H.call(arguments),r=s.length,o=1!==r||e&&Z.isFunction(e.promise)?r:0,l=1===o?e:Z.Deferred(),c=function(e,i,n){return function(a){i[e]=this,n[e]=arguments.length>1?H.call(arguments):a,n===t?l.notifyWith(i,n):--o||l.resolveWith(i,n)}};if(r>1)for(t=new Array(r),i=new Array(r),n=new Array(r);r>a;a++)s[a]&&Z.isFunction(s[a].promise)?s[a].promise().done(c(a,n,s)).fail(l.reject).progress(c(a,i,t)):--o;return o||l.resolveWith(n,s),l.promise()}});var gt;Z.fn.ready=function(e){return Z.ready.promise().done(e),this},Z.extend({"isReady":!1,"readyWait":1,"holdReady":function(e){e?Z.readyWait++:Z.ready(!0)},"ready":function(e){(e===!0?--Z.readyWait:Z.isReady)||(Z.isReady=!0,e!==!0&&--Z.readyWait>0||(gt.resolveWith(Q,[Z]),Z.fn.triggerHandler&&(Z(Q).triggerHandler("ready"),Z(Q).off("ready"))))}}),Z.ready.promise=function(t){return gt||(gt=Z.Deferred(),"complete"===Q.readyState?setTimeout(Z.ready):(Q.addEventListener("DOMContentLoaded",r,!1),e.addEventListener("load",r,!1))),gt.promise(t)},Z.ready.promise();var mt=Z.access=function(e,t,i,n,a,s,r){var o=0,l=e.length,c=null==i;if("object"===Z.type(i)){a=!0;for(o in i)Z.access(e,t,o,i[o],!0,s,r)}else if(void 0!==n&&(a=!0,Z.isFunction(n)||(r=!0),c&&(r?(t.call(e,n),t=null):(c=t,t=function(e,t,i){return c.call(Z(e),i)})),t))for(;l>o;o++)t(e[o],i,r?n:n.call(e[o],o,t(e[o],i)));return a?e:c?t.call(e):l?t(e[0],i):s};Z.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},o.uid=1,o.accepts=Z.acceptData,o.prototype={"key":function(e){if(!o.accepts(e))return 0;var t={},i=e[this.expando];if(!i){i=o.uid++;try{t[this.expando]={"value":i},Object.defineProperties(e,t)}catch(n){t[this.expando]=i,Z.extend(e,t)}}return this.cache[i]||(this.cache[i]={}),i},"set":function(e,t,i){var n,a=this.key(e),s=this.cache[a];if("string"==typeof t)s[t]=i;else if(Z.isEmptyObject(s))Z.extend(this.cache[a],t);else for(n in t)s[n]=t[n];return s},"get":function(e,t){var i=this.cache[this.key(e)];return void 0===t?i:i[t]},"access":function(e,t,i){var n;return void 0===t||t&&"string"==typeof t&&void 0===i?(n=this.get(e,t),void 0!==n?n:this.get(e,Z.camelCase(t))):(this.set(e,t,i),void 0!==i?i:t)},"remove":function(e,t){var i,n,a,s=this.key(e),r=this.cache[s];if(void 0===t)this.cache[s]={};else{Z.isArray(t)?n=t.concat(t.map(Z.camelCase)):(a=Z.camelCase(t),t in r?n=[t,a]:(n=a,n=n in r?[n]:n.match(ft)||[])),i=n.length;for(;i--;)delete r[n[i]]}},"hasData":function(e){return!Z.isEmptyObject(this.cache[e[this.expando]]||{})},"discard":function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var vt=new o,_t=new o,yt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,bt=/([A-Z])/g;Z.extend({"hasData":function(e){return _t.hasData(e)||vt.hasData(e)},"data":function(e,t,i){return _t.access(e,t,i)},"removeData":function(e,t){_t.remove(e,t)},"_data":function(e,t,i){return vt.access(e,t,i)},"_removeData":function(e,t){vt.remove(e,t)}}),Z.fn.extend({"data":function(e,t){var i,n,a,s=this[0],r=s&&s.attributes;if(void 0===e){if(this.length&&(a=_t.get(s),1===s.nodeType&&!vt.get(s,"hasDataAttrs"))){for(i=r.length;i--;)r[i]&&(n=r[i].name,0===n.indexOf("data-")&&(n=Z.camelCase(n.slice(5)),l(s,n,a[n])));vt.set(s,"hasDataAttrs",!0)}return a}return"object"==typeof e?this.each(function(){_t.set(this,e)}):mt(this,function(t){var i,n=Z.camelCase(e);if(s&&void 0===t){if(i=_t.get(s,e),void 0!==i)return i;if(i=_t.get(s,n),void 0!==i)return i;if(i=l(s,n,void 0),void 0!==i)return i}else this.each(function(){var i=_t.get(this,n);_t.set(this,n,t),-1!==e.indexOf("-")&&void 0!==i&&_t.set(this,e,t)})},null,t,arguments.length>1,null,!0)},"removeData":function(e){return this.each(function(){_t.remove(this,e)})}}),Z.extend({"queue":function(e,t,i){var n;return e?(t=(t||"fx")+"queue",n=vt.get(e,t),i&&(!n||Z.isArray(i)?n=vt.access(e,t,Z.makeArray(i)):n.push(i)),n||[]):void 0},"dequeue":function(e,t){t=t||"fx";var i=Z.queue(e,t),n=i.length,a=i.shift(),s=Z._queueHooks(e,t),r=function(){Z.dequeue(e,t)};"inprogress"===a&&(a=i.shift(),n--),a&&("fx"===t&&i.unshift("inprogress"),delete s.stop,a.call(e,r,s)),!n&&s&&s.empty.fire()},"_queueHooks":function(e,t){var i=t+"queueHooks";return vt.get(e,i)||vt.access(e,i,{"empty":Z.Callbacks("once memory").add(function(){vt.remove(e,[t+"queue",i])})})}}),Z.fn.extend({"queue":function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?Z.queue(this[0],e):void 0===t?this:this.each(function(){var i=Z.queue(this,e,t);Z._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&Z.dequeue(this,e)})},"dequeue":function(e){return this.each(function(){Z.dequeue(this,e)})},"clearQueue":function(e){return this.queue(e||"fx",[])},"promise":function(e,t){var i,n=1,a=Z.Deferred(),s=this,r=this.length,o=function(){--n||a.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";r--;)i=vt.get(s[r],e+"queueHooks"),i&&i.empty&&(n++,i.empty.add(o));return o(),a.promise(t)}});var wt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,St=["Top","Right","Bottom","Left"],Tt=function(e,t){return e=t||e,"none"===Z.css(e,"display")||!Z.contains(e.ownerDocument,e)},kt=/^(?:checkbox|radio)$/i;!function(){var e=Q.createDocumentFragment(),t=e.appendChild(Q.createElement("div")),i=Q.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),t.appendChild(i),K.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",K.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var xt="undefined";K.focusinBubbles="onfocusin"in e;var Ct=/^key/,Dt=/^(?:mouse|pointer|contextmenu)|click/,Lt=/^(?:focusinfocus|focusoutblur)$/,$t=/^([^.]*)(?:\.(.+)|)$/;Z.event={"global":{},"add":function(e,t,i,n,a){var s,r,o,l,c,u,d,h,f,p,g,m=vt.get(e);if(m)for(i.handler&&(s=i,i=s.handler,a=s.selector),i.guid||(i.guid=Z.guid++),(l=m.events)||(l=m.events={}),(r=m.handle)||(r=m.handle=function(t){return typeof Z!==xt&&Z.event.triggered!==t.type?Z.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(ft)||[""],c=t.length;c--;)o=$t.exec(t[c])||[],f=g=o[1],p=(o[2]||"").split(".").sort(),f&&(d=Z.event.special[f]||{},f=(a?d.delegateType:d.bindType)||f,d=Z.event.special[f]||{},u=Z.extend({"type":f,"origType":g,"data":n,"handler":i,"guid":i.guid,"selector":a,"needsContext":a&&Z.expr.match.needsContext.test(a),"namespace":p.join(".")},s),(h=l[f])||(h=l[f]=[],h.delegateCount=0,d.setup&&d.setup.call(e,n,p,r)!==!1||e.addEventListener&&e.addEventListener(f,r,!1)),d.add&&(d.add.call(e,u),u.handler.guid||(u.handler.guid=i.guid)),a?h.splice(h.delegateCount++,0,u):h.push(u),Z.event.global[f]=!0)},"remove":function(e,t,i,n,a){var s,r,o,l,c,u,d,h,f,p,g,m=vt.hasData(e)&&vt.get(e);if(m&&(l=m.events)){for(t=(t||"").match(ft)||[""],c=t.length;c--;)if(o=$t.exec(t[c])||[],f=g=o[1],p=(o[2]||"").split(".").sort(),f){for(d=Z.event.special[f]||{},f=(n?d.delegateType:d.bindType)||f,h=l[f]||[],o=o[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),r=s=h.length;s--;)u=h[s],!a&&g!==u.origType||i&&i.guid!==u.guid||o&&!o.test(u.namespace)||n&&n!==u.selector&&("**"!==n||!u.selector)||(h.splice(s,1),u.selector&&h.delegateCount--,d.remove&&d.remove.call(e,u));r&&!h.length&&(d.teardown&&d.teardown.call(e,p,m.handle)!==!1||Z.removeEvent(e,f,m.handle),delete l[f])}else for(f in l)Z.event.remove(e,f+t[c],i,n,!0);Z.isEmptyObject(l)&&(delete m.handle,vt.remove(e,"events"))}},"trigger":function(t,i,n,a){var s,r,o,l,c,u,d,h=[n||Q],f=J.call(t,"type")?t.type:t,p=J.call(t,"namespace")?t.namespace.split("."):[];if(r=o=n=n||Q,3!==n.nodeType&&8!==n.nodeType&&!Lt.test(f+Z.event.triggered)&&(f.indexOf(".")>=0&&(p=f.split("."),f=p.shift(),p.sort()),c=f.indexOf(":")<0&&"on"+f,t=t[Z.expando]?t:new Z.Event(f,"object"==typeof t&&t),t.isTrigger=a?2:3,t.namespace=p.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),i=null==i?[t]:Z.makeArray(i,[t]),d=Z.event.special[f]||{},a||!d.trigger||d.trigger.apply(n,i)!==!1)){if(!a&&!d.noBubble&&!Z.isWindow(n)){for(l=d.delegateType||f,Lt.test(l+f)||(r=r.parentNode);r;r=r.parentNode)h.push(r),o=r;o===(n.ownerDocument||Q)&&h.push(o.defaultView||o.parentWindow||e)}for(s=0;(r=h[s++])&&!t.isPropagationStopped();)t.type=s>1?l:d.bindType||f,u=(vt.get(r,"events")||{})[t.type]&&vt.get(r,"handle"),u&&u.apply(r,i),u=c&&r[c],u&&u.apply&&Z.acceptData(r)&&(t.result=u.apply(r,i),t.result===!1&&t.preventDefault());return t.type=f,a||t.isDefaultPrevented()||d._default&&d._default.apply(h.pop(),i)!==!1||!Z.acceptData(n)||c&&Z.isFunction(n[f])&&!Z.isWindow(n)&&(o=n[c],o&&(n[c]=null),Z.event.triggered=f,n[f](),Z.event.triggered=void 0,o&&(n[c]=o)),t.result}},"dispatch":function(e){e=Z.event.fix(e);var t,i,n,a,s,r=[],o=H.call(arguments),l=(vt.get(this,"events")||{})[e.type]||[],c=Z.event.special[e.type]||{};if(o[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(r=Z.event.handlers.call(this,e,l),t=0;(a=r[t++])&&!e.isPropagationStopped();)for(e.currentTarget=a.elem,i=0;(s=a.handlers[i++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(s.namespace))&&(e.handleObj=s,e.data=s.data,n=((Z.event.special[s.origType]||{}).handle||s.handler).apply(a.elem,o),void 0!==n&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},"handlers":function(e,t){var i,n,a,s,r=[],o=t.delegateCount,l=e.target;if(o&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==e.type){for(n=[],i=0;o>i;i++)s=t[i],a=s.selector+" ",void 0===n[a]&&(n[a]=s.needsContext?Z(a,this).index(l)>=0:Z.find(a,this,null,[l]).length),n[a]&&n.push(s);n.length&&r.push({"elem":l,"handlers":n})}return o<t.length&&r.push({"elem":this,"handlers":t.slice(o)}),r},"props":"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),"fixHooks":{},"keyHooks":{"props":"char charCode key keyCode".split(" "),"filter":function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},"mouseHooks":{"props":"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),"filter":function(e,t){var i,n,a,s=t.button;return null==e.pageX&&null!=t.clientX&&(i=e.target.ownerDocument||Q,n=i.documentElement,a=i.body,e.pageX=t.clientX+(n&&n.scrollLeft||a&&a.scrollLeft||0)-(n&&n.clientLeft||a&&a.clientLeft||0),e.pageY=t.clientY+(n&&n.scrollTop||a&&a.scrollTop||0)-(n&&n.clientTop||a&&a.clientTop||0)),e.which||void 0===s||(e.which=1&s?1:2&s?3:4&s?2:0),e}},"fix":function(e){if(e[Z.expando])return e;var t,i,n,a=e.type,s=e,r=this.fixHooks[a];for(r||(this.fixHooks[a]=r=Dt.test(a)?this.mouseHooks:Ct.test(a)?this.keyHooks:{}),n=r.props?this.props.concat(r.props):this.props,e=new Z.Event(s),t=n.length;t--;)i=n[t],e[i]=s[i];return e.target||(e.target=Q),3===e.target.nodeType&&(e.target=e.target.parentNode),r.filter?r.filter(e,s):e},"special":{"load":{"noBubble":!0},"focus":{"trigger":function(){return this!==d()&&this.focus?(this.focus(),!1):void 0},"delegateType":"focusin"},"blur":{"trigger":function(){return this===d()&&this.blur?(this.blur(),!1):void 0},"delegateType":"focusout"},"click":{"trigger":function(){return"checkbox"===this.type&&this.click&&Z.nodeName(this,"input")?(this.click(),!1):void 0},"_default":function(e){return Z.nodeName(e.target,"a")}},"beforeunload":{"postDispatch":function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},"simulate":function(e,t,i,n){var a=Z.extend(new Z.Event,i,{"type":e,"isSimulated":!0,"originalEvent":{}});n?Z.event.trigger(a,null,t):Z.event.dispatch.call(t,a),a.isDefaultPrevented()&&i.preventDefault()}},Z.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)},Z.Event=function(e,t){return this instanceof Z.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?c:u):this.type=e,t&&Z.extend(this,t),this.timeStamp=e&&e.timeStamp||Z.now(),this[Z.expando]=!0,void 0):new Z.Event(e,t)},Z.Event.prototype={"isDefaultPrevented":u,"isPropagationStopped":u,"isImmediatePropagationStopped":u,"preventDefault":function(){var e=this.originalEvent;this.isDefaultPrevented=c,e&&e.preventDefault&&e.preventDefault()},"stopPropagation":function(){var e=this.originalEvent;this.isPropagationStopped=c,e&&e.stopPropagation&&e.stopPropagation()},"stopImmediatePropagation":function(){var e=this.originalEvent;this.isImmediatePropagationStopped=c,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},Z.each({"mouseenter":"mouseover","mouseleave":"mouseout","pointerenter":"pointerover","pointerleave":"pointerout"},function(e,t){Z.event.special[e]={"delegateType":t,"bindType":t,"handle":function(e){var i,n=this,a=e.relatedTarget,s=e.handleObj;return(!a||a!==n&&!Z.contains(n,a))&&(e.type=s.origType,i=s.handler.apply(this,arguments),e.type=t),i}}}),K.focusinBubbles||Z.each({"focus":"focusin","blur":"focusout"},function(e,t){var i=function(e){Z.event.simulate(t,e.target,Z.event.fix(e),!0)};Z.event.special[t]={"setup":function(){var n=this.ownerDocument||this,a=vt.access(n,t);a||n.addEventListener(e,i,!0),vt.access(n,t,(a||0)+1)},"teardown":function(){var n=this.ownerDocument||this,a=vt.access(n,t)-1;a?vt.access(n,t,a):(n.removeEventListener(e,i,!0),vt.remove(n,t))}}}),Z.fn.extend({"on":function(e,t,i,n,a){var s,r;if("object"==typeof e){"string"!=typeof t&&(i=i||t,t=void 0);for(r in e)this.on(r,t,i,e[r],a);return this}if(null==i&&null==n?(n=t,i=t=void 0):null==n&&("string"==typeof t?(n=i,i=void 0):(n=i,i=t,t=void 0)),n===!1)n=u;else if(!n)return this;
return 1===a&&(s=n,n=function(e){return Z().off(e),s.apply(this,arguments)},n.guid=s.guid||(s.guid=Z.guid++)),this.each(function(){Z.event.add(this,e,n,i,t)})},"one":function(e,t,i,n){return this.on(e,t,i,n,1)},"off":function(e,t,i){var n,a;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,Z(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(a in e)this.off(a,t,e[a]);return this}return(t===!1||"function"==typeof t)&&(i=t,t=void 0),i===!1&&(i=u),this.each(function(){Z.event.remove(this,e,i,t)})},"trigger":function(e,t){return this.each(function(){Z.event.trigger(e,t,this)})},"triggerHandler":function(e,t){var i=this[0];return i?Z.event.trigger(e,t,i,!0):void 0}});var It=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Mt=/<([\w:]+)/,At=/<|&#?\w+;/,Et=/<(?:script|style|link)/i,Pt=/checked\s*(?:[^=]|=\s*.checked.)/i,qt=/^$|\/(?:java|ecma)script/i,Ft=/^true\/(.*)/,Ot=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Rt={"option":[1,"<select multiple='multiple'>","</select>"],"thead":[1,"<table>","</table>"],"col":[2,"<table><colgroup>","</colgroup></table>"],"tr":[2,"<table><tbody>","</tbody></table>"],"td":[3,"<table><tbody><tr>","</tr></tbody></table>"],"_default":[0,"",""]};Rt.optgroup=Rt.option,Rt.tbody=Rt.tfoot=Rt.colgroup=Rt.caption=Rt.thead,Rt.th=Rt.td,Z.extend({"clone":function(e,t,i){var n,a,s,r,o=e.cloneNode(!0),l=Z.contains(e.ownerDocument,e);if(!(K.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Z.isXMLDoc(e)))for(r=v(o),s=v(e),n=0,a=s.length;a>n;n++)_(s[n],r[n]);if(t)if(i)for(s=s||v(e),r=r||v(o),n=0,a=s.length;a>n;n++)m(s[n],r[n]);else m(e,o);return r=v(o,"script"),r.length>0&&g(r,!l&&v(e,"script")),o},"buildFragment":function(e,t,i,n){for(var a,s,r,o,l,c,u=t.createDocumentFragment(),d=[],h=0,f=e.length;f>h;h++)if(a=e[h],a||0===a)if("object"===Z.type(a))Z.merge(d,a.nodeType?[a]:a);else if(At.test(a)){for(s=s||u.appendChild(t.createElement("div")),r=(Mt.exec(a)||["",""])[1].toLowerCase(),o=Rt[r]||Rt._default,s.innerHTML=o[1]+a.replace(It,"<$1></$2>")+o[2],c=o[0];c--;)s=s.lastChild;Z.merge(d,s.childNodes),s=u.firstChild,s.textContent=""}else d.push(t.createTextNode(a));for(u.textContent="",h=0;a=d[h++];)if((!n||-1===Z.inArray(a,n))&&(l=Z.contains(a.ownerDocument,a),s=v(u.appendChild(a),"script"),l&&g(s),i))for(c=0;a=s[c++];)qt.test(a.type||"")&&i.push(a);return u},"cleanData":function(e){for(var t,i,n,a,s=Z.event.special,r=0;void 0!==(i=e[r]);r++){if(Z.acceptData(i)&&(a=i[vt.expando],a&&(t=vt.cache[a]))){if(t.events)for(n in t.events)s[n]?Z.event.remove(i,n):Z.removeEvent(i,n,t.handle);vt.cache[a]&&delete vt.cache[a]}delete _t.cache[i[_t.expando]]}}}),Z.fn.extend({"text":function(e){return mt(this,function(e){return void 0===e?Z.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},"append":function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=h(this,e);t.appendChild(e)}})},"prepend":function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=h(this,e);t.insertBefore(e,t.firstChild)}})},"before":function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},"after":function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},"remove":function(e,t){for(var i,n=e?Z.filter(e,this):this,a=0;null!=(i=n[a]);a++)t||1!==i.nodeType||Z.cleanData(v(i)),i.parentNode&&(t&&Z.contains(i.ownerDocument,i)&&g(v(i,"script")),i.parentNode.removeChild(i));return this},"empty":function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(Z.cleanData(v(e,!1)),e.textContent="");return this},"clone":function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return Z.clone(this,e,t)})},"html":function(e){return mt(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Et.test(e)&&!Rt[(Mt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(It,"<$1></$2>");try{for(;n>i;i++)t=this[i]||{},1===t.nodeType&&(Z.cleanData(v(t,!1)),t.innerHTML=e);t=0}catch(a){}}t&&this.empty().append(e)},null,e,arguments.length)},"replaceWith":function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,Z.cleanData(v(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},"detach":function(e){return this.remove(e,!0)},"domManip":function(e,t){e=z.apply([],e);var i,n,a,s,r,o,l=0,c=this.length,u=this,d=c-1,h=e[0],g=Z.isFunction(h);if(g||c>1&&"string"==typeof h&&!K.checkClone&&Pt.test(h))return this.each(function(i){var n=u.eq(i);g&&(e[0]=h.call(this,i,n.html())),n.domManip(e,t)});if(c&&(i=Z.buildFragment(e,this[0].ownerDocument,!1,this),n=i.firstChild,1===i.childNodes.length&&(i=n),n)){for(a=Z.map(v(i,"script"),f),s=a.length;c>l;l++)r=i,l!==d&&(r=Z.clone(r,!0,!0),s&&Z.merge(a,v(r,"script"))),t.call(this[l],r,l);if(s)for(o=a[a.length-1].ownerDocument,Z.map(a,p),l=0;s>l;l++)r=a[l],qt.test(r.type||"")&&!vt.access(r,"globalEval")&&Z.contains(o,r)&&(r.src?Z._evalUrl&&Z._evalUrl(r.src):Z.globalEval(r.textContent.replace(Ot,"")))}return this}}),Z.each({"appendTo":"append","prependTo":"prepend","insertBefore":"before","insertAfter":"after","replaceAll":"replaceWith"},function(e,t){Z.fn[e]=function(e){for(var i,n=[],a=Z(e),s=a.length-1,r=0;s>=r;r++)i=r===s?this:this.clone(!0),Z(a[r])[t](i),W.apply(n,i.get());return this.pushStack(n)}});var Nt,jt={},Ut=/^margin/,Yt=new RegExp("^("+wt+")(?!px)[a-z%]+$","i"),Ht=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)};!function(){function t(){r.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",r.innerHTML="",a.appendChild(s);var t=e.getComputedStyle(r,null);i="1%"!==t.top,n="4px"===t.width,a.removeChild(s)}var i,n,a=Q.documentElement,s=Q.createElement("div"),r=Q.createElement("div");r.style&&(r.style.backgroundClip="content-box",r.cloneNode(!0).style.backgroundClip="",K.clearCloneStyle="content-box"===r.style.backgroundClip,s.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",s.appendChild(r),e.getComputedStyle&&Z.extend(K,{"pixelPosition":function(){return t(),i},"boxSizingReliable":function(){return null==n&&t(),n},"reliableMarginRight":function(){var t,i=r.appendChild(Q.createElement("div"));return i.style.cssText=r.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",r.style.width="1px",a.appendChild(s),t=!parseFloat(e.getComputedStyle(i,null).marginRight),a.removeChild(s),t}}))}(),Z.swap=function(e,t,i,n){var a,s,r={};for(s in t)r[s]=e.style[s],e.style[s]=t[s];a=i.apply(e,n||[]);for(s in t)e.style[s]=r[s];return a};var zt=/^(none|table(?!-c[ea]).+)/,Wt=new RegExp("^("+wt+")(.*)$","i"),Bt=new RegExp("^([+-])=("+wt+")","i"),Gt={"position":"absolute","visibility":"hidden","display":"block"},Vt={"letterSpacing":"0","fontWeight":"400"},Jt=["Webkit","O","Moz","ms"];Z.extend({"cssHooks":{"opacity":{"get":function(e,t){if(t){var i=w(e,"opacity");return""===i?"1":i}}}},"cssNumber":{"columnCount":!0,"fillOpacity":!0,"flexGrow":!0,"flexShrink":!0,"fontWeight":!0,"lineHeight":!0,"opacity":!0,"order":!0,"orphans":!0,"widows":!0,"zIndex":!0,"zoom":!0},"cssProps":{"float":"cssFloat"},"style":function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,s,r,o=Z.camelCase(t),l=e.style;return t=Z.cssProps[o]||(Z.cssProps[o]=T(l,o)),r=Z.cssHooks[t]||Z.cssHooks[o],void 0===i?r&&"get"in r&&void 0!==(a=r.get(e,!1,n))?a:l[t]:(s=typeof i,"string"===s&&(a=Bt.exec(i))&&(i=(a[1]+1)*a[2]+parseFloat(Z.css(e,t)),s="number"),null!=i&&i===i&&("number"!==s||Z.cssNumber[o]||(i+="px"),K.clearCloneStyle||""!==i||0!==t.indexOf("background")||(l[t]="inherit"),r&&"set"in r&&void 0===(i=r.set(e,i,n))||(l[t]=i)),void 0)}},"css":function(e,t,i,n){var a,s,r,o=Z.camelCase(t);return t=Z.cssProps[o]||(Z.cssProps[o]=T(e.style,o)),r=Z.cssHooks[t]||Z.cssHooks[o],r&&"get"in r&&(a=r.get(e,!0,i)),void 0===a&&(a=w(e,t,n)),"normal"===a&&t in Vt&&(a=Vt[t]),""===i||i?(s=parseFloat(a),i===!0||Z.isNumeric(s)?s||0:a):a}}),Z.each(["height","width"],function(e,t){Z.cssHooks[t]={"get":function(e,i,n){return i?zt.test(Z.css(e,"display"))&&0===e.offsetWidth?Z.swap(e,Gt,function(){return C(e,t,n)}):C(e,t,n):void 0},"set":function(e,i,n){var a=n&&Ht(e);return k(e,i,n?x(e,t,n,"border-box"===Z.css(e,"boxSizing",!1,a),a):0)}}}),Z.cssHooks.marginRight=S(K.reliableMarginRight,function(e,t){return t?Z.swap(e,{"display":"inline-block"},w,[e,"marginRight"]):void 0}),Z.each({"margin":"","padding":"","border":"Width"},function(e,t){Z.cssHooks[e+t]={"expand":function(i){for(var n=0,a={},s="string"==typeof i?i.split(" "):[i];4>n;n++)a[e+St[n]+t]=s[n]||s[n-2]||s[0];return a}},Ut.test(e)||(Z.cssHooks[e+t].set=k)}),Z.fn.extend({"css":function(e,t){return mt(this,function(e,t,i){var n,a,s={},r=0;if(Z.isArray(t)){for(n=Ht(e),a=t.length;a>r;r++)s[t[r]]=Z.css(e,t[r],!1,n);return s}return void 0!==i?Z.style(e,t,i):Z.css(e,t)},e,t,arguments.length>1)},"show":function(){return D(this,!0)},"hide":function(){return D(this)},"toggle":function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Tt(this)?Z(this).show():Z(this).hide()})}}),Z.Tween=L,L.prototype={"constructor":L,"init":function(e,t,i,n,a,s){this.elem=e,this.prop=i,this.easing=a||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=s||(Z.cssNumber[i]?"":"px")},"cur":function(){var e=L.propHooks[this.prop];return e&&e.get?e.get(this):L.propHooks._default.get(this)},"run":function(e){var t,i=L.propHooks[this.prop];return this.pos=t=this.options.duration?Z.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):L.propHooks._default.set(this),this}},L.prototype.init.prototype=L.prototype,L.propHooks={"_default":{"get":function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=Z.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},"set":function(e){Z.fx.step[e.prop]?Z.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[Z.cssProps[e.prop]]||Z.cssHooks[e.prop])?Z.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},L.propHooks.scrollTop=L.propHooks.scrollLeft={"set":function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Z.easing={"linear":function(e){return e},"swing":function(e){return.5-Math.cos(e*Math.PI)/2}},Z.fx=L.prototype.init,Z.fx.step={};var Kt,Qt,Xt=/^(?:toggle|show|hide)$/,Zt=new RegExp("^(?:([+-])=|)("+wt+")([a-z%]*)$","i"),ei=/queueHooks$/,ti=[A],ii={"*":[function(e,t){var i=this.createTween(e,t),n=i.cur(),a=Zt.exec(t),s=a&&a[3]||(Z.cssNumber[e]?"":"px"),r=(Z.cssNumber[e]||"px"!==s&&+n)&&Zt.exec(Z.css(i.elem,e)),o=1,l=20;if(r&&r[3]!==s){s=s||r[3],a=a||[],r=+n||1;do o=o||".5",r/=o,Z.style(i.elem,e,r+s);while(o!==(o=i.cur()/n)&&1!==o&&--l)}return a&&(r=i.start=+r||+n||0,i.unit=s,i.end=a[1]?r+(a[1]+1)*a[2]:+a[2]),i}]};Z.Animation=Z.extend(P,{"tweener":function(e,t){Z.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var i,n=0,a=e.length;a>n;n++)i=e[n],ii[i]=ii[i]||[],ii[i].unshift(t)},"prefilter":function(e,t){t?ti.unshift(e):ti.push(e)}}),Z.speed=function(e,t,i){var n=e&&"object"==typeof e?Z.extend({},e):{"complete":i||!i&&t||Z.isFunction(e)&&e,"duration":e,"easing":i&&t||t&&!Z.isFunction(t)&&t};return n.duration=Z.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in Z.fx.speeds?Z.fx.speeds[n.duration]:Z.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){Z.isFunction(n.old)&&n.old.call(this),n.queue&&Z.dequeue(this,n.queue)},n},Z.fn.extend({"fadeTo":function(e,t,i,n){return this.filter(Tt).css("opacity",0).show().end().animate({"opacity":t},e,i,n)},"animate":function(e,t,i,n){var a=Z.isEmptyObject(e),s=Z.speed(t,i,n),r=function(){var t=P(this,Z.extend({},e),s);(a||vt.get(this,"finish"))&&t.stop(!0)};return r.finish=r,a||s.queue===!1?this.each(r):this.queue(s.queue,r)},"stop":function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,a=null!=e&&e+"queueHooks",s=Z.timers,r=vt.get(this);if(a)r[a]&&r[a].stop&&n(r[a]);else for(a in r)r[a]&&r[a].stop&&ei.test(a)&&n(r[a]);for(a=s.length;a--;)s[a].elem!==this||null!=e&&s[a].queue!==e||(s[a].anim.stop(i),t=!1,s.splice(a,1));(t||!i)&&Z.dequeue(this,e)})},"finish":function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,i=vt.get(this),n=i[e+"queue"],a=i[e+"queueHooks"],s=Z.timers,r=n?n.length:0;for(i.finish=!0,Z.queue(this,e,[]),a&&a.stop&&a.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;r>t;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),Z.each(["toggle","show","hide"],function(e,t){var i=Z.fn[t];Z.fn[t]=function(e,n,a){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(I(t,!0),e,n,a)}}),Z.each({"slideDown":I("show"),"slideUp":I("hide"),"slideToggle":I("toggle"),"fadeIn":{"opacity":"show"},"fadeOut":{"opacity":"hide"},"fadeToggle":{"opacity":"toggle"}},function(e,t){Z.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),Z.timers=[],Z.fx.tick=function(){var e,t=0,i=Z.timers;for(Kt=Z.now();t<i.length;t++)e=i[t],e()||i[t]!==e||i.splice(t--,1);i.length||Z.fx.stop(),Kt=void 0},Z.fx.timer=function(e){Z.timers.push(e),e()?Z.fx.start():Z.timers.pop()},Z.fx.interval=13,Z.fx.start=function(){Qt||(Qt=setInterval(Z.fx.tick,Z.fx.interval))},Z.fx.stop=function(){clearInterval(Qt),Qt=null},Z.fx.speeds={"slow":600,"fast":200,"_default":400},Z.fn.delay=function(e,t){return e=Z.fx?Z.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var n=setTimeout(t,e);i.stop=function(){clearTimeout(n)}})},function(){var e=Q.createElement("input"),t=Q.createElement("select"),i=t.appendChild(Q.createElement("option"));e.type="checkbox",K.checkOn=""!==e.value,K.optSelected=i.selected,t.disabled=!0,K.optDisabled=!i.disabled,e=Q.createElement("input"),e.value="t",e.type="radio",K.radioValue="t"===e.value}();var ni,ai,si=Z.expr.attrHandle;Z.fn.extend({"attr":function(e,t){return mt(this,Z.attr,e,t,arguments.length>1)},"removeAttr":function(e){return this.each(function(){Z.removeAttr(this,e)})}}),Z.extend({"attr":function(e,t,i){var n,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return typeof e.getAttribute===xt?Z.prop(e,t,i):(1===s&&Z.isXMLDoc(e)||(t=t.toLowerCase(),n=Z.attrHooks[t]||(Z.expr.match.bool.test(t)?ai:ni)),void 0===i?n&&"get"in n&&null!==(a=n.get(e,t))?a:(a=Z.find.attr(e,t),null==a?void 0:a):null!==i?n&&"set"in n&&void 0!==(a=n.set(e,i,t))?a:(e.setAttribute(t,i+""),i):(Z.removeAttr(e,t),void 0))},"removeAttr":function(e,t){var i,n,a=0,s=t&&t.match(ft);if(s&&1===e.nodeType)for(;i=s[a++];)n=Z.propFix[i]||i,Z.expr.match.bool.test(i)&&(e[n]=!1),e.removeAttribute(i)},"attrHooks":{"type":{"set":function(e,t){if(!K.radioValue&&"radio"===t&&Z.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}}}),ai={"set":function(e,t,i){return t===!1?Z.removeAttr(e,i):e.setAttribute(i,i),i}},Z.each(Z.expr.match.bool.source.match(/\w+/g),function(e,t){var i=si[t]||Z.find.attr;si[t]=function(e,t,n){var a,s;return n||(s=si[t],si[t]=a,a=null!=i(e,t,n)?t.toLowerCase():null,si[t]=s),a}});var ri=/^(?:input|select|textarea|button)$/i;Z.fn.extend({"prop":function(e,t){return mt(this,Z.prop,e,t,arguments.length>1)},"removeProp":function(e){return this.each(function(){delete this[Z.propFix[e]||e]})}}),Z.extend({"propFix":{"for":"htmlFor","class":"className"},"prop":function(e,t,i){var n,a,s,r=e.nodeType;if(e&&3!==r&&8!==r&&2!==r)return s=1!==r||!Z.isXMLDoc(e),s&&(t=Z.propFix[t]||t,a=Z.propHooks[t]),void 0!==i?a&&"set"in a&&void 0!==(n=a.set(e,i,t))?n:e[t]=i:a&&"get"in a&&null!==(n=a.get(e,t))?n:e[t]},"propHooks":{"tabIndex":{"get":function(e){return e.hasAttribute("tabindex")||ri.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),K.optSelected||(Z.propHooks.selected={"get":function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),Z.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Z.propFix[this.toLowerCase()]=this});var oi=/[\t\r\n\f]/g;Z.fn.extend({"addClass":function(e){var t,i,n,a,s,r,o="string"==typeof e&&e,l=0,c=this.length;if(Z.isFunction(e))return this.each(function(t){Z(this).addClass(e.call(this,t,this.className))});if(o)for(t=(e||"").match(ft)||[];c>l;l++)if(i=this[l],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(oi," "):" ")){for(s=0;a=t[s++];)n.indexOf(" "+a+" ")<0&&(n+=a+" ");r=Z.trim(n),i.className!==r&&(i.className=r)}return this},"removeClass":function(e){var t,i,n,a,s,r,o=0===arguments.length||"string"==typeof e&&e,l=0,c=this.length;if(Z.isFunction(e))return this.each(function(t){Z(this).removeClass(e.call(this,t,this.className))});if(o)for(t=(e||"").match(ft)||[];c>l;l++)if(i=this[l],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(oi," "):"")){for(s=0;a=t[s++];)for(;n.indexOf(" "+a+" ")>=0;)n=n.replace(" "+a+" "," ");r=e?Z.trim(n):"",i.className!==r&&(i.className=r)}return this},"toggleClass":function(e,t){var i=typeof e;return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):Z.isFunction(e)?this.each(function(i){Z(this).toggleClass(e.call(this,i,this.className,t),t)}):this.each(function(){if("string"===i)for(var t,n=0,a=Z(this),s=e.match(ft)||[];t=s[n++];)a.hasClass(t)?a.removeClass(t):a.addClass(t);else(i===xt||"boolean"===i)&&(this.className&&vt.set(this,"__className__",this.className),this.className=this.className||e===!1?"":vt.get(this,"__className__")||"")})},"hasClass":function(e){for(var t=" "+e+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(oi," ").indexOf(t)>=0)return!0;return!1}});var li=/\r/g;Z.fn.extend({"val":function(e){var t,i,n,a=this[0];{if(arguments.length)return n=Z.isFunction(e),this.each(function(i){var a;1===this.nodeType&&(a=n?e.call(this,i,Z(this).val()):e,null==a?a="":"number"==typeof a?a+="":Z.isArray(a)&&(a=Z.map(a,function(e){return null==e?"":e+""})),t=Z.valHooks[this.type]||Z.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,a,"value")||(this.value=a))});if(a)return t=Z.valHooks[a.type]||Z.valHooks[a.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(i=t.get(a,"value"))?i:(i=a.value,"string"==typeof i?i.replace(li,""):null==i?"":i)}}}),Z.extend({"valHooks":{"option":{"get":function(e){var t=Z.find.attr(e,"value");return null!=t?t:Z.trim(Z.text(e))}},"select":{"get":function(e){for(var t,i,n=e.options,a=e.selectedIndex,s="select-one"===e.type||0>a,r=s?null:[],o=s?a+1:n.length,l=0>a?o:s?a:0;o>l;l++)if(i=n[l],!(!i.selected&&l!==a||(K.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&Z.nodeName(i.parentNode,"optgroup"))){if(t=Z(i).val(),s)return t;r.push(t)}return r},"set":function(e,t){for(var i,n,a=e.options,s=Z.makeArray(t),r=a.length;r--;)n=a[r],(n.selected=Z.inArray(n.value,s)>=0)&&(i=!0);return i||(e.selectedIndex=-1),s}}}}),Z.each(["radio","checkbox"],function(){Z.valHooks[this]={"set":function(e,t){return Z.isArray(t)?e.checked=Z.inArray(Z(e).val(),t)>=0:void 0}},K.checkOn||(Z.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),Z.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){Z.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),Z.fn.extend({"hover":function(e,t){return this.mouseenter(e).mouseleave(t||e)},"bind":function(e,t,i){return this.on(e,null,t,i)},"unbind":function(e,t){return this.off(e,null,t)},"delegate":function(e,t,i,n){return this.on(t,e,i,n)},"undelegate":function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}});var ci=Z.now(),ui=/\?/;Z.parseJSON=function(e){return JSON.parse(e+"")},Z.parseXML=function(e){var t,i;if(!e||"string"!=typeof e)return null;try{i=new DOMParser,t=i.parseFromString(e,"text/xml")}catch(n){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&Z.error("Invalid XML: "+e),t};var di,hi,fi=/#.*$/,pi=/([?&])_=[^&]*/,gi=/^(.*?):[ \t]*([^\r\n]*)$/gm,mi=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,vi=/^(?:GET|HEAD)$/,_i=/^\/\//,yi=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,bi={},wi={},Si="*/".concat("*");try{hi=location.href}catch(Ti){hi=Q.createElement("a"),hi.href="",hi=hi.href}di=yi.exec(hi.toLowerCase())||[],Z.extend({"active":0,"lastModified":{},"etag":{},"ajaxSettings":{"url":hi,"type":"GET","isLocal":mi.test(di[1]),"global":!0,"processData":!0,"async":!0,"contentType":"application/x-www-form-urlencoded; charset=UTF-8","accepts":{"*":Si,"text":"text/plain","html":"text/html","xml":"application/xml, text/xml","json":"application/json, text/javascript"},"contents":{"xml":/xml/,"html":/html/,"json":/json/},"responseFields":{"xml":"responseXML","text":"responseText","json":"responseJSON"},"converters":{"* text":String,"text html":!0,"text json":Z.parseJSON,"text xml":Z.parseXML},"flatOptions":{"url":!0,"context":!0}},"ajaxSetup":function(e,t){return t?O(O(e,Z.ajaxSettings),t):O(Z.ajaxSettings,e)},"ajaxPrefilter":q(bi),"ajaxTransport":q(wi),"ajax":function(e,t){function i(e,t,i,r){var l,u,v,_,b,S=t;2!==y&&(y=2,o&&clearTimeout(o),n=void 0,s=r||"",w.readyState=e>0?4:0,l=e>=200&&300>e||304===e,i&&(_=R(d,w,i)),_=N(d,_,w,l),l?(d.ifModified&&(b=w.getResponseHeader("Last-Modified"),b&&(Z.lastModified[a]=b),b=w.getResponseHeader("etag"),b&&(Z.etag[a]=b)),204===e||"HEAD"===d.type?S="nocontent":304===e?S="notmodified":(S=_.state,u=_.data,v=_.error,l=!v)):(v=S,(e||!S)&&(S="error",0>e&&(e=0))),w.status=e,w.statusText=(t||S)+"",l?p.resolveWith(h,[u,S,w]):p.rejectWith(h,[w,S,v]),w.statusCode(m),m=void 0,c&&f.trigger(l?"ajaxSuccess":"ajaxError",[w,d,l?u:v]),g.fireWith(h,[w,S]),c&&(f.trigger("ajaxComplete",[w,d]),--Z.active||Z.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,a,s,r,o,l,c,u,d=Z.ajaxSetup({},t),h=d.context||d,f=d.context&&(h.nodeType||h.jquery)?Z(h):Z.event,p=Z.Deferred(),g=Z.Callbacks("once memory"),m=d.statusCode||{},v={},_={},y=0,b="canceled",w={"readyState":0,"getResponseHeader":function(e){var t;if(2===y){if(!r)for(r={};t=gi.exec(s);)r[t[1].toLowerCase()]=t[2];t=r[e.toLowerCase()]}return null==t?null:t},"getAllResponseHeaders":function(){return 2===y?s:null},"setRequestHeader":function(e,t){var i=e.toLowerCase();return y||(e=_[i]=_[i]||e,v[e]=t),this},"overrideMimeType":function(e){return y||(d.mimeType=e),this},"statusCode":function(e){var t;if(e)if(2>y)for(t in e)m[t]=[m[t],e[t]];else w.always(e[w.status]);return this},"abort":function(e){var t=e||b;return n&&n.abort(t),i(0,t),this}};if(p.promise(w).complete=g.add,w.success=w.done,w.error=w.fail,d.url=((e||d.url||hi)+"").replace(fi,"").replace(_i,di[1]+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=Z.trim(d.dataType||"*").toLowerCase().match(ft)||[""],null==d.crossDomain&&(l=yi.exec(d.url.toLowerCase()),d.crossDomain=!(!l||l[1]===di[1]&&l[2]===di[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(di[3]||("http:"===di[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=Z.param(d.data,d.traditional)),F(bi,d,t,w),2===y)return w;c=d.global,c&&0===Z.active++&&Z.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!vi.test(d.type),a=d.url,d.hasContent||(d.data&&(a=d.url+=(ui.test(a)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=pi.test(a)?a.replace(pi,"$1_="+ci++):a+(ui.test(a)?"&":"?")+"_="+ci++)),d.ifModified&&(Z.lastModified[a]&&w.setRequestHeader("If-Modified-Since",Z.lastModified[a]),Z.etag[a]&&w.setRequestHeader("If-None-Match",Z.etag[a])),(d.data&&d.hasContent&&d.contentType!==!1||t.contentType)&&w.setRequestHeader("Content-Type",d.contentType),w.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Si+"; q=0.01":""):d.accepts["*"]);for(u in d.headers)w.setRequestHeader(u,d.headers[u]);if(d.beforeSend&&(d.beforeSend.call(h,w,d)===!1||2===y))return w.abort();b="abort";for(u in{"success":1,"error":1,"complete":1})w[u](d[u]);if(n=F(wi,d,t,w)){w.readyState=1,c&&f.trigger("ajaxSend",[w,d]),d.async&&d.timeout>0&&(o=setTimeout(function(){w.abort("timeout")},d.timeout));try{y=1,n.send(v,i)}catch(S){if(!(2>y))throw S;i(-1,S)}}else i(-1,"No Transport");return w},"getJSON":function(e,t,i){return Z.get(e,t,i,"json")},"getScript":function(e,t){return Z.get(e,void 0,t,"script")}}),Z.each(["get","post"],function(e,t){Z[t]=function(e,i,n,a){return Z.isFunction(i)&&(a=a||n,n=i,i=void 0),Z.ajax({"url":e,"type":t,"dataType":a,"data":i,"success":n})}}),Z.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){Z.fn[t]=function(e){return this.on(t,e)}}),Z._evalUrl=function(e){return Z.ajax({"url":e,"type":"GET","dataType":"script","async":!1,"global":!1,"throws":!0})},Z.fn.extend({"wrapAll":function(e){var t;return Z.isFunction(e)?this.each(function(t){Z(this).wrapAll(e.call(this,t))}):(this[0]&&(t=Z(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},"wrapInner":function(e){return Z.isFunction(e)?this.each(function(t){Z(this).wrapInner(e.call(this,t))}):this.each(function(){var t=Z(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},"wrap":function(e){var t=Z.isFunction(e);return this.each(function(i){Z(this).wrapAll(t?e.call(this,i):e)})},"unwrap":function(){return this.parent().each(function(){Z.nodeName(this,"body")||Z(this).replaceWith(this.childNodes)}).end()}}),Z.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},Z.expr.filters.visible=function(e){return!Z.expr.filters.hidden(e)};var ki=/%20/g,xi=/\[\]$/,Ci=/\r?\n/g,Di=/^(?:submit|button|image|reset|file)$/i,Li=/^(?:input|select|textarea|keygen)/i;Z.param=function(e,t){var i,n=[],a=function(e,t){t=Z.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=Z.ajaxSettings&&Z.ajaxSettings.traditional),Z.isArray(e)||e.jquery&&!Z.isPlainObject(e))Z.each(e,function(){a(this.name,this.value)});else for(i in e)j(i,e[i],t,a);return n.join("&").replace(ki,"+")},Z.fn.extend({"serialize":function(){return Z.param(this.serializeArray())},"serializeArray":function(){return this.map(function(){var e=Z.prop(this,"elements");return e?Z.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!Z(this).is(":disabled")&&Li.test(this.nodeName)&&!Di.test(e)&&(this.checked||!kt.test(e))}).map(function(e,t){var i=Z(this).val();return null==i?null:Z.isArray(i)?Z.map(i,function(e){return{"name":t.name,"value":e.replace(Ci,"\r\n")}}):{"name":t.name,"value":i.replace(Ci,"\r\n")}}).get()}}),Z.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var $i=0,Ii={},Mi={"0":200,"1223":204},Ai=Z.ajaxSettings.xhr();e.ActiveXObject&&Z(e).on("unload",function(){for(var e in Ii)Ii[e]()}),K.cors=!!Ai&&"withCredentials"in Ai,K.ajax=Ai=!!Ai,Z.ajaxTransport(function(e){var t;return K.cors||Ai&&!e.crossDomain?{"send":function(i,n){var a,s=e.xhr(),r=++$i;if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(a in i)s.setRequestHeader(a,i[a]);t=function(e){return function(){t&&(delete Ii[r],t=s.onload=s.onerror=null,"abort"===e?s.abort():"error"===e?n(s.status,s.statusText):n(Mi[s.status]||s.status,s.statusText,"string"==typeof s.responseText?{"text":s.responseText}:void 0,s.getAllResponseHeaders()))}},s.onload=t(),s.onerror=t("error"),t=Ii[r]=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(o){if(t)throw o}},"abort":function(){t&&t()}}:void 0}),Z.ajaxSetup({"accepts":{"script":"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},"contents":{"script":/(?:java|ecma)script/},"converters":{"text script":function(e){return Z.globalEval(e),e}}}),Z.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),Z.ajaxTransport("script",function(e){if(e.crossDomain){var t,i;return{"send":function(n,a){t=Z("<script>").prop({"async":!0,"charset":e.scriptCharset,"src":e.url}).on("load error",i=function(e){t.remove(),i=null,e&&a("error"===e.type?404:200,e.type)}),Q.head.appendChild(t[0])},"abort":function(){i&&i()}}}});var Ei=[],Pi=/(=)\?(?=&|$)|\?\?/;Z.ajaxSetup({"jsonp":"callback","jsonpCallback":function(){var e=Ei.pop()||Z.expando+"_"+ci++;return this[e]=!0,e}}),Z.ajaxPrefilter("json jsonp",function(t,i,n){var a,s,r,o=t.jsonp!==!1&&(Pi.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Pi.test(t.data)&&"data");return o||"jsonp"===t.dataTypes[0]?(a=t.jsonpCallback=Z.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,o?t[o]=t[o].replace(Pi,"$1"+a):t.jsonp!==!1&&(t.url+=(ui.test(t.url)?"&":"?")+t.jsonp+"="+a),t.converters["script json"]=function(){return r||Z.error(a+" was not called"),r[0]},t.dataTypes[0]="json",s=e[a],e[a]=function(){r=arguments},n.always(function(){e[a]=s,t[a]&&(t.jsonpCallback=i.jsonpCallback,Ei.push(a)),r&&Z.isFunction(s)&&s(r[0]),r=s=void 0}),"script"):void 0}),Z.parseHTML=function(e,t,i){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(i=t,t=!1),t=t||Q;var n=rt.exec(e),a=!i&&[];return n?[t.createElement(n[1])]:(n=Z.buildFragment([e],t,a),a&&a.length&&Z(a).remove(),Z.merge([],n.childNodes))};var qi=Z.fn.load;Z.fn.load=function(e,t,i){if("string"!=typeof e&&qi)return qi.apply(this,arguments);var n,a,s,r=this,o=e.indexOf(" ");return o>=0&&(n=Z.trim(e.slice(o)),e=e.slice(0,o)),Z.isFunction(t)?(i=t,t=void 0):t&&"object"==typeof t&&(a="POST"),r.length>0&&Z.ajax({"url":e,"type":a,"dataType":"html","data":t}).done(function(e){s=arguments,r.html(n?Z("<div>").append(Z.parseHTML(e)).find(n):e)}).complete(i&&function(e,t){r.each(i,s||[e.responseText,t,e])}),this},Z.expr.filters.animated=function(e){return Z.grep(Z.timers,function(t){return e===t.elem}).length};var Fi=e.document.documentElement;Z.offset={"setOffset":function(e,t,i){var n,a,s,r,o,l,c,u=Z.css(e,"position"),d=Z(e),h={};"static"===u&&(e.style.position="relative"),o=d.offset(),s=Z.css(e,"top"),l=Z.css(e,"left"),c=("absolute"===u||"fixed"===u)&&(s+l).indexOf("auto")>-1,c?(n=d.position(),r=n.top,a=n.left):(r=parseFloat(s)||0,a=parseFloat(l)||0),Z.isFunction(t)&&(t=t.call(e,i,o)),null!=t.top&&(h.top=t.top-o.top+r),null!=t.left&&(h.left=t.left-o.left+a),"using"in t?t.using.call(e,h):d.css(h)}},Z.fn.extend({"offset":function(e){if(arguments.length)return void 0===e?this:this.each(function(t){Z.offset.setOffset(this,e,t)});var t,i,n=this[0],a={"top":0,"left":0},s=n&&n.ownerDocument;if(s)return t=s.documentElement,Z.contains(t,n)?(typeof n.getBoundingClientRect!==xt&&(a=n.getBoundingClientRect()),i=U(s),{"top":a.top+i.pageYOffset-t.clientTop,"left":a.left+i.pageXOffset-t.clientLeft}):a},"position":function(){if(this[0]){var e,t,i=this[0],n={"top":0,"left":0};return"fixed"===Z.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),Z.nodeName(e[0],"html")||(n=e.offset()),n.top+=Z.css(e[0],"borderTopWidth",!0),n.left+=Z.css(e[0],"borderLeftWidth",!0)),{"top":t.top-n.top-Z.css(i,"marginTop",!0),"left":t.left-n.left-Z.css(i,"marginLeft",!0)}
}},"offsetParent":function(){return this.map(function(){for(var e=this.offsetParent||Fi;e&&!Z.nodeName(e,"html")&&"static"===Z.css(e,"position");)e=e.offsetParent;return e||Fi})}}),Z.each({"scrollLeft":"pageXOffset","scrollTop":"pageYOffset"},function(t,i){var n="pageYOffset"===i;Z.fn[t]=function(a){return mt(this,function(t,a,s){var r=U(t);return void 0===s?r?r[i]:t[a]:(r?r.scrollTo(n?e.pageXOffset:s,n?s:e.pageYOffset):t[a]=s,void 0)},t,a,arguments.length,null)}}),Z.each(["top","left"],function(e,t){Z.cssHooks[t]=S(K.pixelPosition,function(e,i){return i?(i=w(e,t),Yt.test(i)?Z(e).position()[t]+"px":i):void 0})}),Z.each({"Height":"height","Width":"width"},function(e,t){Z.each({"padding":"inner"+e,"content":t,"":"outer"+e},function(i,n){Z.fn[n]=function(n,a){var s=arguments.length&&(i||"boolean"!=typeof n),r=i||(n===!0||a===!0?"margin":"border");return mt(this,function(t,i,n){var a;return Z.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===n?Z.css(t,i,r):Z.style(t,i,n,r)},t,s?n:void 0,s,null)}})}),Z.fn.size=function(){return this.length},Z.fn.andSelf=Z.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Z});var Oi=e.jQuery,Ri=e.$;return Z.noConflict=function(t){return e.$===Z&&(e.$=Ri),t&&e.jQuery===Z&&(e.jQuery=Oi),Z},typeof t===xt&&(e.jQuery=e.$=Z),Z}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){var t="ui-effects-";e.effects={"effect":{}},function(e,t){function i(e,t,i){var n=d[t.type]||{};return null==e?i||!t.def?null:t.def:(e=n.floor?~~e:parseFloat(e),isNaN(e)?t.def:n.mod?(e+n.mod)%n.mod:0>e?0:e>n.max?n.max:e)}function n(i){var n=c(),a=n._rgba=[];return i=i.toLowerCase(),p(l,function(e,s){var r,o=s.re.exec(i),l=o&&s.parse(o),c=s.space||"rgba";return l?(r=n[c](l),n[u[c].cache]=r[u[c].cache],a=n._rgba=r._rgba,!1):t}),a.length?("0,0,0,0"===a.join()&&e.extend(a,s.transparent),n):s[i]}function a(e,t,i){return i=(i+1)%1,1>6*i?e+6*(t-e)*i:1>2*i?t:2>3*i?e+6*(t-e)*(2/3-i):e}var s,r="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",o=/^([\-+])=\s*(\d+\.?\d*)/,l=[{"re":/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,"parse":function(e){return[e[1],e[2],e[3],e[4]]}},{"re":/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,"parse":function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{"re":/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,"parse":function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{"re":/#([a-f0-9])([a-f0-9])([a-f0-9])/,"parse":function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{"re":/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,"space":"hsla","parse":function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],c=e.Color=function(t,i,n,a){return new e.Color.fn.parse(t,i,n,a)},u={"rgba":{"props":{"red":{"idx":0,"type":"byte"},"green":{"idx":1,"type":"byte"},"blue":{"idx":2,"type":"byte"}}},"hsla":{"props":{"hue":{"idx":0,"type":"degrees"},"saturation":{"idx":1,"type":"percent"},"lightness":{"idx":2,"type":"percent"}}}},d={"byte":{"floor":!0,"max":255},"percent":{"max":1},"degrees":{"mod":360,"floor":!0}},h=c.support={},f=e("<p>")[0],p=e.each;f.style.cssText="background-color:rgba(1,1,1,.5)",h.rgba=f.style.backgroundColor.indexOf("rgba")>-1,p(u,function(e,t){t.cache="_"+e,t.props.alpha={"idx":3,"type":"percent","def":1}}),c.fn=e.extend(c.prototype,{"parse":function(a,r,o,l){if(a===t)return this._rgba=[null,null,null,null],this;(a.jquery||a.nodeType)&&(a=e(a).css(r),r=t);var d=this,h=e.type(a),f=this._rgba=[];return r!==t&&(a=[a,r,o,l],h="array"),"string"===h?this.parse(n(a)||s._default):"array"===h?(p(u.rgba.props,function(e,t){f[t.idx]=i(a[t.idx],t)}),this):"object"===h?(a instanceof c?p(u,function(e,t){a[t.cache]&&(d[t.cache]=a[t.cache].slice())}):p(u,function(t,n){var s=n.cache;p(n.props,function(e,t){if(!d[s]&&n.to){if("alpha"===e||null==a[e])return;d[s]=n.to(d._rgba)}d[s][t.idx]=i(a[e],t,!0)}),d[s]&&0>e.inArray(null,d[s].slice(0,3))&&(d[s][3]=1,n.from&&(d._rgba=n.from(d[s])))}),this):t},"is":function(e){var i=c(e),n=!0,a=this;return p(u,function(e,s){var r,o=i[s.cache];return o&&(r=a[s.cache]||s.to&&s.to(a._rgba)||[],p(s.props,function(e,i){return null!=o[i.idx]?n=o[i.idx]===r[i.idx]:t})),n}),n},"_space":function(){var e=[],t=this;return p(u,function(i,n){t[n.cache]&&e.push(i)}),e.pop()},"transition":function(e,t){var n=c(e),a=n._space(),s=u[a],r=0===this.alpha()?c("transparent"):this,o=r[s.cache]||s.to(r._rgba),l=o.slice();return n=n[s.cache],p(s.props,function(e,a){var s=a.idx,r=o[s],c=n[s],u=d[a.type]||{};null!==c&&(null===r?l[s]=c:(u.mod&&(c-r>u.mod/2?r+=u.mod:r-c>u.mod/2&&(r-=u.mod)),l[s]=i((c-r)*t+r,a)))}),this[a](l)},"blend":function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),a=c(t)._rgba;return c(e.map(i,function(e,t){return(1-n)*a[t]+n*e}))},"toRgbaString":function(){var t="rgba(",i=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},"toHslaString":function(){var t="hsla(",i=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},"toHexString":function(t){var i=this._rgba.slice(),n=i.pop();return t&&i.push(~~(255*n)),"#"+e.map(i,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},"toString":function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),c.fn.parse.prototype=c.fn,u.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,n=e[0]/255,a=e[1]/255,s=e[2]/255,r=e[3],o=Math.max(n,a,s),l=Math.min(n,a,s),c=o-l,u=o+l,d=.5*u;return t=l===o?0:n===o?60*(a-s)/c+360:a===o?60*(s-n)/c+120:60*(n-a)/c+240,i=0===c?0:.5>=d?c/u:c/(2-u),[Math.round(t)%360,i,d,null==r?1:r]},u.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],n=e[2],s=e[3],r=.5>=n?n*(1+i):n+i-n*i,o=2*n-r;return[Math.round(255*a(o,r,t+1/3)),Math.round(255*a(o,r,t)),Math.round(255*a(o,r,t-1/3)),s]},p(u,function(n,a){var s=a.props,r=a.cache,l=a.to,u=a.from;c.fn[n]=function(n){if(l&&!this[r]&&(this[r]=l(this._rgba)),n===t)return this[r].slice();var a,o=e.type(n),d="array"===o||"object"===o?n:arguments,h=this[r].slice();return p(s,function(e,t){var n=d["object"===o?e:t.idx];null==n&&(n=h[t.idx]),h[t.idx]=i(n,t)}),u?(a=c(u(h)),a[r]=h,a):c(h)},p(s,function(t,i){c.fn[t]||(c.fn[t]=function(a){var s,r=e.type(a),l="alpha"===t?this._hsla?"hsla":"rgba":n,c=this[l](),u=c[i.idx];return"undefined"===r?u:("function"===r&&(a=a.call(this,u),r=e.type(a)),null==a&&i.empty?this:("string"===r&&(s=o.exec(a),s&&(a=u+parseFloat(s[2])*("+"===s[1]?1:-1))),c[i.idx]=a,this[l](c)))})})}),c.hook=function(t){var i=t.split(" ");p(i,function(t,i){e.cssHooks[i]={"set":function(t,a){var s,r,o="";if("transparent"!==a&&("string"!==e.type(a)||(s=n(a)))){if(a=c(s||a),!h.rgba&&1!==a._rgba[3]){for(r="backgroundColor"===i?t.parentNode:t;(""===o||"transparent"===o)&&r&&r.style;)try{o=e.css(r,"backgroundColor"),r=r.parentNode}catch(l){}a=a.blend(o&&"transparent"!==o?o:"_default")}a=a.toRgbaString()}try{t.style[i]=a}catch(l){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=c(t.elem,i),t.end=c(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}})},c.hook(r),e.cssHooks.borderColor={"expand":function(e){var t={};return p(["Top","Right","Bottom","Left"],function(i,n){t["border"+n+"Color"]=e}),t}},s=e.Color.names={"aqua":"#00ffff","black":"#000000","blue":"#0000ff","fuchsia":"#ff00ff","gray":"#808080","green":"#008000","lime":"#00ff00","maroon":"#800000","navy":"#000080","olive":"#808000","purple":"#800080","red":"#ff0000","silver":"#c0c0c0","teal":"#008080","white":"#ffffff","yellow":"#ffff00","transparent":[null,null,null,0],"_default":"#ffffff"}}(jQuery),function(){function t(t){var i,n,a=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,s={};if(a&&a.length&&a[0]&&a[a[0]])for(n=a.length;n--;)i=a[n],"string"==typeof a[i]&&(s[e.camelCase(i)]=a[i]);else for(i in a)"string"==typeof a[i]&&(s[i]=a[i]);return s}function i(t,i){var n,s,r={};for(n in i)s=i[n],t[n]!==s&&(a[n]||(e.fx.step[n]||!isNaN(parseFloat(s)))&&(r[n]=s));return r}var n=["add","remove","toggle"],a={"border":1,"borderBottom":1,"borderColor":1,"borderLeft":1,"borderRight":1,"borderTop":1,"borderWidth":1,"margin":1,"padding":1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){e.fx.step[i]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(jQuery.style(e.elem,i,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(a,s,r,o){var l=e.speed(s,r,o);return this.queue(function(){var s,r=e(this),o=r.attr("class")||"",c=l.children?r.find("*").addBack():r;c=c.map(function(){var i=e(this);return{"el":i,"start":t(this)}}),s=function(){e.each(n,function(e,t){a[t]&&r[t+"Class"](a[t])})},s(),c=c.map(function(){return this.end=t(this.el[0]),this.diff=i(this.start,this.end),this}),r.attr("class",o),c=c.map(function(){var t=this,i=e.Deferred(),n=e.extend({},l,{"queue":!1,"complete":function(){i.resolve(t)}});return this.el.animate(this.diff,n),i.promise()}),e.when.apply(e,c.get()).done(function(){s(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),l.complete.call(r[0])})})},e.fn.extend({"addClass":function(t){return function(i,n,a,s){return n?e.effects.animateClass.call(this,{"add":i},n,a,s):t.apply(this,arguments)}}(e.fn.addClass),"removeClass":function(t){return function(i,n,a,s){return arguments.length>1?e.effects.animateClass.call(this,{"remove":i},n,a,s):t.apply(this,arguments)}}(e.fn.removeClass),"toggleClass":function(t){return function(i,n,a,s,r){return"boolean"==typeof n||void 0===n?a?e.effects.animateClass.call(this,n?{"add":i}:{"remove":i},a,s,r):t.apply(this,arguments):e.effects.animateClass.call(this,{"toggle":i},n,a,s)}}(e.fn.toggleClass),"switchClass":function(t,i,n,a,s){return e.effects.animateClass.call(this,{"add":i,"remove":t},n,a,s)}})}(),function(){function i(t,i,n,a){return e.isPlainObject(t)&&(i=t,t=t.effect),t={"effect":t},null==i&&(i={}),e.isFunction(i)&&(a=i,n=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(a=n,n=i,i={}),e.isFunction(n)&&(a=n,n=null),i&&e.extend(t,i),n=n||i.duration,t.duration=e.fx.off?0:"number"==typeof n?n:n in e.fx.speeds?e.fx.speeds[n]:e.fx.speeds._default,t.complete=a||i.complete,t}function n(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}e.extend(e.effects,{"version":"1.11.0","save":function(e,i){for(var n=0;i.length>n;n++)null!==i[n]&&e.data(t+i[n],e[0].style[i[n]])},"restore":function(e,i){var n,a;for(a=0;i.length>a;a++)null!==i[a]&&(n=e.data(t+i[a]),void 0===n&&(n=""),e.css(i[a],n))},"setMode":function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},"getBaseline":function(e,t){var i,n;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=e[1]/t.width}return{"x":n,"y":i}},"createWrapper":function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={"width":t.outerWidth(!0),"height":t.outerHeight(!0),"float":t.css("float")},n=e("<div></div>").addClass("ui-effects-wrapper").css({"fontSize":"100%","background":"transparent","border":"none","margin":0,"padding":0}),a={"width":t.width(),"height":t.height()},s=document.activeElement;try{s.id}catch(r){s=document.body}return t.wrap(n),(t[0]===s||e.contains(t[0],s))&&e(s).focus(),n=t.parent(),"static"===t.css("position")?(n.css({"position":"relative"}),t.css({"position":"relative"})):(e.extend(i,{"position":t.css("position"),"zIndex":t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,n){i[n]=t.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),t.css({"position":"relative","top":0,"left":0,"right":"auto","bottom":"auto"})),t.css(a),n.css(i).show()},"removeWrapper":function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus()),t},"setTransition":function(t,i,n,a){return a=a||{},e.each(i,function(e,i){var s=t.cssUnit(i);s[0]>0&&(a[i]=s[0]*n+s[1])}),a}}),e.fn.extend({"effect":function(){function t(t){function i(){e.isFunction(s)&&s.call(a[0]),e.isFunction(t)&&t()}var a=e(this),s=n.complete,o=n.mode;(a.is(":hidden")?"hide"===o:"show"===o)?(a[o](),i()):r.call(a[0],n,i)}var n=i.apply(this,arguments),a=n.mode,s=n.queue,r=e.effects.effect[n.effect];return e.fx.off||!r?a?this[a](n.duration,n.complete):this.each(function(){n.complete&&n.complete.call(this)}):s===!1?this.each(t):this.queue(s||"fx",t)},"show":function(e){return function(t){if(n(t))return e.apply(this,arguments);var a=i.apply(this,arguments);return a.mode="show",this.effect.call(this,a)}}(e.fn.show),"hide":function(e){return function(t){if(n(t))return e.apply(this,arguments);var a=i.apply(this,arguments);return a.mode="hide",this.effect.call(this,a)}}(e.fn.hide),"toggle":function(e){return function(t){if(n(t)||"boolean"==typeof t)return e.apply(this,arguments);var a=i.apply(this,arguments);return a.mode="toggle",this.effect.call(this,a)}}(e.fn.toggle),"cssUnit":function(t){var i=this.css(t),n=[];return e.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(n=[parseFloat(i),t])}),n}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,i){t[i]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{"Sine":function(e){return 1-Math.cos(e*Math.PI/2)},"Circ":function(e){return 1-Math.sqrt(1-e*e)},"Elastic":function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},"Back":function(e){return e*e*(3*e-2)},"Bounce":function(e){for(var t,i=4;((t=Math.pow(2,--i))-1)/11>e;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?i(2*e)/2:1-i(-2*e+2)/2}})}(),e.effects,e.effects.effect.highlight=function(t,i){var n=e(this),a=["backgroundImage","backgroundColor","opacity"],s=e.effects.setMode(n,t.mode||"show"),r={"backgroundColor":n.css("backgroundColor")};"hide"===s&&(r.opacity=0),e.effects.save(n,a),n.show().css({"backgroundImage":"none","backgroundColor":t.color||"#ffff99"}).animate(r,{"queue":!1,"duration":t.duration,"easing":t.easing,"complete":function(){"hide"===s&&n.hide(),e.effects.restore(n,a),i()}})}}),function(e,t,i){function n(e){return e.match(/\D+$/)}function a(e,t,i,n){if("d"!=i&&h(e)){var a=_.exec(t),s="auto"===e.css(i)?0:e.css(i),r="string"==typeof s?d(s):s,o=("string"==typeof t?d(t):t,n===!0?0:r),l=e.is(":hidden"),c=e.translation();if("left"==i&&(o=parseInt(r,10)+c.x),"right"==i&&(o=parseInt(r,10)+c.x),"top"==i&&(o=parseInt(r,10)+c.y),"bottom"==i&&(o=parseInt(r,10)+c.y),a||"show"!=t?a||"hide"!=t||(o=0):(o=1,l&&e.css({"display":u(e.context.tagName),"opacity":0})),a){var f=parseFloat(a[2]);return a[1]&&(f=("-="===a[1]?-1:1)*f+parseInt(o,10)),f}return o}}function s(e,t,i){return i===!0||A===!0&&i!==!1&&M?"translate3d("+e+"px, "+t+"px, 0)":"translate("+e+"px,"+t+"px)"}function r(t,i,n,a,s,r,l,u){var h=t.data(S),f=h&&!c(h)?h:e.extend(!0,{},b),p=s,m=e.inArray(i,g)>-1;if(m){var v=f.meta,_=d(t.css(i))||0,y=i+"_o";p=s-_,v[i]=p,v[y]="auto"==t.css(i)?0+p:_+p||0,f.meta=v,l&&0===p&&(p=0-v[y],v[i]=p,v[y]=0)}return t.data(S,o(t,f,i,n,a,p,r,l,u))}function o(e,t,i,n,a,r,o,l,c){var u=!1,d=o===!0&&l===!0;t=t||{},t.original||(t.original={},u=!0),t.properties=t.properties||{},t.secondary=t.secondary||{};for(var h=t.meta,f=t.original,p=t.properties,g=t.secondary,v=m.length-1;v>=0;v--){var _=m[v]+"transition-property",y=m[v]+"transition-duration",b=m[v]+"transition-timing-function";i=d?m[v]+"transform":i,u&&(f[_]=e.css(_)||"",f[y]=e.css(y)||"",f[b]=e.css(b)||""),g[i]=d?s(h.left,h.top,c):r,p[_]=(p[_]?p[_]+",":"")+i,p[y]=(p[y]?p[y]+",":"")+n+"ms",p[b]=(p[b]?p[b]+",":"")+a}return t}function l(e){for(var t in e)if(!("width"!=t&&"height"!=t||"show"!=e[t]&&"hide"!=e[t]&&"toggle"!=e[t]))return!0;return!1}function c(e){for(var t in e)return!1;return!0}function u(e){e=e.toUpperCase();var t={"LI":"list-item","TR":"table-row","TD":"table-cell","TH":"table-cell","CAPTION":"table-caption","COL":"table-column","COLGROUP":"table-column-group","TFOOT":"table-footer-group","THEAD":"table-header-group","TBODY":"table-row-group"};return"string"==typeof t[e]?t[e]:"block"}function d(e){return parseFloat(e.replace(n(e),""))}function h(e){var t=!0;return e.each(function(e,i){return t=t&&i.ownerDocument}),t}function f(t,i,n){if(!h(n))return!1;var a=e.inArray(t,p)>-1;return"width"!=t&&"height"!=t&&"opacity"!=t||parseFloat(i)!==parseFloat(n.css(t))||(a=!1),a}var p=["top","right","bottom","left","opacity","height","width"],g=["top","right","bottom","left"],m=["-webkit-","-moz-","-o-",""],v=["avoidTransforms","useTranslate3d","leaveTransforms"],_=/^([+-]=)?([\d+-.]+)(.*)$/,y=/([A-Z])/g,b={"secondary":{},"meta":{"top":0,"right":0,"bottom":0,"left":0}},w="px",S="jQe",T="cubic-bezier(",k=")",x=null,C=!1,D=document.body||document.documentElement,L=D.style,$="webkitTransitionEnd oTransitionEnd transitionend",I=void 0!==L.WebkitTransition||void 0!==L.MozTransition||void 0!==L.OTransition||void 0!==L.transition,M="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,A=M;e.expr&&e.expr.filters&&(x=e.expr.filters.animated,e.expr.filters.animated=function(t){return e(t).data("events")&&e(t).data("events")[$]?!0:x.call(this,t)}),e.extend({"toggle3DByDefault":function(){return A=!A},"toggleDisabledByDefault":function(){return C=!C},"setDisabledByDefault":function(e){return C=e}}),e.fn.translation=function(){if(!this[0])return null;var e=this[0],t=window.getComputedStyle(e,null),i={"x":0,"y":0};if(t)for(var n=m.length-1;n>=0;n--){var a=t.getPropertyValue(m[n]+"transform");if(a&&/matrix/i.test(a)){var s=a.replace(/^matrix\(/i,"").split(/, |\)$/g);i={"x":parseInt(s[4],10),"y":parseInt(s[5],10)};break}}return i},e.fn.animate=function(i,n,s,o){i=i||{};var u=!("undefined"!=typeof i.bottom||"undefined"!=typeof i.right),d=e.speed(n,s,o),h=this,p=0,_=function(){p--,0===p&&"function"==typeof d.complete&&d.complete.apply(h,arguments)},y="undefined"!=typeof i.avoidCSSTransitions?i.avoidCSSTransitions:C;return y===!0||!I||c(i)||l(i)||d.duration<=0?t.apply(this,arguments):this[d.queue===!0?"queue":"each"](function(){var n=e(this),s=e.extend({},d),o=function(t){var a=n.data(S)||{"original":{}},s={};if(2==t.eventPhase){if(i.leaveTransforms!==!0){for(var r=m.length-1;r>=0;r--)s[m[r]+"transform"]="";if(u&&"undefined"!=typeof a.meta)for(var o,l=0;o=g[l];++l)s[o]=a.meta[o+"_o"]+w,e(this).css(o,s[o])}n.unbind($).css(a.original).css(s).data(S,null),"hide"===i.opacity&&n.css({"display":"none","opacity":""}),_.call(this)}},l={"bounce":T+"0.0, 0.35, .5, 1.3"+k,"linear":"linear","swing":"ease-in-out","easeInQuad":T+"0.550, 0.085, 0.680, 0.530"+k,"easeInCubic":T+"0.550, 0.055, 0.675, 0.190"+k,"easeInQuart":T+"0.895, 0.030, 0.685, 0.220"+k,"easeInQuint":T+"0.755, 0.050, 0.855, 0.060"+k,"easeInSine":T+"0.470, 0.000, 0.745, 0.715"+k,"easeInExpo":T+"0.950, 0.050, 0.795, 0.035"+k,"easeInCirc":T+"0.600, 0.040, 0.980, 0.335"+k,"easeInBack":T+"0.600, -0.280, 0.735, 0.045"+k,"easeOutQuad":T+"0.250, 0.460, 0.450, 0.940"+k,"easeOutCubic":T+"0.215, 0.610, 0.355, 1.000"+k,"easeOutQuart":T+"0.165, 0.840, 0.440, 1.000"+k,"easeOutQuint":T+"0.230, 1.000, 0.320, 1.000"+k,"easeOutSine":T+"0.390, 0.575, 0.565, 1.000"+k,"easeOutExpo":T+"0.190, 1.000, 0.220, 1.000"+k,"easeOutCirc":T+"0.075, 0.820, 0.165, 1.000"+k,"easeOutBack":T+"0.175, 0.885, 0.320, 1.275"+k,"easeInOutQuad":T+"0.455, 0.030, 0.515, 0.955"+k,"easeInOutCubic":T+"0.645, 0.045, 0.355, 1.000"+k,"easeInOutQuart":T+"0.770, 0.000, 0.175, 1.000"+k,"easeInOutQuint":T+"0.860, 0.000, 0.070, 1.000"+k,"easeInOutSine":T+"0.445, 0.050, 0.550, 0.950"+k,"easeInOutExpo":T+"1.000, 0.000, 0.000, 1.000"+k,"easeInOutCirc":T+"0.785, 0.135, 0.150, 0.860"+k,"easeInOutBack":T+"0.680, -0.550, 0.265, 1.550"+k},h={},y=l[s.easing||"swing"]?l[s.easing||"swing"]:s.easing||"swing";for(var b in i)if(-1===e.inArray(b,v)){var x=e.inArray(b,g)>-1,C=a(n,i[b],b,x&&i.avoidTransforms!==!0);f(b,C,n)?r(n,b,s.duration,y,C,x&&i.avoidTransforms!==!0,u,i.useTranslate3d):h[b]=i[b]}n.unbind($);var D=n.data(S);if(!D||c(D)||c(D.secondary))s.queue=!1;else{p++,n.css(D.properties);var L=D.secondary;setTimeout(function(){n.bind($,o).css(L)})}return c(h)||(p++,t.apply(n,[h,{"duration":s.duration,"easing":e.easing[s.easing]?s.easing:e.easing.swing?"swing":"linear","complete":_,"queue":s.queue}])),!0})},e.fn.animate.defaults={},e.fn.stop=function(t,n,a){return I?(t&&this.queue([]),this.each(function(){var s=e(this),r=s.data(S);if(r&&!c(r)){var o,l={};if(n){if(l=r.secondary,!a&&void 0!==typeof r.meta.left_o||void 0!==typeof r.meta.top_o)for(l.left=void 0!==typeof r.meta.left_o?r.meta.left_o:"auto",l.top=void 0!==typeof r.meta.top_o?r.meta.top_o:"auto",o=m.length-1;o>=0;o--)l[m[o]+"transform"]=""}else if(!c(r.secondary)){var u=window.getComputedStyle(s[0],null);if(u)for(var d in r.secondary)if(r.secondary.hasOwnProperty(d)&&(d=d.replace(y,"-$1").toLowerCase(),l[d]=u.getPropertyValue(d),!a&&/matrix/i.test(l[d]))){var h=l[d].replace(/^matrix\(/i,"").split(/, |\)$/g);for(l.left=parseFloat(h[4])+parseFloat(s.css("left"))+w||"auto",l.top=parseFloat(h[5])+parseFloat(s.css("top"))+w||"auto",o=m.length-1;o>=0;o--)l[m[o]+"transform"]=""}}s.unbind($),s.css(r.original).css(l).data(S,null)}else i.apply(s,[t,n])}),this):i.apply(this,[t,n])}}(jQuery,jQuery.fn.animate,jQuery.fn.stop),function(){var e=!1,t=/xyz/.test(function(){})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(i){function n(){!e&&this.init&&this.init.apply(this,arguments)}var a=this.prototype;e=!0;var s=new this;e=!1;for(var r in i)s[r]="function"==typeof i[r]&&"function"==typeof a[r]&&t.test(i[r])?function(e,t){return function(){var i=this._super;this._super=a[e];var n=t.apply(this,arguments);return this._super=i,n}}(r,i[r]):i[r];return n.prototype=s,n.constructor=n,n.extend=arguments.callee,n}}(),function(e){e.fn.autoGrowInput=function(t){return t=e.extend({"maxWidth":1e3,"minWidth":0,"comfortZone":70},t),this.filter("input:text").each(function(){var i=t.minWidth||e(this).width(),n="",a=e(this),s=e("<tester/>").css({"position":"absolute","top":-9999,"left":-9999,"width":"auto","fontSize":a.css("fontSize"),"fontFamily":a.css("fontFamily"),"fontWeight":a.css("fontWeight"),"letterSpacing":a.css("letterSpacing"),"whiteSpace":"nowrap"}),r=function(){if(n!==(n=a.val())){var e=n.replace(/&/g,"&amp;").replace(/\s/g,"&nbsp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");s.html(e);var r=s.width(),o=r+t.comfortZone>=i?r+t.comfortZone:i,l=a.width(),c=l>o&&o>=i||o>i&&o<t.maxWidth;c&&a.width(o)}};s.insertAfter(a),e(this).bind("keyup keydown blur update",r)}),this}}(jQuery),function(e){e.textMetrics=function(t){var i=0,n=0,a=document.createElement("div");document.body.appendChild(a),e(a).css({"position":"absolute","left":-1e3,"top":-1e3,"display":"none"}),e(a).html(e(t).html());var s=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"];e(s).each(function(){var i=this.toString();e(a).css(i,e(t).css(i))}),i=e(a).outerHeight(),n=e(a).outerWidth(),e(a).remove();var r={"height":i,"width":n};return r}}(jQuery),function(e,t){var i,n=t.event;n.special.smartscroll={"setup":function(){t(this).bind("scroll",t.event.special.smartscroll.handler)},"teardown":function(){t(this).unbind("scroll",t.event.special.smartscroll.handler)},"handler":function(e,n){var a=this,s=arguments;e.type="smartscroll",i&&clearTimeout(i),i=setTimeout(function(){t(a).trigger(e.type,s)},"execAsap"===n?0:100)}},t.fn.smartscroll=function(e){return e?this.bind("smartscroll",e):this.trigger("smartscroll",["execAsap"])}}(window,jQuery),function(e){function t(){return{"empty":!1,"unusedTokens":[],"unusedInput":[],"overflow":-2,"charsLeftOver":0,"nullInput":!1,"invalidMonth":null,"invalidFormat":!1,"userInvalidated":!1,"iso":!1}}function i(e,t){return function(i){return u(e.call(this,i),t)}}function n(e,t){return function(i){return this.lang().ordinal(e.call(this,i),t)}}function a(){}function s(e){S(e),o(this,e)}function r(e){var t=m(e),i=t.year||0,n=t.month||0,a=t.week||0,s=t.day||0,r=t.hour||0,o=t.minute||0,l=t.second||0,c=t.millisecond||0;this._milliseconds=+c+1e3*l+6e4*o+36e5*r,this._days=+s+7*a,this._months=+n+12*i,this._data={},this._bubble()}function o(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return t.hasOwnProperty("toString")&&(e.toString=t.toString),t.hasOwnProperty("valueOf")&&(e.valueOf=t.valueOf),e}function l(e){var t,i={};for(t in e)e.hasOwnProperty(t)&&mt.hasOwnProperty(t)&&(i[t]=e[t]);return i}function c(e){return 0>e?Math.ceil(e):Math.floor(e)}function u(e,t,i){for(var n=""+Math.abs(e),a=e>=0;n.length<t;)n="0"+n;return(a?i?"+":"":"-")+n}function d(e,t,i,n){var a,s,r=t._milliseconds,o=t._days,l=t._months;r&&e._d.setTime(+e._d+r*i),(o||l)&&(a=e.minute(),s=e.hour()),o&&e.date(e.date()+o*i),l&&e.month(e.month()+l*i),r&&!n&&nt.updateOffset(e),(o||l)&&(e.minute(a),e.hour(s))}function h(e){return"[object Array]"===Object.prototype.toString.call(e)}function f(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function p(e,t,i){var n,a=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),r=0;for(n=0;a>n;n++)(i&&e[n]!==t[n]||!i&&_(e[n])!==_(t[n]))&&r++;return r+s}function g(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=Wt[e]||Bt[t]||t}return e}function m(e){var t,i,n={};for(i in e)e.hasOwnProperty(i)&&(t=g(i),t&&(n[t]=e[i]));return n}function v(t){var i,n;if(0===t.indexOf("week"))i=7,n="day";else{if(0!==t.indexOf("month"))return;i=12,n="month"}nt[t]=function(a,s){var r,o,l=nt.fn._lang[t],c=[];if("number"==typeof a&&(s=a,a=e),o=function(e){var t=nt().utc().set(n,e);return l.call(nt.fn._lang,t,a||"")},null!=s)return o(s);for(r=0;i>r;r++)c.push(o(r));return c}}function _(e){var t=+e,i=0;return 0!==t&&isFinite(t)&&(i=t>=0?Math.floor(t):Math.ceil(t)),i}function y(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function b(e){return w(e)?366:365}function w(e){return e%4===0&&e%100!==0||e%400===0}function S(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[ct]<0||e._a[ct]>11?ct:e._a[ut]<1||e._a[ut]>y(e._a[lt],e._a[ct])?ut:e._a[dt]<0||e._a[dt]>23?dt:e._a[ht]<0||e._a[ht]>59?ht:e._a[ft]<0||e._a[ft]>59?ft:e._a[pt]<0||e._a[pt]>999?pt:-1,e._pf._overflowDayOfYear&&(lt>t||t>ut)&&(t=ut),e._pf.overflow=t)}function T(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length)),e._isValid}function k(e){return e?e.toLowerCase().replace("_","-"):e}function x(e,t){return t._isUTC?nt(e).zone(t._offset||0):nt(e).local()}function C(e,t){return t.abbr=e,gt[e]||(gt[e]=new a),gt[e].set(t),gt[e]}function D(e){delete gt[e]}function L(e){var t,i,n,a,s=0,r=function(e){if(!gt[e]&&vt)try{require("./lang/"+e)}catch(t){}return gt[e]};if(!e)return nt.fn._lang;if(!h(e)){if(i=r(e))return i;e=[e]}for(;s<e.length;){for(a=k(e[s]).split("-"),t=a.length,n=k(e[s+1]),n=n?n.split("-"):null;t>0;){if(i=r(a.slice(0,t).join("-")))return i;if(n&&n.length>=t&&p(a,n,!0)>=t-1)break;t--}s++}return nt.fn._lang}function $(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function I(e){var t,i,n=e.match(wt);for(t=0,i=n.length;i>t;t++)n[t]=Kt[n[t]]?Kt[n[t]]:$(n[t]);return function(a){var s="";for(t=0;i>t;t++)s+=n[t]instanceof Function?n[t].call(a,e):n[t];return s}}function M(e,t){return e.isValid()?(t=A(t,e.lang()),Gt[t]||(Gt[t]=I(t)),Gt[t](e)):e.lang().invalidDate()}function A(e,t){function i(e){return t.longDateFormat(e)||e}var n=5;for(St.lastIndex=0;n>=0&&St.test(e);)e=e.replace(St,i),St.lastIndex=0,n-=1;return e}function E(e,t){var i,n=t._strict;switch(e){case"DDDD":return Pt;case"YYYY":case"GGGG":case"gggg":return n?qt:xt;case"Y":case"G":case"g":return Ot;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return n?Ft:Ct;case"S":if(n)return At;case"SS":if(n)return Et;case"SSS":if(n)return Pt;case"DDD":return kt;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Lt;case"a":case"A":return L(t._l)._meridiemParse;case"X":return Mt;case"Z":case"ZZ":return $t;case"T":return It;case"SSSS":return Dt;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return n?Et:Tt;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Tt;default:return i=new RegExp(U(j(e.replace("\\","")),"i"))}}function P(e){e=e||"";var t=e.match($t)||[],i=t[t.length-1]||[],n=(i+"").match(Yt)||["-",0,0],a=+(60*n[1])+_(n[2]);return"+"===n[0]?-a:a}function q(e,t,i){var n,a=i._a;switch(e){case"M":case"MM":null!=t&&(a[ct]=_(t)-1);break;case"MMM":case"MMMM":n=L(i._l).monthsParse(t),null!=n?a[ct]=n:i._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(a[ut]=_(t));break;case"DDD":case"DDDD":null!=t&&(i._dayOfYear=_(t));break;case"YY":a[lt]=_(t)+(_(t)>68?1900:2e3);break;case"YYYY":case"YYYYY":case"YYYYYY":a[lt]=_(t);break;case"a":case"A":i._isPm=L(i._l).isPM(t);break;case"H":case"HH":case"h":case"hh":a[dt]=_(t);break;case"m":case"mm":a[ht]=_(t);break;case"s":case"ss":a[ft]=_(t);break;case"S":case"SS":case"SSS":case"SSSS":a[pt]=_(1e3*("0."+t));break;case"X":i._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":i._useUTC=!0,i._tzm=P(t);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":e=e.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(i._w=i._w||{},i._w[e]=t)}}function F(e){var t,i,n,a,s,r,o,l,c,u,d=[];if(!e._d){for(n=R(e),e._w&&null==e._a[ut]&&null==e._a[ct]&&(s=function(t){var i=parseInt(t,10);return t?t.length<3?i>68?1900+i:2e3+i:i:null==e._a[lt]?nt().weekYear():e._a[lt]},r=e._w,null!=r.GG||null!=r.W||null!=r.E?o=Q(s(r.GG),r.W||1,r.E,4,1):(l=L(e._l),c=null!=r.d?G(r.d,l):null!=r.e?parseInt(r.e,10)+l._week.dow:0,u=parseInt(r.w,10)||1,null!=r.d&&c<l._week.dow&&u++,o=Q(s(r.gg),u,c,l._week.doy,l._week.dow)),e._a[lt]=o.year,e._dayOfYear=o.dayOfYear),e._dayOfYear&&(a=null==e._a[lt]?n[lt]:e._a[lt],e._dayOfYear>b(a)&&(e._pf._overflowDayOfYear=!0),i=B(a,0,e._dayOfYear),e._a[ct]=i.getUTCMonth(),e._a[ut]=i.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=d[t]=n[t];for(;7>t;t++)e._a[t]=d[t]=null==e._a[t]?2===t?1:0:e._a[t];d[dt]+=_((e._tzm||0)/60),d[ht]+=_((e._tzm||0)%60),e._d=(e._useUTC?B:W).apply(null,d)}}function O(e){var t;e._d||(t=m(e._i),e._a=[t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond],F(e))}function R(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function N(e){e._a=[],e._pf.empty=!0;var t,i,n,a,s,r=L(e._l),o=""+e._i,l=o.length,c=0;for(n=A(e._f,r).match(wt)||[],t=0;t<n.length;t++)a=n[t],i=(o.match(E(a,e))||[])[0],i&&(s=o.substr(0,o.indexOf(i)),s.length>0&&e._pf.unusedInput.push(s),o=o.slice(o.indexOf(i)+i.length),c+=i.length),Kt[a]?(i?e._pf.empty=!1:e._pf.unusedTokens.push(a),q(a,i,e)):e._strict&&!i&&e._pf.unusedTokens.push(a);e._pf.charsLeftOver=l-c,o.length>0&&e._pf.unusedInput.push(o),e._isPm&&e._a[dt]<12&&(e._a[dt]+=12),e._isPm===!1&&12===e._a[dt]&&(e._a[dt]=0),F(e),S(e)
}function j(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,n,a){return t||i||n||a})}function U(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Y(e){var i,n,a,s,r;if(0===e._f.length)return e._pf.invalidFormat=!0,e._d=new Date(0/0),void 0;for(s=0;s<e._f.length;s++)r=0,i=o({},e),i._pf=t(),i._f=e._f[s],N(i),T(i)&&(r+=i._pf.charsLeftOver,r+=10*i._pf.unusedTokens.length,i._pf.score=r,(null==a||a>r)&&(a=r,n=i));o(e,n||i)}function H(e){var t,i,n=e._i,a=Rt.exec(n);if(a){for(e._pf.iso=!0,t=0,i=jt.length;i>t;t++)if(jt[t][1].exec(n)){e._f=jt[t][0]+(a[6]||" ");break}for(t=0,i=Ut.length;i>t;t++)if(Ut[t][1].exec(n)){e._f+=Ut[t][0];break}n.match($t)&&(e._f+="Z"),N(e)}else e._d=new Date(n)}function z(t){var i=t._i,n=_t.exec(i);i===e?t._d=new Date:n?t._d=new Date(+n[1]):"string"==typeof i?H(t):h(i)?(t._a=i.slice(0),F(t)):f(i)?t._d=new Date(+i):"object"==typeof i?O(t):t._d=new Date(i)}function W(e,t,i,n,a,s,r){var o=new Date(e,t,i,n,a,s,r);return 1970>e&&o.setFullYear(e),o}function B(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function G(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function V(e,t,i,n,a){return a.relativeTime(t||1,!!i,e,n)}function J(e,t,i){var n=ot(Math.abs(e)/1e3),a=ot(n/60),s=ot(a/60),r=ot(s/24),o=ot(r/365),l=45>n&&["s",n]||1===a&&["m"]||45>a&&["mm",a]||1===s&&["h"]||22>s&&["hh",s]||1===r&&["d"]||25>=r&&["dd",r]||45>=r&&["M"]||345>r&&["MM",ot(r/30)]||1===o&&["y"]||["yy",o];return l[2]=t,l[3]=e>0,l[4]=i,V.apply({},l)}function K(e,t,i){var n,a=i-t,s=i-e.day();return s>a&&(s-=7),a-7>s&&(s+=7),n=nt(e).add("d",s),{"week":Math.ceil(n.dayOfYear()/7),"year":n.year()}}function Q(e,t,i,n,a){var s,r,o=B(e,0,1).getUTCDay();return i=null!=i?i:a,s=a-o+(o>n?7:0)-(a>o?7:0),r=7*(t-1)+(i-a)+s+1,{"year":r>0?e:e-1,"dayOfYear":r>0?r:b(e-1)+r}}function X(e){var t=e._i,i=e._f;return null===t?nt.invalid({"nullInput":!0}):("string"==typeof t&&(e._i=t=L().preparse(t)),nt.isMoment(t)?(e=l(t),e._d=new Date(+t._d)):i?h(i)?Y(e):N(e):z(e),new s(e))}function Z(e,t){nt.fn[e]=nt.fn[e+"s"]=function(e){var i=this._isUTC?"UTC":"";return null!=e?(this._d["set"+i+t](e),nt.updateOffset(this),this):this._d["get"+i+t]()}}function et(e){nt.duration.fn[e]=function(){return this._data[e]}}function tt(e,t){nt.duration.fn["as"+e]=function(){return+this/t}}function it(e){var t=!1,i=nt;"undefined"==typeof ender&&(e?(rt.moment=function(){return!t&&console&&console.warn&&(t=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")),i.apply(null,arguments)},o(rt.moment,i)):rt.moment=nt)}for(var nt,at,st="2.5.1",rt=this,ot=Math.round,lt=0,ct=1,ut=2,dt=3,ht=4,ft=5,pt=6,gt={},mt={"_isAMomentObject":null,"_i":null,"_f":null,"_l":null,"_strict":null,"_isUTC":null,"_offset":null,"_pf":null,"_lang":null},vt="undefined"!=typeof module&&module.exports&&"undefined"!=typeof require,_t=/^\/?Date\((\-?\d+)/i,yt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,bt=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,wt=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,St=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Tt=/\d\d?/,kt=/\d{1,3}/,xt=/\d{1,4}/,Ct=/[+\-]?\d{1,6}/,Dt=/\d+/,Lt=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,$t=/Z|[\+\-]\d\d:?\d\d/gi,It=/T/i,Mt=/[\+\-]?\d+(\.\d{1,3})?/,At=/\d/,Et=/\d\d/,Pt=/\d{3}/,qt=/\d{4}/,Ft=/[+-]?\d{6}/,Ot=/[+-]?\d+/,Rt=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Nt="YYYY-MM-DDTHH:mm:ssZ",jt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],Ut=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Yt=/([\+\-]|\d\d)/gi,Ht="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),zt={"Milliseconds":1,"Seconds":1e3,"Minutes":6e4,"Hours":36e5,"Days":864e5,"Months":2592e6,"Years":31536e6},Wt={"ms":"millisecond","s":"second","m":"minute","h":"hour","d":"day","D":"date","w":"week","W":"isoWeek","M":"month","y":"year","DDD":"dayOfYear","e":"weekday","E":"isoWeekday","gg":"weekYear","GG":"isoWeekYear"},Bt={"dayofyear":"dayOfYear","isoweekday":"isoWeekday","isoweek":"isoWeek","weekyear":"weekYear","isoweekyear":"isoWeekYear"},Gt={},Vt="DDD w W M D d".split(" "),Jt="M D H h m s w W".split(" "),Kt={"M":function(){return this.month()+1},"MMM":function(e){return this.lang().monthsShort(this,e)},"MMMM":function(e){return this.lang().months(this,e)},"D":function(){return this.date()},"DDD":function(){return this.dayOfYear()},"d":function(){return this.day()},"dd":function(e){return this.lang().weekdaysMin(this,e)},"ddd":function(e){return this.lang().weekdaysShort(this,e)},"dddd":function(e){return this.lang().weekdays(this,e)},"w":function(){return this.week()},"W":function(){return this.isoWeek()},"YY":function(){return u(this.year()%100,2)},"YYYY":function(){return u(this.year(),4)},"YYYYY":function(){return u(this.year(),5)},"YYYYYY":function(){var e=this.year(),t=e>=0?"+":"-";return t+u(Math.abs(e),6)},"gg":function(){return u(this.weekYear()%100,2)},"gggg":function(){return u(this.weekYear(),4)},"ggggg":function(){return u(this.weekYear(),5)},"GG":function(){return u(this.isoWeekYear()%100,2)},"GGGG":function(){return u(this.isoWeekYear(),4)},"GGGGG":function(){return u(this.isoWeekYear(),5)},"e":function(){return this.weekday()},"E":function(){return this.isoWeekday()},"a":function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},"A":function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},"H":function(){return this.hours()},"h":function(){return this.hours()%12||12},"m":function(){return this.minutes()},"s":function(){return this.seconds()},"S":function(){return _(this.milliseconds()/100)},"SS":function(){return u(_(this.milliseconds()/10),2)},"SSS":function(){return u(this.milliseconds(),3)},"SSSS":function(){return u(this.milliseconds(),3)},"Z":function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+u(_(e/60),2)+":"+u(_(e)%60,2)},"ZZ":function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+u(_(e/60),2)+u(_(e)%60,2)},"z":function(){return this.zoneAbbr()},"zz":function(){return this.zoneName()},"X":function(){return this.unix()},"Q":function(){return this.quarter()}},Qt=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];Vt.length;)at=Vt.pop(),Kt[at+"o"]=n(Kt[at],at);for(;Jt.length;)at=Jt.pop(),Kt[at+at]=i(Kt[at],2);for(Kt.DDDD=i(Kt.DDD,3),o(a.prototype,{"set":function(e){var t,i;for(i in e)t=e[i],"function"==typeof t?this[i]=t:this["_"+i]=t},"_months":"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),"months":function(e){return this._months[e.month()]},"_monthsShort":"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),"monthsShort":function(e){return this._monthsShort[e.month()]},"monthsParse":function(e){var t,i,n;for(this._monthsParse||(this._monthsParse=[]),t=0;12>t;t++)if(this._monthsParse[t]||(i=nt.utc([2e3,t]),n="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[t]=new RegExp(n.replace(".",""),"i")),this._monthsParse[t].test(e))return t},"_weekdays":"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),"weekdays":function(e){return this._weekdays[e.day()]},"_weekdaysShort":"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),"weekdaysShort":function(e){return this._weekdaysShort[e.day()]},"_weekdaysMin":"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),"weekdaysMin":function(e){return this._weekdaysMin[e.day()]},"weekdaysParse":function(e){var t,i,n;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(i=nt([2e3,1]).day(t),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[t]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},"_longDateFormat":{"LT":"h:mm A","L":"MM/DD/YYYY","LL":"MMMM D YYYY","LLL":"MMMM D YYYY LT","LLLL":"dddd, MMMM D YYYY LT"},"longDateFormat":function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},"isPM":function(e){return"p"===(e+"").toLowerCase().charAt(0)},"_meridiemParse":/[ap]\.?m?\.?/i,"meridiem":function(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"},"_calendar":{"sameDay":"[Today at] LT","nextDay":"[Tomorrow at] LT","nextWeek":"dddd [at] LT","lastDay":"[Yesterday at] LT","lastWeek":"[Last] dddd [at] LT","sameElse":"L"},"calendar":function(e,t){var i=this._calendar[e];return"function"==typeof i?i.apply(t):i},"_relativeTime":{"future":"in %s","past":"%s ago","s":"a few seconds","m":"a minute","mm":"%d minutes","h":"an hour","hh":"%d hours","d":"a day","dd":"%d days","M":"a month","MM":"%d months","y":"a year","yy":"%d years"},"relativeTime":function(e,t,i,n){var a=this._relativeTime[i];return"function"==typeof a?a(e,t,i,n):a.replace(/%d/i,e)},"pastFuture":function(e,t){var i=this._relativeTime[e>0?"future":"past"];return"function"==typeof i?i(t):i.replace(/%s/i,t)},"ordinal":function(e){return this._ordinal.replace("%d",e)},"_ordinal":"%d","preparse":function(e){return e},"postformat":function(e){return e},"week":function(e){return K(e,this._week.dow,this._week.doy).week},"_week":{"dow":0,"doy":6},"_invalidDate":"Invalid date","invalidDate":function(){return this._invalidDate}}),nt=function(i,n,a,s){var r;return"boolean"==typeof a&&(s=a,a=e),r={},r._isAMomentObject=!0,r._i=i,r._f=n,r._l=a,r._strict=s,r._isUTC=!1,r._pf=t(),X(r)},nt.utc=function(i,n,a,s){var r;return"boolean"==typeof a&&(s=a,a=e),r={},r._isAMomentObject=!0,r._useUTC=!0,r._isUTC=!0,r._l=a,r._i=i,r._f=n,r._strict=s,r._pf=t(),X(r).utc()},nt.unix=function(e){return nt(1e3*e)},nt.duration=function(e,t){var i,n,a,s=e,o=null;return nt.isDuration(e)?s={"ms":e._milliseconds,"d":e._days,"M":e._months}:"number"==typeof e?(s={},t?s[t]=e:s.milliseconds=e):(o=yt.exec(e))?(i="-"===o[1]?-1:1,s={"y":0,"d":_(o[ut])*i,"h":_(o[dt])*i,"m":_(o[ht])*i,"s":_(o[ft])*i,"ms":_(o[pt])*i}):(o=bt.exec(e))&&(i="-"===o[1]?-1:1,a=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*i},s={"y":a(o[2]),"M":a(o[3]),"d":a(o[4]),"h":a(o[5]),"m":a(o[6]),"s":a(o[7]),"w":a(o[8])}),n=new r(s),nt.isDuration(e)&&e.hasOwnProperty("_lang")&&(n._lang=e._lang),n},nt.version=st,nt.defaultFormat=Nt,nt.updateOffset=function(){},nt.lang=function(e,t){var i;return e?(t?C(k(e),t):null===t?(D(e),e="en"):gt[e]||L(e),i=nt.duration.fn._lang=nt.fn._lang=L(e),i._abbr):nt.fn._lang._abbr},nt.langData=function(e){return e&&e._lang&&e._lang._abbr&&(e=e._lang._abbr),L(e)},nt.isMoment=function(e){return e instanceof s||null!=e&&e.hasOwnProperty("_isAMomentObject")},nt.isDuration=function(e){return e instanceof r},at=Qt.length-1;at>=0;--at)v(Qt[at]);for(nt.normalizeUnits=function(e){return g(e)},nt.invalid=function(e){var t=nt.utc(0/0);return null!=e?o(t._pf,e):t._pf.userInvalidated=!0,t},nt.parseZone=function(e){return nt(e).parseZone()},o(nt.fn=s.prototype,{"clone":function(){return nt(this)},"valueOf":function(){return+this._d+6e4*(this._offset||0)},"unix":function(){return Math.floor(+this/1e3)},"toString":function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},"toDate":function(){return this._offset?new Date(+this):this._d},"toISOString":function(){var e=nt(this).utc();return 0<e.year()&&e.year()<=9999?M(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):M(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},"toArray":function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},"isValid":function(){return T(this)},"isDSTShifted":function(){return this._a?this.isValid()&&p(this._a,(this._isUTC?nt.utc(this._a):nt(this._a)).toArray())>0:!1},"parsingFlags":function(){return o({},this._pf)},"invalidAt":function(){return this._pf.overflow},"utc":function(){return this.zone(0)},"local":function(){return this.zone(0),this._isUTC=!1,this},"format":function(e){var t=M(this,e||nt.defaultFormat);return this.lang().postformat(t)},"add":function(e,t){var i;return i="string"==typeof e?nt.duration(+t,e):nt.duration(e,t),d(this,i,1),this},"subtract":function(e,t){var i;return i="string"==typeof e?nt.duration(+t,e):nt.duration(e,t),d(this,i,-1),this},"diff":function(e,t,i){var n,a,s=x(e,this),r=6e4*(this.zone()-s.zone());return t=g(t),"year"===t||"month"===t?(n=432e5*(this.daysInMonth()+s.daysInMonth()),a=12*(this.year()-s.year())+(this.month()-s.month()),a+=(this-nt(this).startOf("month")-(s-nt(s).startOf("month")))/n,a-=6e4*(this.zone()-nt(this).startOf("month").zone()-(s.zone()-nt(s).startOf("month").zone()))/n,"year"===t&&(a/=12)):(n=this-s,a="second"===t?n/1e3:"minute"===t?n/6e4:"hour"===t?n/36e5:"day"===t?(n-r)/864e5:"week"===t?(n-r)/6048e5:n),i?a:c(a)},"from":function(e,t){return nt.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!t)},"fromNow":function(e){return this.from(nt(),e)},"calendar":function(){var e=x(nt(),this).startOf("day"),t=this.diff(e,"days",!0),i=-6>t?"sameElse":-1>t?"lastWeek":0>t?"lastDay":1>t?"sameDay":2>t?"nextDay":7>t?"nextWeek":"sameElse";return this.format(this.lang().calendar(i,this))},"isLeapYear":function(){return w(this.year())},"isDST":function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},"day":function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=G(e,this.lang()),this.add({"d":e-t})):t},"month":function(e){var t,i=this._isUTC?"UTC":"";return null!=e?"string"==typeof e&&(e=this.lang().monthsParse(e),"number"!=typeof e)?this:(t=this.date(),this.date(1),this._d["set"+i+"Month"](e),this.date(Math.min(t,this.daysInMonth())),nt.updateOffset(this),this):this._d["get"+i+"Month"]()},"startOf":function(e){switch(e=g(e)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),this},"endOf":function(e){return e=g(e),this.startOf(e).add("isoWeek"===e?"week":e,1).subtract("ms",1)},"isAfter":function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)>+nt(e).startOf(t)},"isBefore":function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)<+nt(e).startOf(t)},"isSame":function(e,t){return t=t||"ms",+this.clone().startOf(t)===+x(e,this).startOf(t)},"min":function(e){return e=nt.apply(null,arguments),this>e?this:e},"max":function(e){return e=nt.apply(null,arguments),e>this?this:e},"zone":function(e){var t=this._offset||0;return null==e?this._isUTC?t:this._d.getTimezoneOffset():("string"==typeof e&&(e=P(e)),Math.abs(e)<16&&(e=60*e),this._offset=e,this._isUTC=!0,t!==e&&d(this,nt.duration(t-e,"m"),1,!0),this)},"zoneAbbr":function(){return this._isUTC?"UTC":""},"zoneName":function(){return this._isUTC?"Coordinated Universal Time":""},"parseZone":function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},"hasAlignedHourOffset":function(e){return e=e?nt(e).zone():0,(this.zone()-e)%60===0},"daysInMonth":function(){return y(this.year(),this.month())},"dayOfYear":function(e){var t=ot((nt(this).startOf("day")-nt(this).startOf("year"))/864e5)+1;return null==e?t:this.add("d",e-t)},"quarter":function(){return Math.ceil((this.month()+1)/3)},"weekYear":function(e){var t=K(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==e?t:this.add("y",e-t)},"isoWeekYear":function(e){var t=K(this,1,4).year;return null==e?t:this.add("y",e-t)},"week":function(e){var t=this.lang().week(this);return null==e?t:this.add("d",7*(e-t))},"isoWeek":function(e){var t=K(this,1,4).week;return null==e?t:this.add("d",7*(e-t))},"weekday":function(e){var t=(this.day()+7-this.lang()._week.dow)%7;return null==e?t:this.add("d",e-t)},"isoWeekday":function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},"get":function(e){return e=g(e),this[e]()},"set":function(e,t){return e=g(e),"function"==typeof this[e]&&this[e](t),this},"lang":function(t){return t===e?this._lang:(this._lang=L(t),this)}}),at=0;at<Ht.length;at++)Z(Ht[at].toLowerCase().replace(/s$/,""),Ht[at]);Z("year","FullYear"),nt.fn.days=nt.fn.day,nt.fn.months=nt.fn.month,nt.fn.weeks=nt.fn.week,nt.fn.isoWeeks=nt.fn.isoWeek,nt.fn.toJSON=nt.fn.toISOString,o(nt.duration.fn=r.prototype,{"_bubble":function(){var e,t,i,n,a=this._milliseconds,s=this._days,r=this._months,o=this._data;o.milliseconds=a%1e3,e=c(a/1e3),o.seconds=e%60,t=c(e/60),o.minutes=t%60,i=c(t/60),o.hours=i%24,s+=c(i/24),o.days=s%30,r+=c(s/30),o.months=r%12,n=c(r/12),o.years=n},"weeks":function(){return c(this.days()/7)},"valueOf":function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*_(this._months/12)},"humanize":function(e){var t=+this,i=J(t,!e,this.lang());return e&&(i=this.lang().pastFuture(t,i)),this.lang().postformat(i)},"add":function(e,t){var i=nt.duration(e,t);return this._milliseconds+=i._milliseconds,this._days+=i._days,this._months+=i._months,this._bubble(),this},"subtract":function(e,t){var i=nt.duration(e,t);return this._milliseconds-=i._milliseconds,this._days-=i._days,this._months-=i._months,this._bubble(),this},"get":function(e){return e=g(e),this[e.toLowerCase()+"s"]()},"as":function(e){return e=g(e),this["as"+e.charAt(0).toUpperCase()+e.slice(1)+"s"]()},"lang":nt.fn.lang,"toIsoString":function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),i=Math.abs(this.days()),n=Math.abs(this.hours()),a=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(i?i+"D":"")+(n||a||s?"T":"")+(n?n+"H":"")+(a?a+"M":"")+(s?s+"S":""):"P0D"}});for(at in zt)zt.hasOwnProperty(at)&&(tt(at,zt[at]),et(at.toLowerCase()));tt("Weeks",6048e5),nt.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},nt.lang("en",{"ordinal":function(e){var t=e%10,i=1===_(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+i}}),vt?(module.exports=nt,it(!0)):"function"==typeof define&&define.amd?define("moment",function(t,i,n){return n.config&&n.config()&&n.config().noGlobal!==!0&&it(n.config().noGlobal===e),nt}):it()}.call(this),function(e){"function"==typeof define&&define.amd?define(["moment"],e):"object"==typeof exports?module.exports=e(require("../moment")):e(window.moment)}(function(e){function t(e,t,i){var n={"m":["eine Minute","einer Minute"],"h":["eine Stunde","einer Stunde"],"d":["ein Tag","einem Tag"],"dd":[e+" Tage",e+" Tagen"],"M":["ein Monat","einem Monat"],"MM":[e+" Monate",e+" Monaten"],"y":["ein Jahr","einem Jahr"],"yy":[e+" Jahre",e+" Jahren"]};return t?n[i][0]:n[i][1]}return e.lang("de",{"months":"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),"monthsShort":"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),"weekdays":"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),"weekdaysShort":"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),"weekdaysMin":"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),"longDateFormat":{"LT":"H:mm [Uhr]","L":"DD.MM.YYYY","LL":"D. MMMM YYYY","LLL":"D. MMMM YYYY LT","LLLL":"dddd, D. MMMM YYYY LT"},"calendar":{"sameDay":"[Heute um] LT","sameElse":"L","nextDay":"[Morgen um] LT","nextWeek":"dddd [um] LT","lastDay":"[Gestern um] LT","lastWeek":"[letzten] dddd [um] LT"},"relativeTime":{"future":"in %s","past":"vor %s","s":"ein paar Sekunden","m":t,"mm":"%d Minuten","h":t,"hh":"%d Stunden","d":t,"dd":t,"M":t,"MM":t,"y":t,"yy":t},"ordinal":"%d.","week":{"dow":1,"doy":4}})}),function(e){"function"==typeof define&&define.amd?define(["moment"],e):"object"==typeof exports?module.exports=e(require("../moment")):e(window.moment)}(function(e){return e.lang("es",{"months":"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),"monthsShort":"ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),"weekdays":"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),"weekdaysShort":"dom._lun._mar._mi._jue._vie._sb.".split("_"),"weekdaysMin":"Do_Lu_Ma_Mi_Ju_Vi_S".split("_"),"longDateFormat":{"LT":"H:mm","L":"DD/MM/YYYY","LL":"D [de] MMMM [de] YYYY","LLL":"D [de] MMMM [de] YYYY LT","LLLL":"dddd, D [de] MMMM [de] YYYY LT"},"calendar":{"sameDay":function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},"nextDay":function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},"nextWeek":function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},"lastDay":function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},"lastWeek":function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},"sameElse":"L"},"relativeTime":{"future":"en %s","past":"hace %s","s":"unos segundos","m":"un minuto","mm":"%d minutos","h":"una hora","hh":"%d horas","d":"un da","dd":"%d das","M":"un mes","MM":"%d meses","y":"un ao","yy":"%d aos"},"ordinal":"%d","week":{"dow":1,"doy":4}})}),function(e){"function"==typeof define&&define.amd?define(["moment"],e):"object"==typeof exports?module.exports=e(require("../moment")):e(window.moment)}(function(e){return e.lang("fr-ca",{"months":"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),"monthsShort":"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),"weekdays":"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),"weekdaysShort":"dim._lun._mar._mer._jeu._ven._sam.".split("_"),"weekdaysMin":"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),"longDateFormat":{"LT":"HH:mm","L":"YYYY-MM-DD","LL":"D MMMM YYYY","LLL":"D MMMM YYYY LT","LLLL":"dddd D MMMM YYYY LT"},"calendar":{"sameDay":"[Aujourd'hui ] LT","nextDay":"[Demain ] LT","nextWeek":"dddd [] LT","lastDay":"[Hier ] LT","lastWeek":"dddd [dernier ] LT","sameElse":"L"},"relativeTime":{"future":"dans %s","past":"il y a %s","s":"quelques secondes","m":"une minute","mm":"%d minutes","h":"une heure","hh":"%d heures","d":"un jour","dd":"%d jours","M":"un mois","MM":"%d mois","y":"un an","yy":"%d ans"},"ordinal":function(e){return e+(1===e?"er":"")}})}),function(e){"function"==typeof define&&define.amd?define(["moment"],e):"object"==typeof exports?module.exports=e(require("../moment")):e(window.moment)}(function(e){return e.lang("fr",{"months":"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),"monthsShort":"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),"weekdays":"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),"weekdaysShort":"dim._lun._mar._mer._jeu._ven._sam.".split("_"),"weekdaysMin":"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),"longDateFormat":{"LT":"HH:mm","L":"DD/MM/YYYY","LL":"D MMMM YYYY","LLL":"D MMMM YYYY LT","LLLL":"dddd D MMMM YYYY LT"},"calendar":{"sameDay":"[Aujourd'hui ] LT","nextDay":"[Demain ] LT","nextWeek":"dddd [] LT","lastDay":"[Hier ] LT","lastWeek":"dddd [dernier ] LT","sameElse":"L"},"relativeTime":{"future":"dans %s","past":"il y a %s","s":"quelques secondes","m":"une minute","mm":"%d minutes","h":"une heure","hh":"%d heures","d":"un jour","dd":"%d jours","M":"un mois","MM":"%d mois","y":"un an","yy":"%d ans"},"ordinal":function(e){return e+(1===e?"er":"")},"week":{"dow":1,"doy":4}})}),function(e){"function"==typeof define&&define.amd?define(["moment"],e):"object"==typeof exports?module.exports=e(require("../moment")):e(window.moment)}(function(e){return e.lang("it",{"months":"Gennaio_Febbraio_Marzo_Aprile_Maggio_Giugno_Luglio_Agosto_Settembre_Ottobre_Novembre_Dicembre".split("_"),"monthsShort":"Gen_Feb_Mar_Apr_Mag_Giu_Lug_Ago_Set_Ott_Nov_Dic".split("_"),"weekdays":"Domenica_Luned_Marted_Mercoled_Gioved_Venerd_Sabato".split("_"),"weekdaysShort":"Dom_Lun_Mar_Mer_Gio_Ven_Sab".split("_"),"weekdaysMin":"D_L_Ma_Me_G_V_S".split("_"),"longDateFormat":{"LT":"HH:mm","L":"DD/MM/YYYY","LL":"D MMMM YYYY","LLL":"D MMMM YYYY LT","LLLL":"dddd, D MMMM YYYY LT"},"calendar":{"sameDay":"[Oggi alle] LT","nextDay":"[Domani alle] LT","nextWeek":"dddd [alle] LT","lastDay":"[Ieri alle] LT","lastWeek":"[lo scorso] dddd [alle] LT","sameElse":"L"},"relativeTime":{"future":function(e){return(/^[0-9].+$/.test(e)?"tra":"in")+" "+e},"past":"%s fa","s":"alcuni secondi","m":"un minuto","mm":"%d minuti","h":"un'ora","hh":"%d ore","d":"un giorno","dd":"%d giorni","M":"un mese","MM":"%d mesi","y":"un anno","yy":"%d anni"},"ordinal":"%d","week":{"dow":1,"doy":4}})}),function(e){"function"==typeof define&&define.amd?define(["moment"],e):"object"==typeof exports?module.exports=e(require("../moment")):e(window.moment)}(function(e){return e.lang("ja",{"months":"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),"monthsShort":"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),"weekdays":"______".split("_"),"weekdaysShort":"______".split("_"),"weekdaysMin":"______".split("_"),"longDateFormat":{"LT":"Ahm","L":"YYYY/MM/DD","LL":"YYYYMD","LLL":"YYYYMDLT","LLLL":"YYYYMDLT dddd"},"meridiem":function(e){return 12>e?"":""},"calendar":{"sameDay":"[] LT","nextDay":"[] LT","nextWeek":"[]dddd LT","lastDay":"[] LT","lastWeek":"[]dddd LT","sameElse":"L"},"relativeTime":{"future":"%s","past":"%s","s":"","m":"1","mm":"%d","h":"1","hh":"%d","d":"1","dd":"%d","M":"1","MM":"%d","y":"1","yy":"%d"}})}),function(e){"function"==typeof define&&define.amd?define(["moment"],e):"object"==typeof exports?module.exports=e(require("../moment")):e(window.moment)}(function(e){return e.lang("ko",{"months":"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),"monthsShort":"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),"weekdays":"______".split("_"),"weekdaysShort":"______".split("_"),"weekdaysMin":"______".split("_"),"longDateFormat":{"LT":"A h mm","L":"YYYY.MM.DD","LL":"YYYY MMMM D","LLL":"YYYY MMMM D LT","LLLL":"YYYY MMMM D dddd LT"},"meridiem":function(e){return 12>e?"":""},"calendar":{"sameDay":" LT","nextDay":" LT","nextWeek":"dddd LT","lastDay":" LT","lastWeek":" dddd LT","sameElse":"L"},"relativeTime":{"future":"%s ","past":"%s ","s":"","ss":"%d","m":"","mm":"%d","h":"","hh":"%d","d":"","dd":"%d","M":"","MM":"%d","y":"","yy":"%d"},"ordinal":"%d","meridiemParse":/(|)/,"isPM":function(e){return""===e}})}),function(e){"function"==typeof define&&define.amd?define(["moment"],e):"object"==typeof exports?module.exports=e(require("../moment")):e(window.moment)}(function(e){var t="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),i="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_");return e.lang("nl",{"months":"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),"monthsShort":function(e,n){return/-MMM-/.test(n)?i[e.month()]:t[e.month()]},"weekdays":"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),"weekdaysShort":"zo._ma._di._wo._do._vr._za.".split("_"),"weekdaysMin":"Zo_Ma_Di_Wo_Do_Vr_Za".split("_"),"longDateFormat":{"LT":"HH:mm","L":"DD-MM-YYYY","LL":"D MMMM YYYY","LLL":"D MMMM YYYY LT","LLLL":"dddd D MMMM YYYY LT"},"calendar":{"sameDay":"[vandaag om] LT","nextDay":"[morgen om] LT","nextWeek":"dddd [om] LT","lastDay":"[gisteren om] LT","lastWeek":"[afgelopen] dddd [om] LT","sameElse":"L"},"relativeTime":{"future":"over %s","past":"%s geleden","s":"een paar seconden","m":"n minuut","mm":"%d minuten","h":"n uur","hh":"%d uur","d":"n dag","dd":"%d dagen","M":"n maand","MM":"%d maanden","y":"n jaar","yy":"%d jaar"},"ordinal":function(e){return e+(1===e||8===e||e>=20?"ste":"de")},"week":{"dow":1,"doy":4}})}),function(e){"function"==typeof define&&define.amd?define(["moment"],e):"object"==typeof exports?module.exports=e(require("../moment")):e(window.moment)}(function(e){function t(e){return 5>e%10&&e%10>1&&~~(e/10)%10!==1}function i(e,i,n){var a=e+" ";switch(n){case"m":return i?"minuta":"minut";case"mm":return a+(t(e)?"minuty":"minut");case"h":return i?"godzina":"godzin";case"hh":return a+(t(e)?"godziny":"godzin");case"MM":return a+(t(e)?"miesice":"miesicy");case"yy":return a+(t(e)?"lata":"lat")}}var n="stycze_luty_marzec_kwiecie_maj_czerwiec_lipiec_sierpie_wrzesie_padziernik_listopad_grudzie".split("_"),a="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrzenia_padziernika_listopada_grudnia".split("_");return e.lang("pl",{"months":function(e,t){return/D MMMM/.test(t)?a[e.month()]:n[e.month()]},"monthsShort":"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa_lis_gru".split("_"),"weekdays":"niedziela_poniedziaek_wtorek_roda_czwartek_pitek_sobota".split("_"),"weekdaysShort":"nie_pon_wt_r_czw_pt_sb".split("_"),"weekdaysMin":"N_Pn_Wt_r_Cz_Pt_So".split("_"),"longDateFormat":{"LT":"HH:mm","L":"DD.MM.YYYY","LL":"D MMMM YYYY","LLL":"D MMMM YYYY LT","LLLL":"dddd, D MMMM YYYY LT"},"calendar":{"sameDay":"[Dzi o] LT","nextDay":"[Jutro o] LT","nextWeek":"[W] dddd [o] LT","lastDay":"[Wczoraj o] LT","lastWeek":function(){switch(this.day()){case 0:return"[W zesz niedziel o] LT";case 3:return"[W zesz rod o] LT";case 6:return"[W zesz sobot o] LT";default:return"[W zeszy] dddd [o] LT"}},"sameElse":"L"},"relativeTime":{"future":"za %s","past":"%s temu","s":"kilka sekund","m":i,"mm":i,"h":i,"hh":i,"d":"1 dzie","dd":"%d dni","M":"miesic","MM":i,"y":"rok","yy":i},"ordinal":"%d.","week":{"dow":1,"doy":4}})}),function(e){"function"==typeof define&&define.amd?define(["moment"],e):"object"==typeof exports?module.exports=e(require("../moment")):e(window.moment)}(function(e){return e.lang("pt-br",{"months":"Janeiro_Fevereiro_Maro_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),"monthsShort":"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),"weekdays":"Domingo_Segunda-feira_Tera-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sbado".split("_"),"weekdaysShort":"Dom_Seg_Ter_Qua_Qui_Sex_Sb".split("_"),"weekdaysMin":"Dom_2_3_4_5_6_Sb".split("_"),"longDateFormat":{"LT":"HH:mm","L":"DD/MM/YYYY","LL":"D [de] MMMM [de] YYYY","LLL":"D [de] MMMM [de] YYYY LT","LLLL":"dddd, D [de] MMMM [de] YYYY LT"},"calendar":{"sameDay":"[Hoje s] LT","nextDay":"[Amanh s] LT","nextWeek":"dddd [s] LT","lastDay":"[Ontem s] LT","lastWeek":function(){return 0===this.day()||6===this.day()?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},"sameElse":"L"},"relativeTime":{"future":"em %s","past":"%s atrs","s":"segundos","m":"um minuto","mm":"%d minutos","h":"uma hora","hh":"%d horas","d":"um dia","dd":"%d dias","M":"um ms","MM":"%d meses","y":"um ano","yy":"%d anos"},"ordinal":"%d"})}),function(e){"function"==typeof define&&define.amd?define(["moment"],e):"object"==typeof exports?module.exports=e(require("../moment")):e(window.moment)}(function(e){return e.lang("pt",{"months":"Janeiro_Fevereiro_Maro_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),"monthsShort":"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),"weekdays":"Domingo_Segunda-feira_Tera-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sbado".split("_"),"weekdaysShort":"Dom_Seg_Ter_Qua_Qui_Sex_Sb".split("_"),"weekdaysMin":"Dom_2_3_4_5_6_Sb".split("_"),"longDateFormat":{"LT":"HH:mm","L":"DD/MM/YYYY","LL":"D [de] MMMM [de] YYYY","LLL":"D [de] MMMM [de] YYYY LT","LLLL":"dddd, D [de] MMMM [de] YYYY LT"},"calendar":{"sameDay":"[Hoje s] LT","nextDay":"[Amanh s] LT","nextWeek":"dddd [s] LT","lastDay":"[Ontem s] LT","lastWeek":function(){return 0===this.day()||6===this.day()?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"
},"sameElse":"L"},"relativeTime":{"future":"em %s","past":"%s atrs","s":"segundos","m":"um minuto","mm":"%d minutos","h":"uma hora","hh":"%d horas","d":"um dia","dd":"%d dias","M":"um ms","MM":"%d meses","y":"um ano","yy":"%d anos"},"ordinal":"%d","week":{"dow":1,"doy":4}})}),function(e){"function"==typeof define&&define.amd?define(["moment"],e):"object"==typeof exports?module.exports=e(require("../moment")):e(window.moment)}(function(e){function t(e,t){var i=e.split("_");return t%10===1&&t%100!==11?i[0]:t%10>=2&&4>=t%10&&(10>t%100||t%100>=20)?i[1]:i[2]}function i(e,i,n){var a={"mm":"__","hh":"__","dd":"__","MM":"__","yy":"__"};return"m"===n?i?"":"":e+" "+t(a[n],+e)}function n(e,t){var i={"nominative":"___________".split("_"),"accusative":"___________".split("_")},n=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(t)?"accusative":"nominative";return i[n][e.month()]}function a(e,t){var i={"nominative":"___________".split("_"),"accusative":"___________".split("_")},n=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(t)?"accusative":"nominative";return i[n][e.month()]}function s(e,t){var i={"nominative":"______".split("_"),"accusative":"______".split("_")},n=/\[ ?[] ?(?:|)? ?\] ?dddd/.test(t)?"accusative":"nominative";return i[n][e.day()]}return e.lang("ru",{"months":n,"monthsShort":a,"weekdays":s,"weekdaysShort":"______".split("_"),"weekdaysMin":"______".split("_"),"monthsParse":[/^/i,/^/i,/^/i,/^/i,/^[|]/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],"longDateFormat":{"LT":"HH:mm","L":"DD.MM.YYYY","LL":"D MMMM YYYY .","LLL":"D MMMM YYYY ., LT","LLLL":"dddd, D MMMM YYYY ., LT"},"calendar":{"sameDay":"[ ] LT","nextDay":"[ ] LT","lastDay":"[ ] LT","nextWeek":function(){return 2===this.day()?"[] dddd [] LT":"[] dddd [] LT"},"lastWeek":function(){switch(this.day()){case 0:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT";case 3:case 5:case 6:return"[ ] dddd [] LT"}},"sameElse":"L"},"relativeTime":{"future":" %s","past":"%s ","s":" ","m":i,"mm":i,"h":"","hh":i,"d":"","dd":i,"M":"","MM":i,"y":"","yy":i},"meridiem":function(e){return 4>e?"":12>e?"":17>e?"":""},"ordinal":function(e,t){switch(t){case"M":case"d":case"DDD":return e+"-";case"D":return e+"-";case"w":case"W":return e+"-";default:return e}},"week":{"dow":1,"doy":7}})}),function(e){"function"==typeof define&&define.amd?define(["moment"],e):"object"==typeof exports?module.exports=e(require("../moment")):e(window.moment)}(function(e){return e.lang("zh-cn",{"months":"___________".split("_"),"monthsShort":"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),"weekdays":"______".split("_"),"weekdaysShort":"______".split("_"),"weekdaysMin":"______".split("_"),"longDateFormat":{"LT":"Ahmm","L":"YYYY-MM-DD","LL":"YYYYMMMD","LLL":"YYYYMMMDLT","LLLL":"YYYYMMMDddddLT","l":"YYYY-MM-DD","ll":"YYYYMMMD","lll":"YYYYMMMDLT","llll":"YYYYMMMDddddLT"},"meridiem":function(e,t){var i=100*e+t;return 600>i?"":900>i?"":1130>i?"":1230>i?"":1800>i?"":""},"calendar":{"sameDay":function(){return 0===this.minutes()?"[]Ah[]":"[]LT"},"nextDay":function(){return 0===this.minutes()?"[]Ah[]":"[]LT"},"lastDay":function(){return 0===this.minutes()?"[]Ah[]":"[]LT"},"nextWeek":function(){var t,i;return t=e().startOf("week"),i=this.unix()-t.unix()>=604800?"[]":"[]",0===this.minutes()?i+"dddAh":i+"dddAhmm"},"lastWeek":function(){var t,i;return t=e().startOf("week"),i=this.unix()<t.unix()?"[]":"[]",0===this.minutes()?i+"dddAh":i+"dddAhmm"},"sameElse":"LL"},"ordinal":function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},"relativeTime":{"future":"%s","past":"%s","s":"","m":"1","mm":"%d","h":"1","hh":"%d","d":"1","dd":"%d","M":"1","MM":"%d","y":"1","yy":"%d"},"week":{"dow":1,"doy":4}})}),function(e){"function"==typeof define&&define.amd?define(["moment"],e):"object"==typeof exports?module.exports=e(require("../moment")):e(window.moment)}(function(e){return e.lang("zh-tw",{"months":"___________".split("_"),"monthsShort":"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),"weekdays":"______".split("_"),"weekdaysShort":"______".split("_"),"weekdaysMin":"______".split("_"),"longDateFormat":{"LT":"Ahmm","L":"YYYYMMMD","LL":"YYYYMMMD","LLL":"YYYYMMMDLT","LLLL":"YYYYMMMDddddLT","l":"YYYYMMMD","ll":"YYYYMMMD","lll":"YYYYMMMDLT","llll":"YYYYMMMDddddLT"},"meridiem":function(e,t){var i=100*e+t;return 900>i?"":1130>i?"":1230>i?"":1800>i?"":""},"calendar":{"sameDay":"[]LT","nextDay":"[]LT","nextWeek":"[]ddddLT","lastDay":"[]LT","lastWeek":"[]ddddLT","sameElse":"L"},"ordinal":function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},"relativeTime":{"future":"%s","past":"%s","s":"","m":"","mm":"%d","h":"","hh":"%d","d":"","dd":"%d","M":"","MM":"%d","y":"","yy":"%d"}})}),e.prototype={"nonanimationtimer":null,"show":function(e){var t=this;this.obj||(this.obj=$('<div class="pkt_toast_wrapper"><div class="pkt_toast"></div></div>'),$(document.body).append(this.obj)),this.obj.show(),this.toastdetail=this.obj.find(".pkt_toast"),window.getComputedStyle(this.toastdetail[0]).opacity;var i=!1;this.toastdetail.hasClass("pkt_toast_active")?(i=!0,this.toastdetail.text(e)):this.toastdetail.text(e).addClass("pkt_toast_active"),i?(this.toastdetail.removeClass("pkt_toast_active"),this.toastdetail[0].offsetWidth=this.toastdetail[0].offsetWidth,this.toastdetail.addClass("pkt_toast_active_alt")):this.toastdetail.one("webkitAnimationEnd animationend msAnimationEnd oAnimationEnd",function(){t.hide()})},"hide":function(){var e=this;this.obj&&(e.toastdetail.addClass("pkt_toast_inactive"),e.toastdetail.one("webkitAnimationEnd animationend msAnimationEnd oAnimationEnd",function(){e.toastdetail.removeClass("pkt_toast_active pkt_toast_inactive"),e.obj.hide()}))}};var gt=new e;!function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Spinner=t()}(this,function(){"use strict";function e(e,t){var i,n=document.createElement(e||"div");for(i in t)n[i]=t[i];return n}function t(e){for(var t=1,i=arguments.length;i>t;t++)e.appendChild(arguments[t]);return e}function i(e,t,i,n){{var a=["opacity",t,~~(100*e),i,n].join("-"),s=.01+i/n*100;Math.max(1-(1-e)/t*(100-s),e),u.substring(0,u.indexOf("Animation")).toLowerCase()}return h[a]||(h[a]=1),a}function n(e,t){var i,n,a=e.style;if("animation"==t&&void 0!==a["-webkit-animation"])return"-webkit-animation";if(void 0!==a[t])return t;for(t=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<d.length;n++)if(i=d[n]+t,void 0!==a[i])return i}function a(e,t){for(var i in t)e.style[n(e,i)||i]=t[i];return e}function s(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)void 0===e[n]&&(e[n]=i[n])}return e}function r(e){for(var t={"x":e.offsetLeft,"y":e.offsetTop};e=e.offsetParent;)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}function o(e,t){return"string"==typeof e?e:e[t%e.length]}function l(e){return"undefined"==typeof this?new l(e):(this.opts=s(e||{},l.defaults,p),void 0)}function c(){function i(t,i){return e("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',i)}f.addRule(".spin-vml","behavior:url(#default#VML)"),l.prototype.lines=function(e,n){function s(){return a(i("group",{"coordsize":u+" "+u,"coordorigin":-c+" "+-c}),{"width":u,"height":u})}function r(e,r,l){t(h,t(a(s(),{"rotation":360/n.lines*e+"deg","left":~~r}),t(a(i("roundrect",{"arcsize":n.corners}),{"width":c,"height":n.width,"left":n.radius,"top":-n.width>>1,"filter":l}),i("fill",{"color":o(n.color,e),"opacity":n.opacity}),i("stroke",{"opacity":0}))))}var l,c=n.length+n.width,u=2*c,d=2*-(n.width+n.length)+"px",h=a(s(),{"position":"absolute","top":d,"left":d});if(n.shadow)for(l=1;l<=n.lines;l++)r(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=n.lines;l++)r(l);return t(e,h)},l.prototype.opacity=function(e,t,i,n){var a=e.firstChild;n=n.shadow&&n.lines||0,a&&t+n<a.childNodes.length&&(a=a.childNodes[t+n],a=a&&a.firstChild,a=a&&a.firstChild,a&&(a.opacity=i))}}var u,d=["webkit","Moz","ms","O"],h={},f=function(){var i=e("style",{"type":"text/css"});return t(document.getElementsByTagName("head")[0],i),i.sheet||i.styleSheet}(),p={"lines":12,"length":7,"width":5,"radius":10,"rotate":0,"corners":1,"color":"#000","direction":1,"speed":1,"trail":100,"opacity":.25,"fps":20,"zIndex":2e9,"className":"spinner","top":"auto","left":"auto","position":"relative"};l.defaults={},s(l.prototype,{"spin":function(t){this.stop();var i,n,s=this,o=s.opts,l=s.el=a(e(0,{"className":o.className}),{"position":o.position,"width":0,"zIndex":o.zIndex}),c=o.radius+o.length+o.width;if(t&&(t.insertBefore(l,t.firstChild||null),n=r(t),i=r(l),a(l,{"left":("auto"==o.left?n.x-i.x+(t.offsetWidth>>1):parseInt(o.left,10)+c)+"px","top":("auto"==o.top?n.y-i.y+(t.offsetHeight>>1):parseInt(o.top,10)+c)+"px"})),l.setAttribute("role","progressbar"),s.lines(l,s.opts),!u){var d,h=0,f=(o.lines-1)*(1-o.direction)/2,p=o.fps,g=p/o.speed,m=(1-o.opacity)/(g*o.trail/100),v=g/o.lines;!function _(){h++;for(var e=0;e<o.lines;e++)d=Math.max(1-(h+(o.lines-e)*v)%g*m,o.opacity),s.opacity(l,e*o.direction+f,d,o);s.timeout=s.el&&setTimeout(_,~~(1e3/p))}()}return s},"stop":function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=void 0),this},"lines":function(n,s){function r(t,i){return a(e(),{"position":"absolute","width":s.length+s.width+"px","height":s.width+"px","background":t,"boxShadow":i,"transformOrigin":"left","transform":"rotate("+~~(360/s.lines*c+s.rotate)+"deg) translate("+s.radius+"px,0)","borderRadius":(s.corners*s.width>>1)+"px"})}for(var l,c=0,d=(s.lines-1)*(1-s.direction)/2;c<s.lines;c++)l=a(e(),{"position":"absolute","top":1+~(s.width/2)+"px","transform":s.hwaccel?"translate3d(0,0,0)":"","opacity":s.opacity,"animation":u&&i(s.opacity,s.trail,d+c*s.direction,s.lines)+" "+1/s.speed+"s linear infinite"}),s.shadow&&t(l,a(r("#000","0 0 4px #000"),{"top":"2px"})),t(n,t(l,r(o(s.color,c),"0 0 1px rgba(0,0,0,.1)")));return n},"opacity":function(e,t,i){t<e.childNodes.length&&(e.childNodes[t].style.opacity=i)}});var g=a(e("group"),{"behavior":"url(#default#VML)"});return!n(g,"transform")&&g.adj?c():u=n(g,"animation"),l}),PKTBaseURL="https://getpocket.com/v3",PKTConsumerKey="12856-e7368e4763299b3fdcc5e8c5",DEBUG=!1,CACHE_ITEMS=!0,MAX_ITEMS_TO_CACHE=1e3;var mt=Class.extend({"init":function(e){this.logLevel="undefined"!=typeof e?e-1:4,this.logMethods=["error","warn","info","debug","log"],this.createLogMethods()},"setLogLevel":function(e){this.logLevel=e,this.createLogMethods()},"createLogMethods":function(){var e=this,t=window.console;$.each(this.logMethods,function(i,n){!function(i,n){e[i]=function(){e.logLevel>=n&&t&&t[i]&&t[i].apply(t,arguments)}}(n,i)})}});logger=DEBUG?new mt(5):new mt(1);var vt=Class.extend({"init":function(e){var t=this;this.userSettingsKeys=["username","accessToken","firstName","lastName","emailAddress","avatarURL","hasSetAvatar","guid","uid"];var i=this.userSettingsKeys.length,n=0;this.userSettingsKeys.forEach(function(a){d(a,function(s){t[a]=s[a],n+=1,n===i&&e()})})},"setUsername":function(e){this.username=e,u("username",e)},"setAccessToken":function(e){this.accessToken=e,u("accessToken",e)},"setFirstName":function(e){this.firstName=e,u("firstName",e)},"setLastName":function(e){this.lastName=e,u("lastName",e)},"setEmailAddress":function(e){this.emailAddress=e,u("emailAddress",e)},"setAvatarURL":function(e){this.avatarURL=e,u("avatarURL",e)},"setHasSetAvatar":function(e){this.hasSetAvatar=e,u("hasSetAvatar",e)},"setGUI":function(e){this.guid=e,u("guid",e)},"setUID":function(e){this.uid=e,u("uid",e)},"isLoggedIn":function(){return"undefined"!=typeof this.username&&"undefined"!=typeof this.accessToken},"logout":function(){this.userSettingsKeys.forEach(function(e){f(e)}),this.username=void 0,this.accessToken=void 0}}),_t=Class.extend({"init":function(){this.prefix="wa_"},"get":function(e){return this.readCookie(this.prefix+e)},"set":function(e,t){this.createCookie(this.prefix+e,t)},"createCookie":function(e,t,i){if(i){var n=new Date;n.setTime(n.getTime()+24*i*60*60*1e3);var a="; expires="+n.toGMTString()}else var a="";document.cookie=e+"="+t+a+"; path=/"},"readCookie":function(e){for(var t=e+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var a=i[n];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return null},"eraseCookie":function(e){g(e,"",-1)}}),yt=new _t,bt=!1,wt=Class.extend({"init":function(e){this.lis={};var t=this;if(this.callback=e.callback,this.selectCallback=e.selectCallback,this.hideUntilSet=e.hideUntilSet,this.showClass=e.showClass,this.noValChange=e.noValChange,e.nodeName=e.nodeName?e.nodeName:"div",e.useSelectOnIE&&w()){this.ie9Mode=!0;var i=$("<span class='select ie9'><span class='selectLabel'>Newest</span><select style='border: 0px; filter: alpha(opacity=0); width: 140px; height: 26px; position: relative; left: 0px; top: -26px;'></select></span>"),n=i.find("select");for(var a in e.list){var s=$('<option value="'+e.list[a].value+'">'+e.list[a].label+"</option>");this.lis[e.list[a].value]=s.get(0),n.append(s)}i.bind("change",function(e,n){var a=$(this).find("select").val(),s=$(this).find("option[value="+a+"]").text();i.find(".selectLabel").text(s),t.value=a,t.label=s,n!==!1&&t.callback(t)}),this.selector=i,this.selector.addClass("dropSelector"),this.displayer=e.displayer?e.displayer:this.selector,this.displayer.append(this.selector),i.trigger("change",[!1])}else e.object?(this.object=e.object,this.object.addClass("dropSelector"),this.displayer=e.displayer?e.displayer:this.object):(this.object=$("<"+e.nodeName+' id="'+(e.id?e.id:"")+'" class="dropSelector'+(e["class"]?" "+e["class"]:"")+'"></'+e.nodeName+">"),this.displayer=$("<a></a>"),this.object.append(this.displayer));if(this.anchor=e.anchor?e.anchor:this.object,!e.useSelectOnIE||!w()){var r,o=$('<div class="popover-new">'),l=$("<ul>");for(var a in e.list)r=$('<li class="'+e.list[a].value+'" val="'+e.list[a].value+'"><a href="#">'+e.list[a].label+"</a></li>"),this.lis[e.list[a].value]=r.get(0),l.append(r);l.children("li").click(function(e){return e.stopPropagation(),t.select(this)}),this.ul=l,this.popover=o,o.append('<div class="arrow">',l),this.anchor.append(o),e.alignment&&(this.alignment=e.alignment,o.addClass("popover-new-"+e.alignment)),r.addClass("last"),r.hover(function(){t.object.addClass("lastHovered")},function(){t.object.removeClass("lastHovered")}),this.object.click(function(){t.toggle()}),this.hideUntilSet?this.object.hide():this.set(e.list[0].value,!0)}e.append?e.append.append(this.object):e.insertBefore&&this.object.insertBefore(e.insertBefore)},"select":function(e,t){if(this.object.show(),!this.selectCallback||this.selectCallback(this,e)){this.selected&&this.selected.removeClass("selected"),this.selected=$(e),this.selected.addClass("selected"),this.value=this.selected.attr("val");var i=this.selected.children("a").text();this.label=this.value,this.object.toggleClass("lastSelected",this.selected.hasClass("last")),this.displayer.html("<span>"+i+"</span>"),this.displayer[0].className=this.value,t||this.callback(this)}return this.close(),!1},"set":function(e,t){this.ie9Mode?(this.selector.find("select").attr("value",e),this.selector.trigger("change")):this.select(this.lis[e],t)},"toggle":function(){this.popover.hasClass("active")?this.close():this.show()},"show":function(){if(this.alignment&&("bottom"==this.alignment&&this.popover.css({"top":this.displayer.height()+parseInt(this.displayer.css("marginBottom"))+Math.abs(parseInt(this.popover.find(".arrow").css("top")))-5+"px","left":-1*(Math.floor(this.popover.outerWidth()/2)-Math.floor(this.displayer.outerWidth()/2))+"px"}),"bottomright"==this.alignment&&this.popover.css({"top":this.displayer.height()+parseInt(this.displayer.css("marginBottom"))+Math.abs(parseInt(this.popover.find(".arrow").css("top")))-5+"px","left":-1*Math.abs(parseInt(this.popover.find(".arrow").css("left")))+"px"}),"bottomleft"==this.alignment&&this.popover.css({"top":this.displayer.height()+parseInt(this.displayer.css("marginBottom"))+Math.abs(parseInt(this.popover.find(".arrow").css("top")))-5+"px","left":-1*(this.popover.outerWidth()-Math.abs(2*parseInt(this.popover.find(".arrow").css("marginLeft"))))+"px"})),bt){if(bt==this)return;bt.close()}this.popover.addClass("popover-active"),this.showClass&&this.object.addClass(this.showClass),document.getElementById("clickguard")||$("body").prepend('<div id="clickguard" class="clickguard"></div>'),$("#clickguard").show(),setTimeout(function(){$(document).bind("click",bt.close)},10),bt=this},"close":function(){bt&&(bt.popover.removeClass("popover-active"),bt.showClass&&bt.object.removeClass(bt.showClass),$("#clickguard").hide(),$(document).unbind("click",bt.close),bt=!1)}}),St=Class.extend({"init":function(e){this.items=[];this.object=$('<div id="'+(e.id?e.id:"")+'" class="toolbar'+(e["class"]?" "+e["class"]:"")+'"></div>'),this.inner=$('<div class="row"></div>'),this.object.append(this.inner);for(var t,i,n=0;n<e.items.length;n++)i=e.items[n],"custom"==i.type?t=i.item:"spacer"==i.type?t=new $t(i):"element"==i.type?t=new kt(i):"button"==i.type&&(t=new xt(i)),t.object.addClass("item"),this.inner.append(t.object),this.items.push(t);e.append?e.append.append(this.object):e.insertBefore&&this.object.insertBefore(e.insertBefore)}}),Tt={},kt=Class.extend({"init":function(e){e.object&&(this.object=e.object),e.label&&this.setLabel(e.label)},"setLabel":function(e){if(!this.label){var t=$('<div style="position:relative"></div>');t.append(this.object.children()),this.object.append(t),this.label=$('<span class="label"></span>'),t.append(this.label)}this.label.text(e)}}),xt=kt.extend({"init":function(e){var t=this;this.callback=e.callback,this.object=$('<div id="'+(e.id?e.id:"")+'" class="buttonItem '+(e["class"]?" "+e["class"]:"")+'"><a '+(e.title?'title="'+e.title+'"':"")+' class="button">'+e.text+"</a></div>"),this.object.find(".button").click(function(){t.clicked()}),this._super(e)},"clicked":function(){this.callback&&this.callback()}}),Ct=kt.extend({"init":function(e){var t=this;this.callback=e.callback,e.id&&(Tt[e.id]=t),this.object=$('<a id="'+(e.id?e.id:"")+'" '+(e.title?'title="'+e.title+'"':"")+' class="toolbarButton edge '+(e["class"]?" "+e["class"]:"")+'"></a>');var i=$('<div class="cell"></div>'),n=$('<span class="section edge"><span class="img"></span></span>'),a=$('<span class="section inner"></span');e.left?(i.append(n),i.append(a),this.object.addClass("left")):(i.append(a),i.append(n)),this.object.append(i),this.inner=a,e.img&&this.inner.append('<img src="/a/i/'+e.img+'" align="middle" />'),e.text&&this.inner.append(e.text),this.object.click(function(){t.clicked()}),this._super(e)},"clicked":function(){this.callback&&this.callback(this)}}),Dt=Ct.extend({"init":function(e){this._super(e),this.on=e.on,this.on&&this.object.addClass("on")},"clicked":function(){this.set(!this.on)},"set":function(e,t){this.on=e,this.object.toggleClass("on",e),!t&&this.callback&&this.callback(this)}}),Lt=kt.extend({"init":function(e){this.value=-1;var t=this;this.callback=e.callback,this.object=$('<div id="'+(e.id?e.id:"")+'" class="toolbarButton segmentControl'+(e["class"]?" "+e["class"]:"")+'" style="width:'+(45*e.items.length-2)+'px"></div>');var i;this.segments={},this.keys=[];for(var n=0;n<e.items.length;n++)i=$("<a "+(e.items[n].title?'title="'+e.items[n].title+'"':"")+' class="section segment '+e.items[n]["class"]+'" i="'+n+'"><span class="inner"></span></a>'),i.click(function(){t.set($(this).attr("i"))}),this.object.append(i),this.segments[n]=i,e.items[n]["class"]&&(this.keys[n]=e.items[n]["class"]);e.label&&this.setLabel(e.label)},"set":function(e,t){e=1*e,this.selected&&this.selected.removeClass("on"),this.value!=e&&e>=0?(this.selected=this.segments[e],this.selected.addClass("on"),this.value=e):this.value=-1,this.callback&&!t&&this.callback(this)},"key":function(){return-1!=this.value?this.keys.length?this.keys[this.value]:this.value:void 0}}),$t=Class.extend({"init":function(e){e||(e={}),this.object=$('<div  class="spacer'+(e["class"]?" "+e["class"]:"")+'" '+(e.width?' style="width:'+e.width+'px"':"")+">&nbsp;</div>")},"setWidth":function(e){e?this.object.css("width",e+"px"):this.object.css("width","auto")}}),It,Mt=Class.extend({"init":function(e,t,i,n){if(this.container=i?i:$("#container"),this.object=$('<div id="'+e+'" class="popover-new">'),this.sizeObject=this.object,this.container.append(this.object),this.arrow=$('<div class="arrow">'),this.object.append(this.arrow,t),n||(n={}),this.positions=n.positions?n.positions:["bottom","bottomright","bottomleft","topleft","topright"],this.onHide=n.onHide,this.onShow=n.onShow,this.hideOnClickInPopover="undefined"==typeof n.hideOnClickInPopover?!0:n.hideOnClickInPopover,this.disableHideOnScroll=n.disableHideOnScroll||!1,this.onlyCentered=n.onlyCentered||!1,this.fixedPosition=n.fixedPosition||!1,this.scrollingIntoView=!1,this.xOffset=n.xOffset?n.xOffset:0,n.smallArrow&&(this.smallArrow=n.smallArrow),n.noClickDismiss&&(this.noClickDismiss=n.noClickDismiss),n.confirmCallback&&(this.confirmCallback=n.confirmCallback),n.confirmButton){this.confirmButton=n.confirmButton,this.object.append('<div class="button_container"><a class="button button-secondary button-small" href="#">Ok</a></div>');var a=this;this.object.find(".button").click(function(e){e.preventDefault(),"object"==typeof It&&It.hideOpenPopover(),a.confirmCallback&&a.confirmCallback()})}},"show":function(e){if(this.anchor=e,e){this.object.removeClass("popover-new-topleft popover-new-topright popover-new-bottomleft popover-new-bottomright popover-new-bottom popover-new-left popover-new-top popover-new-right");var t=this.object.css("display");if(this.object.css("display","block"),this.popupSize=ot(this.sizeObject),this.object.css("display",t),this.viewPort=ot($(window)),this.viewPort.headersHeight=$("header").height(),this.viewPort.footersHeight=$("footer").height(),this.viewPort.height=this.viewPort.height-this.viewPort.headersHeight-this.viewPort.footersHeight,this.viewPort.top=$(window).scrollTop()+this.viewPort.headersHeight,this.viewPort.bottom=this.viewPort.top+this.viewPort.height,this.viewPort.left=0,this.viewPort.right=this.viewPort.width,this.documentSize=ot($(document)),this.anchorPosition=e.offset(),this.anchorSize={"width":e.width(),"height":e.height()},this.arrowSize={"width":38,"height":20},this.smallArrow&&(this.arrowSize={"width":26,"height":12}),this.fixedPosition?this.object.addClass("popover-new-fixed"):this.object.removeClass("popover-new-fixed"),this.position=!1,this.offset=!1,this.fallbackScrollInto=!1,!this.onlyCentered)for(var i in this.positions)if(this.tryPosition(this.positions[i]))break;if(this.onlyCentered||!this.position&&!this.fallbackScrollInto){this.object.addClass("centered");var n=Math.round(this.viewPort.width/2-this.popupSize.width/2),a=this.viewPort.headersHeight+this.viewPort.top+Math.round(this.viewPort.height/2-this.popupSize.height/2);this.object.css("left",n+"px"),this.object.css("top",a+"px")}else this.fixedPosition&&(this.offset.top-=$(window).scrollTop()),this.object.css("left",this.offset.left+"px").css("top",this.offset.top+1+"px"),this.object.addClass(this.position?this.position:this.fallbackScrollInto),this.object.removeClass("centered"),!this.position&&this.fallbackScrollInto&&this.scrollToPopup();this.showAll()}else this.hideAll()},"scrollToPopup":function(){var e=0,t=this.offset.bottom-this.viewPort.bottom,i=this.offset.top-this.viewPort.top;e=this.offset.top>this.viewPort.top&&this.offset.top<this.viewPort.bottom?t:this.offset.bottom>this.viewPort.top&&this.offset.bottom<this.viewPort.bottom?i:Math.abs(t)<Math.abs(i)?t:i;var n=this;this.scrollingIntoView=!0,$("html, body").animate({"scrollTop":this.viewPort.top-this.viewPort.headersHeight+e},500,function(){setTimeout(function(){n.scrollingIntoView=!1},50)})},"showAll":function(){It&&this!==It&&It.hideAll(),It=this,this.clickGuard||(this.clickGuard=$('<div class="clickguard"></div>'),this.container.append(this.clickGuard),It.noClickDismiss||this.clickGuard.click(It.hideOpenPopover)),setTimeout(function(){It.noClickDismiss||$(document).bind("click",It.hideOpenPopover)},10),$(window).bind("scroll",It.onScroll),this.object.addClass("popover-active"),this.clickGuard.show(),this.object.addClass("shown"),this.onShow&&this.onShow()},"hideAll":function(){this.object.removeClass("popover-active"),this.clickGuard&&this.clickGuard.hide(),$(document).unbind("click",It.hideOpenPopover),$(window).unbind("scroll",It.onScroll),It=!1,this.onHide&&this.onHide()},"hideOpenPopover":function(e){if(It){if(!It.hideOnClickInPopover&&"undefined"!=typeof e&&0!==$(It.object).find(e.target).length)return;It.hideAll()}},"onScroll":function(){It.scrollingIntoView||It.disableHideOnScroll||It.hideOpenPopover()},"tryPosition":function(e){return this["try_"+e]()},"fits":function(e){return e.top>this.viewPort.top&&e.bottom<this.viewPort.bottom&&e.left+this.xOffset>0&&e.right+this.xOffset<this.viewPort.right},"canScrollIntoView":function(e){return this.fallbackScrollInto?void 0:e.top>this.viewPort.headersHeight&&e.bottom<this.documentSize.height-this.viewPort.footersHeight&&e.left+this.xOffset>0&&e.right+this.xOffset<this.documentSize.width},"try_bottom":function(){var e,t;e=Math.round(this.anchorPosition.left+this.anchorSize.width/2-this.arrowSize.width/6)+this.xOffset,t=Math.round(this.anchorPosition.top+this.arrowSize.height+this.anchorSize.height);var i={"left":e-Math.floor(this.popupSize.width/2),"right":e+Math.ceil(this.popupSize.width/2),"top":t,"bottom":t+this.popupSize.height+this.arrowSize.height};return this.fits(i)?(this.position="popover-new-bottom",this.offset=i,!0):(this.canScrollIntoView(i)&&(this.fallbackScrollInto="popover-new-bottom",this.offset=i),void 0)},"try_bottomright":function(){var e,t;e=Math.round(this.anchorPosition.left-this.arrowSize.width/2-this.arrowSize.width/6)+this.xOffset,t=Math.round(this.anchorPosition.top+this.arrowSize.height+this.anchorSize.height);var i={"left":e,"right":e+this.popupSize.width,"top":t,"bottom":t+this.popupSize.height+this.arrowSize.height};return this.fits(i)?(this.position="popover-new-bottomright",this.offset=i,!0):(this.canScrollIntoView(i)&&(this.fallbackScrollInto="popover-new-bottomright",this.offset=i),void 0)},"try_bottomleft":function(){var e,t;e=Math.round(this.anchorPosition.left+this.anchorSize.width)+this.xOffset,t=Math.round(this.anchorPosition.top+this.arrowSize.height+this.anchorSize.height);var i={"left":e-this.popupSize.width,"right":e,"top":t,"bottom":t+this.popupSize.height+this.arrowSize.height};return this.fits(i)?(this.position="popover-new-bottomleft",this.offset=i,!0):(this.canScrollIntoView(i)&&(this.fallbackScrollInto="popover-new-bottomleft",this.offset=i),void 0)},"try_top":function(){var e,t;e=Math.round(this.anchorPosition.left+this.anchorSize.width/2-this.arrowSize.width/6)+this.xOffset,t=Math.round(this.anchorPosition.top-this.arrowSize.height);var i={"left":e-Math.floor(this.popupSize.width/2),"right":e+Math.ceil(this.popupSize.width/2),"top":t-this.popupSize.height-this.arrowSize.height,"bottom":t};return this.fits(i)?(this.position="popover-new-top",this.offset=i,!0):(this.canScrollIntoView(i)&&(this.fallbackScrollInto="popover-new-top",this.offset=i),void 0)},"try_topleft":function(){var e,t;e=Math.round(this.anchorPosition.left+this.anchorSize.width)+this.xOffset,t=Math.round(this.anchorPosition.top-this.arrowSize.height);var i={"left":e-this.popupSize.width,"right":e,"top":t-this.popupSize.height-this.arrowSize.height,"bottom":t};return this.fits(i)?(this.position="popover-new-topleft",this.offset=i,!0):(this.canScrollIntoView(i)&&(this.fallbackScrollInto="popover-new-topleft",this.offset=i),void 0)},"try_topright":function(){var e,t;e=Math.round(this.anchorPosition.left-this.arrowSize.width/2-this.arrowSize.width/6)+this.xOffset,t=Math.round(this.anchorPosition.top-this.arrowSize.height);var i={"left":e,"right":e+this.popupSize.width,"top":t-this.popupSize.height,"bottom":t};return this.fits(i)?(this.position="popover-new-topright",this.offset=i,!0):(this.canScrollIntoView(i)&&(this.fallbackScrollInto="popover-new-topright",this.offset=i),void 0)},"try_below":function(){var e,t;e=Math.round(this.anchorPosition.left+this.anchorSize.width/2-this.arrowSize.width/6)+this.xOffset,t=Math.round(this.anchorPosition.top+this.anchorSize.height);var i={"left":e-Math.round(this.popupSize.width/2),"right":e+Math.round(this.popupSize.width/2),"top":t,"bottom":t+this.popupSize.height};return this.fits(i)?(this.position="below",this.offset=i,!0):(this.canScrollIntoView(i)&&(this.fallbackScrollInto="below",this.offset=i),void 0)},"try_above":function(){var e,t;e=Math.round(this.anchorPosition.left+this.anchorSize.width/2-this.arrowSize.width/6)+this.xOffset,t=Math.round(this.anchorPosition.top);var i={"left":e-Math.round(this.popupSize.width/2),"right":e+Math.round(this.popupSize.width/2),"top":t-this.popupSize.height,"bottom":t};return this.fits(i)?(this.position="above",this.offset=i,!0):(this.canScrollIntoView(i)&&(this.fallbackScrollInto="above",this.offset=i),void 0)},"try_left":function(){var e,t;e=Math.round(this.anchorPosition.left-this.arrowSize.width/4)+this.xOffset,t=Math.round(this.anchorPosition.top+this.anchorSize.height/2);var i={"left":e-this.popupSize.width,"right":e,"top":t-Math.round(this.popupSize.height/2),"bottom":t+Math.round(this.popupSize.height/2)};return this.fits(i)?(this.position="popover-new-left",this.offset=i,!0):(this.canScrollIntoView(i)&&(this.fallbackScrollInto="popover-new-left",this.offset=i),void 0)},"try_right":function(){var e,t;e=Math.round(this.anchorPosition.left+this.anchorSize.width+this.arrowSize.width/4)+this.xOffset,t=Math.round(this.anchorPosition.top+this.anchorSize.height/2);var i={"left":e,"right":e+this.popupSize.width,"top":t-Math.round(this.popupSize.height/2),"bottom":t+Math.round(this.popupSize.height/2)};return this.fits(i)?(this.position="popover-new-right",this.offset=i,!0):(this.canScrollIntoView(i)&&(this.fallbackScrollInto="popover-new-right",this.offset=i),void 0)}}),At={"overlayDetail":"<p></p>","showing":!1,"hide":function(){if(this.overlayScreen){var e=this;this.overlayScreen.on("webkitTransitionEnd transitionend msTransitionEnd oTransitionEnd",function(t){$(t.target).hasClass("overlay_screen")&&(e.overlayScreen.find(".content_detail_loading").remove(),e.overlayScreen.off("webkitTransitionEnd transitionend msTransitionEnd oTransitionEnd"),e.overlayScreen.hide(),e.showing=!1)}),this.overlayScreen.removeClass("overlay_screen_active")}},"setDetail":function(e){this.overlayDetail=e},"show":function(e){if(this.overlayScreen?this.overlayScreen.show():(this.overlayScreen=$('<div class="overlay_screen"><div class="content_container"><div class="content_detail"></div></div></div>'),$("body").append(this.overlayScreen)),this.overlayScreen.find(".content_container").css("height",$(window).height()+"px"),this.overlayScreen.find(".content_detail").html("").append(this.overlayDetail),e){var t={"lines":13,"length":11,"width":6,"radius":17,"corners":1,"rotate":21,"direction":1,"color":"#fff","speed":1,"trail":60,"shadow":!1,"hwaccel":!1,"className":"content_detail_loading","zIndex":10,"top":"auto","left":"auto"},i=new Spinner(t).spin();
this.overlayScreen.find(".content_detail").prepend(i.el)}this.overlayScreen.addClass("overlay_screen_active"),this.showing=!0}},Et={"show":function(){this.alertPopup||(this.alertPopup=new Mt("alertPopup",'<div class="alert-interior"></div>',$("#container"),{"onHide":function(){},"disableHideOnScroll":!0,"onlyCentered":!0,"hideOnClickInPopover":!1}))}},Pt={"callTrans":function(e,t,i,n){if("object"!=typeof dictJSON)return"";for(var a=e.split("."),s=dictJSON,r=0;r<a.length;r++){if("undefined"==typeof s[a[r]])return"";s=s[a[r]]}if("string"!=typeof s)return"";if("undefined"==typeof t||"undefined"==typeof i||!t||!i)return"undefined"!=typeof n&&n?s.replace(/{(.*)}/i,n):s;if("string"==typeof t)return s.replace(/(\*)(.*)(\*)/i,t+"$2"+i);if("object"==typeof t){for(var r=0;r<t.length;r++)s=s.replace(/(\*)([^\*]*)(\*)/i,t[r]+"$2"+i[r]);return s}}},qt=function(){function e(e){return e&&"string"==typeof e&&(e=escape(e).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),t.innerHTML=e,t.innerText?(e=t.innerText,t.innerText=""):(e=t.textContent,t.textContent="")),unescape(e)}var t=document.createElement("div");return e}(),Ft="0123456789abcdef".split("");"5d41402abc4b2a76b9719d911017c592"!=Y("hello"),function(){function e(e,t){t||(t={});for(var i in e)void 0===t[i]&&(t[i]=e[i]);return t}function t(){this._callbacks=[],this._errCallbacks=[],this._resolved=0,this._result=null}function i(i,n){this.data=i,this.options=e(r,n),this.operation=new t,this.operation.resolve(null,this.data),this.requiredScripts=[],this.requiredFunctions=[]}var n="undefined"!=typeof module&&module.exports,a=a||function(e){setTimeout(e,0)},s=n?require(__dirname+"/Worker.js"):self.Worker;t.prototype.resolve=function(e,t){if(e){this._resolved=2,this._result=e;for(var i=0;i<this._errCallbacks.length;++i)this._errCallbacks[i](t)}else{this._resolved=1,this._result=t;for(var n=0;n<this._callbacks.length;++n)this._callbacks[n](t)}this._callbacks=[],this._errCallbacks=[]},t.prototype.then=function(e,t){return 1===this._resolved?(e&&e(this._result),void 0):2===this._resolved?(t&&t(this._result),void 0):(e&&(this._callbacks[this._callbacks.length]=e),t&&(this._errCallbacks[this._errCallbacks.length]=t),this)};var r={"evalPath":n?__dirname+"/eval.js":null,"maxWorkers":n?require("os").cpus().length:4,"synchronous":!0};i.prototype.getWorkerSource=function(e){var t="",i=0;for(n||0===this.requiredScripts.length||(t+='importScripts("'+this.requiredScripts.join('","')+'");\r\n'),i=0;i<this.requiredFunctions.length;++i)t+=this.requiredFunctions[i].name?"var "+this.requiredFunctions[i].name+" = "+this.requiredFunctions[i].fn.toString()+";":this.requiredFunctions[i].fn.toString();return n?t+'process.on("message", function(e) {process.send(JSON.stringify(('+e.toString()+")(JSON.parse(e).data)))})":t+"self.onmessage = function(e) {self.postMessage(("+e.toString()+")(e.data))}"},i.prototype.require=function(){for(var e,t=Array.prototype.slice.call(arguments,0),i=0;i<t.length;i++)e=t[i],"string"==typeof e?this.requiredScripts.push(e):"function"==typeof e?this.requiredFunctions.push({"fn":e}):"object"==typeof e&&this.requiredFunctions.push(e)},i.prototype._spawnWorker=function(e){var t,i=this.getWorkerSource(e);if(n)t=new s(this.options.evalPath),t.postMessage(i);else{if(void 0===s)return void 0;try{if(0!==this.requiredScripts.length){if(null===this.options.evalPath)throw new Error("Can't use required scripts without eval.js!");t=new s(this.options.evalPath),t.postMessage(i)}else{var a=new Blob([i],{"type":"text/javascript"}),r=URL.createObjectURL(a);t=new s(r)}}catch(o){if(null===this.options.evalPath)throw o;t=new s(this.options.evalPath),t.postMessage(i)}}return t},i.prototype.spawn=function(e){var i=this,n=new t;return this.operation.then(function(){var t=i._spawnWorker(e);if(void 0!==t)t.onmessage=function(e){t.terminate(),i.data=e.data,n.resolve(null,i.data)},t.postMessage(i.data);else{if(!i.options.synchronous)throw new Error("Workers do not exist and synchronous operation not allowed!");a(function(){i.data=e(i.data),n.resolve(null,i.data)})}}),this.operation=n,this},i.prototype._spawnMapWorker=function(e,t,i){var n=this,s=n._spawnWorker(t);if(void 0!==s)s.onmessage=function(t){s.terminate(),n.data[e]=t.data,i()},s.postMessage(n.data[e]);else{if(!n.options.synchronous)throw new Error("Workers do not exist and synchronous operation not allowed!");a(function(){n.data[e]=t(n.data[e]),i()})}},i.prototype.map=function(e){function i(){++s===n.data.length?r.resolve(null,n.data):a<n.data.length&&n._spawnMapWorker(a++,e,i)}if(!this.data.length)return this.spawn(e);var n=this,a=0,s=0,r=new t;return this.operation.then(function(){for(;a-s<n.options.maxWorkers&&a<n.data.length;++a)n._spawnMapWorker(a,e,i)}),this.operation=r,this},i.prototype._spawnReduceWorker=function(e,t,i){var n=this,s=n._spawnWorker(t);if(void 0!==s)s.onmessage=function(e){s.terminate(),n.data[n.data.length]=e.data,i()},s.postMessage(e);else{if(!n.options.synchronous)throw new Error("Workers do not exist and synchronous operation not allowed!");a(function(){n.data[n.data.length]=t(e),i()})}},i.prototype.reduce=function(e){function i(){--n,1===a.data.length&&0===n?(a.data=a.data[0],s.resolve(null,a.data)):a.data.length>1&&(++n,a._spawnReduceWorker([a.data[0],a.data[1]],e,i),a.data.splice(0,2))}if(!this.data.length)throw new Error("Can't reduce non-array data");var n=0,a=this,s=new t;return this.operation.then(function(){if(1===a.data.length)s.resolve(null,a.data[0]);else{for(var t=0;t<a.options.maxWorkers&&t<Math.floor(a.data.length/2);++t)++n,a._spawnReduceWorker([a.data[2*t],a.data[2*t+1]],e,i);a.data.splice(0,2*t)}}),this.operation=s,this},i.prototype.then=function(e,i){var n=this,a=new t;return this.operation.then(function(){var t=e(n.data);void 0!==t&&(n.data=t),a.resolve(null,n.data)},i),this.operation=a,this},n?module.exports=i:self.Parallel=i}();var Ot={"debug":"undefined"!=typeof window.DEBUG?window.DEBUG:!1};Ot.Util={"inherits":function(e,t){var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e},"resizedImageBlob":function(e,t,i){var n=Ot.Util.calculateAspectRatioFit(e.width,e.height,t,i),a=document.createElement("canvas");a.width=n.width,a.height=n.height,a.getContext("2d").drawImage(e,0,0,n.width,n.height);var s=a.toDataURL("image/jpeg");return this.dataURLToBlob(s)},"calculateAspectRatioFit":function(e,t,i,n){var a=[i/e,n/t];return a=Math.min(a[0],a[1]),{"width":e*a,"height":t*a}},"dataURLToBlob":function(e){var t,i,n,a=";base64,";if(-1==e.indexOf(a))return t=e.split(","),i=t[0].split(":")[1],n=t[1],new Blob([n],{"type":i});t=e.split(a),i=t[0].split(":")[1],n=window.atob(t[1]);for(var s=n.length,r=new Uint8Array(s),o=0;s>o;++o)r[o]=n.charCodeAt(o);return new Blob([r],{"type":i})}},Ot.Heap=function(){this.items=[]},Ot.Heap.prototype={"getNextHighestPriority":function(){var e=1;return this.items[0]&&(e=this.items[0].priority+1),e},"parentIndex":function(e){return Math.floor(.5*e)},"leftChildIndex":function(e){return 2*e},"rightChildIndex":function(e){return 2*e+1},"get":function(e){var t=null;return e>=1&&this.items[e-1]&&(t=this.items[e-1]),t},"set":function(e,t){this.items[e-1]=t},"swap":function(e,t){var i=this.get(e);this.set(e,this.get(t)),this.set(t,i)},"upHeap":function(e){var t=null,i=null,n=null,a=!1;do a=!1,n=this.parentIndex(e),t=this.get(e),i=this.get(n),a=null!==i&&t.priority>i.priority,a&&(this.swap(e,n),e=n);while(a)},"downHeap":function(e){var t=null,i=null,n=null,a=null,s=null,r=null,o=!1;do o=!1,a=this.leftChildIndex(e),s=this.rightChildIndex(e),t=this.get(e)&&this.get(e).priority,i=this.get(a)&&this.get(a).priority,n=this.get(s)&&this.get(s).priority,null===i&&(i=Number.NEGATIVE_INFINITY),null===n&&(n=Number.NEGATIVE_INFINITY),r=Math.max(i,n),r>t&&(n===r?(this.swap(e,s),e=s):(this.swap(e,a),e=a),o=!0);while(o)},"add":function(e){this.items.push(e),this.upHeap(this.items.length)},"remove":function(){var e=null;return this.items.length&&(this.swap(1,this.items.length),e=this.get(this.items.length),this.items.length-=1,this.downHeap(1)),e}},Ot.Loader=function(){function e(e,t,i,n,a,s){e.abort(),this.load(n,t,i,a,s)}function t(n,a,s,r,o){if(Ot.NetworkMonitor.isOnline()){var l=new XMLHttpRequest;l.responseType=a,l.onerror=i.onError.bind(this,o),l.onload=i.onLoad.bind(this,n,r,o),l.open(s,n,!0),l.send(),Ot.NetworkMonitor.registerForOffline(e.bind(this,l,a,s,n,r,o))}else Ot.NetworkMonitor.registerForOnline(t.bind(this,n,a,s,r,o))}var i={"onLoad":function(e,t,i,n){var a=n.target,s=a.response;4===a.readyState&&(200===a.status||0===a.status?t&&t(s):i&&i(n))},"onError":function(e,t){e&&e(t)}};return{"load":t}}(),Ot.NetworkMonitor=function(){function e(e){n.push(e)}function t(e){a.push(e)}function i(){return window.navigator.onLine}var n=[],a=[];return window.addEventListener("online",function(){for(var e=n.length,t=null;e--;)t=n.pop(),t()}),window.addEventListener("offline",function(){for(var e=a.length,t=null;e--;)t=a.pop(),t()}),{"registerForOnline":e,"registerForOffline":t,"isOnline":i}}(),Ot.Queue=function(){function e(){return r.getNextHighestPriority()}function t(e){l=e}function i(e,t){"undefined"==typeof e.priority&&(e.priority=r.getNextHighestPriority()),r.add(e),t&&n()}function n(){for(var e;l>o;){if(e=r.remove(),null===e){Ot.debug&&console.log("[Connections: "+o+"] - No more remote operations queued");break}e.addMessageHandler("fileloaded",c.onFileLoaded),e.addMessageHandler("errorloading",c.onFileLoaded),e.load(),Ot.debug&&console.log("[Connections: "+o+"] - Loading "+e.src),o++}}function a(){for(var e=r.remove();null!==e;)e.cancelled=!0,e=r.remove()}var s={"veryLow":-8,"low":-4,"normal":0,"high":4,"veryHigh":8},r=new Ot.Heap,o=0,l=6,c={"onFileLoaded":function(){Ot.debug&&console.log("[Connections: "+o+"] - File loaded"),o--,n()}};return{"getNextHighestPriority":e,"queuePriority":s,"setMaxConnections":t,"add":i,"clear":a,"start":n}}(),Ot.Sanitiser=function(){function e(e){return e.replace(/.*?:\/\//,"",e)}return{"cleanURL":e}}(),Ot.FileSystem=function(){function e(){return l}function t(e){c.push(e)}function i(e,t,i){l&&(e=Ot.Sanitiser.cleanURL(e),u.getFile(e,{},function(e){t(e.toURL())},i))}function n(e,t,i){l&&(e=Ot.Sanitiser.cleanURL(e),u.getFile(e,{},function(e){e.file(function(e){var i=new FileReader;i.onloadend=function(){t(this.result)},i.readAsText(e)})},i))}function a(e,t,i){if(l){e=Ot.Sanitiser.cleanURL(e);var n=e.split("/");n.pop(),s(u,n,function(){u.getFile(e,{"create":!0},function(e){e.createWriter(function(n){n.onwriteend=function(){n.onwriteend=function(){i(e.toURL())},n.truncate(t.size)},n.onerror=function(e){console.warn("Write failed: "+e.toString())},n.write(t)},d.onError)},d.onError)})}}function s(e,t,i){("."===t[0]||""===t[0])&&(t=t.slice(1)),t.length?e.getDirectory(t[0],{"create":!0},function(e){t.length&&s(e,t.slice(1),i)},d.onError):i()}function r(e,t,i){l&&u.getDirectory(e,{},function(e){e.removeRecursively(t,d.onError)},i||d.onError)}function o(e,t,i){l&&u.getFile(e,{},function(e){e.remove(t,d.onError)},i||d.onError)}var l=!1,c=[],u=null,d={"onError":function(e){var t="";switch(e.code){case FileError.QUOTA_EXCEEDED_ERR:t="QUOTA_EXCEEDED_ERR";break;case FileError.NOT_FOUND_ERR:t="NOT_FOUND_ERR";break;case FileError.SECURITY_ERR:t="SECURITY_ERR";break;case FileError.INVALID_MODIFICATION_ERR:t="INVALID_MODIFICATION_ERR";break;case FileError.INVALID_STATE_ERR:t="INVALID_STATE_ERR";break;default:t="Unknown Error"}console.error("Error: "+t,e)},"onInitialised":function(e){if(u=e.root,l=!0,c.length)for(var t=c.length;t--;)c[t]()}};return function(e){e=e||2048,window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.resolveLocalFileSystemURL=window.resolveLocalFileSystemURL||window.webkitResolveLocalFileSystemURL,window.requestFileSystem&&window.requestFileSystem(window.PERSISTENT,1024*e*1024,d.onInitialised,d.onError)}(),{"isReady":e,"registerOnReady":t,"getPath":i,"getDataAsText":n,"set":a,"removeFile":o,"removeDir":r}}(),Ot.RemoteFile=function(e){this.parseOptions(e)},Ot.RemoteFile.prototype={"src":null,"localFilePath":null,"method":"GET","responseType":"blob","priority":Ot.Queue.queuePriority.normal,"loaded":!1,"cancelled":!1,"wURL":window.URL||window.webkitURL,"parseOptions":function(e){e=e||{},this.src=e.src,this.localFilePath=e.localFilePath||this.src,this.method=e.method||this.method,this.responseType=e.responseType||this.responseType,this.priority=e.priority||0},"onRemoteFileLoaded":function(e){Ot.FileSystem.set(this.localFilePath,e,this.onFileSystemSet.bind(this)),this.sendMessage("remoteloaded",e)},"onRemoteFileUnavailable":function(){this.onErrorFileLoading(),this.sendMessage("remoteunavailable")},"onFileSystemSet":function(){this.load()},"onLocalFileLoaded":function(e){this.cancelled||(this.loaded=!0,this.sendMessage("fileloaded",e))},"onLocalFileUnavailable":function(){this.loadFromRemote(),this.sendMessage("localunavailable")},"onErrorFileLoading":function(){this.cancelled||this.sendMessage("errorloading")},"loadFromRemote":function(){Ot.Loader.load(this.src,this.responseType,this.method,this.onRemoteFileLoaded.bind(this),this.onRemoteFileUnavailable.bind(this)),this.sendMessage("remoteloadstart")},"load":function(){Ot.FileSystem.getPath(this.localFilePath,this.onLocalFileLoaded.bind(this),this.onLocalFileUnavailable.bind(this))},"addMessageHandler":function(e,t){this.msgHandler=this.msgHandler||{},"undefined"==typeof this.msgHandler[e]&&(this.msgHandler[e]=[]),this.msgHandler[e].push(t)},"sendMessage":function(e,t){var i=this.msgHandler[e];if("undefined"!=typeof i)for(var n=i.length,a=null;n--;)a=i[n],a(t)}},Ot.RemoteImage=function(e){var t=window.devicePixelRatio||1;this.maxImageWidth=1024*t,this.maxImageHeight=1024*t,Ot.RemoteFile.call(this,e),this.width=e.width||null,this.height=e.height||null,this.addMessageHandler("fileloaded",this.imageDataLoaded.bind(this))},Ot.Util.inherits(Ot.RemoteImage,Ot.RemoteFile),Ot.RemoteImage.prototype.onRemoteFileLoaded=function(e){var t=window.URL.createObjectURL(e),i=new Image,n=function(e){this.wURL.revokeObjectURL(e)}.bind(this,t),a=function(){var i=function(e){Ot.FileSystem.set(this.localFilePath,e,this.onFileSystemSet.bind(this)),/blob:/.test(t)&&setTimeout(n,100)};i.call(this,e)};i.onload=a.bind(this),i.onerror=this.onRemoteFileUnavailable.bind(this),i.src=t},Ot.RemoteImage.prototype.imageDataLoaded=function(e){var t=e,i=new Image,n=function(e){this.wURL.revokeObjectURL(e)}.bind(this,t),a=function(){this.sendMessage("imageloaded",i),/blob:/.test(t)&&setTimeout(n,100)};i.onload=a.bind(this),i.onerror=this.onRemoteFileUnavailable.bind(this),i.src=t},Ot.RemoteText=function(e){e=e||{},e.method=e.method||"POST",e.responseType=e.responseType||"json",Ot.RemoteFile.call(this,e),this.addMessageHandler("fileloaded",this.textLoaded.bind(this))},Ot.Util.inherits(Ot.RemoteText,Ot.RemoteFile),Ot.RemoteText.prototype.load=function(){Ot.FileSystem.getDataAsText(this.localFilePath,this.onLocalFileLoaded.bind(this),this.onLocalFileUnavailable.bind(this))},Ot.RemoteText.prototype.textLoaded=function(e){this.sendMessage("textloaded",e)},Ot.RemoteArticle=function(e){Ot.RemoteText.call(this,e),this.addMessageHandler("textloaded",this.articleLoaded.bind(this))},Ot.Util.inherits(Ot.RemoteArticle,Ot.RemoteText),Ot.RemoteArticle.prototype.onRemoteFileLoaded=function(e){var t=e;"object"!=typeof e&&(t=JSON.parse(e)),this.sendMessage("remoteloaded",t);var i=t?t.article:"",n=new Blob([i],{"type":"text/html"});Ot.FileSystem.set(this.localFilePath,n,this.onFileSystemSet.bind(this))},Ot.RemoteArticle.prototype.articleLoaded=function(e){this.sendMessage("articleloaded",e)},function(e){"use strict";var t=e.indexedDB||e.webkitIndexedDB||e.mozIndexedDB||e.oIndexedDB||e.msIndexedDB,i=e.IDBKeyRange||e.webkitIDBKeyRange,n={"readonly":"readonly","readwrite":"readwrite"},a=Object.prototype.hasOwnProperty;if(!t)throw"IndexedDB required";var s=function(e,t){var i=this,s=!1;this.clear=function(t){if(!s){var i=e.transaction(t,n.readwrite),a=i.objectStore(t),r=$.Deferred(),o=a.clear();return o.onsuccess=function(){r.resolve(key)},o.onerror=function(e){r.reject(e)},r.promise()}},this.add=function(t){if(!s){for(var a=[],r=0;r<arguments.length-1;r++)a[r]=arguments[r+1];var o=e.transaction(t,n.readwrite),l=o.objectStore(t),c=$.Deferred();return a.forEach(function(e){var t;if(e.item&&e.key){var i=e.key;e=e.item,t=l.add(e,i)}else t=l.add(e);t.onsuccess=function(t){var i=t.target,n=i.source.keyPath;null===n&&(n="__id__"),Object.defineProperty(e,n,{"value":i.result,"enumerable":!0}),c.notify()}}),o.oncomplete=function(){c.resolve(a,i)},o.onerror=function(e){c.reject(a,e)},o.onabort=function(e){c.reject(a,e)},c.promise()}},this.update=function(t){if(!s){for(var a=[],r=0;r<arguments.length-1;r++)a[r]=arguments[r+1];var o=e.transaction(t,n.readwrite),l=o.objectStore(t),c=(l.keyPath,$.Deferred());return a.forEach(function(e){var t;if(e.item&&e.key){var i=e.key;e=e.item,t=l.put(e,i)}else t=l.put(e);t.onsuccess=function(){c.notify()}}),o.oncomplete=function(){c.resolve(a,i)},o.onerror=function(e){c.reject(a,e)},o.onabort=function(e){c.reject(a,e)},c.promise()}},this.remove=function(t,i){if(!s){var a=e.transaction(t,n.readwrite),r=a.objectStore(t),o=$.Deferred(),l=r.delete(i);return l.onsuccess=function(){o.resolve(i)},l.onerror=function(e){o.reject(e)},o.promise()}},this.close=function(){s||(e.close(),s=!0,delete c[t])},this.isClosed=function(){return s},this.get=function(t,i){if(!s){var n=e.transaction(t),a=n.objectStore(t),r=$.Deferred(),o=a.get(i);return o.onsuccess=function(e){r.resolve(e.target.result)},o.onerror=function(e){r.reject(e)},r.promise()}},this.query=function(t,i){return s?void 0:new r(t,e,i)};for(var o=0,l=e.objectStoreNames.length;l>o;o++)!function(e){i[e]={};for(var t in i)a.call(i,t)&&"close"!==t&&"isClosed"!==t&&(i[e][t]=function(t){return function(){var n=[e].concat([].slice.call(arguments,0));return i[t].apply(i,n)}}(t))}(e.objectStoreNames[o])},r=function(e,t,n){var a=this,s=function(a,s,r,o,l,c){var u,d=$.Deferred(),h=function(u){var h=t.transaction(e),f=h.objectStore(e),p=n?f.index(n):f,g=a?i[a].apply(null,s):null,m=[],v=[g],_=0,y="undefined"==typeof l||0===l;"undefined"!=typeof l&&l>u&&(l=u),"count"!==r&&v.push(o||"next"),p[r].apply(p,v).onsuccess=function(e){var t=e.target.result;"number"==typeof t?m=t:t&&(y?"undefined"!=typeof l&&"undefined"!=typeof c&&_>=l+c?t.advance(u-m.length):(_+=1,m.push("value"in t?t.value:t.key),t["continue"]()):(t.advance(l),_=l,y=!0))},h.oncomplete=function(){d.resolve(m)},h.onerror=function(e){d.reject(e)},h.onabort=function(e){d.reject(e)}},f=t.transaction(e);f.oncomplete=function(){h(u)},f.onabort=function(e){d.reject(e)},f.onerror=function(e){d.reject(e)};var p=f.objectStore(e),g=p.count();return g.onsuccess=function(e){u=e.target.result},d.promise()},r=function(e,t){var i,n,a="next",r="openCursor",o=[],l=!1,c=500,u=0,d=function(){var d=$.Deferred(),h=[],f=function(){return"undefined"!=typeof i&&"undefined"!=typeof n},p=function(){var g=[e,t,r,l?a+"unique":a];f()&&g.push.apply(g,[u,c]),s.apply(s,g).then(function(e){var t=e.length;e.constructor===Array&&o.forEach(function(t){t&&t.length&&(e=2===t.length?e.filter(function(e){return e[t[0]]===t[1]}):e.filter(t[0]))}),h.push.apply(h,e),f()?h.length>=i+n?(h=h.slice(i,i+n),d.resolve(h)):c>t?(h=h.slice(i,h.length),d.resolve(h)):(u+=c,p()):d.resolve(h)},d.reject,d.notify)};return p(),d.promise()},h=function(){return a=null,r="count",{"execute":d}},f=function(){return r="openKeyCursor",{"desc":g,"execute":d,"filter":p,"distinct":m,"skip":v,"take":_}},p=function(){return o.push(Array.prototype.slice.call(arguments,0,2)),{"keys":f,"execute":d,"filter":p,"desc":g,"distinct":m,"skip":v,"take":_}},g=function(){return a="prev",{"keys":f,"execute":d,"filter":p,"distinct":m,"skip":v,"take":_}},m=function(){return l=!0,{"keys":f,"execute":d,"filter":p,"desc":g,"skip":v,"take":_}},v=function(e){return i=e,{"keys":f,"execute":d,"filter":p,"desc":g,"take":_}},_=function(e){return n=e,{"keys":f,"count":h,"execute":d,"filter":p,"desc":g,"skip":v}};return{"execute":d,"count":h,"keys":f,"filter":p,"desc":g,"distinct":m,"skip":v,"take":_}};"only bound upperBound lowerBound".split(" ").forEach(function(e){a[e]=function(){return new r(e,arguments)}}),this.filter=function(){var e=new r(null,null);return e.filter.apply(e,arguments)},this.all=function(){return this.filter()}},o=function(e,t,i){"function"==typeof t&&(t=t());for(var n in t){var s=t[n];if(a.call(t,n)){var r=i.createObjectStore(n,s.key);for(var o in s.indexes){var l=s.indexes[o];r.createIndex(o,l.key||o,Object.keys(l).length?l:{"unique":!1})}}}},l=function(e,t){var i=e.target.result,n=new s(i,t),a=$.Deferred();return a.resolve(n),c[t]=i,a.promise()},c={},u={"version":"0.8.0","open":function(e){var i,n=$.Deferred();return c[e.server]?l({"target":{"result":c[e.server]}},e.server,e.version,e.schema).done(n.resolve).fail(n.reject).progress(n.notify):(i=t.open(e.server,e.version),i.onsuccess=function(t){l(t,e.server,e.version,e.schema).done(n.resolve).fail(n.reject).progress(n.notify)},i.onupgradeneeded=function(t){o(t,e.schema,t.target.result)},i.onerror=function(e){n.reject(e)}),n.promise()},"deleteDatabase":function(e){c[e]&&c[e].close();var i=$.Deferred(),n=t.deleteDatabase(e);return n.onsuccess=function(){i.resolve()},n.onerror=function(){i.reject()},i.promise()}};"function"==typeof define&&define.amd?define(function(){return u}):e.db=u}(window),function(e){function t(e,t){for(var i=e.length;i--;)if(e[i]===t)return i;return-1}function i(e,t){if(e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}function n(e){for(y in w)w[y]=e[D[y]]}function a(e,i){var a,s,r,l,c;if(a=e.keyCode,-1==t(C,a)&&C.push(a),(93==a||224==a)&&(a=91),a in w){w[a]=!0;for(r in T)T[r]==a&&(o[r]=!0)}else if(n(e),o.filter.call(this,e)&&a in b)for(l=0;l<b[a].length;l++)if(s=b[a][l],s.scope==i||"all"==s.scope){c=s.mods.length>0;for(r in w)(!w[r]&&t(s.mods,+r)>-1||w[r]&&-1==t(s.mods,+r))&&(c=!1);(0!=s.mods.length||w[16]||w[18]||w[17]||w[91])&&!c||s.method(e,s)===!1&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}function s(e){var i,n=e.keyCode,a=t(C,n);if(a>=0&&C.splice(a,1),(93==n||224==n)&&(n=91),n in w){w[n]=!1;for(i in T)T[i]==n&&(o[i]=!1)}}function r(){for(y in w)w[y]=!1;for(y in T)o[y]=!1}function o(e,t,i){var n,a;n=g(e),void 0===i&&(i=t,t="all");for(var s=0;s<n.length;s++)a=[],e=n[s].split("+"),e.length>1&&(a=m(e),e=[e[e.length-1]]),e=e[0],e=x(e),e in b||(b[e]=[]),b[e].push({"shortcut":n[s],"scope":t,"method":i,"key":n[s],"mods":a})}function l(e,t){var n,a,s=e.split("+"),r=[];if(s.length>1&&(r=m(s),e=s[s.length-1]),e=x(e),void 0===t&&(t=f()),b[e])for(n in b[e])a=b[e][n],a.scope===t&&i(a.mods,r)&&(b[e][n]={})}function c(e){return"string"==typeof e&&(e=x(e)),-1!=t(C,e)}function u(){return C.slice(0)}function d(e){var t=(e.target||e.srcElement).tagName;return!("INPUT"==t||"SELECT"==t||"TEXTAREA"==t)}function h(e){S=e||"all"}function f(){return S||"all"}function p(e){var t,i,n;for(t in b)for(i=b[t],n=0;n<i.length;)i[n].scope===e?i.splice(n,1):n++}function g(e){var t;return e=e.replace(/\s/g,""),t=e.split(","),""==t[t.length-1]&&(t[t.length-2]+=","),t}function m(e){for(var t=e.slice(0,e.length-1),i=0;i<t.length;i++)t[i]=T[t[i]];return t}function v(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent&&e.attachEvent("on"+t,function(){i(window.event)})}function _(){var t=e.key;return e.key=L,t}var y,b={},w={"16":!1,"18":!1,"17":!1,"91":!1},S="all",T={"":16,"shift":16,"":18,"alt":18,"option":18,"":17,"ctrl":17,"control":17,"":91,"command":91},k={"backspace":8,"tab":9,"clear":12,"enter":13,"return":13,"esc":27,"escape":27,"space":32,"left":37,"up":38,"right":39,"down":40,"del":46,"delete":46,"home":36,"end":35,"pageup":33,"pagedown":34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},x=function(e){return k[e]||e.toUpperCase().charCodeAt(0)},C=[];for(y=1;20>y;y++)k["f"+y]=111+y;var D={"16":"shiftKey","18":"altKey","17":"ctrlKey","91":"metaKey"};for(y in T)o[y]=!1;v(document,"keydown",function(e){a(e,S)}),v(document,"keyup",s),v(window,"focus",r);var L=e.key;e.key=o,e.key.setScope=h,e.key.getScope=f,e.key.deleteScope=p,e.key.filter=d,e.key.isPressed=c,e.key.getPressedKeyCodes=u,e.key.noConflict=_,e.key.unbind=l,"undefined"!=typeof module&&(module.exports=key)}(this),function(e){var t=e.Jester={"cache":{},"cacheId":"Jester"+(new Date).getTime(),"guid":0,"Watcher":function(e,i){var n=this,a=t.cacheId,s=t.cache,r="swipe flick tap doubletap pinchnarrow pinchwiden pinchend";if(!e||!e.nodeType)throw new TypeError("Jester: no element given.");"number"!=typeof e[a]&&(e[a]=t.guid,t.guid++);var o=e[a];o in s||(t.cache[o]={});var l=t.cache[o];if("options"in l||(l.options={}),i=i||l.options||{},l.options!==i)for(var c in i)l.options[c]?l.options[c]!==i[c]&&(l.options[c]=i[c]):l.options[c]=i[c];"eventSet"in l&&l.eventSet instanceof t.EventSet||(l.eventSet=new t.EventSet(e)),l.touchMonitor||(l.touchMonitor=new t.TouchMonitor(e));var u=l.eventSet,d=l.touchMonitor;this.id=e[a],this.bind=function(e,t){return e&&"string"==typeof e&&"function"==typeof t&&u.register(e,t),this},r.split(" ").forEach(function(e){this[e]=function(t){return this.bind(e,t)}},n),this.start=function(e){return this.bind("start",e)},this.during=function(e){return this.bind("during",e)},this.end=function(e){return this.bind("end",e)},this.pinch=function(e){if("undefined"!=typeof e)if("function"==typeof e)n.pinchend(e);else if("object"==typeof e){var t;"narrow widen end".split(" ").forEach(function(i){t="pinch"+i,"function"==typeof e[i]&&n[t](e[i])})}},this.halt=function(){d.stopListening(),u.clear(),delete l.eventSet,delete l.touchMonitor}},"EventSet":function(e){var t={};this.eventsTable=t,this.register=function(e,i){t[e]&&t[e].push?~t[e].indexOf(i)||t[e].push(i):t[e]=[i]},this.release=function(e,i){if("undefined"!=typeof e){if("undefined"==typeof i)for(var n in t.eventName)delete t.eventName[n];else t[e]&&~t[e].indexOf(i)&&t[e].splice(t[e].indexOf(i),1);t[e]&&0===t[e].length&&delete t[e]}},this.clear=function(){var e;for(e in t)delete t[e]},this.getHandlers=function(e){return t[e]&&t[e].length?t[e]:[]},this.setHandlers=function(e,i){t[e]=i},this.execute=function(i){if("undefined"!=typeof i&&t[i]&&t[i].length)for(var n=Array.prototype.slice.call(arguments,1),a=0;a<t[i].length;a++)"function"==typeof t[i][a]&&t[i][a].apply(e,n)}},"TouchMonitor":function(e){var i=t.cacheId,n=e[i],a=t.cache,s=a[n],r=s.options;r.move=r.move||{},r.scale=r.scale||{},r.tapDistance=r.tapDistance||0,r.tapTime=r.tapTime||20,r.doubleTapTime=r.doubleTapTime||300,r.swipeDistance=r.swipeDistance||200,r.flickTime=r.flickTime||300,r.flickDistance=r.flickDistance||200,r.deadX=r.deadX||0,r.deadY=r.deadY||0,r.capture!==!1&&(r.capture=!0),"undefined"!=typeof r.preventDefault&&r.preventDefault!==!1&&(r.preventDefault=!0),"undefined"!=typeof r.preventDefault&&r.stopPropagation!==!1&&(r.stopPropagation=!0);var o,l=s.eventSet,c=0,u=function(e){o=new t.TouchGroup(e),l.execute("start",o,e),r.preventDefault&&e.preventDefault(),r.stopPropagation&&e.stopPropagation()},d=function(e){o.update(e),l.execute("during",o,e),r.preventDefault&&e.preventDefault(),r.stopPropagation&&e.stopPropagation(),2==o.numTouches()&&(o.delta.scale()<0?l.execute("pinchnarrow",o):o.delta.scale()>0&&l.execute("pinchwiden",o))},h=function(e){var t;if(l.execute("end",o,e),r.preventDefault&&e.preventDefault(),r.stopPropagation&&e.stopPropagation(),1==o.numTouches()){if(o.touch(0).total.x()<=r.tapDistance&&o.touch(0).total.y()<=r.tapDistance&&o.touch(0).total.time()<r.tapTime&&l.execute("tap",o),o.touch(0).total.time()<r.tapTime){var i=(new Date).getTime();i-c<=r.doubleTapTime&&l.execute("doubletap",o),c=i}if(Math.abs(o.touch(0).total.x())>=r.swipeDistance&&(t=o.touch(0).total.x()<0?"left":"right",l.execute("swipe",o,t)),Math.abs(o.touch(0).total.y())>=r.swipeDistance&&(t=o.touch(0).total.y()<0?"up":"down",l.execute("swipe",o,t)),Math.abs(o.touch(0).total.x())>=r.flickDistance&&o.touch(0).total.time()<=r.flickTime){var n=o.touch(0).total.x()<0?"left":"right";l.execute("flick",o,n)}}else if(2==o.numTouches()&&1!==o.current.scale()){var a=o.current.scale()<1?"narrowed":"widened";l.execute("pinchend",o,a)}},f=function(){e.removeEventListener("touchstart",u,r.capture),e.removeEventListener("touchmove",d,r.capture),e.removeEventListener("touchend",h,r.capture)};return e.addEventListener("touchstart",u,r.capture),e.addEventListener("touchmove",d,r.capture),e.addEventListener("touchend",h,r.capture),{"stopListening":f}},"TouchGroup":function(e){function i(){return u}function n(e){return c["touch"+e]}function a(){return d}function s(){return h}function r(){return f}function o(){return g}function l(e){for(var t=0,i=0,n=0;n<e.touches.length;n++)u>n&&(c["touch"+n].update(e.touches[n].pageX,e.touches[n].pageY),t+=e.touches[n].pageX,i+=e.touches[n].pageY);d=t/u,h=i/u,p=f,f=e.scale,g=f-p}for(var c=this,u=e.touches.length,d=0,h=0,f=e.scale,p=f,g=f,m=0;u>m;m++)this["touch"+m]=new t.Touch(e.touches[m].pageX,e.touches[m].pageY),d=e.touches[m].pageX,h=e.touches[m].pageY;return{"numTouches":i,"touch":n,"current":{"scale":r,"midX":a,"midY":s},"delta":{"scale":o},"update":l}},"Touch":function(e,t){function i(){return k}function n(){return x}function a(){return D}function s(){return L}function r(){return A}function o(){return E}function l(){return O}function c(){return R}function u(){return Y}function d(){return H}function h(){return(new Date).getTime()}function f(){return C}function p(){return $}function g(){return P}function m(){return N}function v(){return z}function _(){return I}function y(){return M}function b(){return q}function w(){return F}function S(){return j}function T(){return U}var k=e,x=t,C=h(),D=k,L=x,$=C,I=0,M=0,A=k,E=k,P=C,q=0,F=0,O=0,R=0,N=0,j=0,U=0,Y=0,H=0,z=0;return{"start":{"x":i,"y":n,"speedX":0,"speedY":0,"time":f},"current":{"x":a,"y":s,"time":p,"speedX":_,"speedY":y},"prev":{"x":r,"y":o,"time":g,"speedX":b,"speedY":w},"delta":{"x":l,"y":c,"speedX":S,"speedY":T,"time":m},"total":{"x":u,"y":d,"time":v},"update":function(e,t){A=D,E=L,D=e,L=t,O=D-A,R=L-E,Y=D-k,H=L-x,P=$,$=h(),N=$-P,z=$-C,q=I,F=M,I=O/(N/1e3),M=R/(N/1e3),j=I-q,U=M-F}}}};e.jester=function(e,i){return new t.Watcher(e,i)}}(window),History=function(){this.stateChangedCallback=function(){},this.states=[]},History.prototype={"getState":function(){return this.states[this.states.length-1]},"back":function(){this.states.pop(),this.stateChangedCallback()},"pushState":function(e,t,i){this.states.push({"state":e,"title":t,"url":i}),this.stateChangedCallback()}},History=new History,z.options={"strictMode":!1,"key":["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],"q":{"name":"queryKey","parser":/(?:^|&)([^&=]*)=?([^&]*)/g},"parser":{"strict":/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,"loose":/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},function(){var e=[].slice;!function(t,i){var n;return n=function(){function e(e){var n=this;this.$el=t(e),t(i).resize(function(){return n.refresh()})}return e.prototype.start=function(){var e,t,i,n;if(this._overlay_visible())return!1;for(this._add_overlay_layer(),n=this.$el.find("*[data-intro]").filter(":visible"),t=0,i=n.length;i>t;t++)e=n[t],this._show_element(e);return this.$el.trigger("chardinJs:start")},e.prototype.toggle=function(){return this._overlay_visible()?this.stop():this.start()},e.prototype.refresh=function(){var e,t,i,n,a;if(this._overlay_visible()){for(n=this.$el.find("*[data-intro]"),a=[],t=0,i=n.length;i>t;t++)e=n[t],a.push(this._position_helper_layer(e));return a}return this},e.prototype.stop=function(){return this.$el.find(".chardinjs-overlay").fadeOut(function(){return t(this).remove()
}),this.$el.find(".chardinjs-helper-layer").remove(),this.$el.find(".chardinjs-show-element").removeClass("chardinjs-show-element"),this.$el.find(".chardinjs-relative-position").removeClass("chardinjs-relative-position"),i.removeEventListener?i.removeEventListener("keydown",this._onKeyDown,!0):document.detachEvent&&document.detachEvent("onkeydown",this._onKeyDown),this.$el.trigger("chardinJs:stop")},e.prototype._overlay_visible=function(){return 0!==this.$el.find(".chardinjs-overlay").length},e.prototype._add_overlay_layer=function(){var e,t,i,n=this;return this._overlay_visible()?!1:(t=document.createElement("div"),i="",t.className="chardinjs-overlay","BODY"===this.$el.prop("tagName")?(i+="top: 0;bottom: 0; left: 0;right: 0;position: fixed;",t.setAttribute("style",i)):(e=this._get_offset(this.$el.get()[0]),e&&(i+="width: "+e.width+"px; height:"+e.height+"px; top:"+e.top+"px;left: "+e.left+"px;",t.setAttribute("style",i))),this.$el.get()[0].appendChild(t),t.onclick=function(){return n.stop()},setTimeout(function(){return i+="opacity: 1;",t.setAttribute("style",i)},10))},e.prototype._get_position=function(e){return e.getAttribute("data-position")||"bottom"},e.prototype._place_tooltip=function(e){var i,n,a,s,r,o,l;switch(o=t(e).data("tooltip_layer"),l=this._get_offset(o),o.style.top=null,o.style.right=null,o.style.bottom=null,o.style.bottomlower=null,o.style.left=null,this._get_position(e)){case"top":case"bottom":case"bottomlower":a=this._get_offset(e),r=a.width,n=t(o).width(),o.style.left=""+(r/2-l.width/2)+"px";break;case"left":case"right":a=this._get_offset(e),s=a.height,i=t(o).height(),o.style.top=""+(s/2-l.height/2)+"px"}switch(this._get_position(e)){case"left":return o.style.left="-"+(l.width-34)+"px";case"right":return o.style.right="-"+(l.width-34)+"px";case"bottom":return o.style.bottom="-"+l.height+"px";case"bottomlower":return o.style.bottom="-"+l.height+"px";case"top":return o.style.top="-"+l.height+"px"}},e.prototype._position_helper_layer=function(e){var i,n;return n=t(e).data("helper_layer"),i=this._get_offset(e),n.setAttribute("style","width: "+i.width+"px; height:"+i.height+"px; top:"+i.top+"px; left: "+i.left+"px;")},e.prototype._show_element=function(e){var i,n,a,s;return n=this._get_offset(e),a=document.createElement("div"),s=document.createElement("div"),t(e).data("helper_layer",a).data("tooltip_layer",s),e.id&&a.setAttribute("data-id",e.id),a.className="chardinjs-helper-layer chardinjs-"+this._get_position(e),this._position_helper_layer(e),this.$el.get()[0].appendChild(a),s.className="chardinjs-tooltip chardinjs-"+this._get_position(e),s.innerHTML="<div class='chardinjs-tooltiptext'>"+e.getAttribute("data-intro")+"</div>",a.appendChild(s),this._place_tooltip(e),e.className+=" chardinjs-show-element",i="",e.currentStyle?i=e.currentStyle.position:document.defaultView&&document.defaultView.getComputedStyle&&(i=document.defaultView.getComputedStyle(e,null).getPropertyValue("position")),i=i.toLowerCase(),"absolute"!==i&&"relative"!==i?e.className+=" chardinjs-relative-position":void 0},e.prototype._get_offset=function(e){var t,i,n;for(t={"width":e.offsetWidth,"height":e.offsetHeight},i=0,n=0;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)i+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;return t.top=n,t.left=i,t},e}(),t.fn.extend({"chardinJs":function(){var i,a,s,r;return r=arguments[0],a=2<=arguments.length?e.call(arguments,1):[],i=t(this[0]),s=i.data("chardinJs"),s||i.data("chardinJs",s=new n(this,r)),"string"==typeof r&&s[r].apply(s,a),s}})}(window.jQuery,window)}.call(this),function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.Handlebars=e.Handlebars||t()}(this,function(){var e=function(){"use strict";function e(e){this.string=e}var t;return e.prototype.toString=function(){return""+this.string},t=e}(),t=function(e){"use strict";function t(e){return l[e]}function i(e){for(var t=1;t<arguments.length;t++)for(var i in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],i)&&(e[i]=arguments[t][i]);return e}function n(e){return e instanceof o?e.toString():null==e?"":e?(e=""+e,u.test(e)?e.replace(c,t):e):e+""}function a(e){return e||0===e?f(e)&&0===e.length?!0:!1:!0}function s(e,t){return(e?e+".":"")+t}var r={},o=e,l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},c=/[&<>"'`]/g,u=/[&<>"'`]/;r.extend=i;var d=Object.prototype.toString;r.toString=d;var h=function(e){return"function"==typeof e};h(/x/)&&(h=function(e){return"function"==typeof e&&"[object Function]"===d.call(e)});var h;r.isFunction=h;var f=Array.isArray||function(e){return e&&"object"==typeof e?"[object Array]"===d.call(e):!1};return r.isArray=f,r.escapeExpression=n,r.isEmpty=a,r.appendContextPath=s,r}(e),i=function(){"use strict";function e(e,t){var n;t&&t.firstLine&&(n=t.firstLine,e+=" - "+n+":"+t.firstColumn);for(var a=Error.prototype.constructor.call(this,e),s=0;s<i.length;s++)this[i[s]]=a[i[s]];n&&(this.lineNumber=n,this.column=t.firstColumn)}var t,i=["description","fileName","lineNumber","message","name","number","stack"];return e.prototype=new Error,t=e}(),n=function(e,t){"use strict";function i(e,t){this.helpers=e||{},this.partials=t||{},n(this)}function n(e){e.registerHelper("helperMissing",function(){if(1===arguments.length)return void 0;throw new r("Missing helper: '"+arguments[arguments.length-1].name+"'")}),e.registerHelper("blockHelperMissing",function(t,i){var n=i.inverse,a=i.fn;if(t===!0)return a(this);if(t===!1||null==t)return n(this);if(u(t))return t.length>0?(i.ids&&(i.ids=[i.name]),e.helpers.each(t,i)):n(this);if(i.data&&i.ids){var r=m(i.data);r.contextPath=s.appendContextPath(i.data.contextPath,i.name),i={"data":r}}return a(t,i)}),e.registerHelper("each",function(e,t){if(!t)throw new r("Must pass iterator to #each");var i,n,a=t.fn,o=t.inverse,l=0,c="";if(t.data&&t.ids&&(n=s.appendContextPath(t.data.contextPath,t.ids[0])+"."),d(e)&&(e=e.call(this)),t.data&&(i=m(t.data)),e&&"object"==typeof e)if(u(e))for(var h=e.length;h>l;l++)i&&(i.index=l,i.first=0===l,i.last=l===e.length-1,n&&(i.contextPath=n+l)),c+=a(e[l],{"data":i});else for(var f in e)e.hasOwnProperty(f)&&(i&&(i.key=f,i.index=l,i.first=0===l,n&&(i.contextPath=n+f)),c+=a(e[f],{"data":i}),l++);return 0===l&&(c=o(this)),c}),e.registerHelper("if",function(e,t){return d(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||s.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,i){return e.helpers["if"].call(this,t,{"fn":i.inverse,"inverse":i.fn,"hash":i.hash})}),e.registerHelper("with",function(e,t){d(e)&&(e=e.call(this));var i=t.fn;if(s.isEmpty(e))return t.inverse(this);if(t.data&&t.ids){var n=m(t.data);n.contextPath=s.appendContextPath(t.data.contextPath,t.ids[0]),t={"data":n}}return i(e,t)}),e.registerHelper("log",function(t,i){var n=i.data&&null!=i.data.level?parseInt(i.data.level,10):1;e.log(n,t)}),e.registerHelper("lookup",function(e,t){return e&&e[t]})}var a={},s=e,r=t,o="2.0.0";a.VERSION=o;var l=6;a.COMPILER_REVISION=l;var c={"1":"<= 1.0.rc.2","2":"== 1.0.0-rc.3","3":"== 1.0.0-rc.4","4":"== 1.x.x","5":"== 2.0.0-alpha.x","6":">= 2.0.0-beta.1"};a.REVISION_CHANGES=c;var u=s.isArray,d=s.isFunction,h=s.toString,f="[object Object]";a.HandlebarsEnvironment=i,i.prototype={"constructor":i,"logger":p,"log":g,"registerHelper":function(e,t){if(h.call(e)===f){if(t)throw new r("Arg not supported with multiple helpers");s.extend(this.helpers,e)}else this.helpers[e]=t},"unregisterHelper":function(e){delete this.helpers[e]},"registerPartial":function(e,t){h.call(e)===f?s.extend(this.partials,e):this.partials[e]=t},"unregisterPartial":function(e){delete this.partials[e]}};var p={"methodMap":{"0":"debug","1":"info","2":"warn","3":"error"},"DEBUG":0,"INFO":1,"WARN":2,"ERROR":3,"level":3,"log":function(e,t){if(p.level<=e){var i=p.methodMap[e];"undefined"!=typeof console&&console[i]&&console[i].call(console,t)}}};a.logger=p;var g=p.log;a.log=g;var m=function(e){var t=s.extend({},e);return t._parent=e,t};return a.createFrame=m,a}(t,i),a=function(e,t,i){"use strict";function n(e){var t=e&&e[0]||1,i=h;if(t!==i){if(i>t){var n=f[i],a=f[t];throw new d("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+a+").")}throw new d("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function a(e,t){if(!t)throw new d("No environment passed to template");if(!e||!e.main)throw new d("Unknown template object: "+typeof e);t.VM.checkRevision(e.compiler);var i=function(i,n,a,s,r,o,l,c,h){r&&(s=u.extend({},s,r));var f=t.VM.invokePartial.call(this,i,a,s,o,l,c,h);if(null==f&&t.compile){var p={"helpers":o,"partials":l,"data":c,"depths":h};l[a]=t.compile(i,{"data":void 0!==c,"compat":e.compat},t),f=l[a](s,p)}if(null!=f){if(n){for(var g=f.split("\n"),m=0,v=g.length;v>m&&(g[m]||m+1!==v);m++)g[m]=n+g[m];f=g.join("\n")}return f}throw new d("The partial "+a+" could not be compiled when running in runtime-only mode")},n={"lookup":function(e,t){for(var i=e.length,n=0;i>n;n++)if(e[n]&&null!=e[n][t])return e[n][t]},"lambda":function(e,t){return"function"==typeof e?e.call(t):e},"escapeExpression":u.escapeExpression,"invokePartial":i,"fn":function(t){return e[t]},"programs":[],"program":function(e,t,i){var n=this.programs[e],a=this.fn(e);return t||i?n=s(this,e,a,t,i):n||(n=this.programs[e]=s(this,e,a)),n},"data":function(e,t){for(;e&&t--;)e=e._parent;return e},"merge":function(e,t){var i=e||t;return e&&t&&e!==t&&(i=u.extend({},t,e)),i},"noop":t.VM.noop,"compilerInfo":e.compiler},a=function(t,i){i=i||{};var s=i.data;a._setup(i),!i.partial&&e.useData&&(s=l(t,s));var r;return e.useDepths&&(r=i.depths?[t].concat(i.depths):[t]),e.main.call(n,t,n.helpers,n.partials,s,r)};return a.isTop=!0,a._setup=function(i){i.partial?(n.helpers=i.helpers,n.partials=i.partials):(n.helpers=n.merge(i.helpers,t.helpers),e.usePartial&&(n.partials=n.merge(i.partials,t.partials)))},a._child=function(t,i,a){if(e.useDepths&&!a)throw new d("must pass parent depths");return s(n,t,e[t],i,a)},a}function s(e,t,i,n,a){var s=function(t,s){return s=s||{},i.call(e,t,e.helpers,e.partials,s.data||n,a&&[t].concat(a))};return s.program=t,s.depth=a?a.length:0,s}function r(e,t,i,n,a,s,r){var o={"partial":!0,"helpers":n,"partials":a,"data":s,"depths":r};if(void 0===e)throw new d("The partial "+t+" could not be found");return e instanceof Function?e(i,o):void 0}function o(){return""}function l(e,t){return t&&"root"in t||(t=t?p(t):{},t.root=e),t}var c={},u=e,d=t,h=i.COMPILER_REVISION,f=i.REVISION_CHANGES,p=i.createFrame;return c.checkRevision=n,c.template=a,c.program=s,c.invokePartial=r,c.noop=o,c}(t,i,n),s=function(e,t,i,n,a){"use strict";var s,r=e,o=t,l=i,c=n,u=a,d=function(){var e=new r.HandlebarsEnvironment;return c.extend(e,r),e.SafeString=o,e.Exception=l,e.Utils=c,e.escapeExpression=c.escapeExpression,e.VM=u,e.template=function(t){return u.template(t,e)},e},h=d();return h.create=d,h["default"]=h,s=h}(n,e,i,t,a);return s}),function(){var e=Handlebars.template,t=Handlebars.templates=Handlebars.templates||{};t.gsf_chromeinlineinstall=e({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e){var t,i=this.lambda,n=this.escapeExpression;return'<div class="overlay_screen overlay_screen_alt">\n	<div class="overlay_note_container">\n		<div class="overlay_arrow"></div>\n		<p>'+n(i(null!=(t=null!=e?e.gsf:e)?t.doesnotviewtransmit:t,e))+"<br>"+n(i(null!=(t=null!=e?e.gsf:e)?t.orstorebrowsinghistory:t,e))+'</p>\n		<p class="learn">'+n(i(null!=(t=null!=e?e.gsf:e)?t.morequestions:t,e))+"<br>"+n(i(null!=(t=null!=e?e.gsf:e)?t["goto"]:t,e))+": GetPocket.com/ChromePrivacy</p>\n	</div>\n</div>"},"useData":!0}),t.gsf_overlayone=e({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e){var t,i=this.lambda,n=this.escapeExpression;return'<div class="overlay_detail">\n	<div class="gsf_one gsf_active clearfix">\n		<h3>'+n(i(null!=(t=null!=e?e.gsf:e)?t.congrats:t,e))+'</h3>\n		<div class="gsf_bg"></div>\n		<div class="gsf_content">\n			<p>'+n(i(null!=(t=null!=e?e.gsf:e)?t.youvesignedupforpocket:t,e))+"</p>\n			<p>"+n(i(null!=(t=null!=e?e.gsf:e)?t.accesspocketondevices:t,e))+'</p>\n			<p><a class="button" href="#">'+n(i(null!=(t=null!=e?e.cta:e)?t.getstarted:t,e))+'</a></p>\n		</div>\n	</div>\n	<div class="gsf_two clearfix">\n		<a class="skip_link" href="#">'+n(i(null!=(t=null!=e?e.gsf:e)?t.skipthisstep:t,e))+"</a>\n		<h3>"+n(i(null!=(t=null!=e?e.gsf:e)?t.savethingsviewlater:t,e))+'</h3>\n		<div class="gsf_bg"></div>\n		<div class="gsf_content">\n			<p>'+n(i(null!=(t=null!=e?e.gsf:e)?t.connectingpocketbuttonprovides:t,e))+"</p>\n			<p>"+n(i(null!=(t=null!=e?e.gsf:e)?t.buttonsitsintoolbar:t,e))+'</p>\n			<p><a class="button" href="#">'+n(i(null!=(t=null!=e?e.cta:e)?t.connectnow:t,e))+'</a></p>\n		</div>\n	</div>\n	<div class="gsf_three clearfix">\n		<h3>'+n(i(null!=(t=null!=e?e.gsf:e)?t.pocketbuttonconnected:t,e))+".</h3>\n		<h5>"+n(i(null!=(t=null!=e?e.gsf:e)?t.yourereadytosave:t,e))+'</h5>\n		<div class="gsf_bg"></div>\n		<div class="gsf_content">\n			<div class="step">1</div>\n			<p>'+n(i(null!=(t=null!=e?e.gsf:e)?t.clicktosaveapage:t,e))+'</p>\n			<div class="step">2</div>\n			<p>'+n(i(null!=(t=null!=e?e.gsf:e)?t.returntogetpocket:t,e))+'</p>\n			<p class="button_container"><a class="button" href="#">'+n(i(null!=(t=null!=e?e.gsf:e)?t.savesomething:t,e))+'</a></p>\n		</div>\n	</div>\n	<ul class="gsf_progress">\n		<li class="selected">1</li>\n		<li>2</li>\n	</ul>\n</div>'},"useData":!0}),t.init_requirepassword=e({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e){var t,i=this.lambda,n=this.escapeExpression;return'<div class="overlay_createpasswordcontainer">\n	<h2>'+n(i(null!=(t=null!=e?e.gsf:e)?t.createpassword:t,e))+'</h2>\n	<div class="form-msg">'+n(i(null!=(t=null!=e?e.gsf:e)?t.passwordsaved:t,e))+'</div>\n	<div class="avatar"></div>\n	<h3 class="hi">'+n(i(null!=(t=null!=e?e.gsf:e)?t.hi:t,e))+' <span class="name"></span>!</h3>\n	<p class="email"></p>\n\n	<p>'+n(i(null!=(t=null!=e?e.gsf:e)?t.thispasswordwill:t,e))+'</p>\n	<form class="form-changepassword">\n		<div class="form-field">\n	        <span class="error-bubble"><span class="error-msg">'+n(i(null!=(t=null!=e?e.gsf:e)?t.invalidpassword:t,e))+'</span><span class="error-arrow"></span></span>\n	        <label for="password">'+n(i(null!=(t=null!=e?e.gsf:e)?t.enterpassword:t,e))+'</label>\n	        <input type="password" id="password" name="password" autofocus autocomplete="off" tabindex="1" placeholder="'+n(i(null!=(t=null!=e?e.gsf:e)?t.enterpassword:t,e))+'">\n	    </div><br>\n	    <div class="form-processing"></div>\n	    <input tabindex="2" type="submit" value="'+n(i(null!=(t=null!=e?e.gsf:e)?t.finish:t,e))+'" class="button password-btn-add">\n	</form>\n</div>'},"useData":!0}),t.login_containershell=e({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e){var t,i=this.lambda,n=this.escapeExpression;return'<div id="login-container">\n    <div class="login-dialog">\n        <div class="rainbowDash">\n            <div class="green"></div>\n            <div class="blue"></div>\n            <div class="red"></div>\n            <div class="orange"></div>\n        </div>\n        <div class="content content-opener content-active coreform-container">\n            <h1 class="logo-lrg">Pocket</h1>\n            <h3>'+n(i(null!=(t=null!=e?e.login:e)?t.whenyoufind:t,e))+'</h3>\n\n            <div class="signupgoogle-processing"></div>\n            <a href="#" class="button signup-btn-google"><span class="logo"></span><span class="text">'+n(i(null!=(t=null!=e?e.login:e)?t.signupgoogle:t,e))+'</span></a>\n            <div class="signup-ordivider">'+n(i(null!=(t=null!=e?e.login:e)?t.or:t,e))+'</div>\n            <a href="#" class="button button-secondary signupemail-btn-menu signup-btn-initstate">'+n(i(null!=(t=null!=e?e.login:e)?t.signupemail:t,e))+'</a>\n\n            <p class="alreadyhave">'+n(i(null!=(t=null!=e?e.login:e)?t.alreadhavepocket:t,e))+' <a class="login-btn-menu" href="#">'+n(i(null!=(t=null!=e?e.login:e)?t.logintopocket:t,e))+'</a> <span class="rarrow">&rsaquo;</span></p>\n\n        </div>\n        <form class="content content-login coreform-container loginform-container">\n            <h2>'+n(i(null!=(t=null!=e?e.login:e)?t.login:t,e))+"</h2>\n            <h3>"+n(i(null!=(t=null!=e?e.login:e)?t.hello:t,e))+'</h3>\n            <div class="logingoogle-processing"></div>\n            <a href="#" class="button button-secondary login-btn-google"><span class="logo"></span><span class="text">'+n(i(null!=(t=null!=e?e.login:e)?t.logingoogle:t,e))+'</span></a>\n            <div class="signup-ordivider">'+n(i(null!=(t=null!=e?e.login:e)?t.or:t,e))+'</div>\n            <div class="loginform-formemail">\n                <div class="form-field">\n                    <span class="error-bubble"><span class="error-msg"></span><span class="error-arrow"></span></span>\n                    <label for="feed_id">'+n(i(null!=(t=null!=e?e.login:e)?t.emailusername:t,e))+'</label>\n                    <input type="text" id="feed_id" name="feed_id" autocomplete="off" autofocus tabindex="1" placeholder="'+n(i(null!=(t=null!=e?e.login:e)?t.emailusername:t,e))+'">\n                </div><br>\n                <div class="form-field">\n                    <span class="error-bubble"><span class="error-msg"></span><span class="error-arrow"></span></span>\n                    <label for="login_password">'+n(i(null!=(t=null!=e?e.login:e)?t.password:t,e))+'</label>\n                    <input type="password" id="login_password" name="password" autocomplete="off" tabindex="2" placeholder="'+n(i(null!=(t=null!=e?e.login:e)?t.password:t,e))+'">\n                </div>\n            </div>\n            <div class="login-processing"></div>\n            <div class="button-container clearfix">\n                <a href="#" class="button button-secondary button-cancel">'+n(i(null!=(t=null!=e?e.login:e)?t.cancel:t,e))+'</a>\n                <input type="submit" tabindex="5" value="'+n(i(null!=(t=null!=e?e.login:e)?t.login:t,e))+'" class="button button-important login-btn-email">\n            </div>\n            <p class="login-footer">\n                <a class="forgot" href="http://getpocket.com/forgot" target="_blank">'+n(i(null!=(t=null!=e?e.login:e)?t.forgotuserpass:t,e))+'</a> <span class="rarrow">&rsaquo;</span><br>\n                <a class="signup button-cancel" href="#">'+n(i(null!=(t=null!=e?e.login:e)?t.signupnow:t,e))+'</a> <span class="rarrow">&rsaquo;</span>\n            </p>\n        </form>\n        <form class="content content-signup-email coreform-container signupform-container">\n            <h2>'+n(i(null!=(t=null!=e?e.login:e)?t.signup:t,e))+"</h2>\n            <h3>"+n(i(null!=(t=null!=e?e.login:e)?t.supereasy:t,e))+'</h3>\n            <div class="form-field">\n                <span class="error-bubble"><span class="error-msg"></span><span class="error-arrow"></span></span>\n                <label for="first_name">'+n(i(null!=(t=null!=e?e.login:e)?t.firstname:t,e))+'</label>\n                <input type="text" id="first_name" name="first_name" autocomplete="on" tabindex="1" placeholder="'+n(i(null!=(t=null!=e?e.login:e)?t.firstname:t,e))+'">\n            </div><br>\n            <div class="form-field">\n                <span class="error-bubble"><span class="error-msg"></span><span class="error-arrow"></span></span>\n                <label for="last_name">'+n(i(null!=(t=null!=e?e.login:e)?t.lastname:t,e))+'</label>\n                <input type="text" id="last_name" name="last_name" autocomplete="on" tabindex="2" placeholder="'+n(i(null!=(t=null!=e?e.login:e)?t.lastname:t,e))+'">\n            </div><br>\n            <div class="form-field">\n                <span class="error-bubble"><span class="error-msg"></span><span class="error-arrow"></span></span>\n                <label for="signup_email">'+n(i(null!=(t=null!=e?e.login:e)?t.email:t,e))+'</label>\n                <input type="text" id="signup_email" name="email" autocomplete="on" tabindex="3" placeholder="'+n(i(null!=(t=null!=e?e.login:e)?t.email:t,e))+'" value="'+n(i(null!=(t=null!=e?e.page:e)?t.prefill_email:t,e))+'">\n            </div><br>\n            <div class="form-field">\n                <span class="error-bubble"><span class="error-msg"></span><span class="error-arrow"></span></span>\n                <label for="signup_password">'+n(i(null!=(t=null!=e?e.login:e)?t.password:t,e))+'</label>\n                <input type="password" id="signup_password" name="password" autocomplete="off" tabindex="4" placeholder="'+n(i(null!=(t=null!=e?e.login:e)?t.password:t,e))+'">\n            </div> \n            <div class="signup-processing"></div>\n            <div class="button-container clearfix">\n                <a href="#" class="button button-secondary button-cancel">'+n(i(null!=(t=null!=e?e.login:e)?t.cancel:t,e))+'</a>\n                <input type="submit" tabindex="5" value="'+n(i(null!=(t=null!=e?e.login:e)?t.signup:t,e))+'" class="button button-important signup-btn-formstate">\n            </div>\n            <input type="hidden" name="source" value="email">\n        </form>\n    </div>\n</div>'},"useData":!0}),t.notification_persistent=e({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e){var t,i=this.lambda,n=this.escapeExpression;return'<div class=\'notifications-persistent\'>\n	<p class="content"></p>\n	<a href="#" class="close">'+n(i(null!=(t=null!=e?e.cta:e)?t.close:t,e))+"</a>\n</div>"},"useData":!0}),t.notification_pocketpremupsell=e({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e){var t,i=this.lambda,n=this.escapeExpression;return'<div class="overlay_detail overlay_detail_premupsell">\n		<a class="close" href="#">'+n(i(null!=(t=null!=e?e.cta:e)?t.close:t,e))+'</a>\n		<div class="premupsell_divider"><h5>'+n(i(null!=(t=null!=e?e.queue:e)?t.introducing:t,e))+"</h5></div>\n\n		<h2>"+n(i(null!=(t=null!=e?e.queue:e)?t.pocketpremium:t,e))+"</h2>\n\n		<p>"+n(i(null!=(t=null!=e?e.queue:e)?t.mostpowerful:t,e))+'</p>\n		<a class="button" href="/premium?ep=4" target="_blank">'+n(i(null!=(t=null!=e?e.cta:e)?t.learnmore:t,e))+"</a>\n</div>"},"useData":!0}),t.notification_shares=e({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e){var t,i=this.lambda,n=this.escapeExpression;return"<div class='notifications-shares noSelection'>\n	<span class='contents'>\n		<span class='count noSelection'></span>\n	</span>\n	<span class='contents'>\n		<div class='description noSelection'></div>\n	</span>\n	<span class='contents'>\n		<span id='viewNotifications' class='noSelection'><span class=\"arrow\">&#9662;</span><span class=\"text\">"+n(i(null!=(t=null!=e?e.notification:e)?t.viewinbox:t,e))+"</span></span>\n	</span>\n</div>"},"useData":!0}),t.notification_sharesname=e({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e){var t,i=this.lambda,n=this.escapeExpression;return"<span class='name noSelection'>"+n(i(null!=(t=null!=e?e.manual:e)?t.inbox_name:t,e))+"</span>"},"useData":!0}),t.notification_sync_added=e({"1":function(e){var t,i=this.lambda,n=this.escapeExpression;return'<span class="count count_solo">'+n(i(null!=(t=null!=e?e.manual:e)?t.sync_count:t,e))+"</span> "+n(i(null!=(t=null!=e?e.notification:e)?t.itemadded:t,e))+"\n"},"3":function(e){var t,i=this.lambda,n=this.escapeExpression;return'<span class="count">'+n(i(null!=(t=null!=e?e.manual:e)?t.sync_count:t,e))+"</span> "+n(i(null!=(t=null!=e?e.notification:e)?t.itemsadded:t,e))+"\n"},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var a;return a=t["if"].call(e,null!=(a=null!=e?e.manual:e)?a.sync_singular:a,{"name":"if","hash":{},"fn":this.program(1,n),"inverse":this.program(3,n),"data":n}),null!=a?a:""},"useData":!0}),t.notification_sync_archived=e({"1":function(e){var t,i=this.lambda,n=this.escapeExpression;return'<span class="count count_solo">'+n(i(null!=(t=null!=e?e.manual:e)?t.sync_count:t,e))+"</span> "+n(i(null!=(t=null!=e?e.notification:e)?t.itemarchived:t,e))+"\n"},"3":function(e){var t,i=this.lambda,n=this.escapeExpression;return'<span class="count">'+n(i(null!=(t=null!=e?e.manual:e)?t.sync_count:t,e))+"</span> "+n(i(null!=(t=null!=e?e.notification:e)?t.itemsarchived:t,e))+"\n"},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var a;return a=t["if"].call(e,null!=(a=null!=e?e.manual:e)?a.sync_singular:a,{"name":"if","hash":{},"fn":this.program(1,n),"inverse":this.program(3,n),"data":n}),null!=a?a:""},"useData":!0}),t.notification_sync_deleted=e({"1":function(e){var t,i=this.lambda,n=this.escapeExpression;return'<span class="count count_solo">'+n(i(null!=(t=null!=e?e.manual:e)?t.sync_count:t,e))+"</span> "+n(i(null!=(t=null!=e?e.notification:e)?t.itemdeleted:t,e))+"\n"},"3":function(e){var t,i=this.lambda,n=this.escapeExpression;return'<span class="count">'+n(i(null!=(t=null!=e?e.manual:e)?t.sync_count:t,e))+"</span> "+n(i(null!=(t=null!=e?e.notification:e)?t.itemsdeleted:t,e))+"\n"},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var a;return a=t["if"].call(e,null!=(a=null!=e?e.manual:e)?a.sync_singular:a,{"name":"if","hash":{},"fn":this.program(1,n),"inverse":this.program(3,n),"data":n}),null!=a?a:""},"useData":!0}),t.notification_sync_updated=e({"1":function(e){var t,i=this.lambda,n=this.escapeExpression;return'<span class="count count_solo">'+n(i(null!=(t=null!=e?e.manual:e)?t.sync_count:t,e))+"</span> "+n(i(null!=(t=null!=e?e.notification:e)?t.itemupdated:t,e))+"\n"},"3":function(e){var t,i=this.lambda,n=this.escapeExpression;return'<span class="count">'+n(i(null!=(t=null!=e?e.manual:e)?t.sync_count:t,e))+"</span> "+n(i(null!=(t=null!=e?e.notification:e)?t.itemsupdated:t,e))+"\n"},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var a;return a=t["if"].call(e,null!=(a=null!=e?e.manual:e)?a.sync_singular:a,{"name":"if","hash":{},"fn":this.program(1,n),"inverse":this.program(3,n),"data":n}),null!=a?a:""},"useData":!0}),t.queue_additemdialog=e({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e){var t,i=this.lambda,n=this.escapeExpression;return'<div class="container">\n	<h5>'+n(i(null!=(t=null!=e?e.queue:e)?t.saveanitemtopocket:t,e))+"</h5>\n	<p>"+n(i(null!=(t=null!=e?e.queue:e)?t.foreasiersavingexpanded:t,e))+'</p>\n	<input type="text" placeholder="http://..."><a href="#" class="button button-disabled">'+n(i(null!=(t=null!=e?e.cta:e)?t.save:t,e))+"</a>\n</div>\n\n"},"useData":!0}),t.queue_bulkeditactions=e({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e){var t,i=this.lambda,n=this.escapeExpression;return'<ul>\n    <li class="bulkedit-archive"><a title="'+n(i(null!=(t=null!=e?e.queue:e)?t.archive:t,e))+'" href="#">'+n(i(null!=(t=null!=e?e.queue:e)?t.archive:t,e))+'</a></li>\n    <li class="bulkedit-favorite"><a title="'+n(i(null!=(t=null!=e?e.queue:e)?t.favorite:t,e))+'" href="#">'+n(i(null!=(t=null!=e?e.queue:e)?t.favorite:t,e))+'</a></li>\n    <li class="bulkedit-delete"><a title="'+n(i(null!=(t=null!=e?e.queue:e)?t["delete"]:t,e))+'" href="#">'+n(i(null!=(t=null!=e?e.queue:e)?t["delete"]:t,e))+'</a></li>\n    <li class="bulkedit-addtag"><a title="'+n(i(null!=(t=null!=e?e.queue:e)?t.addtag:t,e))+'" href="#">'+n(i(null!=(t=null!=e?e.queue:e)?t.addtag:t,e))+"</a></li>\n</ul>"},"useData":!0}),t.queue_bulktagdialog=e({"1":function(e){var t,i=this.lambda,n=this.escapeExpression;return"	<h3>"+n(i(null!=(t=null!=e?e.tag:e)?t.addtags:t,e))+" <span>("+n(i(null!=(t=null!=e?e.manual:e)?t.tags_count:t,e))+" "+n(i(null!=(t=null!=e?e.search:e)?t.item:t,e))+")</span></h3>\n"},"3":function(e){var t,i=this.lambda,n=this.escapeExpression;return"	<h3>"+n(i(null!=(t=null!=e?e.tag:e)?t.addtags:t,e))+" <span>("+n(i(null!=(t=null!=e?e.manual:e)?t.tags_count:t,e))+" "+n(i(null!=(t=null!=e?e.search:e)?t.items:t,e))+")</span></h3>\n"},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var a,s=this.lambda,r=this.escapeExpression,o='<div class="overlay_detail overlay_detail_confirm overlay_detail_confirmtag">\n';return a=t["if"].call(e,null!=(a=null!=e?e.manual:e)?a.tag_singular:a,{"name":"if","hash":{},"fn":this.program(1,n),"inverse":this.program(3,n),"data":n}),null!=a&&(o+=a),o+'	<a class="close">'+r(s(null!=(a=null!=e?e.cta:e)?a.close:a,e))+'</a>\n	<div class="clearfix">\n		<input id="edit-tags-input" type="text">\n		<a href="#" class="button button-small button-disabled">'+r(s(null!=(a=null!=e?e.cta:e)?a.save:a,e))+"</a>\n	</div>\n</div>"},"useData":!0}),t.queue_confirmdialog_cancel=e({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e){var t,i=this.lambda,n=this.escapeExpression;return'	<p class="button_container">\n		<a href="#" class="button button-secondary button-small button-cancel">'+n(i(null!=(t=null!=e?e.cta:e)?t.cancel:t,e))+'</a> \n		<a href="#" class="button button-important button-small button-confirm">'+n(i(null!=(t=null!=e?e.manual:e)?t.confirmbuttontext:t,e))+"</a>\n	</p>\n</div>"},"useData":!0}),t.queue_confirmdialog_nocancel=e({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e){var t,i=this.lambda,n=this.escapeExpression;return'	<p class="button_container">\n		<a href="#" class="button button button-small button-confirm">'+n(i(null!=(t=null!=e?e.cta:e)?t.ok:t,e))+"</a>\n	</p>\n</div>"},"useData":!0}),t.queue_gsfdevicereminder=e({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e){var t,i=this.lambda,n=this.escapeExpression;return'<div class="gsf_device_reminder_container gsf_device_reminder_active">\n	<div class="gsf_device_reminder">\n		<a class="close" href="#">'+n(i(null!=(t=null!=e?e.cta:e)?t.close:t,e))+"</a>\n		<h5>"+n(i(null!=(t=null!=e?e.gsf:e)?t.takepocketwithyou:t,e))+"</h5>\n		<p>"+n(i(null!=(t=null!=e?e.gsf:e)?t.availableon:t,e))+' <a href="http://getpocket.com/apps/link/pocket-iphone/" target="_blank">iPhone</a>,\n			<a href="http://getpocket.com/apps/link/pocket-iphone/" target="_blank">iPad</a>,\n			<a href="http://getpocket.com/apps/link/pocket-android/" target="_blank">Android</a>, '+n(i(null!=(t=null!=e?e.gsf:e)?t.and:t,e))+'\n			<a href="http://getpocket.com/apps/link/pocket-amazon/" target="_blank">Kindle Fire</a>.\n		</p>\n	</div>\n</div>'},"useData":!0}),t.queue_helpoverlay=e({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e){var t,i=this.lambda,n=this.escapeExpression;return'<div class="chardinjs-header"><h2>'+n(i(null!=(t=null!=e?e.help:e)?t.pocketmenu:t,e))+'</h2></div>\n<div class="chardinjs-keyboard">\n    <ul>\n        <li class="header">'+n(i(null!=(t=null!=e?e.help:e)?t.keyboardqueueview:t,e))+"</li>\n        <li><span>cmd/ctrl + 1/2/3</span>"+n(i(null!=(t=null!=e?e.help:e)?t.switchhomefavarchive:t,e))+"</li>\n        <li><span>alt + 1/2/3/4</span>"+n(i(null!=(t=null!=e?e.help:e)?t.filterarticlesvidsimages:t,e))+"</li>\n        <li><span>alt + 5</span>"+n(i(null!=(t=null!=e?e.help:e)?t.togglesorting:t,e))+"</li>\n        <li><span>cmd/ctrl + /</span>"+n(i(null!=(t=null!=e?e.help:e)?t.toggletilelist:t,e))+"</li>\n        <li><span>a</span>"+n(i(null!=(t=null!=e?e.help:e)?t.archiveselected:t,e))+"</li>\n        <li><span>f</span>"+n(i(null!=(t=null!=e?e.help:e)?t.favoriteselected:t,e))+"</li>\n        <li><span>j/k</span>"+n(i(null!=(t=null!=e?e.help:e)?t.selectnextprev:t,e))+"</li>\n        <li><span>o</span>"+n(i(null!=(t=null!=e?e.help:e)?t.vieworigselected:t,e))+"</li>\n        <li><span>s</span>"+n(i(null!=(t=null!=e?e.help:e)?t.focussearch:t,e))+"</li>\n        <li><span>t</span>"+n(i(null!=(t=null!=e?e.help:e)?t.tagselected:t,e))+"</li>\n        <li><span>return/enter</span>"+n(i(null!=(t=null!=e?e.help:e)?t.openselected:t,e))+"</li>\n        <li><span>?</span>"+n(i(null!=(t=null!=e?e.help:e)?t.viewhelp:t,e))+"</li>\n    </ul>\n</div>"},"useData":!0}),t.queue_helpoverlaypackaged=e({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e){var t,i=this.lambda,n=this.escapeExpression;return'<div class="chardinjs-header"><h2>'+n(i(null!=(t=null!=e?e.help:e)?t.pocketmenu:t,e))+'</h2></div>\n<div class="chardinjs-keyboard">\n    <ul>\n        <li class="header">'+n(i(null!=(t=null!=e?e.help:e)?t.keyboardqueueview:t,e))+"</li>\n        <li><span>cmd/ctrl + 1/2/3</span>"+n(i(null!=(t=null!=e?e.help:e)?t.switchhomefavarchive:t,e))+"</li>\n        <li><span>alt + 1/2/3/4</span>"+n(i(null!=(t=null!=e?e.help:e)?t.filterarticlesvidsimages:t,e))+"</li>\n        <li><span>alt + 5</span>"+n(i(null!=(t=null!=e?e.help:e)?t.togglesorting:t,e))+"</li>\n        <li><span>cmd/ctrl + /</span>"+n(i(null!=(t=null!=e?e.help:e)?t.toggletilelist:t,e))+"</li>\n        <li><span>a</span>"+n(i(null!=(t=null!=e?e.help:e)?t.archiveselected:t,e))+"</li>\n        <li><span>f</span>"+n(i(null!=(t=null!=e?e.help:e)?t.favoriteselected:t,e))+"</li>\n        <li><span>j/k</span>"+n(i(null!=(t=null!=e?e.help:e)?t.selectnextprev:t,e))+"</li>\n        <li><span>o</span>"+n(i(null!=(t=null!=e?e.help:e)?t.vieworigselected:t,e))+"</li>\n        <li><span>s</span>"+n(i(null!=(t=null!=e?e.help:e)?t.focussearch:t,e))+"</li>\n        <li><span>return/enter</span>"+n(i(null!=(t=null!=e?e.help:e)?t.openselected:t,e))+"</li>\n        <li><span>?</span>"+n(i(null!=(t=null!=e?e.help:e)?t.viewhelp:t,e))+"</li>\n    </ul>\n</div>"
},"useData":!0}),t.queue_itembuttons=e({"1":function(e){var t,i=this.lambda,n=this.escapeExpression;return'	<li class="action_mark action_mark_archived selected" title="'+n(i(null!=(t=null!=e?e.cta:e)?t.addtolist:t,e))+'"><a href="#">'+n(i(null!=(t=null!=e?e.cta:e)?t.addtolist:t,e))+"</a></li>\n"},"3":function(e){var t,i=this.lambda,n=this.escapeExpression;return'	<li class="action_mark" title="'+n(i(null!=(t=null!=e?e.cta:e)?t.archive:t,e))+'"><a href="#">'+n(i(null!=(t=null!=e?e.cta:e)?t.archive:t,e))+"</a></li>\n"},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var a,s=this.lambda,r=this.escapeExpression,o='<ul class="buttons">\n	<li class="action_share" title="'+r(s(null!=(a=null!=e?e.cta:e)?a.share:a,e))+'"><a href="#">'+r(s(null!=(a=null!=e?e.cta:e)?a.share:a,e))+"</a></li>\n";return a=t["if"].call(e,null!=(a=null!=e?e.manual:e)?a.item_buttonarchived:a,{"name":"if","hash":{},"fn":this.program(1,n),"inverse":this.program(3,n),"data":n}),null!=a&&(o+=a),o+'	<li class="action_delete" title="'+r(s(null!=(a=null!=e?e.cta:e)?a["delete"]:a,e))+'"><a href="#">'+r(s(null!=(a=null!=e?e.cta:e)?a["delete"]:a,e))+'</a></li>\n	<li class="action_tag" title="'+r(s(null!=(a=null!=e?e.tag:e)?a.edittags:a,e))+'"><a href="#">'+r(s(null!=(a=null!=e?e.tag:e)?a.edittags:a,e))+'</a></li>\n	<li class="action_favorite '+r(s(null!=(a=null!=e?e.manual:e)?a.item_buttonfavorited:a,e))+'" title="'+r(s(null!=(a=null!=e?e.cta:e)?a.favorite:a,e))+'"><a href="#">'+r(s(null!=(a=null!=e?e.cta:e)?a.favorite:a,e))+"</a></li>\n</ul>"},"useData":!0}),t.queue_itemfriendsdetail=e({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e){var t,i=this.lambda,n=this.escapeExpression;return"<span class='row_friends'>\n	<span class='collapsed'>\n		<span class='avatar' style='background-image: url("+n(i(null!=(t=null!=e?e.manual:e)?t.item_friendsbgimg:t,e))+");'></span>\n		"+n(i(null!=(t=null!=e?e.manual:e)?t.item_friendslist:t,e))+"\n	</span>\n	<span class='caret'></span>\n</span>"},"useData":!0}),t.queue_itemshell_grid=e({"1":function(e){var t,i=this.lambda,n=this.escapeExpression,a='<li class="item item_withtopic item_'+n(i(null!=(t=null!=e?e.manual:e)?t.tile_class:t,e))+'" id="i'+n(i(null!=(t=null!=e?e.manual:e)?t.item_id:t,e))+'" ';return t=i(null!=(t=null!=e?e.manual:e)?t.item_extraattributes:t,e),null!=t&&(a+=t),a+">\n"},"3":function(e){var t,i=this.lambda,n=this.escapeExpression,a='<li class="item item_'+n(i(null!=(t=null!=e?e.manual:e)?t.tile_class:t,e))+'" id="i'+n(i(null!=(t=null!=e?e.manual:e)?t.item_id:t,e))+'" ';return t=i(null!=(t=null!=e?e.manual:e)?t.item_extraattributes:t,e),null!=t&&(a+=t),a+">\n"},"5":function(e){var t,i=this.lambda,n=this.escapeExpression;return'			<a class="topic_detail topic_'+n(i(null!=(t=null!=e?e.manual:e)?t.item_topic_id:t,e))+'" href="#">'+n(i(null!=(t=null!=e?e.manual:e)?t.item_topic_desc:t,e))+"</a>\n"},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var a,s=this.lambda,r=this.escapeExpression,o="";return a=t["if"].call(e,null!=(a=null!=e?e.manual:e)?a.item_topic_desc:a,{"name":"if","hash":{},"fn":this.program(1,n),"inverse":this.program(3,n),"data":n}),null!=a&&(o+=a),o+='	<a class="'+r(s(null!=(a=null!=e?e.manual:e)?a.item_linkclasses:a,e))+'" href="'+r(s(null!=(a=null!=e?e.manual:e)?a.item_openurl:a,e))+'" target="_blank">\n		<span class="inner">\n			<span class="title"><span>'+r(s(null!=(a=null!=e?e.manual:e)?a.item_title:a,e))+'</span></span>\n			<span class="thumb" variant="'+r(s(null!=(a=null!=e?e.manual:e)?a.item_thumbvariant:a,e))+'"></span>\n			<img class="favicon" data-originalurl="'+r(s(null!=(a=null!=e?e.manual:e)?a.item_originalurl:a,e))+'">\n',a=t["if"].call(e,null!=(a=null!=e?e.manual:e)?a.item_topic_desc:a,{"name":"if","hash":{},"fn":this.program(5,n),"inverse":this.noop,"data":n}),null!=a&&(o+=a),o+"		</span>\n	</a>\n</li>"},"useData":!0}),t.queue_itemshell_list=e({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e){var t,i=this.lambda,n=this.escapeExpression,a='<li class="item" id="i'+n(i(null!=(t=null!=e?e.manual:e)?t.item_id:t,e))+'" ';return t=i(null!=(t=null!=e?e.manual:e)?t.item_extraattributes:t,e),null!=t&&(a+=t),a+'>\n	<span class="inner">\n		<a class="'+n(i(null!=(t=null!=e?e.manual:e)?t.item_linkclasses:t,e))+'" href="'+n(i(null!=(t=null!=e?e.manual:e)?t.item_openurl:t,e))+'" target="_blank">\n			<span class="title"><span>'+n(i(null!=(t=null!=e?e.manual:e)?t.item_title:t,e))+'</span></span>\n		</a>\n		<span class="thumb" variant="'+n(i(null!=(t=null!=e?e.manual:e)?t.item_thumbvariant:t,e))+'"></span>\n	</span>\n	\n</li>'},"useData":!0}),t.queue_itemsubdetail_grid=e({"1":function(e,t,i,n){var a,s=this.lambda,r=this.escapeExpression,o="";return a=t["if"].call(e,null!=(a=null!=e?e.manual:e)?a.item_topic_desc:a,{"name":"if","hash":{},"fn":this.program(2,n),"inverse":this.program(4,n),"data":n}),null!=a&&(o+=a),o+='		<span class="tag_container">',a=s(null!=(a=null!=e?e.manual:e)?a.item_tags:a,e),null!=a&&(o+=a),o+'</span>\n		<a class="edit"><span>'+r(s(null!=(a=null!=e?e.queue:e)?a.addtag:a,e))+"</span></a>\n	</li>\n"},"2":function(){return'	<li class="tags tags-withtopic hasTags">\n'},"4":function(){return'	<li class="tags hasTags">\n'},"6":function(e,t,i,n){var a,s=this.lambda,r=this.escapeExpression,o="";return a=t["if"].call(e,null!=(a=null!=e?e.manual:e)?a.item_topic_desc:a,{"name":"if","hash":{},"fn":this.program(7,n),"inverse":this.program(9,n),"data":n}),null!=a&&(o+=a),o+='		<span class="tag_container">',a=s(null!=(a=null!=e?e.manual:e)?a.item_tags:a,e),null!=a&&(o+=a),o+'</span>\n		<a class="edit"><span>'+r(s(null!=(a=null!=e?e.queue:e)?a.addtag:a,e))+"</span></a>\n	</li>\n"},"7":function(){return'	<li class="tags tags-withtopic">\n'},"9":function(){return'	<li class="tags">\n'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var a,s=this.lambda,r=this.escapeExpression,o='<ul class="sub clearfix">\n	<li><a class="original_url" href="'+r(s(null!=(a=null!=e?e.manual:e)?a.item_targeturl:a,e))+'" target="_blank" title="'+r(s(null!=(a=null!=e?e.cta:e)?a.vieworiginal:a,e))+'">'+r(s(null!=(a=null!=e?e.manual:e)?a.item_domain:a,e))+'</a></li>\n</ul>\n<ul class="sub-tags">\n';return a=t["if"].call(e,null!=(a=null!=e?e.manual:e)?a.item_tags:a,{"name":"if","hash":{},"fn":this.program(1,n),"inverse":this.program(6,n),"data":n}),null!=a&&(o+=a),o+'</ul>\n<div class="clear"></div>'},"useData":!0}),t.queue_itemsubdetail_list=e({"1":function(e){var t,i=this.lambda,n=this.escapeExpression;return'	<li class="topic">\n		<a class="topic_detail topic_'+n(i(null!=(t=null!=e?e.manual:e)?t.item_topic_id:t,e))+'" href="#">'+n(i(null!=(t=null!=e?e.manual:e)?t.item_topic_desc:t,e))+"</a>\n	</li>\n"},"3":function(e,t,i,n){var a,s=this.lambda,r=this.escapeExpression,o="";return a=t["if"].call(e,null!=(a=null!=e?e.manual:e)?a.item_topic_desc:a,{"name":"if","hash":{},"fn":this.program(4,n),"inverse":this.program(6,n),"data":n}),null!=a&&(o+=a),o+='		<span class="tag_container">',a=s(null!=(a=null!=e?e.manual:e)?a.item_tags:a,e),null!=a&&(o+=a),o+'</span>\n		<a class="edit"><span>'+r(s(null!=(a=null!=e?e.queue:e)?a.addtag:a,e))+"</span></a>\n	</li>\n"},"4":function(){return'	<li class="tags tags-withtopic hasTags">\n'},"6":function(){return'	<li class="tags hasTags">\n'},"8":function(e,t,i,n){var a,s=this.lambda,r=this.escapeExpression,o="";return a=t["if"].call(e,null!=(a=null!=e?e.manual:e)?a.item_topic_desc:a,{"name":"if","hash":{},"fn":this.program(9,n),"inverse":this.program(11,n),"data":n}),null!=a&&(o+=a),o+'		<span class="tag_container"></span>\n		<a class="edit"><span>'+r(s(null!=(a=null!=e?e.queue:e)?a.addtag:a,e))+"</span></a>\n	</li>\n"},"9":function(){return'	<li class="tags tags-withtopic">\n'},"11":function(){return'	<li class="tags">\n'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var a,s=this.lambda,r=this.escapeExpression,o='<ul class="sub clearfix">\n	<li class="original_url_container"><a class="original_url" href="'+r(s(null!=(a=null!=e?e.manual:e)?a.item_targeturl:a,e))+'" target="_blank" title="'+r(s(null!=(a=null!=e?e.cta:e)?a.vieworiginal:a,e))+'">'+r(s(null!=(a=null!=e?e.manual:e)?a.item_domain:a,e))+"</a></li>\n";return a=t["if"].call(e,null!=(a=null!=e?e.manual:e)?a.item_topic_desc:a,{"name":"if","hash":{},"fn":this.program(1,n),"inverse":this.noop,"data":n}),null!=a&&(o+=a),a=t["if"].call(e,null!=(a=null!=e?e.manual:e)?a.item_tags:a,{"name":"if","hash":{},"fn":this.program(3,n),"inverse":this.program(8,n),"data":n}),null!=a&&(o+=a),o+'</ul>\n<div class="clear"></div>'},"useData":!0}),t.queue_itemtitle=e({"compiler":[6,">= 2.0.0-beta.1"],"main":function(){return"<span class=\"title\"><span>'+tagEntities(title)+'</span></span>"},"useData":!0}),t.queue_navitem=e({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e){var t,i=this.lambda,n=this.escapeExpression;return'<div class="toolbar_queue navigationItem wrapper">\n    <ul class="icons leftItem">\n        <li id="pagenav_gridlist" class="pagenav_gridview">\n            <a class="hint-item" data-intro="'+n(i(null!=(t=null!=e?e.queue:e)?t.tilelistviewtoggle:t,e))+'" data-position="bottom" href="#">'+n(i(null!=(t=null!=e?e.queue:e)?t.tileview:t,e))+'</a>\n        </li>\n        <li id="pagenav_segmentarticles" class="pagenav_content_all">\n            <a title="'+n(i(null!=(t=null!=e?e.queue:e)?t.viewingallarticles:t,e))+'" data-intro="'+n(i(null!=(t=null!=e?e.queue:e)?t.contentfilter:t,e))+'" data-position="bottomlower" href="#">'+n(i(null!=(t=null!=e?e.queue:e)?t.viewingallarticles:t,e))+'</a>\n        </li>\n        <li id="pagenav_addarticle">\n            <a class="hint-item" data-intro="'+n(i(null!=(t=null!=e?e.queue:e)?t.saveurl:t,e))+'" data-position="bottom" title="'+n(i(null!=(t=null!=e?e.queue:e)?t.saveurl:t,e))+'" href="#">'+n(i(null!=(t=null!=e?e.queue:e)?t.saveurl:t,e))+'</a>\n        </li>\n    </ul>\n    <div class="wrapper_searchtag rightItem">\n        <div id="pagenav_searchicon">\n            <a class="hint-item" title="'+n(i(null!=(t=null!=e?e.queue:e)?t.search:t,e))+'" data-intro="'+n(i(null!=(t=null!=e?e.queue:e)?t.search:t,e))+'" data-position="bottom" href="#">'+n(i(null!=(t=null!=e?e.queue:e)?t.search:t,e))+'</a>\n        </div>\n        <div class="wrapper_tag" data-intro="'+n(i(null!=(t=null!=e?e.queue:e)?t.tagfilter:t,e))+'" data-position="bottomlower">\n            <div class="tag_name"></div>\n            <a class="tag_clear" href="" title="'+n(i(null!=(t=null!=e?e.queue:e)?t.cleartagselection:t,e))+'">'+n(i(null!=(t=null!=e?e.queue:e)?t.cleartagselection:t,e))+"</a>\n        </div>\n    </div>\n</div>"},"useData":!0}),t.queue_noticecontainer=e({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e){var t,i=this.lambda,n=this.escapeExpression;return'<div class="notice_container chromeex_warning clearfix">\n	<div class="pocket_button_img"></div>\n	<div class="pocket_button_detail">\n		<h4>'+n(i(null!=(t=null!=e?e.gsf:e)?t.haveyouinstalledpocketbutton:t,e))+"</h4>\n		<p>"+n(i(null!=(t=null!=e?e.gsf:e)?t.installingthepocketbuttonclick:t,e))+'</p>\n		<a class="button" href="http://getpocket.com/welcome/" target="_blank">'+n(i(null!=(t=null!=e?e.cta:e)?t.connectnow:t,e))+'</a>\n		<p class="more"><a href="http://getpocket.com/add?sb=1" target="_blank">'+n(i(null!=(t=null!=e?e.gsf:e)?t.learnmoreways:t,e))+"</a> "+n(i(null!=(t=null!=e?e.search:e)?t.toaddcontenttopocket:t,e))+"</p>\n	</div>\n</div>"},"useData":!0}),t.queue_noticenewreleasewelcome=e({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e){var t,i=this.lambda,n=this.escapeExpression;return'<div class="overlay_detail" style="padding-top: 20px; width: 600px;">\n	<div class="gsf_one gsf_active clearfix">\n		<h2 style="margin: 0 auto; display: block; text-indent: -1000px; overflow: hidden; background: url(/a/i/beta_logo@1x.png) center center no-repeat; background-size: 210px 54px; width: 210px; height: 54px;">Pocket</h2>\n		<h3 style="font-size: 24px; margin-top: 0;">'+n(i(null!=(t=null!=e?e.notice:e)?t.welcometopocketforweb:t,e))+'</h3>\n		<p style="margin-bottom: 10px;">'+n(i(null!=(t=null!=e?e.notice:e)?t.newpocketcombinesfeatures:t,e))+". "+n(i(null!=(t=null!=e?e.notice:e)?t.lothaschanged:t,e))+':</p>\n		<div class="gsf_content clearfix" style="margin-left: 60px; width: 500px;">\n			<ul style="display: block; float: left; width: auto; list-style: none; padding: 0; margin: 0; ">\n				<li style="text-align: left; font-weight: normal; font-size: 15px; margin: 0 0 10px;"><strong>'+n(i(null!=(t=null!=e?e.notice:e)?t.refreshedui:t,e))+".</strong> "+n(i(null!=(t=null!=e?e.notice:e)?t.designlightermoreintuitive:t,e))+'.</li>\n				<li style="text-align: left; font-weight: normal; font-size: 15px;  margin: 0 0 10px;"><strong>'+n(i(null!=(t=null!=e?e.notice:e)?t.keyboardnavigation:t,e))+".</strong> "+n(i(null!=(t=null!=e?e.notice:e)?t.useshortcutstomove:t,e))+'.</li>\n				<li style="text-align: left; font-weight: normal; font-size: 15px;  margin: 0 0 10px;"><strong>'+n(i(null!=(t=null!=e?e.notice:e)?t.improvedarticleview:t,e))+".</strong> "+n(i(null!=(t=null!=e?e.notice:e)?t.tunedreadingexperience:t,e))+'.</li>\n				<li style="text-align: left; font-weight: normal; font-size: 15px; margin: 0 0 10px;"><strong>'+n(i(null!=(t=null!=e?e.notice:e)?t.manuallysaveurl:t,e))+".</strong> "+n(i(null!=(t=null!=e?e.notice:e)?t.savemanuallyurl:t,e))+'.</li>\n				<li style="text-align: left; font-weight: normal; font-size: 15px;  margin: 0 0 10px;"><strong>Desktop-style Bulk Edit.</strong> '+n(i(null!=(t=null!=e?e.notice:e)?t.selectbulkitems:t,e))+'.</li>\n			</ul>\n		</div>\n		<p style="clear: both; padding-top: 20px; margin-bottom: 20px;">'+n(i(null!=(t=null!=e?e.notice:e)?t.readmoreonblog:t,e))+". "+n(i(null!=(t=null!=e?e.notice:e)?t.enjoypocketforweb:t,e))+'</strong></p>\n		<p style="text-align: center; margin-bottom: 0;"><a class="button" style="margin-bottom: 0;" href="#">'+n(i(null!=(t=null!=e?e.cta:e)?t.getstarted:t,e))+"</a></p>\n	</div>\n</div>"},"useData":!0}),t.queue_noticepockethits=e({"compiler":[6,">= 2.0.0-beta.1"],"main":function(){return'<li class="queue_msg queue_msg_pockethits">\n    <a class="close" href="#">Close</a>\n    <p><a class="target" href="/hits/" target="_blank">Don\'t miss the best stories of the year.<br><span class="emphasis">Explore Pocket\'s Top Hits of 2013</span></a></p>\n</li>'},"useData":!0}),t.queue_searchchip=e({"compiler":[6,">= 2.0.0-beta.1"],"main":function(){return'<li class="search-chip">\n	<span class="search-chip-icon"></span>\n    <p></p>\n    <span class="search-chip-delete">x</span>\n</li>'},"useData":!0}),t.queue_searchitem=e({"1":function(e){var t,i=this.lambda,n=this.escapeExpression;return'                <li><a class="allitems" href="#">'+n(i(null!=(t=null!=e?e.queue:e)?t.search_allitems:t,e))+"</a></li>\n"},"3":function(){return'            <ul class="search-instr-recent search-instr-premium">\n'},"5":function(){return'            <ul class="search-instr-recent">\n'},"7":function(e){var t,i=this.lambda,n=this.escapeExpression;return'                <li class="instructions instructions-basic">'+n(i(null!=(t=null!=e?e.queue:e)?t.search_trysearching:t,e))+'</li>\n                <li class="recentsearch recentsearch-header"><h3>'+n(i(null!=(t=null!=e?e.queue:e)?t.search_recentlysearched:t,e))+'</h3></li>\n                <li class="recentsearch recentsearch-1"><a href="#"></a></li>\n                <li class="recentsearch recentsearch-2"><a href="#"></a></li>\n                <li class="recentsearch recentsearch-3"><a href="#"></a></li>\n                <li class="recentsearch recentsearch-4"><a href="#"></a></li>\n                <li class="recentsearch recentsearch-5"><a href="#"></a></li>\n'},"9":function(e){var t,i=this.lambda,n=this.escapeExpression;return'                <li class="instructions instructions-basic">'+n(i(null!=(t=null!=e?e.queue:e)?t.searchbytitleurl:t,e))+"</li>\n"},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var a,s=this.lambda,r=this.escapeExpression,o='<div class="searchtoolbar_screenbar"></div>\n<div class="searchtoolbar_queue navigationItem wrapper">\n    <ul class="icons leftItem">\n        <li><h2>'+r(s(null!=(a=null!=e?e.queue:e)?a.search:a,e))+'</h2></li>\n    </ul>\n    <ul class="icons rightItem">\n        <li id="searchnav_sortby" class="searchnav-sortby-relevancy">\n            <a class="hint-item" title="'+r(s(null!=(a=null!=e?e.queue:e)?a.search_sortbytooltip:a,e))+'" class="searchnav-sortby-disabled" href="#">'+r(s(null!=(a=null!=e?e.queue:e)?a.search_sortbytooltip:a,e))+'</a>\n        </li>\n        <li class="section-filter section-filter-disabled">\n            <div class="section-filter-value hint-item" title="'+r(s(null!=(a=null!=e?e.queue:e)?a.search_options:a,e))+'">'+r(s(null!=(a=null!=e?e.queue:e)?a.search_allitems:a,e))+'</div>\n            <ul class="section-filter-options">\n';return a=t["if"].call(e,null!=(a=null!=e?e.manual:e)?a.premium:a,{"name":"if","hash":{},"fn":this.program(1,n),"inverse":this.noop,"data":n}),null!=a&&(o+=a),o+='                <li><a class="mylist" href="#">'+r(s(null!=(a=null!=e?e.queue:e)?a.search_mylist:a,e))+'</a></li>\n                <li><a class="archive" href="#">'+r(s(null!=(a=null!=e?e.queue:e)?a.search_archive:a,e))+'</a></li>\n            </ul>\n        </li>\n        <li class="wrapper_search clearfix" data-intro="'+r(s(null!=(a=null!=e?e.queue:e)?a.search:a,e))+'" data-position="bottom">\n            <div class="search-input-wrapper">\n                <ul class="search-input-list">\n                    <li class="search-input">\n                        <input id="page_search" type="text" placeholder="'+r(s(null!=(a=null!=e?e.queue:e)?a.search:a,e))+'" maxlength="100">\n                    </li>\n                </ul>\n            </div>\n',a=t["if"].call(e,null!=(a=null!=e?e.manual:e)?a.premium:a,{"name":"if","hash":{},"fn":this.program(3,n),"inverse":this.program(5,n),"data":n}),null!=a&&(o+=a),a=t["if"].call(e,null!=(a=null!=e?e.manual:e)?a.premium:a,{"name":"if","hash":{},"fn":this.program(7,n),"inverse":this.program(9,n),"data":n}),null!=a&&(o+=a),o+'            </ul>\n        </li>\n        <li id="search_close">\n            <a href="#">'+r(s(null!=(a=null!=e?e.cta:e)?a.close:a,e))+"</a>\n        </li>\n    </ul>\n</div>"},"useData":!0}),t.queue_sortsearchdialog=e({"1":function(e){var t,i=this.lambda,n=this.escapeExpression;return'		<li><a class="relevance search-sortby-selected" href="#">'+n(i(null!=(t=null!=e?e.queue:e)?t.search_relevance:t,e))+'</a></li>\n		<li><a class="newest" href="#">'+n(i(null!=(t=null!=e?e.queue:e)?t.search_newest:t,e))+"</a></li>\n"},"3":function(e){var t,i=this.lambda,n=this.escapeExpression;return'		<li><a class="newest search-sortby-selected" href="#">'+n(i(null!=(t=null!=e?e.queue:e)?t.search_newest:t,e))+"</a></li>\n"},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var a,s=this.lambda,r=this.escapeExpression,o='<div class="container">\n	<h5>'+r(s(null!=(a=null!=e?e.queue:e)?a.search_sortby:a,e))+'</h5>\n	<ul class="search-sortby-options">\n';return a=t["if"].call(e,null!=(a=null!=e?e.manual:e)?a.premium:a,{"name":"if","hash":{},"fn":this.program(1,n),"inverse":this.program(3,n),"data":n}),null!=a&&(o+=a),o+'		<li><a class="oldest" href="#">'+r(s(null!=(a=null!=e?e.queue:e)?a.search_oldest:a,e))+"</a></li>\n	</ul>\n</div>"},"useData":!0}),t.reader_headarticleshell=e({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e){var t,i=this.lambda,n=this.escapeExpression;return'<div class="reader_head">\n	<h1></h1>\n	<ul class="sub">\n		<li class="authorsdomain"><span class="authors"></span><span class="domain"><img class="favicon"><a target="_blank"></a></span></li>\n		<li class="original"><a target="_blank">'+n(i(null!=(t=null!=e?e.cta:e)?t.vieworiginal:t,e))+'</a></li>\n		<li class="date"></li>\n		<li class="tags"><span class="tag_container"></span></li>\n	</ul>\n	<div class="clear"></div>\n</div>\n<div class="text_body">\n</div>'},"useData":!0}),t.reader_helpoverlay=e({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e){var t,i=this.lambda,n=this.escapeExpression;return'<div class="chardinjs-keyboard">\n    <ul>\n        <li class="header">'+n(i(null!=(t=null!=e?e.help:e)?t.keyboardreaderview:t,e))+"</li>\n        <li><span>cmd/ctrl + 1/2/3</span>"+n(i(null!=(t=null!=e?e.help:e)?t.switchhomefavarchive:t,e))+"</li>\n        <li><span>cmd/ctrl + -/+</span>"+n(i(null!=(t=null!=e?e.help:e)?t.decreaseincreasefont:t,e))+"</li>\n        <li><span>a</span>"+n(i(null!=(t=null!=e?e.help:e)?t.archiveitemorsave:t,e))+"</li>\n        <li><span>d</span>"+n(i(null!=(t=null!=e?e.help:e)?t.fullscreenmode:t,e))+"</li>\n        <li><span>f</span>"+n(i(null!=(t=null!=e?e.help:e)?t.favitem:t,e))+"</li>\n        <li><span>o</span>"+n(i(null!=(t=null!=e?e.help:e)?t.vieworiginal:t,e))+"</li>\n        <li><span>t</span>"+n(i(null!=(t=null!=e?e.help:e)?t.tagitem:t,e))+"</li>\n        <li><span>?</span>"+n(i(null!=(t=null!=e?e.help:e)?t.viewhelp:t,e))+"</li>\n    </ul>\n</div>"},"useData":!0}),t.reader_helpoverlaypackaged=e({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e){var t,i=this.lambda,n=this.escapeExpression;return'<div class="chardinjs-keyboard">\n    <ul>\n        <li class="header">'+n(i(null!=(t=null!=e?e.help:e)?t.keyboardreaderview:t,e))+"</li>\n        <li><span>cmd/ctrl + 1/2/3</span>"+n(i(null!=(t=null!=e?e.help:e)?t.switchhomefavarchive:t,e))+"</li>\n        <li><span>cmd/ctrl + -/+</span>"+n(i(null!=(t=null!=e?e.help:e)?t.decreaseincreasefont:t,e))+"</li>\n        <li><span>cmd/ctrl + /</span>"+n(i(null!=(t=null!=e?e.help:e)?t.togglearticlewebview:t,e))+"</li>\n        <li><span>a</span>"+n(i(null!=(t=null!=e?e.help:e)?t.archiveitemorsave:t,e))+"</li>\n        <li><span>d</span>"+n(i(null!=(t=null!=e?e.help:e)?t.fullscreenmode:t,e))+"</li>\n        <li><span>f</span>"+n(i(null!=(t=null!=e?e.help:e)?t.favitem:t,e))+"</li>\n        <li><span>o</span>"+n(i(null!=(t=null!=e?e.help:e)?t.vieworiginal:t,e))+"</li>\n        <li><span>t</span>"+n(i(null!=(t=null!=e?e.help:e)?t.tagitem:t,e))+"</li>\n        <li><span>?</span>"+n(i(null!=(t=null!=e?e.help:e)?t.viewhelp:t,e))+"</li>\n    </ul>\n</div>"},"useData":!0}),t.reader_imageshell=e({"compiler":[6,">= 2.0.0-beta.1"],"main":function(){return'<div id="RIL_IMG_1" class="RIL_IMG"></div>'},"useData":!0}),t.reader_navitem=e({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e){var t,i=this.lambda,n=this.escapeExpression;return'<div class="toolbar_reader navigationItem wrapper">\n    <ul class="icons leftItem">\n        <li id="pagenav_back" class="simple" ><a class="hint-item" title="'+n(i(null!=(t=null!=e?e.reader:e)?t.goback:t,e))+'" data-intro="'+n(i(null!=(t=null!=e?e.reader:e)?t.goback:t,e))+'" data-position="bottom" href="#">'+n(i(null!=(t=null!=e?e.reader:e)?t.goback:t,e))+'</a></li>\n        <li id="pagenav_mark" class="simple" ><a class="hint-item" title="'+n(i(null!=(t=null!=e?e.cta:e)?t.archive:t,e))+'" data-intro="'+n(i(null!=(t=null!=e?e.cta:e)?t.archive:t,e))+'" data-position="bottomlower" href="#">'+n(i(null!=(t=null!=e?e.cta:e)?t.archive:t,e))+'</a></li>\n        <li id="pagenav_delete" class="simple"><a class="hint-item" title="'+n(i(null!=(t=null!=e?e.cta:e)?t["delete"]:t,e))+'" data-intro="'+n(i(null!=(t=null!=e?e.cta:e)?t["delete"]:t,e))+'" data-position="bottom" href="#">'+n(i(null!=(t=null!=e?e.cta:e)?t["delete"]:t,e))+'</a></li>\n        <li id="pagenav_tag" class="simple"><a class="hint-item" title="'+n(i(null!=(t=null!=e?e.tag:e)?t.edittags:t,e))+'" data-intro="'+n(i(null!=(t=null!=e?e.tag:e)?t.edittags:t,e))+'" data-position="bottomlower" href="#">'+n(i(null!=(t=null!=e?e.cta:e)?t.edittags:t,e))+'</a></li>\n        <li id="pagenav_favorite" class="simple"><a class="hint-item" title="'+n(i(null!=(t=null!=e?e.cta:e)?t.favorite:t,e))+'" data-intro="'+n(i(null!=(t=null!=e?e.cta:e)?t.favorite:t,e))+'" data-position="bottom" href="#">'+n(i(null!=(t=null!=e?e.cta:e)?t.favorite:t,e))+'</a></li>\n    </ul>\n    <ul class="icons rightItem">\n        <li id="pagenav_share"><a class="hint-item" title="'+n(i(null!=(t=null!=e?e.cta:e)?t.share:t,e))+'" data-intro="'+n(i(null!=(t=null!=e?e.cta:e)?t.share:t,e))+'" data-position="bottom" href="#">'+n(i(null!=(t=null!=e?e.cta:e)?t.share:t,e))+'</a></li>\n        <li id="pagenav_style"><a class="hint-item" title="'+n(i(null!=(t=null!=e?e.reader:e)?t.textoptions:t,e))+'" data-intro="'+n(i(null!=(t=null!=e?e.reader:e)?t.textoptions:t,e))+'" data-position="bottom" href="#">'+n(i(null!=(t=null!=e?e.reader:e)?t.textoptions:t,e))+"</a></li>\n    </ul>\n</div>"},"useData":!0}),t.reader_navitempackaged=e({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e){var t,i=this.lambda,n=this.escapeExpression;return'<div class="toolbar_reader navigationItem wrapper">\n    <ul class="icons leftItem">\n        <li id="pagenav_back" class="simple" ><a class="hint-item" title="'+n(i(null!=(t=null!=e?e.reader:e)?t.goback:t,e))+'" data-intro="'+n(i(null!=(t=null!=e?e.reader:e)?t.goback:t,e))+'" data-position="bottom" href="#">'+n(i(null!=(t=null!=e?e.reader:e)?t.goback:t,e))+'</a></li>\n        <li id="pagenav_mark" class="simple" ><a class="hint-item" title="'+n(i(null!=(t=null!=e?e.cta:e)?t.archive:t,e))+'" data-intro="'+n(i(null!=(t=null!=e?e.cta:e)?t.archive:t,e))+'" data-position="bottomlower" href="#">'+n(i(null!=(t=null!=e?e.cta:e)?t.archive:t,e))+'</a></li>\n        <li id="pagenav_add" class="simple"><a title="'+n(i(null!=(t=null!=e?e.reader:e)?t.additemtolist:t,e))+'" data-intro="'+n(i(null!=(t=null!=e?e.reader:e)?t.additemtolist:t,e))+'" data-position="bottom" href="#">'+n(i(null!=(t=null!=e?e.reader:e)?t.additemtolist:t,e))+'</a></li>\n        <li id="pagenav_delete" class="simple"><a class="hint-item" title="'+n(i(null!=(t=null!=e?e.cta:e)?t["delete"]:t,e))+'" data-intro="'+n(i(null!=(t=null!=e?e.cta:e)?t["delete"]:t,e))+'" data-position="bottom" href="#">'+n(i(null!=(t=null!=e?e.cta:e)?t["delete"]:t,e))+'</a></li>\n        <li id="pagenav_tag" class="simple"><a class="hint-item" title="'+n(i(null!=(t=null!=e?e.tag:e)?t.edittags:t,e))+'" data-intro="'+n(i(null!=(t=null!=e?e.tag:e)?t.edittags:t,e))+'" data-position="bottomlower" href="#">'+n(i(null!=(t=null!=e?e.cta:e)?t.edittags:t,e))+'</a></li>\n        <li id="pagenav_favorite" class="simple"><a class="hint-item" title="'+n(i(null!=(t=null!=e?e.cta:e)?t.favorite:t,e))+'" data-intro="'+n(i(null!=(t=null!=e?e.cta:e)?t.favorite:t,e))+'" data-position="bottom" href="#">'+n(i(null!=(t=null!=e?e.cta:e)?t.favorite:t,e))+'</a></li>\n    </ul>\n    <ul class="icons centerItem clearfix">\n        <li id="pagenav_articleview"><a title="'+n(i(null!=(t=null!=e?e.reader:e)?t.articleview:t,e))+'" title="'+n(i(null!=(t=null!=e?e.reader:e)?t.articleview:t,e))+'" data-intro="'+n(i(null!=(t=null!=e?e.reader:e)?t.articleview:t,e))+'" data-position="bottom" href="#">'+n(i(null!=(t=null!=e?e.reader:e)?t.articleview:t,e))+'</a></li>\n        <li id="pagenav_webview"><a title="'+n(i(null!=(t=null!=e?e.reader:e)?t.webview:t,e))+'" data-intro="'+n(i(null!=(t=null!=e?e.reader:e)?t.webview:t,e))+'" data-position="bottomlower" href="#">'+n(i(null!=(t=null!=e?e.reader:e)?t.webview:t,e))+'</a></li>\n    </ul>\n    <ul class="icons rightItem">\n        <li id="pagenav_share"><a class="hint-item" title="'+n(i(null!=(t=null!=e?e.cta:e)?t.share:t,e))+'" data-intro="'+n(i(null!=(t=null!=e?e.cta:e)?t.share:t,e))+'" data-position="bottom" href="#">'+n(i(null!=(t=null!=e?e.cta:e)?t.share:t,e))+'</a></li>\n        <li id="pagenav_style"><a class="hint-item" title="'+n(i(null!=(t=null!=e?e.reader:e)?t.textoptions:t,e))+'" data-intro="'+n(i(null!=(t=null!=e?e.reader:e)?t.textoptions:t,e))+'" data-position="bottom" href="#">'+n(i(null!=(t=null!=e?e.reader:e)?t.textoptions:t,e))+"</a></li>\n    </ul>\n</div>"},"useData":!0}),t.reader_noarticlewarning=e({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e){var t,i=this.lambda,n=this.escapeExpression;return"<div class='noarticle_warning'>\n      <p>"+n(i(null!=(t=null!=e?e.reader:e)?t.notarticlenotdisplaywell:t,e))+". "+n(i(null!=(t=null!=e?e.reader:e)?t.maywanttoswitch:t,e))+".</p>\n      <p>"+n(i(null!=(t=null!=e?e.reader:e)?t.ifshouldbearticle:t,e))+".</p>\n</div>"},"useData":!0}),t.reader_pageshell=e({"compiler":[6,">= 2.0.0-beta.1"],"main":function(){return'<div id="page_reader" class="wrapper articleview">\n      <div class="reader_content_wrapper">\n            <div class="reader_content"></div>\n      </div>\n</div>'},"useData":!0}),t.reader_stylemenu=e({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e){var t,i=this.lambda,n=this.escapeExpression;return'<div id="subnav" class="pkt-nav clearfix">\n      <ul class="icons clearfix textoptions_font">\n            <li id="submenu_font_serif"><a title="'+n(i(null!=(t=null!=e?e.reader:e)?t.serif:t,e))+'" href="#">'+n(i(null!=(t=null!=e?e.reader:e)?t.serif:t,e))+'</a></li>\n            <li id="submenu_font_sans"><a title="'+n(i(null!=(t=null!=e?e.reader:e)?t.sansserif:t,e))+'" href="#">'+n(i(null!=(t=null!=e?e.reader:e)?t.sansserif:t,e))+'</a></li>\n      </ul>\n      <ul class="icons clearfix textoptions_fontsize">\n            <li id="submenu_font_down"><a title="'+n(i(null!=(t=null!=e?e.reader:e)?t.decreasefontsize:t,e))+'" href="#">'+n(i(null!=(t=null!=e?e.reader:e)?t.decreasefontsize:t,e))+'</a></li>\n            <li id="submenu_font_placeholder">A</li> \n            <li id="submenu_font_up"><a title="'+n(i(null!=(t=null!=e?e.reader:e)?t.increasefontsize:t,e))+'" href="#">'+n(i(null!=(t=null!=e?e.reader:e)?t.increasefontsize:t,e))+'</a></li>\n      </ul>\n      <ul class="icons clearfix textoptions_theme">\n            <li id="submenu_theme_light"><a title="'+n(i(null!=(t=null!=e?e.reader:e)?t.changelight:t,e))+'" href="#">'+n(i(null!=(t=null!=e?e.reader:e)?t.light:t,e))+'</a></li>\n            <li id="submenu_theme_dark"><a title="'+n(i(null!=(t=null!=e?e.reader:e)?t.changedark:t,e))+'" href="#">'+n(i(null!=(t=null!=e?e.reader:e)?t.dark:t,e))+'</a></li>\n            <li id="submenu_theme_sepia"><a title="'+n(i(null!=(t=null!=e?e.reader:e)?t.changesepia:t,e))+'" href="#">'+n(i(null!=(t=null!=e?e.reader:e)?t.sepia:t,e))+"</a></li>\n      </ul>\n</div>"},"useData":!0}),t.tag_edittagdialog=e({"1":function(){return'<div class="overlay_detail overlay_detail_confirm overlay_detail_confirmtag">\n'},"3":function(){return'<div class="overlay_detail overlay_detail_confirm overlay_detail_confirmtag overlay_detail_wsuggestedtags">\n	<div class="edittag_detail">\n'},"5":function(e){var t,i=this.lambda,n=this.escapeExpression;return'	</div>\n	<div class="suggestedtag_detail">\n		<h4>'+n(i(null!=(t=null!=e?e.tag:e)?t.suggestedtags:t,e))+"</h4>\n	</div>\n"},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var a,s=this.lambda,r=t.blockHelperMissing,o=this.escapeExpression,l="";return a=r.call(e,s(null!=(a=null!=e?e.manual:e)?a.suggestedtags:a,e),{"name":"manual.suggestedtags","hash":{},"fn":this.noop,"inverse":this.program(1,n),"data":n}),null!=a&&(l+=a),a=t["if"].call(e,null!=(a=null!=e?e.manual:e)?a.suggestedtags:a,{"name":"if","hash":{},"fn":this.program(3,n),"inverse":this.noop,"data":n}),null!=a&&(l+=a),l+="	<h3>"+o(s(null!=(a=null!=e?e.tag:e)?a.edittags:a,e))+'</h3>\n	<a class="close">'+o(s(null!=(a=null!=e?e.cta:e)?a.close:a,e))+'</a>\n	<div class="clearfix">\n		<input id="edit-tags-input" type="text">\n		<a href="#" class="button button-small">'+o(s(null!=(a=null!=e?e.cta:e)?a.save:a,e))+"</a>\n	</div>\n",a=t["if"].call(e,null!=(a=null!=e?e.manual:e)?a.suggestedtags:a,{"name":"if","hash":{},"fn":this.program(5,n),"inverse":this.noop,"data":n}),null!=a&&(l+=a),l+"</div>"},"useData":!0})}(),function(e){var t={"method":"GET","contentType":"json","queryParam":"q","searchDelay":300,"minChars":1,"propertyToSearch":"name","jsonContainer":null,"scrollKeyboard":!1,"hintText":null,"noResultsText":null,"noResultsHideDropdown":!1,"searchingText":null,"deleteText":"&times;","animateDropdown":!0,"emptyInputLength":null,"tokenLimit":null,"tokenDelimiter":",","preventDuplicates":!1,"tokenValue":"id","prePopulate":null,"processPrePopulate":!1,"idPrefix":"token-input-","resultsFormatter":function(e){return"<li>"+e[this.propertyToSearch]+"</li>"
},"tokenFormatter":function(e){return"<li><p>"+e[this.propertyToSearch]+"</p></li>"},"validateItem":null,"noHoverSelect":!1,"onResult":null,"onAdd":null,"onDelete":null,"onReady":null},i={"tokenList":"token-input-list","token":"token-input-token","tokenDelete":"token-input-delete-token","selectedToken":"token-input-selected-token","highlightedToken":"token-input-highlighted-token","dropdown":"token-input-dropdown","dropdownItem":"token-input-dropdown-item","dropdownItem2":"token-input-dropdown-item2","selectedDropdownItem":"token-input-selected-dropdown-item","inputToken":"token-input-input-token"},n={"BEFORE":0,"AFTER":1,"END":2},a={"BACKSPACE":8,"TAB":9,"ENTER":13,"ESCAPE":27,"SPACE":32,"PAGE_UP":33,"PAGE_DOWN":34,"END":35,"HOME":36,"LEFT":37,"UP":38,"RIGHT":39,"DOWN":40,"NUMPAD_ENTER":108,"COMMA":188},s={"init":function(i,n){var a=e.extend({},t,n||{});return this.each(function(){e(this).data("tokenInputObject",new e.TokenList(this,i,a))})},"clear":function(){return this.data("tokenInputObject").clear(),this},"add":function(e){return this.data("tokenInputObject").add(e),this},"remove":function(e){return this.data("tokenInputObject").remove(e),this},"get":function(){return this.data("tokenInputObject").getTokens()}};e.fn.tokenInput=function(e){return s[e]?s[e].apply(this,Array.prototype.slice.call(arguments,1)):s.init.apply(this,arguments)},e.TokenList=function(t,s,r){function o(){var t=e(O).data("tokeninput");return!t&&r.textToData&&(t=r.textToData(E.val())),t?(d(t),P.change(),!1):void 0}function l(){return null!==r.tokenLimit&&M>=r.tokenLimit?(E.hide(),v(),void 0):void 0}function c(){if($!==($=E.val())){var e=$.replace(/&/g,"&amp;").replace(/\s/g," ").replace(/</g,"&lt;").replace(/>/g,"&gt;");U.html(e);var t=30;r.emptyInputLength&&R.children().length<2&&(t=r.emptyInputLength),E.width(U.width()+t)}}function u(t){var i=r.tokenFormatter(t);i=e(i).addClass(r.classes.token).insertBefore(N),e("<span>"+r.deleteText+"</span>").addClass(r.classes.tokenDelete).appendTo(i).click(function(){return g(e(this).parent()),P.change(),!1});var n={"id":t.id};return n[r.propertyToSearch]=t[r.propertyToSearch],n.item=t,e.data(i.get(0),"tokeninput",t),I=I.slice(0,F).concat([n]).concat(I.slice(F)),F++,m(I,P),M+=1,null!==r.tokenLimit&&M>=r.tokenLimit&&(E.hide(),v()),i}function d(t){if(t){if(e.isFunction(r.validateItem)&&!r.validateItem(t))return!1;var i=r.onAdd;if(M>0&&r.preventDuplicates){var n=null;if(R.children().each(function(){var i=e(this),a=e.data(i.get(0),"tokeninput");return a&&a.id===t.id?(n=i,!1):void 0}),n)return h(n),N.insertAfter(n),E.focus(),void 0}(null==r.tokenLimit||M<r.tokenLimit)&&(u(t),l()),E.val(""),v(),e.isFunction(i)&&i.call(P,t)}}function h(e){e.addClass(r.classes.selectedToken),q=e.get(0),E.val(""),v()}function f(e,t){e.removeClass(r.classes.selectedToken),q=null,t===n.BEFORE?(N.insertBefore(e),F--):t===n.AFTER?(N.insertAfter(e),F++):(N.appendTo(R),F=M),E.focus()}function p(t){var i=q;q&&f(e(q),n.END),i===t.get(0)?f(t,n.END):h(t)}function g(t){var i=e.data(t.get(0),"tokeninput"),n=r.onDelete,a=t.prevAll().length;a>F&&a--,t.remove(),q=null,E.focus(),I=I.slice(0,a).concat(I.slice(a+1)),F>a&&F--,m(I,P),M-=1,null!==r.tokenLimit&&E.show().val("").focus(),e.isFunction(n)&&n.call(P,i)}function m(t,i){var n=e.map(t,function(e){return e[r.tokenValue]});i.val(n.join(r.tokenDelimiter))}function v(){j.hide().empty(),O=null}function _(){j.css({"position":"absolute","top":e(R).offset().top+e(R).outerHeight(),"left":e(R).offset().left,"zindex":999}).show()}function y(){r.searchingText&&(j.html("<p>"+r.searchingText+"</p>"),_())}function b(){r.hintText&&(j.html("<p>"+r.hintText+"</p>"),_())}function w(t,i){if(i&&i.length){j.empty();var n=e("<ul>").appendTo(j).mouseover(function(t){S(e(t.target).closest("li"))}).mousedown(function(t){return d(e(t.target).closest("li").data("tokeninput")),P.change(),!1}).hide();r.noHoverSelect&&(n.off("mouseover"),n.on("mouseover",function(t){e(this).find("li").removeClass(r.classes.selectedDropdownItem),e(t.target).closest("li").addClass(r.classes.selectedDropdownItem)})),e.each(i,function(t,i){var a=r.resultsFormatter(i);a=e(a).appendTo(n),t%2?a.addClass(r.classes.dropdownItem):a.addClass(r.classes.dropdownItem2),e.data(a.get(0),"tokeninput",i)}),_(),r.animateDropdown?n.slideDown("fast"):n.show()}else r.noResultsText&&(j.html("<p>"+r.noResultsText+"</p>"),_()),r.noResultsHideDropdown&&v()}function S(t,i){if(t){if(O&&T(e(O)),r.scrollKeyboard&&i){var n=e(".token-input-dropdown-tag ul"),a=n.height(),s=t.outerHeight(),o=t.position().top;if(o>a){var l=n.scrollTop();n.scrollTop(l+s)}else if(0>o){var l=n.scrollTop();n.scrollTop(l-s)}}t.addClass(r.classes.selectedDropdownItem),O=t.get(0)}}function T(e){e.removeClass(r.classes.selectedDropdownItem),O=null}function k(){var t=E.val().toLowerCase();(t&&t.length||0==r.minChars)&&(q&&f(e(q),n.AFTER),t.length>=r.minChars?(y(),clearTimeout(L),L=setTimeout(function(){x(t)},r.searchDelay)):v())}function x(t){var i=t+C(),n=A.get(i);if(n)w(t,n);else if(r.url){var a=C(),s={};if(s.data={},a.indexOf("?")>-1){var o=a.split("?");s.url=o[0];var l=o[1].split("&");e.each(l,function(e,t){var i=t.split("=");s.data[i[0]]=i[1]})}else s.url=a;s.data[r.queryParam]=t,s.type=r.method,s.dataType=r.contentType,r.crossDomain&&(s.dataType="jsonp"),s.success=function(n){e.isFunction(r.onResult)&&(n=r.onResult.call(P,n)),A.add(i,r.jsonContainer?n[r.jsonContainer]:n),E.val().toLowerCase()===t&&w(t,r.jsonContainer?n[r.jsonContainer]:n)},e.ajax(s)}else if(r.search_function)r.search_function(t,function(e){A.add(i,e),w(t,e)});else if(r.local_data){var c=e.grep(r.local_data,function(e){return e[r.propertyToSearch].toLowerCase().indexOf(t.toLowerCase())>-1});e.isFunction(r.onResult)&&(c=r.onResult.call(P,c)),A.add(i,c),w(t,c)}}function C(){var e=r.url;return"function"==typeof r.url&&(e=r.url.call()),e}if("string"===e.type(s)||"function"===e.type(s)){r.url=s;var D=C();void 0===r.crossDomain&&(r.crossDomain=-1===D.indexOf("://")?!1:location.href.split(/\/+/g)[1]!==D.split(/\/+/g)[1])}else"object"==typeof s&&(r.local_data=s);r.classes?r.classes=e.extend({},i,r.classes):r.theme?(r.classes={},e.each(i,function(e,t){r.classes[e]=t+"-"+r.theme})):r.classes=i;var L,$,I=[],M=0,A=new e.TokenList.Cache,E=e('<input type="text"  autocomplete="off">').css({"outline":"none"}).attr("id",r.idPrefix+t.id).focus(function(){0==r.minChars&&setTimeout(function(){k()},5),(null===r.tokenLimit||r.tokenLimit!==M)&&b()}).blur(function(){o(),v(),e(this).val("")}).bind("keyup keydown blur update",c).keydown(function(t){var i,s;switch(t.keyCode){case a.LEFT:case a.RIGHT:case a.UP:case a.DOWN:if(e(this).val()){if(t.keyCode===a.UP||t.keyCode===a.DOWN){var r=null;return r=O||t.keyCode!==a.DOWN?t.keyCode===a.DOWN?e(O).next():e(O).prev():e(".token-input-dropdown li").first(),r.length?S(r,!0):t.keyCode!==a.DOWN&&e(O).length&&T(e(O)),!1}}else i=N.prev(),s=N.next(),i.length&&i.get(0)===q||s.length&&s.get(0)===q?t.keyCode===a.LEFT||t.keyCode===a.UP?f(e(q),n.BEFORE):f(e(q),n.AFTER):t.keyCode!==a.LEFT&&t.keyCode!==a.UP||!i.length?t.keyCode!==a.RIGHT&&t.keyCode!==a.DOWN||!s.length||h(e(s.get(0))):h(e(i.get(0)));break;case a.BACKSPACE:if(i=N.prev(),!e(this).val().length)return q?(g(e(q)),P.change()):i.length&&h(e(i.get(0))),!1;1===e(this).val().length?v():setTimeout(function(){k()},5);break;case a.TAB:case a.ENTER:case a.NUMPAD_ENTER:case a.COMMA:t.keyCode!=a.ENTER&&t.keyCode!=a.NUMPAD_ENTER&&t.preventDefault(),o();break;case a.ESCAPE:return v(),!0;default:String.fromCharCode(t.which)&&setTimeout(function(){k()},5)}}),P=e(t).hide().val("").focus(function(){E.focus()}).blur(function(){E.blur()}),q=null,F=0,O=null,R=e("<ul />").addClass(r.classes.tokenList).click(function(t){var i=e(t.target).closest("li");i&&i.get(0)&&e.data(i.get(0),"tokeninput")?p(i):(q&&f(e(q),n.END),E.focus())}).mouseover(function(t){var i=e(t.target).closest("li");i&&q!==this&&i.addClass(r.classes.highlightedToken)}).mouseout(function(t){var i=e(t.target).closest("li");i&&q!==this&&i.removeClass(r.classes.highlightedToken)}).insertBefore(P),N=e("<li />").addClass(r.classes.inputToken).appendTo(R).append(E),j=e("<div>").addClass(r.classes.dropdown).appendTo("body").hide(),U=e("<tester/>").insertAfter(E).css({"position":"absolute","top":-9999,"left":-9999,"width":"auto","fontSize":E.css("fontSize"),"fontFamily":E.css("fontFamily"),"fontWeight":E.css("fontWeight"),"letterSpacing":E.css("letterSpacing"),"whiteSpace":"nowrap"});P.val("");var Y=r.prePopulate||P.data("pre");r.processPrePopulate&&e.isFunction(r.onResult)&&(Y=r.onResult.call(P,Y)),Y&&Y.length&&e.each(Y,function(e,t){u(t),l()}),e.isFunction(r.onReady)&&(r.onReady.call(),0==r.minChars&&setTimeout(function(){k()},5)),this.clear=function(){R.children("li").each(function(){0===e(this).children("input").length&&g(e(this))})},this.add=function(e){d(e)},this.remove=function(t){R.children("li").each(function(){if(0===e(this).children("input").length){var i=e(this).data("tokeninput"),n=!0;for(var a in t)if(t[a]!==i[a]){n=!1;break}n&&g(e(this))}})},this.getTokens=function(){return I}},e.TokenList.Cache=function(t){var i=e.extend({"max_size":500},t),n={},a=0,s=function(){n={},a=0};this.add=function(e,t){a>i.max_size&&s(),n[e]||(a+=1),n[e]=t},this.get=function(e){return n[e]}}}(jQuery),function(){function e(e){var i=!1;return function(){if(i)throw new Error("Callback was already called.");i=!0,e.apply(t,arguments)}}var t,i,n={};t=this,null!=t&&(i=t.async),n.noConflict=function(){return t.async=i,n};var a=function(e,t){if(e.forEach)return e.forEach(t);for(var i=0;i<e.length;i+=1)t(e[i],i,e)},s=function(e,t){if(e.map)return e.map(t);var i=[];return a(e,function(e,n,a){i.push(t(e,n,a))}),i},r=function(e,t,i){return e.reduce?e.reduce(t,i):(a(e,function(e,n,a){i=t(i,e,n,a)}),i)},o=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i);return t};"undefined"!=typeof process&&process.nextTick?(n.nextTick=process.nextTick,n.setImmediate="undefined"!=typeof setImmediate?setImmediate:n.nextTick):"function"==typeof setImmediate?(n.setImmediate=setImmediate,n.nextTick=setImmediate):(n.setImmediate=n.nextTick,n.nextTick=function(e){setTimeout(e,0)}),n.each=function(t,i,n){if(n=n||function(){},!t.length)return n();var s=0;a(t,function(a){i(a,e(function(e){e?(n(e),n=function(){}):(s+=1,s>=t.length&&n(null))}))})},n.forEach=n.each,n.eachSeries=function(e,t,i){if(i=i||function(){},!e.length)return i();var n=0,a=function(){t(e[n],function(t){t?(i(t),i=function(){}):(n+=1,n>=e.length?i(null):a())})};a()},n.forEachSeries=n.eachSeries,n.eachLimit=function(e,t,i,n){var a=l(t);a.apply(null,[e,i,n])},n.forEachLimit=n.eachLimit;var l=function(e){return function(t,i,n){if(n=n||function(){},!t.length||0>=e)return n();var a=0,s=0,r=0;!function o(){if(a>=t.length)return n();for(;e>r&&s<t.length;)s+=1,r+=1,i(t[s-1],function(e){e?(n(e),n=function(){}):(a+=1,r-=1,a>=t.length?n():o())})}()}},c=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[n.each].concat(t))}},u=function(e,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,[l(e)].concat(i))}},d=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[n.eachSeries].concat(t))}},h=function(e,t,i,n){var a=[];t=s(t,function(e,t){return{"index":t,"value":e}}),e(t,function(e,t){i(e.value,function(i,n){a[e.index]=n,t(i)})},function(e){n(e,a)})};n.map=c(h),n.mapSeries=d(h),n.mapLimit=function(e,t,i,n){return f(t)(e,i,n)};var f=function(e){return u(e,h)};n.reduce=function(e,t,i,a){n.eachSeries(e,function(e,n){i(t,e,function(e,i){t=i,n(e)})},function(e){a(e,t)})},n.inject=n.reduce,n.foldl=n.reduce,n.reduceRight=function(e,t,i,a){var r=s(e,function(e){return e}).reverse();n.reduce(r,t,i,a)},n.foldr=n.reduceRight;var p=function(e,t,i,n){var a=[];t=s(t,function(e,t){return{"index":t,"value":e}}),e(t,function(e,t){i(e.value,function(i){i&&a.push(e),t()})},function(){n(s(a.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};n.filter=c(p),n.filterSeries=d(p),n.select=n.filter,n.selectSeries=n.filterSeries;var g=function(e,t,i,n){var a=[];t=s(t,function(e,t){return{"index":t,"value":e}}),e(t,function(e,t){i(e.value,function(i){i||a.push(e),t()})},function(){n(s(a.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};n.reject=c(g),n.rejectSeries=d(g);var m=function(e,t,i,n){e(t,function(e,t){i(e,function(i){i?(n(e),n=function(){}):t()})},function(){n()})};n.detect=c(m),n.detectSeries=d(m),n.some=function(e,t,i){n.each(e,function(e,n){t(e,function(e){e&&(i(!0),i=function(){}),n()})},function(){i(!1)})},n.any=n.some,n.every=function(e,t,i){n.each(e,function(e,n){t(e,function(e){e||(i(!1),i=function(){}),n()})},function(){i(!0)})},n.all=n.every,n.sortBy=function(e,t,i){n.map(e,function(e,i){t(e,function(t,n){t?i(t):i(null,{"value":e,"criteria":n})})},function(e,t){if(e)return i(e);var n=function(e,t){var i=e.criteria,n=t.criteria;return n>i?-1:i>n?1:0};i(null,s(t.sort(n),function(e){return e.value}))})},n.auto=function(e,t){t=t||function(){};var i=o(e);if(!i.length)return t(null);var s={},l=[],c=function(e){l.unshift(e)},u=function(e){for(var t=0;t<l.length;t+=1)if(l[t]===e)return l.splice(t,1),void 0},d=function(){a(l.slice(0),function(e){e()})};c(function(){o(s).length===i.length&&(t(null,s),t=function(){})}),a(i,function(i){var l=e[i]instanceof Function?[e[i]]:e[i],h=function(e){var r=Array.prototype.slice.call(arguments,1);if(r.length<=1&&(r=r[0]),e){var l={};a(o(s),function(e){l[e]=s[e]}),l[i]=r,t(e,l),t=function(){}}else s[i]=r,n.setImmediate(d)},f=l.slice(0,Math.abs(l.length-1))||[],p=function(){return r(f,function(e,t){return e&&s.hasOwnProperty(t)},!0)&&!s.hasOwnProperty(i)};if(p())l[l.length-1](h,s);else{var g=function(){p()&&(u(g),l[l.length-1](h,s))};c(g)}})},n.waterfall=function(e,t){if(t=t||function(){},e.constructor!==Array){var i=new Error("First argument to waterfall must be an array of functions");return t(i)}if(!e.length)return t();var a=function(e){return function(i){if(i)t.apply(null,arguments),t=function(){};else{var s=Array.prototype.slice.call(arguments,1),r=e.next();r?s.push(a(r)):s.push(t),n.setImmediate(function(){e.apply(null,s)})}}};a(n.iterator(e))()};var v=function(e,t,i){if(i=i||function(){},t.constructor===Array)e.map(t,function(e,t){e&&e(function(e){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),t.call(null,e,i)})},i);else{var n={};e.each(o(t),function(e,i){t[e](function(t){var a=Array.prototype.slice.call(arguments,1);a.length<=1&&(a=a[0]),n[e]=a,i(t)})},function(e){i(e,n)})}};n.parallel=function(e,t){v({"map":n.map,"each":n.each},e,t)},n.parallelLimit=function(e,t,i){v({"map":f(t),"each":l(t)},e,i)},n.series=function(e,t){if(t=t||function(){},e.constructor===Array)n.mapSeries(e,function(e,t){e&&e(function(e){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),t.call(null,e,i)})},t);else{var i={};n.eachSeries(o(e),function(t,n){e[t](function(e){var a=Array.prototype.slice.call(arguments,1);a.length<=1&&(a=a[0]),i[t]=a,n(e)})},function(e){t(e,i)})}},n.iterator=function(e){var t=function(i){var n=function(){return e.length&&e[i].apply(null,arguments),n.next()};return n.next=function(){return i<e.length-1?t(i+1):null},n};return t(0)},n.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var _=function(e,t,i,n){var a=[];e(t,function(e,t){i(e,function(e,i){a=a.concat(i||[]),t(e)})},function(e){n(e,a)})};n.concat=c(_),n.concatSeries=d(_),n.whilst=function(e,t,i){e()?t(function(a){return a?i(a):(n.whilst(e,t,i),void 0)}):i()},n.doWhilst=function(e,t,i){e(function(a){return a?i(a):(t()?n.doWhilst(e,t,i):i(),void 0)})},n.until=function(e,t,i){e()?i():t(function(a){return a?i(a):(n.until(e,t,i),void 0)})},n.doUntil=function(e,t,i){e(function(a){return a?i(a):(t()?i():n.doUntil(e,t,i),void 0)})},n.queue=function(t,i){function s(e,t,s,r){t.constructor!==Array&&(t=[t]),a(t,function(t){var a={"data":t,"callback":"function"==typeof r?r:null};s?e.tasks.unshift(a):e.tasks.push(a),e.saturated&&e.tasks.length===i&&e.saturated(),n.setImmediate(e.process)})}void 0===i&&(i=1);var r=0,o={"tasks":[],"concurrency":i,"saturated":null,"empty":null,"drain":null,"push":function(e,t){s(o,e,!1,t)},"unshift":function(e,t){s(o,e,!0,t)},"process":function(){if(r<o.concurrency&&o.tasks.length){var i=o.tasks.shift();o.empty&&0===o.tasks.length&&o.empty(),r+=1;var n=function(){r-=1,i.callback&&i.callback.apply(i,arguments),o.drain&&o.tasks.length+r===0&&o.drain(),o.process()},a=e(n);t(i.data,a)}},"length":function(){return o.tasks.length},"running":function(){return r}};return o},n.cargo=function(e,t){var i=!1,r=[],o={"tasks":r,"payload":t,"saturated":null,"empty":null,"drain":null,"push":function(e,i){e.constructor!==Array&&(e=[e]),a(e,function(e){r.push({"data":e,"callback":"function"==typeof i?i:null}),o.saturated&&r.length===t&&o.saturated()}),n.setImmediate(o.process)},"process":function l(){if(!i){if(0===r.length)return o.drain&&o.drain(),void 0;var n="number"==typeof t?r.splice(0,t):r.splice(0),c=s(n,function(e){return e.data});o.empty&&o.empty(),i=!0,e(c,function(){i=!1;var e=arguments;a(n,function(t){t.callback&&t.callback.apply(null,e)}),l()})}},"length":function(){return r.length},"running":function(){return i}};return o};var y=function(e){return function(t){var i=Array.prototype.slice.call(arguments,1);t.apply(null,i.concat([function(t){var i=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&console.error(t):console[e]&&a(i,function(t){console[e](t)}))}]))}};n.log=y("log"),n.dir=y("dir"),n.memoize=function(e,t){var i={},n={};t=t||function(e){return e};var a=function(){var a=Array.prototype.slice.call(arguments),s=a.pop(),r=t.apply(null,a);r in i?s.apply(null,i[r]):r in n?n[r].push(s):(n[r]=[s],e.apply(null,a.concat([function(){i[r]=arguments;var e=n[r];delete n[r];for(var t=0,a=e.length;a>t;t++)e[t].apply(null,arguments)}])))};return a.memo=i,a.unmemoized=e,a},n.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},n.times=function(e,t,i){for(var a=[],s=0;e>s;s++)a.push(s);return n.map(a,t,i)},n.timesSeries=function(e,t,i){for(var a=[],s=0;e>s;s++)a.push(s);return n.mapSeries(a,t,i)},n.compose=function(){var e=Array.prototype.reverse.call(arguments);return function(){var t=this,i=Array.prototype.slice.call(arguments),a=i.pop();n.reduce(e,i,function(e,i,n){i.apply(t,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);n(e,t)}]))},function(e,i){a.apply(t,[e].concat(i))})}};var b=function(e,t){var i=function(){var i=this,n=Array.prototype.slice.call(arguments),a=n.pop();return e(t,function(e,t){e.apply(i,n.concat([t]))},a)};if(arguments.length>2){var n=Array.prototype.slice.call(arguments,2);return i.apply(this,n)}return i};n.applyEach=c(b),n.applyEachSeries=d(b),n.forever=function(e,t){function i(n){if(n){if(t)return t(n);throw n}e(i)}i()},"undefined"!=typeof define&&define.amd?define([],function(){return n}):"undefined"!=typeof module&&module.exports?module.exports=n:t.async=n}();var Rt=function(){this._currentSearchIndex=0,this.emails=[],this.friendsByEmail={},this.friendsByID={}};Rt.prototype.loadData=function(e){var t=this;Kt.helper.db.server.ac_emails.query().all().execute().done(function(i){var n={};$.each(i,function(e,t){n[t.friend_id]||(n[t.friend_id]=[]),n[t.friend_id].push(t.email)}),$.each(e,function(e,i){var a=i.friend_id;i.emails=n[a]||[],t.friendsByID[a]=i;var s=i.emails||[];$.each(s,function(e,n){t.emails.push(n.toLowerCase()),t.friendsByEmail[n]=i})})})},Rt.prototype.search=function(e,t){var i=++this._currentSearchIndex,n=this;e=e.toLowerCase(),setTimeout(function(){async.filter(n.emails,function(t,a){var s=n._currentSearchIndex==i,r=-1!=t.indexOf(e);a(s&&r)},function(e){n._currentSearchIndex==i&&async.map(e,function(e,t){if(n._currentSearchIndex!==i)t("Aborted",null);else{var a=n.friendsByEmail[e];t(null,{"name":a.name,"email":e,"friendID":a.friend_id,"avatar_url":a.avatar_url,"friend":a})}},function(e,a){a&&n._currentSearchIndex==i&&t(a)})})},1)};var Nt=function(e,t,i){var n=this;this.messageHandler=i;var a=$(t.view).find(".messageContents");return a&&0!==a.length?(this.contentSizeChanged(a.height()+100),void 0):(this.friendSearch=new Rt,Kt.helper.db.server.friends.query("friendsIdIndex").all().execute().done(function(e){n.friendSearch.loadData(e)}),this.imgIdentifier=-1,this.item=e,this.sendToFriendView=t,this.form=this.sendToFriendView.view.find("form"),this.loadImage(this.form.find("#image")),this.form.find(".send").click($.proxy(this.send,this)),this.form.find(".cancel").click($.proxy(this.cancel,this)),this.recipientsCount=0,this.tokenInput=this.form.find("input[name=to]").tokenInput([],{"search_function":function(e,t){n.friendSearch.search(e,t)},"resultsFormatter":function(e){var t=e.name&&e.email&&e.name.length>0&&e.email.length>0,i=e.name&&e.name.length>0?e.name:e.email,n=e.avatar_url,a=t?e.email:null,s=this.imgIdentifierClass(),r="<li style='text-align:left'><img class='"+s+"' title='"+i+"' height='25px' width='25px' /><div style='display: inline-block; padding-left: 10px;'"+(t?" class='two_line'":" class='one_line'")+"><div class='full_name title'>"+i+"</div>"+(t?"<div class='email subtitle'>"+a+"</div>":"")+"</div></li>";return this.loadAvatar(n,s),r},"tokenFormatter":function(e){var t=e.avatar_url,i=this.imgIdentifierClass(),n="<li><img class='"+i+"' height='25px' width='25px' /><p>"+(e.name||e.email)+"</p></li>";return this.loadAvatar(t,i),n},"loadAvatar":function(e,t){e&&e.length?e=M(e,"w50-h50"):o()?(e="a/i/empty_avatar"+(window.devicePixelRatio>1?"-2x":"")+".png",e=chrome.runtime.getURL(e)):e="i/empty_avatar"+(window.devicePixelRatio>1?"-2x":"")+".png",setTimeout(function(){Vt.loadAvatar(e,function(e){$("."+t).attr("src",e.src)})},0)},"imgIdentifierClass":function(){return n.imgIdentifier+=1,"avatar-"+n.imgIdentifier},"textToData":function(e){return e.match(/^[_a-z0-9-\+]+(\.[_a-z0-9-\+]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/)?{"email":e}:null},"validateItem":function(e){var t=e.email;return D(t)},"onAdd":function(){n.recipientsCount++,n.contentSizeChanged()},"onDelete":function(){n.recipientsCount--,n.contentSizeChanged()}}),this.contentSizeChanged(),void 0)};Nt.prototype.loadImage=function(e){if(0!==e.length){var t=decodeURIComponent(e.attr("data-image-url")),i=70,n=this.form.find("#itemData").height(),a=window.devicePixelRatio?window.devicePixelRatio:1,s=M(t,"w"+i*a+(n*a?"-h"+n*a:"")+"-nc","t");Vt.loadImageCached(s,!0,function(t){$(e).css({"backgroundImage":"url("+t.src+")","backgroundSize":"100% 100%","backgroundPosition":"center center","height":n,"visibility":"visible"})})}},Nt.prototype.getRecipients=function(){for(var e=this.tokenInput.tokenInput("get"),t=[],i=0;i<e.length;i++){var n=e[i];if(n.item.friendID){var a={"friend_id":n.item.friendID};"undefined"!=typeof n.item&&"undefined"!=typeof n.item.friend&&(a.local_friend_id=n.item.friend.local_friend_id),t.push(a)}else n.item.email&&t.push({"email":n.item.email})}return t},Nt.prototype.cancel=function(){this.removeTokenField(),this.postMessage({"closed":!0,"shared":!1})},Nt.prototype.send=function(){var e=this,t={};t.comment=this.form.find("textarea[name=comment]").val();var i=this.getRecipients(),n=[];if(i.length){$.each(i,function(e,t){if("undefined"!=typeof t.friend_id){var i={"friend_id":t.friend_id,"local_friend_id":t.local_friend_id};n.push(i)}else n.push(t)}),t.to=n;var a=parseInt(this.item.status,10);"undefined"==typeof this.item.item_id||"undefined"==typeof this.item.status||0!==a&&1!==a||(t.itemId=this.item.item_id),t.url=this.item.resolved_url||this.item.given_url||this.item.url,Kt.pages.queue.data.shareTo({"o":{},"data":t,"delegate":e,"doneSelector":"shareItemCallback","errorSelector":"shareItemError"}),this.form.parent().addClass("sending")}},Nt.prototype.shareItemCallback=function(e){this.form.parent().removeClass("sending"),this.postMessage({"closed":!0,"shared":e.success!==!1}),this.removeTokenField()},Nt.prototype.shareItemError=function(){this.form.parent().removeClass("sending"),this.removeTokenField()},Nt.prototype.removeTokenField=function(){$(".token-input-dropdown").remove()},Nt.prototype.postMessage=function(e){this.messageHandler(JSON.stringify(e))},Nt.prototype.contentSizeChanged=function(e){e=e||this.form.height()+parseInt(this.form.css("margin-top"),10)+parseInt(this.form.css("margin-bottom"),10),isNaN(e)||this.postMessage({"height":e,"closed":!1}),this.recipientsCount>0?this.form.find(".send").removeClass("button-disabled button-important-disabled"):this.form.find(".send").addClass("button-disabled button-important-disabled")};var jt=function(){this.view=$('<div class="send-to-friend-form"></div>')};jt.prototype.updateWithItem=function(e){var t=this.templateWithItem(e);this.view.html(t)},jt.prototype.updateWithMessageURL,jt.prototype.showMessage=function(e,t,i,n,a){var s=this.messageTemplate(e,t,i,n);this.view.html(s),this.view.find(".button").click(a)},jt.prototype.destroy=function(){this.view.html("")},jt.prototype.templateWithItem=function(e){this.item=e;var t=e.resolved_url||e.given_url||e.url,i=e.resolved_title||e.given_title||e.title||t,n=L(t),a="undefined"!=typeof e.has_image&&"undefined"!=typeof e.has_image&&"1"==e.has_image,s="",r="";a&&(s+=" has_image",r+='<div id="image" data-image-url="'+e.images[1].src+'"></div>');var o='<div class="item'+s+'">'+r+'<div id="itemData"><div id="title">'+i+'</div><div id="domain">'+n+"</div></div></div>",l='<form><div class="field" id="toField"><label>'+Pt.callTrans("sharing.to")+':</label><input type="text" class="autocomplete recipients" name="to"></div><div class="field" id="commentField"><label>'+Pt.callTrans("sharing.comment")+':</label><textarea type="text" class="comment" name="comment"></textarea></div>'+o+'<div class="footer"><a class="send button button-small button-important button-disabled button-important-disabled">'+Pt.callTrans("cta.send")+'</a><a class="cancel">'+Pt.callTrans("cta.cancel")+'</a></div></form><div id="blocker"></div>';return l},jt.prototype.messageTemplate=function(e,t,i,n){var a='<div class="messageContents"><h1>'+e+"</h1><div>"+t+'</div><a class="button" href="'+n+'" target="_blank">'+i+"</a></div>";return a},W.prototype={"init":function(e){var t=this;db.open({"server":"PackagedAppPocket","version":1,"schema":{"items":{"key":{"keyPath":"local_item_id","autoIncrement":!0},"indexes":{"itemIdIndex":{"key":"item_id"},"timeAddedIndex":{"key":"time_added"},"titleIndex":{"key":"resolved_title"},"urlIndex":{"key":"resolved_url"},"hasPendingShareIndex":{"key":"has_pending_share"}}},"friends":{"key":{"keyPath":"local_friend_id","autoIncrement":!0},"indexes":{"friendsIdIndex":{"key":"friend_id"}}},"ac_emails":{"key":{"keyPath":"email","autoIncrement":!1}},"tags":{"key":{"keyPath":"local_tag_id","autoIncrement":!0},"indexes":{"tagIndex":{"key":"tag"}}},"actionsQueue":{"key":{"keyPath":"local_action_id","autoIncrement":!0}}}}).done(function(i){t.server=i,t.ready=!0,e&&e()}).fail(function(e){logger.log(e)})},"deleteDatabase":function(e){this.server.close(),db.deleteDatabase("PackagedAppPocket").done(function(){e()})},"clear":function(e){var t=["items","friends","ac_emails","tags","actionsQueue"],i=this.server,n=t.length,a=0;t.forEach(function(t){i[t].clear().done(function(){a+=1,n===a&&e()})})}};var Ut=Class.extend({"init":function(){this.sendingCount=0,this.pendingGets=[],this.requests={}},"send":function(e,t){var i=this.rId(e,!0);this.sendingCount++,this.requests[i]=this.makeRequest(i,e,t,!1)},"get":function(e,t){var i=this.rId(e);this.requests[i]&&(this.requests[i].abort(),this.requests[i]=!1),this.sendingCount>0?this.pendingGets.push({"action":e,"o":t}):this.requests[i]=this.makeRequest(i,e,t,!0)},"reset":function(){$.each(this.pendingGets,function(e,t){t.abort()}),this.sendingCount=0,this.pendingGets=[],this.requests={}},"makeRequest":function(e,t,i,n){return new Ht({"rId":e,"isGet":!!n,"action":t,"o":i,"delegate":this})},"success":function(e,t){if(this.requests[t.rId]){if(e.error&&1==e.error)return Kt.logout(!0,!1),void 0;t.o.delegate&&t.o.delegate[t.o.doneSelector].call(t.o.delegate,e,t.o)}},"error":function(e,t){this.requests[e.rId]&&(e.o.delegate&&e.o.errorSelector?e.o.delegate[e.o.errorSelector].call(e.o.delegate,e.o,_(t)):Kt.showErrorNotification("Uh oh. There was an unexpected error when making a request to the server. Please try reloading the page."))},"always":function(e){if(this.requests[e.rId]=!1,!e.isGet&&(this.sendingCount--,0===this.sendingCount)){var t=$.extend(!0,[],this.pendingGets);if(this.pendingGets=[],t.length)for(var i=0;i<t.length;i++)this.get(t[i].action,t[i].o)}},"rId":function(e,t){return e+(t?"|"+Math.random():"")}});RequestActions={"get":"get","getShares":"getShares","getArticle":"getArticle","getTags":"getTags","getSuggestedTags":"getSuggestedTags","updateTags":"updateTags","renameTag":"renameTag","deleteTag":"deleteTag","savePosition":"savePosition","itemAction":"itemAction","shareTo":"shareTo","getWithDataParameter":"getWithDataParameter","bulkEdit":"bulkEdit","saveRecentSearch":"saveRecentSearch","setWebSettings":"setWebSettings","opened":"open"};var Yt=Class.extend({"init":function(e){this.rId=e.rId,this.isGet=e.isGet,this.delegate=e.delegate,this.action=e.action,this.data=e.o.data,this.dataType=e.o.dataType||"json",this.o=e.o,this.send()},"abort":function(){},"success":function(e){this.delegate&&this.delegate.success(e,this)},"error":function(e){"abort"!=e&&this.delegate&&this.delegate.error(this,e)},"always":function(){this.delegate&&this.delegate.always(this)}}),Ht=Yt.extend({"init":function(e){return this.dbServer=Kt.helper.db.server,this.cancelled=!1,this._super(e)},"send":function(){var e=this;if(!this.dbServer.isClosed()){this.data||(this.data={}),logger.log("Send Action: "+this.action);var t=this.data.item,i=this.data.itemObjects,n=t&&t.local_item_id?t.local_item_id:void 0,a=this.data.itemId,s=this.data.state;if(delete this.data.item,delete this.data.itemObjects,this.action===RequestActions.get){var r=this.data.sort,o=this.data.offset,l=this.data.count,c=this.data.contentType,u=this.data.tag,h=this.data.search;if("queue"===s){var f="timeAddedIndex";"title"===r?f="titleIndex":"site"===r&&(f="urlIndex");var p=this.dbServer.items.query(f).all();"newest"===r&&p.desc();var g=function(e){var t=!0;if(c&&("article"===c?t=1===parseInt(e.is_article,10):"video"===c?t=0!==parseInt(e.has_video,10):"image"===c&&(t=2===parseInt(e.has_image,10))),(0===parseInt(e.item_id,10)||0!==parseInt(e.status,10))&&(t=!1),u)if("_untagged_"==u)e.tags&&(t=!1);else if(e.tags){var i=Object.keys(e.tags);t=i.indexOf(u)>-1&&t}else t=!1;if(h){h=h.toLowerCase();var n=e.resolved_url?e.resolved_url:e.given_url,a=e.resolved_title?e.resolved_title:e.given_title,s=-1!==n.toLowerCase().indexOf(h),r=-1!==a.toLowerCase().indexOf(h),o=-1!==e.given_url.toLowerCase().indexOf(h);t=(s||r||o)&&t}return t};return p.filter(g).skip(o).take(l).execute().done(function(t){e.dbServer.friends.query("friendsIdIndex").all().execute().done(function(i){var n={"items":t,"friends":i,"index":o},a=new Parallel(n);a.spawn(function(e){var t=e.index,i=e.items;i.forEach(function(e){e.sort_id=t,t+=1});var n=e.friends,a={};return n.forEach(function(e){a[e.friend_id]=e}),{"list":i,"friends":a}}).then(function(t){e.success(t),e.always()})})}),void 0}return this.url=this.apiURL(),this.data.tags=1,this.data.image=1,this.data.images=1,this.data.videos=1,this.data.shares=1,this.data.positions=1,this.makeAPIRequest(),void 0}if(this.action===RequestActions.getShares)return e.dbServer.friends.query("friendsIdIndex").all().execute().done(function(t){e.dbServer.items.query("hasPendingShareIndex","timeAddedIndex").only("1").execute().done(function(i){var n={"friends":t,"items":i},a=new Parallel(n);a.spawn(function(e){var t=e.items||[],i=e.friends||{},n={};for(var a in i){var s=i[a];n[s.friend_id]=s
}var r=[];return t.forEach(function(e){if(e.shares){var t=e.shares;for(var i in t){var a=t[i];0===parseInt(a.status)&&(a.item=e,a.from_friend=n[a.from_friend_id],r.push(a))}}}),r.sort(function(e,t){return e.time_shared<t.time_shared?1:-1}),r}).then(function(t){d("unconfirmedShares",function(i){var n=i.unconfirmedShares?JSON.parse(i.unconfirmedShares):{};e.success({"notifications":t,"unconfirmed_shares":n}),e.always()})})})}),void 0;if(this.action==RequestActions.getArticle){var m=this.data.url||t.resolved_url||t.given_url;return"undefined"!=typeof t&&0===parseInt(t.status,10)?(Vt.loadArticle(m,function(t){e.success({"article":t}),e.always()},function(t){e.error(t)}),void 0):(this.url=this.articleURL(m),this.makeAPIRequest(),void 0)}if(this.action==RequestActions.getTags)return this.dbServer.tags.query("tagIndex").all().execute().done(function(t){var i=$.map(t,function(e){return e.tag});e.success(i),e.always()}).fail(e.error.bind(e)),void 0;if(this.action==RequestActions.getSuggestedTags)return this.data.locale_lang=zt.language,this.url=PKTBaseURL+"/suggested_tags",this.makeAPIRequest(),void 0;if(this.action==RequestActions.renameTag)return this.handleRenameRemoveTag(this.data.oldTag,this.data.newTag),e.addActionToQueueShouldSyncAndFinish({"old_tag":this.data.oldTag,"new_tag":this.data.newTag,"action":"tag_rename"},!0),void 0;if(this.action==RequestActions.deleteTag)return this.handleRenameRemoveTag(this.data.tag),e.addActionToQueueShouldSyncAndFinish({"tag":this.data.tag,"action":"tag_delete"},!0),void 0;if(this.action==RequestActions.updateTags)return this.handleUpdateItemTags(a,t),void 0;if(this.action==RequestActions.itemAction){var v,_=this.data.action;if("share_ignored"==_||"share_added"==_){var y=this.data.share_id;v={"item_id":a,"local_item_id":n,"action":_,"share_id":y};var b=function(){e.addActionToQueueShouldSyncAndFinish(v,!0)};if("share_added"===_){var w="0";t.shares&&$.each(t.shares,function(e,t){return 0===parseInt(t.status,10)?(w="1",!1):void 0}),t.status="0",t.time_added=Math.round((new Date).getTime()/1e3).toString(),t.has_pending_share=w,e.dbServer.items.get(n).done(function(i){i.shares=t.shares,i.status=t.status,i.time_added=t.time_added,i.has_pending_share=w,e.dbServer.items.update(i).done(function(){b()}).fail(e.error.bind(e))}).fail(e.error.bind(e))}else"share_ignored"===_&&e.dbServer.items.get(n).done(function(i){i.shares=t.shares,e.dbServer.items.update(i).done(function(){b()}).fail(e.error.bind(e))}).fail(e.error.bind(e));return}return"pmc"===_||"pmv"===_?(v={"action":_,"pkta":S(e.data.pkta)},"pmc"===_&&(v.click_url=S(e.data.click_url)),e.addActionToQueueShouldSyncAndFinish(v,!1),void 0):(e.handleItemAction(a,t),void 0)}if(this.action==RequestActions.savePosition){delete this.data.itemId;var T=t.positions?t.positions:{},k=$.extend(!0,{},this.data);T[1]=k,t.positions=T;var x=function(){var t=$.extend(!0,{},k);t.action="scrolled",e.addActionToQueueShouldSyncAndFinish(t,!0)};if("undefined"==typeof n)return x(),void 0;e.dbServer.items.get(n).done(function(t){return"undefined"==typeof t?(x(),void 0):(t.positions=T,e.dbServer.items.update(t).done(function(){x()}).fail(e.error.bind(e)),void 0)})}else if(this.action==RequestActions.shareTo){var v={"action":"shared_to","to":e.data.to};"undefined"!=typeof a&&(v.item_id=a),"undefined"!=typeof e.data.url&&(v.url=e.data.url);var C=e.data.comment;"undefined"!=typeof C&&""!==C&&(v.comment=C),e.addActionToQueueShouldSyncAndFinish(v,!0),this.success({}),this.always()}else if(this.action==RequestActions.opened){var D=this.data.openType,v={"action":D,"item_id":a,"local_item_id":n};e.addActionToQueueShouldSyncAndFinish(v,!1),this.success({}),this.always()}else if(this.action==RequestActions.getWithDataParameter)this.url=this.apiURL(),this.makeAPIRequest();else if(this.action==RequestActions.bulkEdit){var L,v,_=this.data.status,I=this.data.on,M=function(t,i,n){var a=i&&i.local_item_id?i.local_item_id:void 0;if(L="mark"===_?I?"archive":"readd":"favorite"===_?I?"favorite":"unfavorite":"delete"===_?"delete":"updateTags","updateTags"===L){var s=e.data.tagType,r="tags_clear"===s?[]:e.data.tags,o=function(){e.addActionToQueue({"item_id":t,"local_item_id":a,"action":"tags_add"==s?s:"tags_replace","tags":r},n)};return"undefined"==typeof a?(o(),void 0):(e.dbServer.items.get(a).done(function(t){if("tags_replace"===s){var i=[];$.each(r,function(e,t){i.push({"id":e,"tag":t})}),t.tags=i}else"tags_clear"===s||"undefined"==typeof t.tags?delete t.tags:"tags_add"===s&&$.each(r,function(e,i){t.tags[e]={"id":e,"tag":i}});e.dbServer.items.update(t).done(function(){o()}).fail(n)}).fail(n),void 0)}if("readd"===L)return i.time_added=Math.round((new Date).getTime()/1e3).toString(),i.time_added_to_device=Math.round((new Date).getTime()/1e3).toString(),i.is_offline="0",delete i.sort_id,i.status="0",e.dbServer.items.update(i).done(function(){e.dbServer.items.query("itemIdIndex").only(i.item_id).execute().done(function(t){var i=t[0];e.addActionToQueue({"item_id":i.item_id,"local_item_id":i.local_item_id,"action":L},n)})}).fail(n),void 0;var l=function(i){e.addActionToQueue({"item_id":t,"local_item_id":a,"action":i},n)};if("undefined"==typeof a)l(L);else if("archive"===L||"delete"===L){if(1===parseInt(i.has_pending_share,10))return l(L),void 0;e.dbServer.items.remove(a).done(function(){Vt.removeAssetsForItem(i),l(L)}).fail(n)}else("favorite"===L||"unfavorite"===L)&&e.dbServer.items.get(a).done(function(t){t.favorite=I?"1":"0",e.dbServer.items.update(t).done(function(){l(L)}).fail(n)}).fail(n)},A=i.length;i.forEach(function(t){M(t.resolved_id,t,function(){A-=1,0==A&&(Kt.helper.sync.sendChanges(),e.success({}),e.always())})})}else{if(this.action==RequestActions.saveRecentSearch){var v={"action":"recent_search","search":e.data.search,"scxt_key":e.data.scxt_key,"scxt_val":e.data.scxt_val};return e.addActionToQueueShouldSyncAndFinish(v,!0),void 0}if(this.action==RequestActions.setWebSettings)return this.url=PKTBaseURL+"/setWebSettings",this.makeAPIRequest(),void 0}}},"handleUpdateItemTags":function(e,t){var i=this,n=t&&t.local_item_id?t.local_item_id:void 0,a=this.data.tagType,s="tags_clear"===a?[]:this.data.tags,r=this.data.analytics,o=function(){i.addActionToQueueShouldSyncAndFinish({"item_id":e,"local_item_id":n,"action":"tags_add"==a?a:"tags_replace","tags":s,"cxt_view":"add_tags","cxt_tags_cnt":r.tag_cxt_tags_cnt,"cxt_suggested_available":r.tag_cxt_suggested_available,"cxt_enter_cnt":r.tag_cxt_entered,"cxt_suggested_cnt":r.tag_cxt_suggested,"cxt_remove_cnt":r.tag_cxt_removed},!0)};if("undefined"==typeof n)return o(),void 0;i.dbServer.items.get(n).done(function(t){if("tags_replace"===a||"tags_add"===a){var n={};$.each(s,function(t,i){n[i]={"item_id":e,"tag":i}}),t.tags=n}else("tags_clear"===a||"undefined"==typeof t.tags)&&delete t.tags;i.dbServer.items.update(t).done(function(){o()}).fail(function(e){logger.log("Error updating item after update item tags"+e)})}).fail(function(){logger.log("Error get item from db in dataRequestPA")});var l={},c=0;$.each(s,function(e,t){l[t]=!1}),this.dbServer.tags.query("tagIndex").all().execute().done(function(e){$.map(e,function(e){return e.local_tag_id>c&&(c=e.local_tag_id),$.each(s,function(t,i){i==e.tag&&(l[i]=!0)}),e.tag});for(var t in l)l[t]||i.dbServer.tags.add({"local_tag_id":c+1,"tag":t}).fail(function(e){logger.log("Error adding tag to db"+e)})}).fail(this.error.bind(this))},"handleRenameRemoveTag":function(e,t){var i=this,n=this.dbServer.items.query("timeAddedIndex").all(),a=function(t){var i=!1;if(t.tags){var n=Object.keys(t.tags);i=n.indexOf(e)>-1}return i};n.filter(a).execute().done(function(n){n.forEach(function(n){var a={};$.each(n.tags,function(i,n){n.tag!==e&&n.tag!==t&&(a[n.tag]={"item_id":n.item_id,"tag":n.tag}),n.tag===e&&t&&(a[t]={"item_id":n.item_id,"tag":t})}),n.tags=a,i.dbServer.items.update(n).fail(function(e){logger.log("Error updating item after remove item tags"+e)})})}),this.dbServer.tags.query("tagIndex").all().execute().done(function(t){$.map(t,function(t){return t.tag==e&&i.dbServer.tags.remove(t.local_tag_id).fail(function(e){logger.log("Error removing tag"+e)}),t.tag})}).fail(this.error.bind(this))},"handleItemAction":function(e,t){var i,n=this,a=this.data.action,s=this.data.on,r=t&&t.local_item_id?t.local_item_id:void 0;if("mark"===a?i=s?"archive":"readd":"favorite"===a?i=s?"favorite":"unfavorite":"delete"===a&&(i="delete"),"readd"===i)return t.time_added=Math.round((new Date).getTime()/1e3).toString(),t.time_added_to_device=Math.round((new Date).getTime()/1e3).toString(),t.is_offline="0",delete t.sort_id,t.status="0",n.dbServer.items.update(t).done(function(){n.dbServer.items.query("itemIdIndex").only(t.item_id).execute().done(function(e){var t=e[0];n.addActionToQueueShouldSyncAndFinish({"item_id":t.item_id,"local_item_id":t.local_item_id,"action":i},!0)})}).fail(n.error.bind(n)),void 0;var o=function(t){n.addActionToQueueShouldSyncAndFinish({"item_id":e,"local_item_id":r,"action":t},!0)};if("undefined"==typeof r)o(i);else if("archive"===i||"delete"===i){if(1===parseInt(t.has_pending_share,10))return o(i),void 0;n.dbServer.items.remove(r).done(function(){Vt.removeAssetsForItem(t),o(i)}).fail(function(e){logger.log("Error deleting object from database"),n.error(e)})}else("favorite"===i||"unfavorite"===i)&&n.dbServer.items.get(r).done(function(e){e.favorite="favorite"===i?"1":"0",n.dbServer.items.update(e).done(function(){o(i)}).fail(n.error.bind(n))}).fail(n.error.bind(n))},"makeAPIRequest":function(){var e=this;logger.log("Send Data: "+JSON.stringify(this.data));{var t=Kt.helper.sync;t.ajaxRequest(this.url,this.data,this.dataType,"POST").done(function(t){e.success(t)}).fail(function(t,i){"abort"!=i&&e.error(t.getResponseHeader("X-Error"))}).always(this.always.bind(this))}},"abort":function(){this.cancelled=!0,this.ajaxRequest&&this.ajaxRequest.abort()},"addActionToQueue":function(e,t){e.time=""+Math.round(+new Date/1e3);var i={"action":e};this.dbServer.actionsQueue.add(i).done(function(){t()}).fail(function(){t()})},"addActionToQueueShouldSyncAndFinish":function(e,t){var i=this;e.time=""+Math.round(+new Date/1e3);var n={"action":e};this.dbServer.actionsQueue.add(n).done(function(){t&&Kt.helper.sync.sendChanges(),i.success({}),i.always()}).fail(i.error.bind(i))},"apiURL":function(){return"get"===this.action||"getWithDataParameter"===this.action?PKTBaseURL+"/get":PKTBaseURL+"/send";return""},"apiMethod":function(){return"get"===this.action||"getWithDataParameter"===this.action?"get":"send";return""},"articleURL":function(e){var t="http://text.readitlater.com/v3beta/text?getItem=1&promptSubs=1&formfactor=mac&images=2&output=json&msg=1";return o()||(t+="&videos=1"),t+="&url="+e}}),zt={};zt.premiumStatus=0,zt.hidePremium=0,zt.language=dictsuffix,zt.externalUserSettings={},zt.GSFStatus={},B.prototype={"preInit":function(){d("ServerSettings",function(e){if("string"==typeof e.ServerSettings)zt=JSON.parse(e.ServerSettings),zt.language=dictsuffix,Kt.init();else{At.setDetail("<p>"+Pt.callTrans("notification.retrievingyourlist")+"</p>"),At.show(!0);var t={"consumer_key":PKTConsumerKey,"access_token":Wt.accessToken,"type":"summary"};$.ajax({"url":"https://getpocket.com/v3/getWebSettings","type":"POST","dataType":"json","data":t,"success":function(e){e.websettings&&(zt.externalUserSettings=JSON.parse(e.websettings.replace(/\\"/g,'"').replace(/\\"/g,'"').replace(/\'/g,"\\'"))),e.gsfsettings&&(zt.GSFStatus=JSON.parse(e.gsfsettings.replace(/\\"/g,'"').replace(/\\"/g,'"').replace(/\'/g,"\\'"))),e.account&&(zt.premiumStatus=e.account.premium_status),u("ServerSettings",JSON.stringify(zt)),d("hasFetched",function(e){e.hasFetched&&At.hide()}),Kt.init()}})}})},"init":function(){var e=this;$("body").addClass("page-app-"+window.navigator.language.toLowerCase()),this.inited||(this.addLinkListener(),this.addKeyboardShortcuts()),Qt.shareInit(),$("#container").addClass("container-active"),Wt.isLoggedIn()?(e.loadStateFromUrl(),Gt.sync(),o()&&this.addSyncingTrigger(),PocketUserApps.init(PKTConsumerKey,Wt.accessToken),d("guid",function(e){"string"==typeof e.guid&&(Wt.guid=e.guid,PocketAnalytics.init(PKTConsumerKey,Wt.accessToken,Wt.guid))})):e.loadStateFromUrl("/a/login"),this.inited=!0},"loggedIn":function(){Gt.sync(),this.loadStateFromUrl(),this.pages.queue.reloadList()},"addLinkListener":function(){$("#page").on("click","a[href]",function(e){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return!0;var t=this.getAttribute("href");return logger.log("about to load in a href",t),t.match(/^\/a\//)?($(".popover-new").removeClass("popover-active"),$(".section-filter-options").hasClass("section-filter-options-active")&&$(".searchtoolbar_queue").find(".section-filter").trigger("click"),Kt.loadStateFromUrl(t),!1):void 0})},"addKeyboardShortcuts":function(){var e=this;key("+r, ctrl+r",function(){Gt.sync()}),key("+d, ctrl+d",function(){Kt.logout(!1,!0)}),key("+1, ctrl+1",function(){At.showing||("string"==typeof zt.externalUserSettings.lastQueueView&&"list"==zt.externalUserSettings.lastQueueView?e.loadStateFromUrl("/a/queue/list"):e.loadStateFromUrl("/a/queue/"),PocketAnalytics.action("switch_queue","interact","packgedapp",1))}),key("+2, ctrl+2",function(){At.showing||("string"==typeof zt.externalUserSettings.lastQueueView&&"list"==zt.externalUserSettings.lastQueueView?e.loadStateFromUrl("/a/favorites/list"):e.loadStateFromUrl("/a/favorites/"),PocketAnalytics.action("switch_favorites","interact","packagedapp",1))}),key("+3, ctrl+3",function(){At.showing||("string"==typeof zt.externalUserSettings.lastQueueView&&"list"==zt.externalUserSettings.lastQueueView?e.loadStateFromUrl("/a/archive/list"):e.loadStateFromUrl("/a/archive/"),PocketAnalytics.action("switch_archive","interact","packagedapp",1))}),key("+1, alt+1",function(){Kt.pages.queue.isOpen&&!At.showing&&($("#pagenav_segmentsfilter").find(".all").trigger("click"),PocketAnalytics.action("filter_all","interact","packagedapp",1))}),key("+2, alt+2",function(){Kt.pages.queue.isOpen&&!At.showing&&($("#pagenav_segmentsfilter").find(".articles").trigger("click"),PocketAnalytics.action("filter_articles","interact","packagedapp",1))}),key("+3, alt+3",function(){Kt.pages.queue.isOpen&&!At.showing&&($("#pagenav_segmentsfilter").find(".videos").trigger("click"),PocketAnalytics.action("filter_videos","interact","packagedapp",1))}),key("+4, alt+4",function(){Kt.pages.queue.isOpen&&!At.showing&&($("#pagenav_segmentsfilter").find(".images").trigger("click"),PocketAnalytics.action("filter_images","interact","packagedapp",1))}),key("alt+5",function(){if(Kt.pages.queue.isOpen&&!At.showing){if("object"!=typeof zt.externalUserSettings)return;zt.externalUserSettings.sortlist="oldest"!=zt.externalUserSettings.sortlist?"oldest":"newest",Kt.saveExternalUserSettings(),ai.reloadList(),gt.show("oldest"!=zt.externalUserSettings.sortlist?Pt.callTrans("queue.sortingbynewest"):Pt.callTrans("queue.sortingbyoldest")),PocketAnalytics.action("sort_queue","interact","webapp",1)}}),key("+/",function(){Kt.pages.queue.isOpen&&!At.showing?e.loadStateFromUrl($("#pagenav_gridlist").children("a").attr("href")):Kt.pages.reader.isOpen&&($("#pagenav_articleview").hasClass("selected")?e.pages.reader.switchToWebView():e.pages.reader.switchToArticleView())}),key("shift+/,/",function(){PocketAnalytics.action("view_shortcuts","interact","packagedapp",1),"function"==typeof $.fn.chardinJs&&($("body").one("chardinJs:start",function(){if(!$(".chardinjs-keyboard").length){var e;e=Kt.pages.queue.isOpen?Handlebars.templates.queue_helpoverlaypackaged:Handlebars.templates.reader_helpoverlaypackaged,header=$(e(dictJSON)),$(".chardinjs-overlay").append(header)}}),$("body").chardinJs("toggle"))}),key("j",function(){Kt.pages.queue.isOpen&&!At.showing&&(e.pages.queue.highlightItemMove(!0),PocketAnalytics.action("item_next","interact","packagedapp",1))}),key("k",function(){Kt.pages.queue.isOpen&&!At.showing&&(e.pages.queue.highlightItemMove(!1),PocketAnalytics.action("item_previous","interact","packagedapp",1))}),key("return, enter",function(t){Kt.pages.queue.isOpen&&!At.showing&&(t.preventDefault(),e.pages.queue.highlightItemAction("open"))}),key("a",function(){Kt.pages.queue.isOpen&&!At.showing?e.pages.queue.highlightItemAction("mark"):Kt.pages.reader.isOpen&&!At.showing&&$("#pagenav_articleview").hasClass("selected")&&(e.pages.reader.actionToggle("mark"),PocketAnalytics.action("archive","interact","packagedapp",1))}),key("d",function(){Kt.pages.reader.isOpen&&!At.showing&&$("#pagenav_articleview").hasClass("selected")&&e.pages.reader.toggleFullScreenMode()}),key("f",function(){Kt.pages.queue.isOpen&&!At.showing?e.pages.queue.highlightItemAction("favorite"):Kt.pages.reader.isOpen&&!At.showing&&$("#pagenav_articleview").hasClass("selected")&&(e.pages.reader.actionToggle("favorite"),PocketAnalytics.action("favorite","interact","packagedapp",1))}),key("o",function(){if(Kt.pages.queue.isOpen&&!At.showing)e.pages.queue.highlightItemAction("browseropen");else if(Kt.pages.reader.isOpen&&"string"==typeof Kt.pages.reader.item.given_url&&!At.showing){var t=Kt.pages.reader.item,i=t.resolved_url?t.resolved_url:t.given_url;PocketAnalytics.action("open_original","interact","packagedapp",1),window.open(I(i))}}),key("s",function(e){Kt.pages.queue.isOpen&&!At.showing&&(e.preventDefault(),e.stopImmediatePropagation(),Kt.pages.queue.showSearchState(!0),PocketAnalytics.action("search_focus","interact","packagedapp",1))}),key("t",function(){Kt.pages.queue.isOpen&&!At.showing?e.pages.queue.highlightItemAction("tag"):Kt.pages.reader.isOpen&&!At.showing&&$("#pagenav_tag").find("a").trigger("click")}),key("+-",function(t){t.preventDefault(),Kt.pages.reader.isOpen&&!At.showing&&$("#pagenav_articleview").hasClass("selected")&&(e.pages.reader.fontInc(-1),PocketAnalytics.action("font_decrease","interact","packagedapp",1))}),key("+=",function(t){t.preventDefault(),Kt.pages.reader.isOpen&&!At.showing&&$("#pagenav_articleview").hasClass("selected")&&(e.pages.reader.fontInc(1),PocketAnalytics.action("font_increase","interact","packagedapp",1))}),key("escape",function(e){Kt.pages.queue.isOpen&&At.showing?(e.preventDefault(),"object"==typeof At&&At.hide()):Kt.pages.queue.isOpen&&$(".container-bulkedit-active").length&&(e.preventDefault(),Kt.pages.queue.showBulkEdit(!1))}),key("+[",function(){Kt.pages.reader.isOpen&&$("#pagenav_articleview").hasClass("selected")&&e.goBack()})},"loadStateFromUrl":function(e){logger.log("loading state form url",e);var t={},i=z(e?e:window.location);t.sections=i.path.replace(new RegExp("^"+this.urlHead),"").split("/");for(var n=0;n<t.sections.length;n++)t.sections[n]=decodeURIComponent(t.sections[n]);t.page=t.sections[0],t.page||(t.page=this.defaultPage),"read"!==t.page&&this.pages.reader.hideWebView(),this.router[t.page]?(t.controller=this.pages[this.router[t.page]],t.controller.loadState(t)):this.loadStateFromUrl("/a/")},"addSyncingTrigger":function(){this.addSyncByWindowFocus()},"addSyncByWindowFocus":function(){$(window).on("focus",function(){Wt.isLoggedIn()&&Gt.sync()})},"addSyncPollingAlarm":function(){chrome.alarms.create("refreshData",{"periodInMinutes":5}),chrome.alarms.onAlarm.addListener(function(e){"refreshData"==e.name&&(logger.log("running sync"),Gt.sync())})},"saveGSFStatus":function(){var e=this;"object"==typeof zt.GSFStatus&&(u("ServerSettings",JSON.stringify(zt)),this.data.send("setWebSettings",{"data":{"property":e.USERS_META_WEB_GSF_SETTINGS,"value":JSON.stringify(zt.GSFStatus)}},!0))},"saveExternalUserSettings":function(){var e=this;"object"==typeof zt.externalUserSettings&&(u("ServerSettings",JSON.stringify(zt)),this.data.send("setWebSettings",{"data":{"property":e.USERS_META_WEB_DISPLAY_SETTINGS,"value":JSON.stringify(zt.externalUserSettings)}},!0))},"pushState":function(e,t){this.pushing=!0,History.pushState(!1,e,t),this.pushing=!1},"showPage":function(e){if($("#queue_title").css("display",e instanceof et&&!Kt.pages.queue.searchStateMode?"":"none"),!e.page.hasClass("active")){var t=!0;this.activeController?(this.activeController.willHide(),this.activeController.page.removeClass("active"),this.activeController.navigationItem.removeClass("active"),this.activeController.footerItem&&this.activeController.footerItem.object.removeClass("active"),this.activeController.didHide()):t=!1;var i=e.page.data("skin")?"page-"+e.nav+e.page.data("skin"):"",n=$("body").attr("class").match(/(page-app-([\w|-]+))/i),a=$("body").hasClass("page-notificationpersistent");"object"==typeof n&&n.length>1&&(n=n[1]),$("body").attr("class","").addClass("page-"+e.nav+" "+i),"string"==typeof n&&$("body").addClass(n),a&&$("body").addClass("page-notificationpersistent"),e.page.addClass("active"),e.navigationItem.addClass("active"),e.footerItem&&e.footerItem.object.addClass("active"),$("#page").toggleClass("show_footer",!!e.footerItem),$("header nav li").removeClass("selected"),$("#nav_"+e.nav).addClass("selected"),this.activeController=e,this.activeController.didShow(),"queue"==e.nav&&$.trim(Kt.pages.queue.searchField.val()).length?Kt.pages.queue.showSearchState(!0,!0):Kt.pages.queue.searchStateMode&&(Kt.pages.queue.showSearchState(!1,!0),Kt.pages.queue.saveSearchStateToPrevSearches())}},"showInterstitial":function(e){function t(e){return e.preventDefault(),!1}function i(){n.removeClass("open"),$(window).unbind("scroll",t),setTimeout(function(){n.remove()},300)}var n=$("<div class='interstitial'></div>"),a=$("<div class='close'></div>"),s=$("<iframe allowtransparency=true></iframe>");s.attr("id","name"),s.bind("load",function(){s.unbind("load"),setTimeout(function(){n.addClass("open"),n.click(i),a.click(i),$(window).bind("scroll",t)},10)}),n.append(s),n.append(a),$(document.body).append(n),s.attr("src","/interstitial/"+e+".html?d="+(new Date).getTime())},"showNotification":function(e,t,i){var n=$(".notifications-sync"),a=n.find(".progress-bar-content");a.removeClass("progress-bar-zeroed"),"undefined"!=typeof e&&n.find(".message").text(e),"undefined"!=typeof t&&t?"number"==typeof i?(i>1&&(i=1),a.css("width",100*i+"%"),0===i&&a.addClass("progress-bar-zeroed")):a.css("width","1%"):a.css("width","100%"),n.addClass("notifications-active")},"hideNotification":function(){var e=$(".notifications-sync");e.removeClass("notifications-active"),e.on("webkitTransitionEnd transitionEnd",function(e){$(e.target).hasClass("notifications-sync")&&($(this).find(".progress-bar-content").addClass("progress-bar-zeroed"),$(this).off("webkitTransitionEnd transitionEnd"))})},"updateNotification":function(e,t){var i=$(".notifications-sync"),n=i.find(".progress-bar-content");"string"==typeof e&&i.find(".message").text(e),"number"==typeof t&&(t>1&&(t=1),n.css("width",100*t+"%"),0===t?n.addClass("progress-bar-zeroed"):n.removeClass("progress-bar-zeroed"))},"showErrorNotification":function(e,t,i){var n=$(".notifications-error");t||n.one("webkitTransitionEnd transitionend msTransitionEnd oTransitionEnd",function(){i?setTimeout(function(){n.removeClass("notifications-active")},5e3):n.removeClass("notifications-active")}),"string"==typeof e&&n.find(".message").text(e),n.addClass("notifications-active")},"initNewDatabase":function(e){Bt.deleteDatabase(function(){Bt=new W,Bt.init(function(){Kt.helper.db=Bt,Gt.dbServer=Kt.helper.db.server,e&&e()})})},"logout":function(e,t){Gt.apiRequest("send",{"actions":JSON.stringify([{"action":"logged_out"}])}),Wt.logout(),f("syncedSince"),f("hasSyncedUserSettings"),f("hasSyncedRediscovery"),f("fetchingFinished"),f("unconfirmedShares"),f("account"),f("hasFetched"),f("needsToStartFetching"),f("a_styles"),f("loadedItems"),f("sawEmptyNotice"),f("ServerSettings"),f("GSFStatus"),f("topicDetail"),f("recentSearches"),f("PromptPassword"),f("PromptPasswordEmail"),f("PromptPasswordName"),f("PromptPasswordAvatar"),"object"==typeof It&&It.hideOpenPopover(),Kt.pages.queue.items=[],Kt.pages.queue.itemsByID={},"undefined"!=typeof Kt.pages.queue.queueList&&(Kt.pages.queue.queueList.html(""),Kt.pages.queue.searchField.val(""),$(".gsf_device_reminder_container").length&&$(".gsf_device_reminder_container").remove()),"undefined"!=typeof Kt.pages.queue.addMenu&&(Kt.pages.queue.addMenu.object.remove(),Kt.pages.queue.addMenu=void 0),"undefined"!=typeof Kt.pages.queue.emptyCell&&Kt.pages.queue.emptyCell.length&&(Kt.pages.queue.emptyCell.remove(),Kt.pages.queue.emptyCell=void 0),"undefined"!=typeof Kt.pages.queue.notificationRow&&(Kt.pages.queue.notificationRow.remove(),Kt.pages.queue.notificationRow=void 0),"undefined"!=typeof Kt.pages.queue.shareMenu&&(Kt.pages.queue.shareMenu.object.remove(),Kt.pages.queue.shareMenu=void 0),"undefined"!=typeof Kt.pages.queue.searchField&&($(".searchtoolbar_queue,.searchtoolbar_screenbar,.searchtoolbar_screen").remove(),Kt.pages.queue.searchField=void 0),"undefined"!=typeof Kt.pages.reader.shareMenu&&(Kt.pages.reader.shareMenu.object.remove(),Kt.pages.reader.shareMenu=void 0),Kt.pages.queue.initialView=!0,Gt.cancelSync(),Gt.hasSyncedUserSettings=!1,Gt.hasSyncedRediscovery=!1,Vt.cancelAllRequests(),Vt.clearCache(),chrome.storage.local.get(null,function(e){for(var t in e)f(t)}),zt.premiumStatus=1,zt.hidePremium=0,zt.language=dictsuffix,zt.externalUserSettings={},zt.GSFStatus={};var i=function(){LoginPage.init()};return"undefined"!=typeof e&&e?(this.helper.db.clear(function(){i()}),void 0):"undefined"!=typeof t&&t?(Kt.initNewDatabase(function(){i()}),void 0):(i(),void 0)},"goBack":function(){History.back()}};var Wt,Bt,Gt,Vt,Jt,Kt=new B;$(document).ready(function(){"string"==typeof dictsuffix&&$("body").addClass("page-app-"+dictsuffix.toLowerCase()),chrome.runtime.getBackgroundPage(function(e){Jt=e,Wt=new vt(function(){Bt=new W,Bt.init(function(){Kt.helper.db=Bt,Gt=new Z,Kt.helper.sync=Gt,Vt=new V,Vt.init(function(){return Kt.helper.assetCache=Vt,Jt.checkIfUserIsLoggedInAndLogoutIf&&Wt.isLoggedIn()?(Jt.checkIfUserIsLoggedInAndLogoutIf=!1,Kt.logout(!1,!0),void 0):(chrome.storage.local.get(["openedAppActions","closedAppActions"],function(e){var t=e.openedAppActions?JSON.parse(e.openedAppActions):[],i=e.closedAppActions?JSON.parse(e.closedAppActions):[],n=t.concat(i);$.each(n,function(e,t){Gt.sendAction(t)}),chrome.storage.local.remove(["openedAppActions","closedAppActions"])}),Wt.isLoggedIn()?(Kt.preInit(),void 0):(LoginPage.init(),void 0))})})})})}),History.stateChangedCallback=function(){var e=History.getState();Kt.pushing||Kt.loadStateFromUrl(e.url)};var Qt=Class.extend({"share":function(e,t){this.item=e;var i=this.URLForItem(e),n=this.messageForItem(e)||i;this.handleShare(n,i,t,e)},"handleShare":function(e,t,i,n){var a=this;Kt.helper.sync.apiRequest("shorten",{"service":a.name,"url":t}).done(function(t){var i=t.shortUrl,s=a.URLForShare(e,i,n);return o()?(chrome.app.window.create("a/externalSite.html",{"bounds":{"width":a.viewWidth,"height":a.viewHeight}},function(e){e.contentWindow.URLToLoad=s}),void 0):(window.open(s,"_blank","width="+a.viewWidth+",height="+a.viewHeight+",location=no,toolbar=no,status=no"),void 0)}).fail(function(e){logger.log(e)})},"messageForItem":function(e){return e.resolved_title||e.title},"URLForItem":function(e){return e.resolved_url||e.given_url||e.url}});Qt.shareInit=function(){Qt.sharers=[],Qt.registerSharer=function(e){Qt.sharers.push(new e)},Qt.registerSharer(Qt.extend({"name":Pt.callTrans("sharing.sendtofriend"),"iconname":"sendtofriend","handleShare":function(e,t,i,n){if(i){var a=this,s=$(i),r=s.parents(".item");this.sendToFriendPopup||(this.sendToFriendView=new jt,this.sendToFriendPopup=new Mt("sendToFriend",$(this.sendToFriendView.view),$("#container"),{"onHide":function(){$(".pendingDialog").removeClass("pendingDialog"),$("body").removeClass("sendtofriendmode"),a.sendToFriendView.destroy()},"onShow":function(){$("body").addClass("sendtofriendmode")},"disableHideOnScroll":!0,"onlyCentered":!0,"hideOnClickInPopover":!1}));var o=Wt.emailAddress&&""!==Wt.emailAddress;o?this.sendToFriendView.updateWithItem(n):this.sendToFriendView.showMessage("Complete Your Profile","Please click below to add your email address so recipients can identify you.","Add Email Address","http://getpocket.com/account",function(){a.sendToFriendPopup.show(!1)}),this.sendToFriendPopup.object.find(".send-to-friend-form").append('<div class="loading">'),this.sendToFriendPopup.show(s),r.addClass("pendingDialog");var l=function(e){var t=JSON.parse(e);if(a.sendToFriendPopup.object.find(".send-to-friend-form").children(".loading").remove(),t.height){var i=a.sendToFriendPopup.object.find(".send-to-friend-form");i.css({"height":t.height}),a.sendToFriendPopup.show(s)}t.closed&&a.sendToFriendPopup.show(!1),t.shared&&gt.show("Sent!")};this.sendToFriend=new Nt(n,this.sendToFriendView,l),setTimeout(function(){$("#token-input-").focus()},200)}else this.sendToFriendPopup&&this.sendToFriendPopup.show(!1)},"shortenURL":function(e,t){t(null,e)}})),Qt.registerSharer(Qt.extend({"name":"Twitter","iconname":"twitter","viewWidth":550,"viewHeight":420,"messageForItem":function(e){return this._super(e)+" (via @Pocket)"},"URLForShare":function(e,t){return"https://twitter.com/intent/tweet?text="+encodeURIComponent(e)+"&url="+encodeURIComponent(t)+"&related=pocket,pockethits,pocketsupport"}})),Qt.registerSharer(Qt.extend({"name":"Facebook","iconname":"facebook","viewWidth":550,"viewHeight":420,"URLForShare":function(e,t){return"http://www.facebook.com/sharer.php?u="+encodeURIComponent(t)+"&t="+encodeURIComponent(e)}})),Qt.registerSharer(Qt.extend({"name":"Buffer","iconname":"buffer","viewWidth":880,"viewHeight":550,"URLForShare":function(e,t){return"https://bufferapp.com/add?url="+encodeURIComponent(t)+"&text="+encodeURIComponent(e)}})),"1"===zt.premiumStatus&&Qt.registerSharer(Qt.extend({"name":Pt.callTrans("cta.viewpermanent"),"iconname":"permanent","setPermanentLink":function(e,t){if(!$("#pagenav_share").hasClass("inactive")){var i=t.clone();t.after(i),i.children("a").attr("href",k(e)).attr("target","_blank"),i.click(function(){PocketAnalytics.action("open_permanent","interact","webapp")}),t.remove()}}})),Qt.registerSharer(Qt.extend({"name":Pt.callTrans("cta.openinbrowser"),"iconname":"original","setExternalLink":function(e,t){if(!$("#pagenav_share").hasClass("inactive")){var i=t.clone();t.after(i),i.children("a").attr("href",k(I(e))).attr("target","_blank").click(function(){Gt.sendAction({"action":"opened_web"},!1)}),t.remove()}}}))},G.prototype={"startCaching":function(e){this.cancelled||(this.finishedCallback=e,this.cacheArticle())},"cacheArticle":function(){if(!this.cancelled){var e=this,t=this.item.resolved_url||this.item.given_url;Kt.helper.assetCache.cacheArticleDataCallback(t,function(){e.cacheImages()},function(t){e.articleData=t},function(){e.finishedCallback(e.item)})}},"cacheImages":function(){if(!this.cancelled){var e=this;if("undefined"==typeof this.item.images||!this.item.images)return this.finished(),void 0;var t=$.map(this.item.images,function(t){if(!e.cancelled&&"undefined"!=typeof t.src){var i=$.Deferred();return Kt.helper.assetCache.cacheImage(t.src,function(){i.resolve()}),i.promise()}});$.when.apply(null,t).done(function(){e.finished()})}},"finished":function(){if(!this.cancelled){var e=this,t=function(t){logger.log(t),e.finishedCallback(e.item)};return this.articleData?(this.articleData.is_offline="1",Kt.helper.sync.updateExtendedDataForItem("update",this.articleData,this.item.item_id,this.item.local_item_id,function(t){e.finishedCallback(t)}),void 0):(this.dbServer.items.get(this.item.local_item_id).done(function(i){return"undefined"==typeof i?(e.finishedCallback(i),void 0):(i.is_offline="1",e.dbServer.items.update(i).done(function(){e.finishedCallback(i)}).fail(t),void 0)}).fail(t),void 0)}},"cancel":function(){this.cancelled=!0}},V.prototype={"init":function(e){var t=function(){Ot.Queue.setMaxConnections(4),Ot.Queue.start(),e()}.bind(this);Ot.FileSystem.isReady()?t():Ot.FileSystem.registerOnReady(t)},"cacheArticle":function(e,t,i){this.loadArticlePriority(e,Ot.Queue.queuePriority.low,t,i)},"cacheArticleDataCallback":function(e,t,i,n){this.loadArticleCachedPriorityDataCallback(e,!0,Ot.Queue.queuePriority.low,t,i,n)},"loadArticle":function(e,t,i){this.loadArticlePriority(e,Ot.Queue.queuePriority.normal,t,i)
},"loadArticleCached":function(e,t,i,n){this.loadArticleCachedPriority(e,t,Ot.Queue.queuePriority.normal,i,n)},"loadArticlePriority":function(e,t,i,n){this.loadArticleCachedPriority(e,!0,t,i,n)},"loadArticleCachedPriority":function(e,t,i,n,a){this.loadArticleCachedPriorityDataCallback(e,t,i,n,void 0,a)},"loadArticleCachedPriorityDataCallback":function(e,t,i,n,a,s){if(s||(s=function(){}),!t){var r=this.remoteArticleURL(e);return Ot.Loader.load(r,"json","POST",function(e){var t=e;"object"!=typeof e&&(t=JSON.parse(e)),n(t.article)},function(){s&&s()}),void 0}var o=this.localCachedURL(e,"article"),r=this.remoteArticleURL(e),l=new Ot.RemoteArticle({"src":r,"localFilePath":o});l.priority="undefined"!=typeof i?i:Ot.Queue.queuePriority.normal,l.addMessageHandler("remoteloaded",function(e){"undefined"!=typeof a&&a(e)}),l.addMessageHandler("articleloaded",function(e){n(e)}),l.addMessageHandler("errorloading",function(){s&&s()}),Ot.Queue.add(l,!0)},"remoteArticleURL":function(e){var t="http://text.readitlater.com/v3beta/text?images=2&output=json&msg=1";return o()||(t+="&videos=1"),t+="&url="+e},"removeArticle":function(e,t,i){var n=this.localCachedURL(e,"article");Ot.FileSystem.removeFile(n,t,i)},"cacheImage":function(e,t){this.loadImageCachedWithTypePriority(e,!0,"image",Ot.Queue.queuePriority.low,t)},"loadImage":function(e,t){this.loadImageCached(e,!0,t)},"loadImageCached":function(e,t,i){this.loadImageCachedWithType(e,t,"image",i)},"loadImageCachedWithType":function(e,t,i,n){this.loadImageCachedWithTypePriority(e,t,i,Ot.Queue.queuePriority.normal,n)},"loadImageCachedWithTypePriority":function(e,t,i,n,a){if(!t)return Ot.Loader.load(e,"blob","GET",function(e){var t=window.webkitURL.createObjectURL(e),i=new Image;i.onload=function(){a(this)},i.onerror=function(){a(void 0)},i.src=t},function(){a(void 0)}),void 0;var s=this.localCachedURL(e,i),r=new Ot.RemoteImage({"src":e,"localFilePath":s});r.priority="undefined"!=typeof n?n:Ot.Queue.queuePriority.normal,r.addMessageHandler("imageloaded",function(e){a(e)}),r.addMessageHandler("errorloading",function(){a(void 0)}),Ot.Queue.add(r,!0)},"loadFavicon":function(e,t){if(Ot.NetworkMonitor.isOnline())return this.loadImageCached(e,!1,t),void 0;this.favicons||(this.favicons=o()?["a/i/favicon_green.png","a/i/favicon_blue.png","a/i/favicon_orange.png","a/i/favicon_red.png"]:["i/favicon_green.png","i/favicon_blue.png","i/favicon_orange.png","i/favicon_red.png"]);var i=this.favicons[Math.floor(Math.random()*(this.favicons.length-1))],n=o()?chrome.runtime.getURL(i):i,a=new Image;a.onload=function(){t(this)},a.src=n},"loadAvatar":function(e,t){this.loadImageCachedWithType(e,!0,"avatar",t)},"removeImage":function(e,t,i){var n=this.localCachedURL(e,"image");Ot.FileSystem.removeFile(n,t,i)},"clearCache":function(){var e=function(){};Ot.FileSystem.removeDir("/images/",e,e),Ot.FileSystem.removeDir("/articles/",e,e),Ot.FileSystem.removeDir("/avatars/",e,e)},"cancelAllRequests":function(){$.each(this.itemDownloaders,function(e,t){t.cancel()}),this.itemDownloaders=[],this.itemsCaching=[],Ot.Queue.clear()},"cacheAssetsForItem":function(e,t){var i=this;if((e.is_offline===!1||"0"===e.is_offline)&&-1==$.inArray(e.item_id,this.itemsCaching)){i.itemsCaching.push(e.item_id);var n=new G(e);i.itemDownloaders.push(n),n.startCaching(function(a){"undefined"!=typeof a&&(i.itemsCaching.splice($.inArray(e.item_id,i.itemsCaching),1),i.itemDownloaders.splice($.inArray(n,i.itemDownloaders),1)),t(a)})}},"removeAssetsForItem":function(e){var t=this,i=function(){},n=e.resolved_url||e.given_url;this.removeArticle(n,i,i),e.images&&$.each(e.images,function(e,n){t.removeImage(n.src,i,i)})},"localCachedURL":function(e,t){var i=Y(e);return"image"===t?"/images/"+i+".png":"article"===t?"/articles/"+i+".html":"avatar"===t?"/avatars/"+i+".png":i}},J.prototype={"init":function(){var e=this;this.page=$("<div id='login-container'></div>");var t='<p id="info"></p> <p>Username:<br><input id="username" name="username" type="text" size="30" maxlength="30"></p> <p>Password:<br><input id="password" name="password" type="password" size="30" maxlength="40"></p><button id="submit-login">Submit</button>';this.page.append(t),$("#container").hide(),$("#queue_title").hide(),$("body").append(this.page),$("#submit-login").click(function(){var t=$("#username").val(),i=$("#password").val();e.login(t,i,{"success":function(){e.page.remove(),$("#container").show(),Kt.loggedIn()},"error":function(e){$("#info").html("There was an error in the login process."),logger.log("Error: "+e)}})})},"loadState":function(){this.inited||this.init();this.stateChanged()},"stateChanged":function(){Kt.showPage(this)},"didShow":function(){},"willHide":function(){},"login":function(e,t,i){try{this.apiRequest({"path":"/oauth/authorize","data":{"username":e,"password":t,"grant_type":"credentials"},"success":function(t){logger.log("success");var n=t.split("&"),a=n[0].split("=")[1];Wt.setUsername(e),Wt.setAccessToken(a),i.success()},"error":function(){i.error.apply(i,Array.apply(null,arguments))}})}catch(n){logger.log(n)}},"apiRequest":function(e){var t="https://getpocket.com/v3"+e.path,i=e.data||{};i.consumer_key=PKTConsumerKey,$.ajax({"url":t,"type":"POST","data":i,"success":e.success,"error":e.error})}};var Xt=new J;Kt.pages.login=Xt,X.UNTAGGED="_untagged_",X.KEY_ORIGINAL_TAG="key_original_tag",X.ID_CONTAINER="tag_sidebar_content_container",X.sID_CONTAINER=K(X.ID_CONTAINER),X.CLASS_PINNED="pinned",X.sCLASS_PINNED=K(X.CLASS_PINNED),X.CLASS_UNPINNED="unpinned",X.sCLASS_UNPINNED=K(X.CLASS_UNPINNED),X.ID_WRAPPER="sidebar_wrapper",X.sID_WRAPPER=K(X.ID_WRAPPER),X.ID="tag_sidebar_content",X.sID=K(X.ID),X.CLASS_SLIDER="sidebar_slider",X.sCLASS_SLIDER=Q(X.CLASS_SLIDER),X.ID_LIST="tag_sidebar_list",X.sID_LIST=K(X.ID_LIST),X.ID_FILTERS="tag_sidebar_filters",X.sID_FILTERS=K(X.ID_FILTERS),X.ID_VIEW_ALL="tag_sidebar_filter_all",X.sID_VIEW_ALL=K(X.ID_VIEW_ALL),X.ID_VIEW_UNTAGGED="tag_sidebar_filter_untagged",X.sID_VIEW_UNTAGGED=K(X.ID_VIEW_UNTAGGED),X.ID_EDITTING="inline_tag_edit",X.sID_EDITTING=K(X.ID_EDITTING),X.CLASS_EDIT="edit",X.sCLASS_EDIT=Q(X.CLASS_EDIT),X.CLASS_EDIT_CLOSE="edit_close",X.sCLASS_EDIT_CLOSE=Q(X.CLASS_EDIT_CLOSE),X.CLASS_SELECT="select",X.sCLASS_SELECT=Q(X.CLASS_SELECT),X.CLASS_DELETE="delete",X.sCLASS_DELETE=Q(X.CLASS_DELETE),X.CLASS_SELECTED="selected",X.sCLASS_SELECTED=Q(X.CLASS_SELECTED),X.CLASS_VISIBLE="tag_sidebar_visible",X.sCLASS_VISIBLE=Q(X.CLASS_VISIBLE),X.CLASS_INVISIBLE="tag_sidebar_invisible",X.sCLASS_INVISIBLE=Q(X.CLASS_INVISIBLE),X.prototype={"setTag":function(e,t,i){if(this.created){var n=!1;if(e==this.selectedTag&&!i)return;this.selectedTag=e,$(X.sID+" "+X.sCLASS_SELECTED).removeClass(X.CLASS_SELECTED),e?e==X.UNTAGGED?($(X.sID_VIEW_UNTAGGED).addClass(X.CLASS_SELECTED),n="Untagged"):this.rows[e]&&(this.rows[e].addClass(X.CLASS_SELECTED),n=e):$(X.sID_VIEW_ALL).addClass(X.CLASS_SELECTED)}else this.selectedTag=e,e&&(n=e==X.UNTAGGED?Pt.callTrans("queue.tag_untaggeditems"):e);this.setBreadcrumb(n),t||ai.stateChanged()},"isOpen":function(){return this.contentDiv&&this.contentDiv.hasClass(X.CLASS_VISIBLE)},"show":function(e,t){var i=$(X.sCLASS_SLIDER);i.size()||(i=this.create(t));var n=e?X.CLASS_INVISIBLE:X.CLASS_VISIBLE,a=e?X.CLASS_VISIBLE:X.CLASS_INVISIBLE;if(!i.hasClass(a)){e&&this.pin();var s=this;setTimeout(function(){i.each(function(){var e=$(this);t?e.addClass("noAnimation"):e.removeClass("noAnimation"),e.removeClass(n),e.addClass(a)}),e?(s.pin(),$("#page_queue").addClass("tag_sidebar_open")):$("#page_queue").removeClass("tag_sidebar_open"),s.heightUpdated()},30)}},"pin":function(e,t,i){if(this.resetHorizontalOffset(),!e){e=this.contentDiv;var i=$(window).scrollTop(),n=$("#page_queue");if(!(e&&i<n.height()-e.height()))return this.scrollKit.lastScrollY=i,this.checkPinning(),void 0;t=0}t?$(X.sID_CONTAINER).hasClass(X.CLASS_PINNED)||($(X.sID_CONTAINER).removeClass(X.CLASS_UNPINNED),$(X.sID_CONTAINER).addClass(X.CLASS_PINNED)):$(X.sID_CONTAINER).hasClass(X.CLASS_UNPINNED)||($(X.sID_CONTAINER).removeClass(X.CLASS_PINNED),$(X.sID_CONTAINER).addClass(X.CLASS_UNPINNED)),0==t&&0>i&&(i=0),e.css("top",i),this.scrollKit.pinnedDirection=t},"checkPinning":function(){var e=$(window).scrollTop();if(this.contentDiv){var t=this.contentDiv.outerHeight(),i=$(window).height();if(this.contentDiv.outerHeight()<i-this.layoutInfoCache.footersHeight-this.layoutInfoCache.headersHeight)this.loadedTags?0==this.scrollKit.pinnedDirection&&this.pin(this.contentDiv,1,this.layoutInfoCache.headersHeight):0==this.scrollKit.pinnedDirection&&this.pin(this.contentDiv,0,0);else{var n,a=e-this.scrollKit.lastScrollY;if(n=a>0?1:0>a?-1:0,0==this.scrollKit.pinnedDirection){var s=this.contentDiv.offset().top,r=i-this.layoutInfoCache.footersHeight;1==n&&e>=s+t-r?this.pin(this.contentDiv,1,r-t-this.layoutInfoCache.headersHeight):-1==n&&e<=s-this.layoutInfoCache.headersHeight&&this.pin(this.contentDiv,-1,0)}else 0!=n&&n!=this.scrollKit.pinnedDirection&&this.pin(this.contentDiv,0,e+parseInt(this.contentDiv.css("top").replace("px","")))}}this.fixHorizontalPin(),this.scrollKit.lastScrollY=e},"fixHorizontalPin":function(){this.isPinned()&&($(document).width()>$(window).width()?(this.wrapper.css("left",0-$(window).scrollLeft()+"px"),this.isHorizontallyOffset=!0):this.isHorizontallyOffset&&this.resetHorizontalOffset())},"resetHorizontalOffset":function(){this.wrapper.css("left",0-$(window).scrollLeft()+"px"),this.isHorizontallyOffset=!1},"isPinned":function(){return $(X.sID_CONTAINER).hasClass(X.CLASS_PINNED)},"create":function(e){var t=e?X.CLASS_VISIBLE:X.CLASS_INVISIBLE;return $("#page_queue").prepend('<div id="tag_sidebar_content_container" >	<div class="sidebar_wrapper">		<div id="'+X.ID+'" class="sidebar_content '+X.CLASS_SLIDER+" "+t+'">			<h3>Tags:</h3>			<div class="divider"></div>			<div class="loading"></div>		</div>	</div></div>'),ai.data.getTags({"delegate":this,"doneSelector":"getTagsCallback"}),this.layoutInfoCache.headersHeight=$("header").height()+$("#page nav").height(),this.layoutInfoCache.footersHeight=$("footer").height(),this.contentDiv=$(X.sID),this.wrapper=$("#tag_sidebar_content_container .sidebar_wrapper"),this.setupListeners(),this.created=!0,$(X.sCLASS_SLIDER)},"setupListeners":function(){var e=this;$(window).scroll(function(){ai.isOpen&&e.checkPinning()}),$(document).on("click",X.sID_VIEW_ALL,function(){Zt.pin()}),$(document).on("click",X.sID_VIEW_UNTAGGED,function(){Zt.pin()})},"getTagsCallback":function(e){this.buildTagList(e)},"buildTagList":function(e){$(X.sID+" .loading").remove(),this.tags=e;var t='<ul id="'+X.ID_FILTERS+'">	<li>		<a id="'+X.ID_VIEW_ALL+'" title="View all items" class="'+X.CLASS_SELECT+'" href="'+ai.tagUrlPrefix+'">view all items</a>	</li>	<li>		<a id="'+X.ID_VIEW_UNTAGGED+'" title="View all untagged items" class="'+X.CLASS_SELECT+'" href="'+ai.tagUrlPrefix+X.UNTAGGED+'">view untagged items</a>	</li></ul><div class="divider"></div><ul id="'+X.ID_LIST+'"></ul></div>';$(X.sID).append(t);for(var i,n=$(X.sID_LIST),a=0;a<e.length;a++)i=this.getNewRow(e[a]),this.rows[e[a]]=i,n.append(i);this.setTag(this.selectedTag,!0,!0),this.heightUpdated()},"getNewRow":function(e){var t=$("<li></li>");return this.setRowsTag(t,e),t},"setRowsTag":function(e,t){e.data("tag",t),e.empty();var i=$('<a class="'+X.CLASS_SELECT+'"></a>');i.attr("href",ai.tagUrlPrefix+encodeURIComponent(k(t))),i.html(k(t)),e.append(i)},"getRowsTag":function(e){return e.data("tag")},"refreshTagLinks":function(){$("#"+X.ID_VIEW_ALL).attr("href",ai.tagUrlPrefix),$("#"+X.ID_VIEW_UNTAGGED).attr("href",ai.tagUrlPrefix+X.UNTAGGED),$(X.sID_LIST+" "+X.sCLASS_SELECT).each(function(){this.setAttribute("href",ai.tagUrlPrefix+encodeURIComponent(this.innerHTML))})},"editStart":function(e){var t=this,i={"tag":e,"row":$(this.rows[e]),"isFinishing":!1},n=$(X.sID_EDITTING);if(!n.size()||(this.editFinish(n.data("editingData")),n=$(X.sID_EDITTING),!n.size())){i.row.empty(),i.row.addClass("inline_edit"),i.fieldset=$('<fieldset id="'+X.ID_EDITTING+'"></fieldset>'),i.row.append(i.fieldset),i.input=$('<input type="text" maxlength="25" />'),i.input.val(e),i.fieldset.append(i.input),i.deleteButton=$('<a class="'+X.CLASS_DELETE+'" title="Delete">delete</a>'),i.fieldset.append(i.deleteButton),i.fieldset.append('<a class="'+X.CLASS_EDIT_CLOSE+'" title="Edit">edit</a> <div class="clear"></div>'),i.fieldset.data("editingData",i),i.input.bind("keypress",function(e){var n=e.keyCode?e.keyCode:e.which;13==n&&t.editFinish(i)});var a;$(i.input).blur(function(){a=setTimeout(function(){t.editFinish(i)},200)}),$(i.input).focus(function(){a&&(clearTimeout(a),a=null)}),i.fieldset.find(X.sCLASS_DELETE).click(function(){a&&(clearTimeout(a),a=null),t.deleteTag(i)}),i.input.focus(),i.input.select()}},"editFinish":function(e){e.isFinishing||(e.isFinishing=!0,e.newTag=$.trim(e.input.val()).toLowerCase(),this.editVerify(e))},"editVerify":function(e){var t=this;if(e.tag==e.newTag)this.editCommit(e,!0);else if(e.newTag.length>0){if(e.newTag==X.UNTAGGED)return s({"anchor":e.input,"title":"Tag not allowed","message":'The tag <span class="tag">"'+X.UNTAGGED+'"</span> is not allowed, please choose a different one.',"confirm":{"title":"Ok","action":function(){e.isFinishing=!1,e.input.focus()}}}),void 0;for(var i=!1,n=0;n<this.tags.length;n++)if(this.tags[n]==e.newTag){i=!0;break}i?s({"anchor":e.input,"title":"Tag already exists","message":'<span class="tag">"'+e.newTag+'"</span class="tag"> already exists, would you like to merge <span class="tag">"'+e.tag+'"</span class="tag"> into <span class="tag">"'+e.newTag+'"</span class="tag">?',"confirm":{"title":"Yes","action":function(){t.mergeTags(e)}},"cancel":{"action":function(){t.editCommit(e,!0)}}}):this.editCommit(e)}else this.editCommit(e,!0)},"editCommit":function(e,t){t&&(e.newTag=e.tag),this.setRowsTag(e.row,e.newTag),$(e.row).removeClass("inline_edit"),t||(this.updateArrays(e.tag,e.newTag),this.renameTag(e))},"renameTag":function(e){ai.data.renameTag({"data":{"oldTag":e.tag,"newTag":e.newTag}}),ai.tagRenamed(e.tag,e.newTag),e.tag==this.selectedTag&&setTimeout(function(){Zt.setTag(e.newTag)},100)},"deleteTag":function(e){var t=this;s({"anchor":e.deleteButton,"title":"Are you sure?","message":'This will untag the tag <span class="tag">"'+e.tag+'"</span> from any items that have been tagged with it.',"confirm":{"title":"Delete","action":function(){e.row.remove(),ai.data.deleteTag({"data":{"tag":e.tag}}),ai.tagDeleted(e.tag),t.selectedTag==e.tag&&t.setTag(null),t.updateArrays(e.tag),t.heightUpdated()}},"cancel":{"action":function(){e.isFinishing=!1,e.input.focus()}}})},"mergeTags":function(e){e.row.remove(),this.updateArrays(e.tag),this.renameTag(e),this.heightUpdated()},"updateArrays":function(e,t){if(t){this.rows[t]=this.rows[e],delete this.rows[e];for(var i,n=!1,a=!1,s=0;s<this.tags.length&&(n||this.tags[s]!=e||(this.tags.splice(s,1),n=!0),a||(this.tags[s]>t?(i=this.rows[this.tags[s]],this.tags.splice(s>0?s-1:0,0,t),a=!0):s==this.tags.length-1&&(i=null,this.tags.push(t),a=!0)),!a||!n);s++);i?this.rows[t].insertBefore(i):$("#tag_sidebar_list").append(this.rows[t]),this.scrollToTag(t)}else{delete this.rows[e];for(var s=0;s<this.tags.length;s++)if(this.tags[s]==e){this.tags.splice(s,1);break}}},"scrollToTag":function(e){var t=this.rows[e],i=$("#page_queue"),n=$(window).scrollTop(),a=$(window).height(),s=$("header").height()+$("#page nav").height(),r={"top":n+s,"bottom":n+a-$("footer").height()},o=this.contentDiv.offset();o.height=this.contentDiv.height(),o.bottom=o.top+o.height;var e=t.offset();e.height=t.outerHeight(),e.bottom=e.top+e.height;var l=s-o.top,c=i.offset().top+i.height()-o.bottom,u=r.bottom-o.bottom,d=r.top-o.top;o.ranges={"min":l>u?l:u,"max":c>d?d:c};var h,f=!0,p=r.top-e.top;if(e.top<r.top?h=p:e.top>r.bottom?h=r.bottom-e.top-e.height:f=!1,f){var g,m=!0;p>=o.ranges.min&&p<=o.ranges.max?g=p:h>=o.ranges.min&&h<=o.ranges.max?g=h:m=!1;var v=parseInt(this.contentDiv.css("top").replace("px",""));if(m)this.contentDiv.css("top",v+g+"px"),this.checkPinning();else{p=-1*p,h=-1*h;var _=$(document).height();g=p+n>0&&_>p+n?p:h+n>0&&_>h+n?h:0,this.pin(this.contentDiv,0,o.top),window.scrollBy(0,g)}}setTimeout(function(){t.addClass("highlighted"),setTimeout(function(){t.addClass("highlight_fade"),setTimeout(function(){t.removeClass("highlighted"),t.removeClass("highlight_fade")},1e3)},100)},30)},"lookForNewtags":function(e){if(this.created)for(var t=0;t<e.length;t++)-1==$.inArray(e[t],this.tags)&&this.addTag(e[t])},"addTag":function(e){for(var t,i=this.getNewRow(e),n=this.tags.length,a=0;a<this.tags.length;a++)if(this.tags[a]>e){t=this.rows[this.tags[a]],n=a-1;break}this.tags.splice(n>0?n:0,0,e),this.rows[e]=i,t?i.insertBefore(t):$("#tag_sidebar_list").append(i),this.heightUpdated()},"setBreadcrumb":function(e){e?(ai.tagwrapper.addClass("tag-withname"),ai.tagwrapper.find(".tag_name").html(k(e)),ai.tagwrapper.find("li").removeClass("selected"),ai.tagwrapper.find("li").filter('[val="'+encodeURIComponent(e)+'"]').addClass("selected")):(ai.tagwrapper.removeClass("tag-withname"),ai.tagwrapper.find(".tag_name").html(""),ai.tagwrapper.find("li").removeClass("selected"))},"getHeight":function(){return this.isOpen()?this.contentDiv.outerHeight():void 0},"heightUpdated":function(){var e=$(window).height()-this.layoutInfoCache.footersHeight-this.layoutInfoCache.headersHeight,t=this.isOpen()?this.contentDiv.outerHeight():0;ai.page.css("min-height",(e>t?e:t)+"px"),this.checkPinning()}};var Zt=new X,ei=Ut.extend({"getList":function(e){this.get("get",e)},"getShares":function(e){this.get("getShares",e)},"itemAction":function(e){this.send("itemAction",e,!0)},"bulkEdit":function(e){this.send("bulkEdit",e,!0)},"opened":function(e,t){this.send("open",{"data":{"itemId":e,"openType":t}},!0)},"getTags":function(e){this.get("getTags",e)},"renameTag":function(e){this.send("renameTag",e,!0)},"deleteTag":function(e){this.send("deleteTag",e,!0)},"updateItemTags":function(e,t,i){this.send("updateTags",{"data":{"itemId":e.item_id,"item":e,"tagType":t.length?"tags_replace":"tags_clear","tags":t,"analytics":i}})},"getArticle":function(e){this.get("getArticle",e)},"savePosition":function(e){this.send("savePosition",e)},"fetchList":function(e){this.get("fetch",e)},"shareTo":function(e){this.get("shareTo",e)},"getWithDataParameter":function(e){this.get("getWithDataParameter",e)}});Z.prototype={"sync":function(){this.fetch(function(e){e||this.syncing||this.fetching||window.navigator.onLine&&(this.syncing=!0,this.waitingForGet=!0,this.sendChanges())}.bind(this))},"cancelSync":function(){"undefined"!=typeof this.sendRequest&&this.sendRequest.abort(),"undefined"!=typeof this.getRequest&&this.getRequest.abort(),this.sendRequest=void 0,this.getRequest=void 0,this.caching=!1,this.syncing=!1,this.fetching=!1,this.sending=!1,this.getting=!1,this.waitingForGet=!1},"fetch":function(e){var t=this;return Wt.isLoggedIn()?this.fetching?(e(!1),void 0):(d("hasFetched",function(i){return i.hasFetched?(e(!1),void 0):(d("chunkReceived_0",function(i){var n=i.chunkReceived_0;"undefined"!=typeof n&&n&&(t.firstFetchFinished=!0),Kt.showNotification(Pt.callTrans("notification.retrievinglist")),!t.fetching&&n?t.continueFetching():t.startFetching(),e(!0)}),void 0)}),void 0):(e(!1),void 0)},"startFetching":function(){logger.log("Sync: Start fetching"),this.fetching=!0,$(document).trigger("startFetching"),this.apiRequest("fetch",{"image":1,"shares":1,"account":1,"forceaccount":1,"taglist":1,"forcetaglist":1,"emails":1,"forceemails":1}).done(this.firstFetched.bind(this)).fail(this.fetchingFailed.bind(this))},"firstFetched":function(e){if("undefined"!=typeof e&&e.status>=1){var t=e.passthrough,i=parseInt(t.firstChunkSize,10),n=parseInt(e.total,10)-parseInt(t.firstChunkSize,10),a=parseInt(t.fetchChunkSize,10),s=n/a,r=n>0?Math.ceil(s):0;u("firstChunkSize",i),u("fetchChunkSize",a),u("fetchTotal",n),u("fetchTotalChunks",r);var o=e.since;return u("fetchStartTime",parseInt(o,10)),u("syncedSince",o),this.processFetch(e),this.continueFetching(),u("needsToStartFetching",!1),void 0}this.fetchingFailed()},"continueFetching":function(){logger.log("Sync: Continue fetching"),this.fetching||(this.fetching=!0,Kt.showNotification(Pt.callTrans("notification.retrievinglist")),$(document).trigger("startFetching"));var e,t,i,n,a,s=this,r=h("firstChunkSize").done(function(t){e=t}),o=h("fetchTotal").done(function(e){t=e}),l=h("fetchChunkSize").done(function(e){i=e}),c=h("fetchTotalChunks").done(function(e){n=e}),f=h("fetchStartTime").done(function(e){a=e}),p=[r,o,l,c,f];$.when.apply(null,p).done(function(){logger.log("Sync: contineFetching chunk calc: "+t+" "+i+" "+n);for(var r=0,o=function(t){var n=$.Deferred(),o="chunkReceived_"+t;return d(o,function(l){var c=l[o];"undefined"!=typeof c&&c?r+=1:(logger.log("Sync: Start requesting chunk "+t),s.apiRequest("fetch",{"updatedBefore":a,"offset":e+i*(t-1),"count":i,"chunk":t,"image":1,"shares":1}).done(s.processFetch.bind(s)).fail(s.fetchingFailed.bind(s))),n.resolve()}),n.promise()},l=[],c=1;n>=c;c++){var h=o(c);l.push(h)}$.when.apply(null,l).done(function(){return s.firstFetchFinished&&n>0&&r===n?(s.fetchingCompleted(),void 0):(u("fetchChunksDone",r),Kt.showNotification(Pt.callTrans("notification.retrievinglist")),void 0)})})},"processFetch":function(e){if(this.fetching){logger.log("Sync: Process fetch: "),logger.log(e);var t=this,i=e.passthrough.chunk,n=function(){var n=e.list;if("undefined"==typeof n)return t.fetchProcessed(i),void 0;var a=Object.keys(n).length;if(0===a)return t.fetchProcessed(i),void 0;var s=$.map(n,function(e){return e.time_added_to_device=Math.round((new Date).getTime()/1e3).toString(),e.is_offline=!1,delete e.sort_id,e});t.dbServer.items.update.apply(void 0,s).done(function(){t.fetchProcessed(i)})};this.processMetaData(e,function(){n()})}},"fetchProcessed":function(e){var t=this;logger.log("Sync: Fetch processed, chunk "+e),0===e&&(t.firstFetchFinished=!0),u("chunkReceived_"+e,!0),d("fetchChunksDone",function(i){var n=i.fetchChunksDone||0;"undefined"!=typeof e&&0!==e&&(n+=1,u("fetchChunksDone",n)),d("fetchTotalChunks",function(e){var i=e.fetchTotalChunks;return 0===i||n>=i?(t.fetchingCompleted(),void 0):(Kt.showNotification(Pt.callTrans("notification.retrievinglist")),void 0)})})},"fetchingCompleted":function(){logger.log("Sync: Fetching completed"),Kt.updateNotification(Pt.callTrans("notification.downloadingcomplete"),1),Kt.hideNotification(),u("hasFetched",!0),d("fetchTotalChunks",function(e){for(var t=e.fetchTotalChunks,i=0;t>=i;i++){var n="chunkReceived_"+i;f(n)}}),f("firstChunkSize"),f("fetchChunkSize"),f("fetchTotal"),f("fetchTotalChunks"),f("fetchChunksDone"),f("fetchStartTime"),this.fetching=!1,$(document).trigger("finishFetching"),this.sync()},"fetchingFailed":function(e){"undefined"!=typeof e&&(logger.log("Sync: Fetching failed:"),logger.log(e)),this.fetching=!1,Kt.showErrorNotification(Pt.callTrans("notification.couldnotloadlist")),$(document).trigger("finishFetching")},"sendChanges":function(){var e=this;if(this.getting)return this.cancelSync(),this.sync(),void 0;if(!this.sending&&!this.fetching){if(!window.navigator.onLine||!Wt.isLoggedIn())return this.sendNothing(),void 0;this.sending=!0,$(document).trigger("startSendingChanges"),this.dbServer.actionsQueue.query().all().execute().done(function(t){if(0===t.length)return e.sendChangesFinished(),void 0;var i=$.map(t,function(e){return e.action});logger.log("Sync: Send changes: ",JSON.stringify(i)),e.sendRequest=e.apiRequest("send",{"actions":JSON.stringify(i)}).done(function(i){e.sendChangesCallback(i,t)}).fail(e.sendChangesError.bind(e))})}},"sendNothing":function(){this.sendChangesFinished()},"sendChangesCallback":function(e,t){logger.log("Sync: Send changes callback:"),logger.log(e),t=t||[];var i=this,n=e.action_results,a=[];$.each(t,function(e,t){var s,r=n[e],o=t.action;if(!r&&i.shouldContinueOnFailedSendAction(o,r))return!0;if("add"===o.action||"readd"===o.action)if(null!==r&&"object"==typeof r)s=$.Deferred(),i.resolveItemIdAndUpdateExtendedDataForItem(o,r,function(e){e.resolve()}.bind(this,s)),a.push(s.promise());else if(i.shouldContinueOnFailedSendAction(o,r))return!0;if("shared_to"===o.action){if((null===r||"object"!=typeof r)&&i.shouldContinueOnFailedSendAction(o,r))return!0;if(null!==r&&"object"==typeof r){var l=r.to_friends;$.each(l,function(e,t){s=$.Deferred();var n=function(e){e.resolve()}.bind(this,s);"undefined"!=typeof t.local_friend_id&&null!==t.local_friend_id?(i.dbServer.friends.get(t.local_friend_id).done(function(e){i.updateFriendIfChanged(e,t,n)}),a.push(s.promise())):"undefined"!=typeof t.friend_id&&null!==t.friend_id&&(i.dbServer.friends.query("friendsIdIndex").only(t.friend_id).execute().done(function(e){i.updateFriendIfChanged(e[0],t,n)}),a.push(s.promise()))})}}if("boolean"==typeof r&&!r&&i.shouldContinueOnFailedSendAction(o,r))return!0;var c=i.dbServer.actionsQueue.remove(t.local_action_id);a.push(c)}),$.when.apply(null,a).done(function(){this.sendChangesFinished()}.bind(this))},"updateFriendIfChanged":function(e,t,i){var n=this;return"undefined"==typeof e||e.name!==t.name||e.username!==t.username||e.avatarSrc!==t.avatarSrc||e.friendId!==t.friendId?(this.dbServer.friends.query("friendsIdIndex").only(t.friend_id).execute().done(function(a){var s=a[0];"undefined"!=typeof s&&"undefined"!=typeof t.local_friend_id&&s.local_friend_id!==t.local_friend_id?n.dbServer.friends.remove(t.local_friend_id).done(function(){t.local_friend_id=s.local_friend_id,n.dbServer.friends.update(t).done(i.bind(n))}):(delete t.local_friend_id,"undefined"!=typeof e&&(t.friend_id=e.friend_id?e.friend_id:t.friend_id,t.local_friend_id=e.local_friend_id),n.dbServer.friends.update(t).done(i.bind(n)))}),void 0):(i&&i(),void 0)},"shouldContinueOnFailedSendAction":function(e,t){return DEBUG?(logger.log("POCKET : SYNC ERROR"),logger.log("An action that was sent to the server returned false. This means it was improperly formatted or there is a problem with the API. Either way, the issue should be resolved because this will cause a loss of data/sync in production."),logger.log("action: "+e),logger.log("result: "+t),!0):!1},"resolveItemIdAndUpdateExtendedDataForItem":function(e,t,i){var n=t.item_id,a=e.local_item_id;if("undefined"==typeof a||"undefined"==typeof n)return i&&i(),void 0;var s=t;this.updateExtendedDataForItem(e.action,s,n,a,i)},"updateExtendedDataForItem":function(e,t,i,n,a){"undefined"!=typeof n&&this.dbServer.items.get(n).done(function(n){if("undefined"!=typeof n){"undefined"!=typeof i&&(n.item_id=i);var s=t.is_offline;"undefined"!=typeof s&&(n.is_offline=s),n.resolved_id=t.resolved_id;var r=t.excerpt;"undefined"!=typeof r&&(n.excerpt=r);var o=t.has_image;"undefined"!=typeof o&&(n.has_image=""+o);var l=t.has_video;"undefined"!=typeof l&&(n.has_video=""+l);var c=t.is_article||t.isArticle;"undefined"!=typeof c&&(n.is_article=""+c);var u=t.word_count;"undefined"!=typeof u&&(n.word_count=""+u);var d=t.title;"undefined"!=typeof d&&(n.resolved_title=d);var h=t.resolved_url||t.resolvedUrl;"undefined"!=typeof h&&(n.resolved_url=h,n.domain=L(h));var f=t.images;if("undefined"!=typeof f&&""!==f){n.images=f;var p=f["1"];n.image=p}var g=t.videos;"undefined"!=typeof g&&""!==g&&(n.videos=g),this.dbServer.items.update(n).done(function(){var t={"action":e,"item":n,"updateDom":!0};$(document).trigger("itemNeedsExtendedUpdate",t),a&&a(n)})}}.bind(this))},"sendChangesError":function(e){logger.log("Send Changes Error:"),logger.error(e),this.syncing=!1,this.sending=!1,$(document).trigger("stopSendingChanges")},"sendChangesFinished":function(){return this.syncing=!1,this.sending=!1,this.sendRequest=void 0,$(document).trigger("stopSendingChanges"),this.waitingForGet?(this.getList(),void 0):(this.startCachingAssets(),void 0)},"getList":function(){if(logger.log("Start getting list"),window.navigator.onLine&&Wt.isLoggedIn()&&!this.getting){var e=this;this.syncing=!0,this.getting=!0,this.waitingForGet=!1,e.hasSyncedUserSettings&&e.hasSyncedRediscovery?this.getListDetail():d("hasSyncedUserSettings",function(t){e.hasSyncedUserSettings="undefined"!=typeof t.hasSyncedUserSettings,d("hasSyncedRediscovery",function(t){e.hasSyncedRediscovery="undefined"!=typeof t.hasSyncedRediscovery,e.getListDetail()})})}},"getListDetail":function(){var e=this;d("syncedSince",function(t){var i=t.syncedSince,n={"tags":1,"taglist":1,"meta":1,"image":1,"images":1,"videos":1,"shares":1,"positions":1,"account":1,"websettings":1,"rediscovery":1,"account":1,"premium":1,"since":i,"appsInfo":"summary"};e.hasSyncedUserSettings||(delete n.websettings,n.forcewebsettings=1,delete n.premium,n.forcepremium=1,delete n.account,n.forceaccount=1),e.hasSyncedRediscovery||(delete n.rediscovery,n.forcerediscovery=1),this.getRequest=this.apiRequest("get",n).done(this.getListCallback.bind(this)).fail(this.getListError.bind(this))}.bind(this))},"getListCallback":function(e){logger.log("Sync: Get list callback: "),logger.log(e);var t=this,i=e.list,n={};n.allObjects=[];var a=function(){u("syncedSince",e.since),t.syncing=!1,t.getting=!1,t.getRequest=void 0,e.websettings&&(zt.externalUserSettings=JSON.parse(e.websettings.replace(/\\"/g,'"').replace(/\\"/g,'"').replace(/\'/g,"\\'")),Gt.hasSyncedUserSettings||u("hasSyncedUserSettings","1")),e.gsfsettings&&(zt.GSFStatus=JSON.parse(e.gsfsettings.replace(/\\"/g,'"').replace(/\\"/g,'"').replace(/\'/g,"\\'"))),e.account&&(zt.premiumStatus=e.account.premium_status),u("ServerSettings",JSON.stringify(zt)),n.allObjects.length>0&&$(document).trigger("listNeedsRefresh",n),e.recent_searches&&$(document).trigger("recentSearchesRefresh",{"recent":e.recent_searches}),e.groups&&$(document).trigger("topicDetailRefresh",{"groups":e.groups}),t.startCachingAssets(),"object"==typeof PocketUserApps&&(PocketUserApps.appTypes=e.app_types,PocketUserApps.ready=!0)},s=function(){var e=Object.keys(i).length;return 0>=e?(a(),void 0):(t.dbServer.items.query("timeAddedIndex").all().desc().execute().done(function(s){var r=0,o=function(){r+=1,e===r&&a()},l=function(e,t){if(t.action){t.item=e,t.updateDom=!0,n.allObjects.push(t);var i=t.action;n[i]=n[i]||[],n[i]=t}o()},c={};$.each(s,function(e,t){c[t.item_id]=t}),$.each(i,function(e,i){var n=c[i.item_id],a="undefined"!=typeof n,s=parseInt(i.status,10),r=parseInt(i.has_pending_share,10),u={};return 1!==s&&2!==s||1===r?(a?(u.action="update",i.local_item_id=n.local_item_id,i.time_added_to_device=n.time_added_to_device,i.is_offline=n.is_offline,delete i.sort_id):(u.action="add",i.time_added_to_device=Math.round((new Date).getTime()/1e3).toString(),i.is_offline="0",delete i.sort_id),t.dbServer.items.update(i).done(function(){return a?(l(i,u),!0):(t.dbServer.items.query("itemIdIndex").only(i.item_id).execute().done(function(e){l(e[0],u)}),void 0)}),void 0):a?(u.action=1===s?"mark":"delete",u.on=!0,t.dbServer.items.remove(n.local_item_id).done(function(){Vt.removeAssetsForItem(n),l(i,u)}),!0):(o(),!0)})}).fail(function(){a()}),void 0)};this.processMetaData(e,function(){s()})},"getListError":function(e){logger.log("Sync: Get list error"),logger.error(e),this.syncing=!1,this.getting=!1,this.getRequest=void 0},"processMetaData":function(e,t){var i=this,n=function(){t()},a=function(){var t=e.tags;return"undefined"!=typeof t&&t?(i.dbServer.tags.clear().done(function(){if(0===t.length)return n(),void 0;var e=$.map(t,function(e,t){return{"local_tag_id":t,"tag":e}});i.dbServer.tags.update.apply(void 0,e).done(function(){n()})}),void 0):(n(),void 0)},s=function(){var t=e.account;if("undefined"==typeof t||!t)return a(),void 0;u("account",JSON.stringify(t)),Wt.setUsername(t.username),Wt.setFirstName(t.first_name),Wt.setLastName(t.last_name),Wt.setEmailAddress(t.email);var i=t.friend.avatar_url;i&&Wt.setAvatarURL(i),Wt.setHasSetAvatar(t.friend.has_set_avatar),a()},r=function(){var t=e.unconfirmed_shares||{};u("unconfirmedShares",JSON.stringify(t)),s()},o=function(){var t=e.auto_complete_emails;if("undefined"==typeof t||!t)return r(),void 0;var n=Object.keys(t).length;return 0===n?(r(),void 0):(i.dbServer.ac_emails.update.apply(void 0,t).done(function(){r()}),void 0)
},l=function(){var t=e.friends;if("undefined"==typeof t||!t)return o(),void 0;var n=Object.keys(t).length;return 0===n?(o(),void 0):(i.dbServer.friends.query("friendsIdIndex").all().execute().done(function(e){var n={};$.each(e,function(e,t){n[t.friend_id]=t});var a=$.map(t,function(e){var t=n[e.friend_id];return"undefined"!=typeof t&&t&&(e.local_friend_id=t.local_friend_id),e});i.dbServer.friends.update.apply(void 0,a).done(function(){o()})}),void 0)};l()},"startCachingAssets":function(){if(CACHE_ITEMS&&window.navigator.onLine&&Wt.isLoggedIn()&&!this.caching){var e=this,t=MAX_ITEMS_TO_CACHE;this.dbServer.items.query("timeAddedIndex").all().desc().skip(0).take(t).execute().done(function(t){var i=t.filter(function(e){return e.is_offline===!1||"0"===e.is_offline}),n=i.length;if(0!==n){e.caching=!0;var a=0,s=function(){var e=Pt.callTrans("notification.downloading")+" "+a+" / "+n;Kt.showNotification(e,!0,a/n)},r=function(){return n===a?(Kt.updateNotification(Pt.callTrans("notification.downloadingcomplete"),1),Kt.hideNotification(),e.caching=!1,void 0):(s(),void 0)};s(),$.each(i,function(e,t){Vt.cacheAssetsForItem(t,function(e){"undefined"!=typeof e&&$(document).trigger("itemNeedsExtendedUpdate",{"action":"update","item":e,"updateDom":!1}),a+=1,r()})})}})}},"sendAction":function(e,t,i,n){var a=this;"undefined"==typeof e.time&&(e.time=""+Math.round(+new Date/1e3));var s={"action":e};this.dbServer.actionsQueue.add(s).done(function(){t||a.sendChanges(),i&&i()}).fail(function(e){n&&n(e)})},"addURL":function(e,t,i){{var n=this,a=e.url;e.title||""}return"undefined"==typeof a?(i&&i(new Error(Pt.callTrans("notification.urlindataobject"))),void 0):C(a)?(this.urlInDatabase(a,function(a){return a?(i&&i(new Error(Pt.callTrans("notification.itemalreadydb"))),void 0):(n.addItemToDatabase(e,function(a){e.action="add",e.local_item_id=a.local_item_id,n.dbServer.actionsQueue.add({"action":e}).done(function(){n.sendChanges(),t()}).fail(i)}),void 0)}),void 0):(i&&i(new Error(Pt.callTrans("notification.invalidaddurl"))),void 0)},"addItemToDatabase":function(e,t){var i=this,n=e.title||e.resolved_title||e.given_title||"",a=e.url||e.resolved_url||e.given_url,s=e.timeAdded,r=e.time_added_to_device||Math.round((new Date).getTime()/1e3).toString();s&&0!=s||(s=Math.round((new Date).getTime()/1e3).toString());var o={"excerpt":e.excerpt||"","favorite":e.favorite||"0","given_title":e.given_title||n,"given_url":e.given_url||a,"has_image":e.has_image||"0","has_pending_share":e.has_pending_share||"0","has_video":e.has_video||"0","is_article":e.is_article||"0","is_offline":e.is_offline||"0","item_id":e.item_id||"0","resolved_id":e.resolved_id||"0","resolved_title":e.resolved_title||"","resolved_url":e.resolved_url||a,"status":e.status||"0","time_added":s,"time_added_to_device":r,"time_favorited":e.time_favorited||"0","time_read":e.time_read||"0","time_updated":e.time_updated||"0","word_count":e.word_count||"0"};this.dbServer.items.update(o).done(function(){"undefined"!=typeof t&&i.dbServer.items.query("urlIndex").only(a).execute().done(function(e){t(e[0])})})},"urlInDatabase":function(e,t){this.dbServer.items.query().filter("given_url",e).execute().done(function(e){return"undefined"==typeof e||0===e.length?(t(!1),void 0):(t(!0),void 0)})},"resolveItemsWithLocalItemID":function(e,t){this.dbServer.items.query("timeAddedIndex").all().desc().execute().done(function(i){var n={};$.each(i,function(e,t){n[t.item_id]=t}),$.each(e,function(e,t){var i=n[t.item_id];"undefined"!=typeof i&&(t.local_item_id=i.local_item_id)}),t(e)})},"apiRequest":function(e,t,i,n){var a=PKTBaseURL+"/"+e;return this.ajaxRequest(a,t,i,n)},"ajaxRequest":function(e,t,i,n){return t=t||{},t.consumer_key=PKTConsumerKey,t.access_token=Wt.accessToken,n=n||"POST",i=i||"json",$.ajax({"url":e,"type":n,"data":t,"dataType":i})}},et.prototype={"init":function(){var e=this,i=Handlebars.templates.queue_navitem;this.navigationItem=$(i(dictJSON)),$("#page .pkt-nav").append(this.navigationItem);var n=[t("queue",Pt.callTrans("queue.mainmenu_home")),t("favorites",Pt.callTrans("queue.mainmenu_favorites")),t("archive",Pt.callTrans("queue.mainmenu_archive")),t("premium",Pt.callTrans("queue.mainmenu_premium")),t("options",Pt.callTrans("queue.mainmenu_options")),t("help",Pt.callTrans("queue.mainmenu_help")),t("logout",Pt.callTrans("login.logout"))];zt.hidePremium&&(n=[t("queue",Pt.callTrans("queue.mainmenu_home")),t("favorites",Pt.callTrans("queue.mainmenu_favorites")),t("archive",Pt.callTrans("queue.mainmenu_archive")),t("options",Pt.callTrans("queue.mainmenu_options")),t("help",Pt.callTrans("queue.mainmenu_help")),t("logout",Pt.callTrans("login.logout"))]),this.stateSelector=new wt({"id":"queue_title","class":"titleItem titleSelector mainMenu","nodeName":"h2","alignment":"bottom","append":$("body"),"showClass":"innerpopover-active","noValChange":["options","help"],"list":n,"selectCallback":function(t,i){var n=$(i).attr("val");return"premium"!=n&&"options"!=n&&"help"!=n&&("queue"!==n?$(".mainMenu").addClass("mainMenu-nonimg"):$(".mainMenu").removeClass("mainMenu-nonimg"),$(i).closest(".popover-new").removeClass("popover-bump-right popover-bump-extraright"),"favorites"==n&&$(i).closest(".popover-new").addClass("popover-bump-right"),("archive"==n||"premium"==n||"options"==n||"help"==n)&&$(i).closest(".popover-new").addClass("popover-bump-extraright")),"premium"==n?(window.open(e.premiumMode?"http://getpocket.com/premium_settings":"http://getpocket.com/premium?ep=2","_blank"),!1):"options"==n?(window.open("http://getpocket.com/options","_blank"),!1):"help"==n?(window.open("http://help.getpocket.com","_blank"),!1):"logout"==n?(Kt.logout(!0,!1),!1):!0},"callback":function(){Zt.setTag(!1,!0),e.stateChanged()},"hideUntilSet":!0}),$(".mainMenu").find("a").click(function(){var e=$(this).parent().attr("val");"undefined"!=typeof e&&PocketAnalytics.action("switch_"+e,"interact","packagedapp")}),this.initSearch(),this.tagSelector=new wt({"id":"pagenav_tagfilter","class":"titleItem titleSelector","nodeName":"div","alignment":"bottomleft","append":$(".wrapper_tag"),"showClass":"innerpopover-active","list":[t("all",Pt.callTrans("queue.allitems")),t("untagged",Pt.callTrans("queue.tag_untaggeditems"))],"selectCallback":function(e,t){$(t).attr("val");return!0},"callback":function(){},"hideUntilSet":!1}),$("#pagenav_tagfilter > a").attr("title",Pt.callTrans("queue.tagfilter")).addClass("hint-item"),$("#pagenav_tagfilter").click(function(){var e=$("#pagenav_tagfilter").find("ul"),t=e.children("li");e.height()<t.height()*t.length?e.addClass("scroll_mode"):e.removeClass("scroll_mode")}),$("#pagenav_tagfilter").on("mouseover","a",function(){if(!$(this).hasClass("editmode")&&"all"!=$(this).parent().attr("val")&&"untagged"!=$(this).parent().attr("val")){if(!$(this).children(".edittag").length){var t=$(this).text();$(this).text("").append('<span class="itemtext">'+k(t)+"</span>");var i=$('<span class="edittag"></span>');$(this).append(i),i.click(function(i){i.preventDefault(),i.stopImmediatePropagation();var n=$(this).parent("a");if(!n.hasClass("editmode")){n.addClass("editmode").find(".itemtext").hide();var a=$('<input class="edittaginput" type="text"></input>');n.children(".edittaginput").length&&n.children(".edittaginput").remove(),n.parent().append(a),a.focus(),a.val(t),n.find(".deletetag").addClass("deletetag_active"),a.blur(function(i){i.preventDefault();var a=$(this).val();setTimeout(function(){e.massTagChanging||e.massEditSelfClick||e.commitMassTagChange(n,t,a.toLowerCase()),e.massEditSelfClick=!1},100)}),a.keypress(function(i){13==i.which&&(i.preventDefault(),e.commitMassTagChange(n,t,$(this).val().toLowerCase()))}),a.click(function(t){e.massEditSelfClick=!0,t.preventDefault(),t.stopImmediatePropagation()})}})}if(!$(this).children(".deletetag").length){var n=$('<span class="deletetag"></span>');$(this).append(n),n.on("mousedown",function(t){var i=$(this).parent("a");if($(this).hasClass("deletetag_active")){$(this).removeClass("deletetag_active"),t.preventDefault(),t.stopImmediatePropagation();var n=i.text();e.commitMassTagDelete(i,n)}})}}}),this.tagwrapper=$(".wrapper_tag"),this.articleFilterMenu=new wt({"id":"pagenav_segmentsfilter","class":"titleSelector","nodeName":"div","append":$("#pagenav_segmentarticles"),"alignment":"bottomright","showClass":"innerpopover-active","list":[t("all",Pt.callTrans("queue.allitems")),t("articles",Pt.callTrans("queue.filter_articles")),t("videos",Pt.callTrans("queue.filter_videos")),t("images",Pt.callTrans("queue.filter_images"))],"selectCallback":function(t,i){var n=$(i).attr("val"),a={"all":-1,"articles":0,"videos":1,"images":2};return"object"==typeof e.contentTypeControl&&e.contentTypeControl.set(a[n]),!0},"callback":function(){},"hideUntilSet":!1}),$("#pagenav_segmentsfilter").find("a").click(function(){var e=$(this).parent().attr("val");"undefined"!=typeof e&&PocketAnalytics.action("filter_"+e,"interact","packagedapp")}),$("#pagenav_segmentsfilter > a").attr("title",Pt.callTrans("queue.contentfilter")).addClass("hint-item").click(function(){e.articleFilterMenu.show($("#pagenav_segmentarticles"))}),$("#pagenav_addarticle > a").click(function(t){function i(e){var t=$("#addMenu input");t.val().trim().length&&-1==t.val().trim().indexOf("getpocket.com/a")?t.siblings(".button").removeClass("button-disabled"):t.siblings(".button").addClass("button-disabled"),e&&13==e.keyCode&&(e.preventDefault(),t.siblings(".button").trigger("click"))}if(t.preventDefault(),!e.addMenu){var n=Handlebars.templates.queue_additemdialog(dictJSON).replace(/(\*)([\w|\d|\s|\.||\,|\'|\@|\w-]*)(\*)/i,'<a href="#" class="install_ext">$2</a>');e.addMenu=new Mt("addMenu",n,$("#container"),{"positions":["bottomright"],"hideOnClickInPopover":!1,"xOffset":7}),$("#addMenu input").keyup(i),$("#addMenu input").on("paste",function(){setTimeout(i,50)}),$("#addMenu .button").click(function(t){if(t.preventDefault(),!$(this).hasClass("button-disabled")){var i=$(this).siblings("input").val().trim();-1==i.indexOf("http")&&/\.\w\w/.test(i)&&(i="http://"+i),e.addURL(i),e.addMenu.show(!1),$(this).addClass("button-disabled"),$(this).siblings("input").val("")}}),$("#addMenu .install_ext").click(function(t){t.preventDefault(),zt.externalUserSettings.extinstalled=!0,Kt.saveExternalUserSettings(),e.addMenu.show(!1),e.gsfOpenInitOverlay(!0)})}(zt.GSFStatus.extinstalled||zt.externalUserSettings.extinstalled||PocketUserApps.ready&&PocketUserApps.installedExtension())&&e.addMenu.object.addClass("addmenu-hideconnect"),e.addMenu.show($("#pagenav_addarticle > a")),setTimeout(function(){$("#addMenu input").focus()},50)});var a=Handlebars.templates.queue_bulkeditactions;this.bulkEditActions=$(a(dictJSON)),this.bulkEditContainer=$("#page .container-bulkedit"),this.bulkEditContainer.find(".bulkedit-actions").append(this.bulkEditActions),this.bulkEditActions.find(".bulkedit-archive a").click(function(t){t.preventDefault(),e.commitBulkEdit("mark")}),this.bulkEditActions.find(".bulkedit-favorite a").click(function(t){t.preventDefault(),e.commitBulkEdit("favorite")}),this.bulkEditActions.find(".bulkedit-delete a").click(function(t){t.preventDefault();var i=e.queueList.children(".item").filter(".bulkeditselected"),n=Pt.callTrans("confirm.deleting")+" "+i.length+(1==i.length?" item":" items");e.showConfirmDialog(n,Pt.callTrans("confirm.areyousure"),Pt.callTrans("cta.delete"),function(){e.commitBulkEdit("delete")})}),this.bulkEditActions.find(".bulkedit-addtag a").click(function(t){t.preventDefault();var i=e.queueList.children(".item").filter(".bulkeditselected").not(".removed");PocketAnalytics.action("bulk_edit_tag","interact","webapp"),e.showBulkTagsDialog(!0,!1,null,null,null,i.length)}),this.bulkEditContainer.find(".bulkedit-cancel").click(function(t){t.preventDefault(),e.showBulkEdit(!1),PocketAnalytics.action("bulk_edit_close","interact","webapp")}),$(".hint-item").each(function(e,t){r($(t))}),this.page=$('<div id="page_queue" class="wrapper tag_sidebar_holder"><div id="queue_list_wrapper"><ul id="queue" class="queue_list"></ul></div><div class="clear"></div></div>'),$("#content").append(this.page),this.contentTypeControl=new Lt({"callback":function(){e.reloadList()},"items":[{"class":"article","title":""},{"class":"video","title":""},{"class":"image","title":""}]}),this.breadCrumbSpacer=new $t,this.queueList=$("#queue"),$(document).smartscroll(function(){this.scrolled()}.bind(this)),$(document).on("startFetching",function(){e.queueFetching=!0,At.setDetail("<p>"+Pt.callTrans("notification.retrievingyourlist")+"</p>"),At.show(!0)}),$(document).on("finishFetching",function(){e.queueFetching=!1,ai.promptPassword||At.hide(),e.reloadList(),e.data.getTags({"delegate":e,"doneSelector":"tagsReady"})}),$(document).on("listNeedsReload",function(){this.reloadList()}.bind(this)),$(document).on("listNeedsRefresh",function(t,i){e.bulkRefreshItems(i.allObjects)}),$(document).on("itemNeedsExtendedUpdate",function(t,i){var n=i.action,a=(i.on,i.item),s=i.updateDom,r=e.itemsByID[a.item_id];"undefined"!=typeof r&&"update"===n&&(e.itemsByID[a.item_id]=a,e.items[e.items.indexOf(r)]=a,s&&e.updateItem(a)),"undefined"==typeof r&&"add"===n&&e.bulkRefreshItems([i])}),$(document).on("recentSearchesRefresh",function(t,i){e.recentSearches=i.recent,u("recentSearches",JSON.stringify(e.recentSearches))}),$(document).on("topicDetailRefresh",function(t,i){e.topicDetail=i.groups,u("topicDetail",JSON.stringify(e.topicDetail)),Gt.hasSyncedRediscovery||u("hasSyncedRediscovery","1")}),this.startLazyLoadImages(),d("loadedItems",function(t){e.loadedItems="undefined"!=typeof t.loadedItems}),d("sawEmptyNotice",function(t){e.sawEmptyNotice="undefined"!=typeof t.sawEmptyNotice}),d("PromptPassword",function(t){e.promptPassword="undefined"!=typeof t.PromptPassword}),d("topicDetail",function(t){"undefined"!=typeof t.topicDetail&&(e.topicDetail=JSON.parse(t.topicDetail))}),this.premiumMode&&d("recentSearches",function(t){"undefined"!=typeof t.recentSearches&&(e.recentSearches=JSON.parse(t.recentSearches))}),this.inited=!0},"initSearch":function(){function e(){$.trim(t.searchField.val()).length>0?($(".searchtoolbar_screen").removeClass("searchtoolbar_screen_active"),t.hideRecentSearchesList(),$(".searchnav-sortby-disabled").removeClass("searchnav-sortby-disabled"),$(".section-filter-disabled").removeClass("section-filter-disabled"),t.searchChipLength?t.searchField.css("width",24*$.trim(t.searchField.val()).length+"px"):t.searchField.css("width","100%")):($(".searchtoolbar_screen").addClass("searchtoolbar_screen_active"),$("#searchnav_sortby > a").addClass("searchnav-sortby-disabled"),$(".section-filter").addClass("section-filter-disabled"),t.showRecentSearchesList(),t.searchField.css("width","100%"))}var t=this,i=Handlebars.templates.queue_searchitem;"1"===zt.premiumStatus&&(this.premiumMode=!0),dictJSON.manual.premium=this.premiumMode?1:0,this.searchItem=$(i(dictJSON)),$("#page .pkt-nav").append(this.searchItem),$("#page").append('<div class="searchtoolbar_screen"></div>'),$("#pagenav_searchicon a").click(function(e){e.preventDefault(),t.showSearchState(!0)}),this.searchField=$("#page_search"),this.searchChipLength=0,this.searchFieldEmptyState=!0,this.searchField.keyup(function(i){var n=i.keyCode||i.which;if(27==n)return t.showSearchState(!1),void 0;if(this.searchKeyValid||8==n){if(this.searchKeyValid=!1,13==n)return t.reloadTO&&clearTimeout(t.reloadTO),t.reloadList(),void 0;t.searchRecentSearch=!1,t.reloadTO&&clearTimeout(t.reloadTO),t.saveSearchTO&&clearTimeout(t.saveSearchTO),t.reloadTO=setTimeout(function(){if($.trim(t.searchField.val()).length)t.searchFieldEmptyState=!1;else{if(t.searchFieldEmptyState)return;t.searchFieldEmptyState=!0}t.reloadList()},400),t.saveSearchTO=setTimeout(function(){t.saveSearchStateToPrevSearches()},2e4),e()}}).keypress(function(){this.searchKeyValid=!0}).keydown(function(e){var i=e.keyCode||e.which;if(8==i&&!$(this).val().length&&t.searchChipLength){var n=$(".search-input-list .search-chip").last();n.hasClass("search-chip-selected")?(n.remove(),t.searchChipLength--,t.adjustInputAreaForChips(),t.reloadList()):n.addClass("search-chip-selected")}}).focus(function(){PocketAnalytics.actionWithExtraString("search_focus","interact","packagedapp",$(this).val())}).blur(function(){PocketAnalytics.actionWithExtraString("search_blur","interact","packagedapp",$(this).val())}).on("paste",function(){setTimeout(function(){e(),t.reloadList()},50)}).on("input",function(){e()}),/Trident/.test(navigator.userAgent)&&(this.searchFieldPrevLength=0,this.searchField.on("input",function(){!$.trim($(this).val()).length&&this.searchFieldPrevLength>0&&(t.searchFieldEmptyState=!0,e(),t.reloadList()),this.searchFieldPrevLength=$.trim($(this).val()).length}))},"loadState":function(e){if(this.inited?this.searchField||this.initSearch():this.init(),e.sections[1]&&(e.sections[1]="list"==e.sections[1]?"list":"grid"),this.stateSelector.set(e.page,!0),this.initialView){var t=this;"string"==typeof zt.externalUserSettings.lastQueueView?(t.setView(zt.externalUserSettings.lastQueueView),t.stateChanged()):t.setView(e.sections[1]?e.sections[1]:t.defaultView),this.premiumMode="1"===zt.premiumStatus?!0:!1,si.layout&&(si.forceLoadStyles=!0),this.initialView=!1}else this.setView(e.sections[1]?e.sections[1]:this.defaultView);e.sections[2]?(Zt.setTag(decodeURIComponent(x(e.sections[2]).replace("%","%25")),!0),PocketAnalytics.actionWithExtraString("tag_filter","view","packagedapp",decodeURIComponent(x(e.sections[2]).replace("%","%25")))):Zt.setTag(!1),this.stateChanged()},"stateChanged":function(){var e=this.getCurrentLocation();this.state=e.state;var t=this.getTagUrl("___TAG___").url.replace("/___TAG___","");t!=this.tagUrlPrefix&&(this.tagUrlPrefix=t,ai.data.getTags({"delegate":this,"doneSelector":"tagsReady"})),$(".pagenav_gridview a").attr("href",this.getInfoForState({"section":this.state.section,"view":"list","tag":this.state.tag}).url).attr("title",Pt.callTrans("queue.switchtolistview")).off("click").one("click",function(e){e.preventDefault(),PocketAnalytics.action("toggle_view_list","interact","packagedapp")}),$(".pagenav_listview a").attr("href",this.getInfoForState({"section":this.state.section,"view":"grid","tag":this.state.tag}).url).attr("title",Pt.callTrans("queue.switchtotileview")).off("click").one("click",function(e){e.preventDefault(),PocketAnalytics.action("toggle_view_tile","interact","packagedapp")}),$("#nav_"+this.nav+" a").attr("href",e.url),window.location!=e.url&&Kt.pushState(e.title,e.url),this.lastUrl!=e.url&&this.reloadList(),this.bulkEditMode&&this.showBulkEdit(!1),this.lastUrl=e.url,Kt.showPage(this),this.forceBadgeAdjust&&(this.adjustTiles(!0),this.forceBadgeAdjust=!1)},"getCurrentLocation":function(){return this.getInfoForState({"tag":Zt.selectedTag,"view":this.selectedView,"section":this.stateSelector.label})},"getTagUrl":function(e){return this.getInfoForState({"tag":e,"view":this.selectedView,"section":this.stateSelector.label})},"getInfoForState":function(e){var t="",i="",n=" : ",a=e.section.toLowerCase();return e.tag&&(t=encodeURIComponent(e.tag)+"/"+t,i=n+e.tag),e.view&&(t.length||e.view!=this.defaultView)&&(t=e.view+"/"+t),i=n+Pt.callTrans("queue.section_"+e.section.toLowerCase())+i,(t.length||a!=this.defaultSection)&&(t=a+"/"+t),t="/a/"+t,i="Pocket"+i,{"url":t,"title":i,"state":e}},"willHide":function(){this.lastScrollTop=$(window).scrollTop()},"didHide":function(){this.showBulkEdit(!1),this.isOpen=!1},"didShow":function(){var e=this;"undefined"!=typeof this.lastScrollTop&&$(window).scrollTop(e.lastScrollTop),this.isOpen=!0},"itemForItemID":function(e){var t=this.itemsByID[e];return t?t:{}},"reloadList":function(e){if(e||(e={}),!e.append||!this.loading){this.loading=!0,this.reloadTO&&clearTimeout(this.reloadTO),e.append?(this.loadingRow||(this.loadingRow=$('<li class="loading loadingRow">&nbsp;</li>')),this.queueList.append(this.loadingRow),this.loadingRow.show(),this.loadMoreRow.hide()):(this.location=0,this.offset=0,(!this.searchStateMode||this.searchStateFirstSearch)&&(this.queueList.parent().addClass("loading"),this.searchStateFirstSearch=!1),c());var t=this.stateSelector.value,i=null;"favorites"==t&&(t=null,i=1);var n=this,a=Zt.selectedTag?Zt.selectedTag:"",s=this.contentTypeControl.key();this.sortingByNewestToOldest="oldest"!=zt.externalUserSettings.sortlist;var r=this.sortingByNewestToOldest?"newest":"oldest";this.searchStateMode&&$.trim(this.searchField.val()).length?(e.append||($(".searchtoolbar_queue").find("h2").text(Pt.callTrans("queue.searching")),$(".wrapper_search").addClass("wrapper_search_loading")),i=null,t="mylist"==this.searchSectionFilter?"queue":"archive"==this.searchSectionFilter?"archive":null,s=null,a="",this.searchChipLength&&$(".search-input-list .search-chip").each(function(){var e=$(this).find(".search-chip-icon");e.length&&e.hasClass("search-chip-contenttype")&&(s=n.deriveContentTypeFilterFromTagName($(this).find("p").text())),e.length&&e.hasClass("search-chip-tag")&&(a=$(this).find("p").text()),e.length&&e.hasClass("search-chip-favorite")&&(t=null,i=1)}),r=this.searchSortBy):this.searchStateMode&&($(".wrapper_search").addClass("wrapper_search_loading"),$(".searchtoolbar_queue").find("h2").text(Pt.callTrans("queue.search")));var o;o=this.location-this.offset,this.offset=0;var l={"offset":o,"count":this.pageSize,"state":t,"favorite":i,"sort":r,"search":this.searchField.val().trim(),"tag":a,"view":this.selectedView,"contentType":s,"appsInfo":"summary","rediscovery":1,"premium":this.premiumMode?1:0};this.searchStateMode&&(l.cxt_search_type=this.searchRecentSearch?"recent":"new"),this.data.getList({"o":e,"data":l,"delegate":this,"doneSelector":"reloadListCallback","errorSelector":"reloadListError"}),"object"==typeof this.gsftooltip&&this.gsftooltip.show(!1),this.reloadShares(),this.location=o+this.pageSize}},"reloadShares":function(){this.data.getShares({"o":{},"delegate":this,"doneSelector":"getSharesCallback"})},"reloadListCallback":function(e,t){if(this.searchHasMore=this.searchStateMode&&"object"==typeof e.search_meta&&e.search_meta.has_more,"object"==typeof e.recent_searches&&(this.recentSearches=e.recent_searches,u("recentSearches",JSON.stringify(this.recentSearches))),this.searchStateMode&&this.premiumMode&&"object"==typeof e.search_meta&&"normal"==e.search_meta.search_type&&e.search_meta.error_msg&&Kt.showErrorNotification(e.search_meta.error_msg,!1,!0),!this.topicDetailActive&&!$.isEmptyObject(this.topicDetail)){var i="";for(var n in this.topicDetail){this.topicDetailActive=!0;var a=this.topicDetail[n];i+=".topic_"+a.group_id+"{background-color:rgb("+a.color.r+","+a.color.g+","+a.color.b+"); background-color:rgba("+a.color.r+","+a.color.g+","+a.color.b+",0.9);} "}$("head").append('<style type="text/css">'+i+"</style>")}this.notificationRow&&this.searchStateMode&&(this.notificationRow.remove(),this.notificationRow=null);var s=e.list;this.friends=e.friends||{},t.o.append||(this.items=[],this.itemsByID={}),this.items||(this.items=[],this.itemsByID={});var r=[];if(s&&($.each(s,function(e,t){r.push(t),this.items.push(t),this.itemsByID[t.item_id]=t}.bind(this)),r.sort(ct)),$(".wrapper_search").removeClass("wrapper_search_loading"),this.searchStateMode&&$.trim(this.searchField.val()).length&&"undefined"!=typeof e.search_meta&&"undefined"!=typeof e.search_meta.total_result_count){var o;o=1==e.search_meta.total_result_count?Pt.callTrans("queue.searchresult",null,null,e.search_meta.total_result_count):Pt.callTrans("queue.searchresults",null,null,e.search_meta.total_result_count),$(".searchtoolbar_queue").find("h2").text(o)}else $(".searchtoolbar_queue").find("h2").text(Pt.callTrans("queue.search"));return s&&"undefined"!=typeof this.stateSelector&&"favorites"===this.stateSelector.value?(Gt.resolveItemsWithLocalItemID(r,function(){this.rebuildList(r,t)}.bind(this)),void 0):(this.rebuildList(r,t),void 0)},"rebuildList":function(e,t){function i(e){e.preventDefault();var t=$(this).parents(".item"),i=t.find(".shares"),n=i.height();return A?(t.addClass("share_expanded"),t.find(".row_friends").css("height",n),"wide_split"==t.attr("tileType")&&t.find(".thumb").css("top",-n)):(t.find(".sharesContainer").css("height",n),t.addClass("share_expanded")),e.preventDefault(),!1}function n(e){e.preventDefault();var t=$(this).parents(".item");return t.removeClass("share_expanded"),A?(t.find(".row_friends").css("height",""),"wide_split"==t.attr("tileType")&&t.find(".thumb").css("top","")):t.find(".sharesContainer").css("height",""),!1}function s(e){if(0!=e.button||!(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)){var t=$(this).parents(".item");return t.hasClass("share_expanded")?n.call(this,e):i.call(this,e)}}e=e||this.items,t=t||{},t.o.append||(this.queueList.empty(),this.loadMoreRow=!1,this.c={"tiles":0,"leftInRow":0,"last":{}}),logger.log("Queue: Rebuild list with list:"),logger.log(e);var r,l,c,d,h,f,g,m,_,y,b,w,S,T,x,C,D=this,A="grid"==this.selectedView,E="archive"==this.stateSelector.value?!0:!1,P="favorites"==this.stateSelector.value?!0:!1,q=0,F="",O=[];this.loadedItems||E||P||!e.length||(this.loadedItems=!0,u("loadedItems","1"));for(C in e){var R,N,j=0;if(this.c.leftInRow<=0&&(this.c.leftInRow=3),l=e[C],l.highlights){var U=!1;for(prop in l.highlights)l.highlights[prop]=qt(l.highlights[prop]),"title"==prop?(l.highlights[prop]=l.highlights[prop].replace(/<em>/gi,'<div class="search-match">').replace(/<\/em>/gi,"</div>"),U=!0):"tags"==prop?(l.highlights[prop]=l.highlights[prop].replace(/<em>/gi,"").replace(/<\/em>/gi,""),U=!0):("url"==prop&&(U=!0),l.highlights[prop]=l.highlights[prop].replace(/<em>/gi,'<span class="search-match">').replace(/<\/em>/gi,"</span>"));U&&l.highlights.full_text&&delete l.highlights.full_text}"undefined"!=typeof l.shares&&(N=[],$.each(l.shares,function(e,t){if("string"==typeof t.time_shared&&(t.time_shared=new Date(1e3*parseInt(t.time_shared,10))),1===parseInt(t.status,10)){N.push(t);var i=t.from_friend_id;if(i){var n=D.friends[i];n&&(t.friend=n,l.friends=l.friends||[],l.friends.push(n))}}})),c=l.resolved_url?l.resolved_url:l.given_url,d="/a/read/"+l.item_id;var Y="link";if(Y+="1"==l.is_article||"2"==l.has_video||"2"==l.has_image?" start_articleview":" start_webview",m="1"==l.is_article?2:"2"==l.has_video?17:"2"==l.has_image?43:13,g=k(L(c))||"",l.title&&(h=l.title),h=l.resolved_title?l.resolved_title:l.given_title?l.given_title:l.resolved_url?l.resolved_url:l.given_url,A){T=1,_="",y=0,b=0,w=!1,S=!0;var H=l.highlights&&l.highlights.full_text&&"grid"==ai.selectedView;if("1"==l.is_article){if(l.image&&l.image.src){var z=zt.GSFStatus.active&&parseInt(C,10)<3;this.c.leftInRow>=2&&(!this.c.last.wide_split||this.c.tiles-this.c.last.wide_split>=4)&&rt(l.image,303,255)&&l.excerpt&&l.excerpt.length>30&&!z?(T=2,_="wide_split",y=303,w=!0):this.c.leftInRow>=2&&!N&&(!this.c.last.wide_image||this.c.tiles-this.c.last.wide_image>=2)&&l.image.width>=580&&!z&&!H?(T=2,_="wide_image",y=580):H?(_="normal_excerpt",w=!0):(_="normal",y=280,S=!1)}}else"2"!=l.has_video||"1"!=l.has_image||H||(_="normal_video",y=280,S=!1),"2"!=l.has_image||H||(_="normal_image",y=280,b=255,S=!1);_.length||(l.excerpt&&l.excerpt.length>25?(_="normal_excerpt",w=!0):(y=!1,_="normal_only_title",j=1)),y&&(j=2),F='tileType="'+_+'" ts="'+T+'"'}else y=95,b=80,j=l.image&&l.image.src?3:4;if(dictJSON.manual.item_id=l.item_id,dictJSON.manual.tile_class=_,dictJSON.manual.item_extraattributes=("1"==l.favorite?' favorite="1"':"")+("1"==l.status?' status="1"':"")+" "+F,dictJSON.manual.item_linkclasses=Y,dictJSON.manual.item_openurl=d,l.badge_group_id&&D.topicDetailActive&&"object"==typeof D.topicDetail[l.badge_group_id]){var W=D.topicDetail[l.badge_group_id];"object"==typeof W.name&&"string"==typeof W.name[zt.language]&&"number"==typeof W.group_id?(dictJSON.manual.item_topic_desc=W.name[zt.language],dictJSON.manual.item_topic_id=W.group_id):(dictJSON.manual.item_topic_desc=null,dictJSON.manual.item_topic_id=null)}else dictJSON.manual.item_topic_desc=null,dictJSON.manual.item_topic_id=null;var r;if(r=A?$(Handlebars.templates.queue_itemshell_grid(dictJSON)):$(Handlebars.templates.queue_itemshell_list(dictJSON)),a=r.find(".link"),dictJSON.manual.item_topic_desc&&r.find(".title").after(r.find(".topic_detail")),a.click(function(e,t){return function(){ai.data.opened(e,t)}}(l.item_id,m)),r.click(function(e){if(0==e.button&&(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)&&(D.bulkEditMode||!$(e.target).hasClass("original_url")&&!$(e.target).parent().hasClass("title"))){{$(e.target)}if(e.preventDefault(),e.metaKey||e.ctrlKey||e.altKey)$(this).toggleClass("bulkeditselected");else{if($(this).nextAll(".bulkeditselected").length)$(this).nextUntil(".bulkeditselected").not(".loadingRow").addClass("bulkeditselected");else if($(this).prevAll(".bulkeditselected").length)$(this).prevUntil(".bulkeditselected").not(".loadingRow").addClass("bulkeditselected");else{var t=$(".item").not(".removed").first();t.addClass("bulkeditselected"),t.attr("id")!=$(this).attr("id")&&t.nextUntil($(this)).not(".loadingRow").addClass("bulkeditselected")}$(this).addClass("bulkeditselected")}D.checkBulkEditLogic()}else{if(D.bulkEditMode)return e.preventDefault(),e.stopImmediatePropagation(),void 0;if(0!=e.button||$(e.target).parents(".buttons").length||$(e.target).parents(".tags").length||$(e.target).hasClass("tags")||$(e.target).parent().hasClass("title"))return;if(0==e.button&&$(e.target).hasClass("original_url"))return e.preventDefault(),e.stopImmediatePropagation(),window.open($(e.target).attr("href")),void 0;if($(e.target).hasClass("favicon"))return window.open($(e.target).data("originalurl")),e.preventDefault(),e.stopImmediatePropagation(),void 0;e.preventDefault(),e.stopImmediatePropagation();var i=$(this).find(".link").attr("href");$(".popover-new").removeClass("popover-active"),Kt.loadStateFromUrl(i)}}),inner=r.find(".inner"),caret=$([]),l.friends&&l.friends.length){var B=l.friends[0].name;l.friends.length>1&&(dictJSON.manual.item_friendslist+=" and "+(l.friends.length-1)+" other"+(l.friends.length>2?"s":"")),A||(dictJSON.manual.item_friendslist=Pt.callTrans("queue.sharedby")+" "+B),dictJSON.manual.item_friendsbgimg=M(l.friends[0].avatar_url,"w90-h90-nc"),dictJSON.manual.item_friendslist=B,f=$(Handlebars.templates.queue_itemfriendsdetail(dictJSON));var G=M(l.friends[0].avatar_url,"w90-h90-nc");if(G)Vt.loadAvatar(G,function(e,t){var i="";"undefined"!=typeof t&&(i+="url('"+t.src+"')");var n=e.find(".collapsed .avatar")[0];$(n).css("background-image",i)}.bind(this,f));else{var V;o()?(V="a/i/empty_avatar"+(window.devicePixelRatio>1?"-2x":"")+".png",V=chrome.runtime.getURL(V)):V="i/empty_avatar"+(window.devicePixelRatio>1?"-2x":"")+".png";var J=f.find(".collapsed .avatar")[0];$(J).css("backgroundImage","url('"+V+"')")}r.addClass("shared_to")}else f=$([]);r.find(".title").children("span").text(v(h)),h=r.find(".title"),excerpt=w&&l.excerpt?$('<span class="excerpt">'+v(l.excerpt)+"</span>"):null,thumb=r.find(".thumb"),thumb.attr("variant",j);var K;if(dictJSON.manual.item_targeturl=k(I(c)),dictJSON.manual.item_domain=g,dictJSON.manual.item_tags=it(l.tags,!1,!0),l.highlights&&(l.highlights.title&&(h=l.highlights.title,r.find(".title").addClass("title-searchmatch").find("span").html(h)),l.highlights.full_text&&excerpt&&excerpt.html(l.highlights.full_text),l.highlights.tags&&l.tags&&(dictJSON.manual.item_tags=it(l.tags,!1,!0,l.highlights.tags))),K=A?$(Handlebars.templates.queue_itemsubdetail_grid(dictJSON)):$(Handlebars.templates.queue_itemsubdetail_list(dictJSON)),A?(R=r.find(".favicon"),R.attr("data-originalurl",k(I(c))),r.prepend(f),inner.find(".title").after(excerpt),inner.append(K)):(l.friends&&l.friends.length&&$("<li></li>").append(f).insertBefore(K.children().get(0)),a.after(excerpt),inner.append(K)),l.highlights&&l.highlights.url&&g){var Q="",X=/\/\/([^(<|\/)]*<span class="search-match">[^<|\/]*<\/span>[^<|\/]*)/.exec(l.highlights.url);Q=X?X[0].replace(/(\/\/)?(www\.)?/,""):'<span class="search-match">'+g+"</span>",inner.find(".original_url").html(Q)}var Z=window.devicePixelRatio||1;if(0!==j)if(4===j){var et=o()?chrome.runtime.getURL("a/i/tile_fallback@1x.jpg"):"i/tile_fallback@1x.jpg";
thumb.css("background-image","url('"+et+"')"),thumb.css("background-repeat","repeat"),thumb.css("background-size","auto"),thumb.addClass("lazy-active"),Z>1&&(et=et.replace("1x.jpg","2x.jpg").replace("1x.png","2x.png"),thumb.css("background-size","844px 591px"))}else if(thumb.addClass("lazy-load"),thumb.attr("data-lazy-type","thumbnail"),thumb.attr("data-lazy-key",l.item_id),1===j){var tt=M("http://"+g+"/apple-touch-icon.png","w80-h80-nc");thumb.attr("data-thumburl",tt),thumb.attr("data-thumbvariant",j),thumb.attr("data-shouldcache","0"==l.status)}else 2===j?y&&(thumb.attr("data-thumburl",l.image?l.image.src:void 0),thumb.attr("data-thumbvariant",j),thumb.attr("data-tileclass",_),thumb.attr("data-shouldcache","0"==l.status)):3===j&&(thumb.attr("data-thumburl",l.image?l.image.src:void 0),thumb.attr("data-thumbvariant",j),thumb.attr("data-hasplaybutton","2"==l.has_video),thumb.attr("data-shouldcache","0"==l.status));if(R&&(R.addClass("lazy-load"),R.attr("data-lazy-type","favicon"),R.attr("data-lazy-key",l.item_id),R.attr("data-favicon-url",st(g))),"undefined"!=typeof N){var nt=$("<div class='shares'></div>");if(N.sort(function(e,t){var i=e.time_shared,n=t.time_shared;return i instanceof Date?i=i.getTime():"string"==typeof i&&(i=parseInt(i,10)),n instanceof Date?n=n.getTime():"string"==typeof n&&(n=parseInt(n,10)),n-i}),A||1!=N.length||void 0!=N[0].comment&&0!=N[0].comment.length||void 0!=N[0].quote&&0!=N[0].quote.length)for(var at=0;at<N.length;at++){var ot=ii(N[at],l,!A,!0);nt.append(ot)}else{var lt=$("<div class='notification'><div><div class='attribution'><div class='one_liner'></div></div></div></div>"),ct=N[0],ut=ct.fromFriend||this.friends[ct.from_friend_id],dt=ut&&ut.name&&ut.name.length?ut.name:"A friend";lt.find(".one_liner").text(""+dt+" "+Pt.callTrans("queue.sharedthiswithyou")+" "+p(ct.time_shared,!0)+"."),nt.append(lt)}if(A)f.append(nt);else{var ht=$("<div class='sharesContainer'></div>");ht.append(nt),r.append(ht)}}O.push(r),x={},"1"==l.favorite&&(x.favorite=!0),(E||P||D.searchStateMode)&&1==l.status&&(x.archived=!0),(x.favorite||x.archived)&&this.addButtonsToRow(!1,r,x),r.find(".tag_container").on("click",".tag",function(){D.searchStateMode&&D.showSearchState(!1)}),q++,this.c.tiles+=T,this.c.leftInRow-=T,this.c.last[_]=this.c.tiles}return this.loadMoreRow||(this.loadMoreRow=$('<li class="info-loading"></li>'),this.loadMoreRow.click(function(){this.reloadList({"append":!0})}.bind(this))),t.data&&(q<t.data.count?(this.remaining=!1,this.loadMoreRow.hide()):(this.remaining=!0,this.loadMoreRow.show())),t.o.postSync&&(this.remaining=!0,this.loadMoreRow.hide()),$.each(O,function(e,t){t.mouseover(function(){D.addButtonsToRow(this)}),t.find("a.add_tag").click(function(){D.editItemTags(this)}),t.find("a.edit").click(function(){D.editItemTags(this)}),A?t.find(".row_friends").mouseover(i).mouseout(n).unbind("click").click(function(e){0==e.button&&(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)||(e.preventDefault(),$(this).siblings(".link").trigger("click"))}):t.find(".row_friends").unbind("click").click(s)}),this.queueList.append(O),this.queueList.append(this.loadMoreRow),$(document.body).hasClass("editing")&&this.applyEditToRows(),this.showEmpty(0==q&&(!t.o.append||this.listIsEmpty())&&!this.queueFetching),(!t.o.append||this.listIsEmpty())&&this.resetHighlight(),this.listIsDoneLoading(),this.promptPassword?(D.checkUserValidPassword(),void 0):(this.gsfInitialize(),"en-US"!=zt.language||"undefined"!=typeof zt.externalUserSettings.sawpremupsell&&zt.externalUserSettings.sawpremupsell||this.premiumMode||"undefined"==typeof zt.GSFStatus.active||zt.GSFStatus.active?$(".gsf_device_reminder_container").length&&$(".gsf_device_reminder_container").remove():($("#page_queue").outerHeight()<$(window).height()-5&&$("#page_queue").css("minHeight",$(window).height()-60-2*parseInt($("#page_queue").css("paddingTop"),10)+"px"),$("#page_queue").append(Handlebars.templates.queue_gsfdevicereminder(dictJSON)),$(".gsf_device_reminder .close").click(function(){zt.externalUserSettings.dismisseddevicereminder=!0,Kt.saveExternalUserSettings(),$(".gsf_device_reminder_container").remove()})),t.o&&t.o.append&&(setTimeout(function(){$(".removed").remove()},1e3),$(document.body).hasClass("editing")&&this.updateCheckAllBox()),setTimeout(function(){"grid"==this.selectedView&&this.adjustTiles(),"list"==this.selectedView&&this.checkTilesTagOverflow(),this.scrollPositionBeforeUpdating&&($(window).scrollTop(this.scrollPositionBeforeUpdating),this.scrollPositionBeforeUpdating=void 0),this.processLazyLoadScroll()}.bind(this),50),void 0)},"getSharesCallback":function(e){this.receivedNotifications(e.notifications,e.unconfirmed_shares)},"updateItem":function(e){function t(e){var t=$(this).parents(".item"),i=t.find(".shares"),n=i.height();return d?(t.addClass("share_expanded"),t.find(".row_friends").css("height",n),"wide_split"==t.attr("tileType")&&t.find(".thumb").css("top",-n)):(t.find(".sharesContainer").css("height",n),t.addClass("share_expanded")),e.preventDefault(),!1}function i(e){var t=$(this).parents(".item");return t.removeClass("share_expanded"),d?(t.find(".row_friends").css("height",""),"wide_split"==t.attr("tileType")&&t.find(".thumb").css("top","")):t.find(".sharesContainer").css("height",""),e.preventDefault(),!1}function n(e){var n=$(this).parents(".item");return n.hasClass("share_expanded")?i.call(this,e):t.call(this,e)}var a=this.inited?$("#i"+e.item_id):!1,s=a.find(".thumb"),r=a.find(".favicon"),l=0!==a.find(".excerpt").length;a.empty();var c,u=this,d="grid"==this.selectedView,h="archive"==this.stateSelector.value?!0:!1,f="favorites"==this.stateSelector.value?!0:!1;"undefined"!=typeof e.shares&&(c=[],$.each(e.shares,function(t,i){if("string"==typeof i.time_shared&&(i.time_shared=new Date(1e3*parseInt(i.time_shared,10))),1===parseInt(i.status,10)){c.push(i);var n=i.from_friend_id;if(n){var a=u.friends[n];a&&(i.friend=a,e.friends=e.friends||[],e.friends.push(a))}}}));var g=e.resolved_url?e.resolved_url:e.given_url,m="/a/read/"+e.item_id,_="link";_+="1"==e.is_article||"2"==e.has_video||"2"==e.has_image?" start_articleview":" start_webview";var y,b=("1"==e.is_article?2:"2"==e.has_video?17:"2"==e.has_image?43:13,L(g)||"");e.title&&(y=e.title),y=e.resolved_title?e.resolved_title:e.given_title?e.given_title:e.resolved_url?e.resolved_url:e.given_url;{var w,S=$('<a class="'+_+'" href="'+m+'"></a>'),T=$('<span class="inner"></<div>');$([])}if(e.friends&&e.friends.length){var x=e.friends[0].name;e.friends.length>1&&(x+=" and "+(e.friends.length-1)+" other"+(e.friends.length>2?"s":"")),d||(x="Shared by "+x),w=$("<span class='row_friends'><span class='collapsed'><span class='avatar'></span>"+x+"</span><span class='caret'></span></span>");var C=M(e.friends[0].avatar_url,"w90-h90-nc");if(C)Vt.loadAvatar(C,function(e,t){var i="";"undefined"!=typeof t&&(i+="url('"+t.src+"')");var n=e.find(".collapsed .avatar")[0];$(n).css("background-image",i)}.bind(this,w));else{var D;o()?(D="a/i/empty_avatar"+(window.devicePixelRatio>1?"-2x":"")+".png",D=chrome.runtime.getURL(D)):D="i/empty_avatar"+(window.devicePixelRatio>1?"-2x":"")+".png";var A=w.find(".collapsed .avatar")[0];$(A).css("backgroundImage","url('"+D+"')")}a.addClass("shared_to")}else w=$([]);var E,P=$('<span class="title"><span>'+v(y)+"</span></span>"),q=l&&e.excerpt?$('<span class="excerpt">'+v(e.excerpt)+"</span>"):null;dictJSON.manual.item_targeturl=k(I(g)),dictJSON.manual.item_domain=b,dictJSON.manual.item_tags=it(e.tags,!1,!0),e.highlights&&(e.highlights.title&&(y=e.highlights.title,row.find(".title").addClass("title-searchmatch").find("span").html(y)),e.highlights.full_text&&excerpt&&excerpt.html(e.highlights.full_text),e.highlights.tags&&e.tags&&(dictJSON.manual.item_tags=it(e.tags,!1,!0,e.highlights.tags))),E=d?$(Handlebars.templates.queue_itemsubdetail_grid(dictJSON)):$(Handlebars.templates.queue_itemsubdetail_list(dictJSON)),d?(a.append(w).append(S),S.append(T),T.append(P).append(q).append(s).append(r).append(E)):(e.friends&&e.friends.length&&$("<li></li>").append(w).insertBefore(E.children().get(0)),a.append(T),T.append(S).append(q).append(s).append(E),S.append(P));if("undefined"!=typeof c){var F=$("<div class='shares'></div>");if(c.sort(function(e,t){var i=e.time_shared,n=t.time_shared;return i instanceof Date?i=i.getTime():"string"==typeof i&&(i=parseInt(i,10)),n instanceof Date?n=n.getTime():"string"==typeof n&&(n=parseInt(n,10)),n-i}),d||1!=c.length||void 0!=c[0].comment&&0!=c[0].comment.length||void 0!=c[0].quote&&0!=c[0].quote.length)for(var O=0;O<c.length;O++){var R=ii(c[O],e,!d,!0);F.append(R)}else{var N=$("<div class='notification'><div><div class='attribution'><div class='one_liner'></div></div></div></div>"),j=c[0],U=j.fromFriend||this.friends[j.from_friend_id],Y=U&&U.name&&U.name.length?U.name:"A friend";N.find(".one_liner").text(""+Y+" shared this with you "+p(j.time_shared,!0)+"."),F.append(N)}if(d)w.append(F);else{var H=$("<div class='sharesContainer'></div>");H.append(F),a.append(H)}}var z={};"1"==e.favorite&&(z.favorite=!0),(h||f)&&"1"==e.status&&(z.archived=!0),(z.favorite||z.archived)&&this.addButtonsToRow(!1,a,z),a.mouseover(function(){u.addButtonsToRow(this)}),a.find("a.add_tag").click(function(){u.editItemTags(this)}),a.find("a.edit").click(function(){u.editItemTags(this)}),d?a.find(".row_friends").mouseover(t).mouseout(i):a.find(".row_friends").unbind("click").click(n),this.adjustTile(a)},"bulkRefreshItems":function(e){var t=this;$.each(e,function(e,i){{var n=i.action,a=i.on,s=i.item,r=(i.updateDom,t.itemsByID[s.item_id]),o=t.stateSelector.value;parseInt(s.status,10)}return 0!==parseInt(s.status,10)&&1===parseInt(s.has_pending_share,10)?(t.reloadShares(),!0):("add"!==n&&"readd"!==n||"queue"!==o?r&&(t.itemsByID[s.item_id]=s,t.items[t.items.indexOf(r)]=s,"mark"==n&&"queue"===o&&a?(t.items.splice($.inArray(s,t.items),1),delete t.itemsByID[s.item_id]):"favorite"==n?(s.favorite=a,a||"favorite"!==o||(t.items.splice($.inArray(s,t.items),1),delete t.itemsByID[s.item_id])):"delete"==n&&a&&(t.items.splice($.inArray(s,t.items),1),delete t.itemsByID[s.item_id])):(s.sort_id=-1,t.items.unshift(s),t.itemsByID[s.item_id]=s),void 0)}),t.scrollPositionBeforeUpdating=$(window).scrollTop();var i=t.items;i.sort(ut),$.each(i,function(e,t){t.sort_id=e}),t.rebuildList(i,{"o":{"append":!1,"postSync":!0}})},"checkSortingChangeCallback":function(e){"object"==typeof e&&"string"==typeof e.value&&(pollsettings=JSON.parse(e.value.replace(/\\\"/g,'"')),pollsettings.sortlist!=zt.externalUserSettings.sortlist&&(zt.externalUserSettings.sortlist=pollsettings.sortlist,this.reloadList(),gt.show("oldest"!=zt.externalUserSettings.sortlist?Pt.callTrans("queue.sortingbynewest"):Pt.callTrans("queue.sortingbyoldest"))))},"receivedNotifications":function(e,t){(!e||0===e.length||"queue"!=this.state.section||this.searchStateMode)&&this.notificationRow&&(this.notificationRow.remove(),this.notificationRow=null),e=e||[];for(var i=0;i<e.length;i++){var n=e[i];n.time_shared&&"string"==typeof n.time_shared&&(n.time_shared=new Date(1e3*parseInt(n.time_shared,10)))}this.notifications=e,this.unconfirmedNotifications=t,this.notificationRow||(this.notificationRow=$(Handlebars.templates.notification_shares(dictJSON)),this.notificationViewButton=this.notificationRow.find("#viewNotifications"));for(var a=[],s=[],r=0;r<(this.notifications||[]).length;r++){var o=this.notifications[r].from_friend;if(o){var l=o.friend_id;if(-1==s.indexOf(l)){s.push(l);var c=o.name;c&&c.length||(c=o.email),c&&c.length||(c=o.username),dictJSON.manual.inbox_name=c,a.push(Handlebars.templates.notification_sharesname(dictJSON))}}}var u=0;for(var d in this.unconfirmedNotifications||{}){var h=this.unconfirmedNotifications[d].from;h||(h="a friend"),dictJSON.manual.inbox_name=h,a.push(Handlebars.templates.notification_sharesname(dictJSON)),++u}if(this.notificationRow.find(".count").text(""+(e.length+u)),a.length>0&&"queue"==this.state.section&&!this.searchStateMode){this.notificationRow.find(".description").html((e.length>1?Pt.callTrans("queue.sharesfrom"):Pt.callTrans("queue.sharefrom"))+" "+a.join(", ")),this.notificationRow.remove().insertBefore($("#page_queue").children().get(0));var f=this;setTimeout(function(){f.notificationRow.click(function(){ai.showInbox(f.notificationViewButton)})},10)}},"addURL":function(e){ai.lastSaveUrl=e,e=(e+"").toString(),e=e.replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+"),Kt.helper.sync.addURL({"url":e},function(){gt.show(Pt.callTrans("notification.addedtolist")),PocketAnalytics.actionWithExtraString("web_save_success","interact","packagedapp",ai.lastSaveUrl)},function(e){Kt.showErrorNotification(e.message),PocketAnalytics.actionWithExtraString("web_save_fail","interact","packagedapp",ai.lastSaveUrl)})},"adjustTiles":function(e){var t="grid"==this.selectedView;if(t){var i=this,n=e?this.queueList.children(".item_withtopic"):this.queueList.children(".item:not(.adjusted)"),a={},s={},r={};$.each(n,function(e,t){var n=$(t),o=n.attr("id"),l=n.attr("tileType"),c=n.find(".title").height(),u=n.find(".excerpt");a[o]=i.thumbnailHeightforTile(n,l,c),s[o]=i.excerptHeightForTile(u,n,l,c),r[o]=i.offsetForTopicBadge(n,l,c)}),$.each(n,function(e,t){var n=$(t);n.addClass("adjusted");var o=n.attr("id"),l=n.attr("tileType");i.executeThumbnailHeightForTile(n,a[o]),i.executeExcerptHeight(n,s[o],l),i.executeTopicBadgeOffset(n,r[o],l)})}},"adjustTile":function(e){e.addClass("adjusted");var t=e.attr("tileType");if(t){var i=e.find(".title").height(),n=e.find(".excerpt"),a=(n.size(),this.thumbnailHeightforTile(e,t,i)),s=this.excerptHeightForTile(n,e,t,i);this.executeThumbnailHeightForTile(e,a),this.executeExcerptHeight(e,s,t)}},"thumbnailHeightforTile":function(e,t,i){var n;if("wide_split"!=t&&"normal_image"!=t){var a=e.find(".row_friends");n=e.height()-i-33-a.height()}return n},"executeThumbnailHeightForTile":function(e,t){"undefined"!=typeof t&&e.find(".thumb").css("height",t)},"excerptHeightForTile":function(e,t,i,n){var a,s=e.size();if(e&&1==s){var r=t.find(".row_friends");a=t.height()-n-33-1*e.css("padding-top").replace("px","")-1*e.css("padding-bottom").replace("px",""),t.hasClass("shared_to")&&(a-=r.height())}return a},"executeExcerptHeight":function(e,t,i){if("undefined"!=typeof t){var n=e.find(".excerpt");"normal_excerpt"==i?lt(n,18,t):"wide_split"==i&&lt(n,18,t)}},"offsetForTopicBadge":function(e,t,i){var n;return e.hasClass("item_withtopic")&&i&&(n=i),n},"executeTopicBadgeOffset":function(e,t,i){"undefined"!=typeof t&&"wide_split"!=i&&"normal_image"!=i&&e.find(".topic_detail").css("top",t+"px")},"reflowTiles":function(){if(this.c){this.c.tiles=0,this.c.leftInRow=3,this.c.last=[];for(var e,t,i=this.queueList.children(".item:not(.marked)"),n=0;n<i.length;n++)e=$(i[n]),e.removeClass("adjusted"),t=1*e.attr("ts"),t>this.c.leftInRow&&(e.removeClass(e.attr("tileType")),e.attr("tileType","normal"),e.attr("ts",1),t=1),this.c.tiles+=t,this.c.leftInRow-=t,this.c.last[e.attr("tileType")]=this.c.tiles,this.c.leftInRow<=0&&(this.c.leftInRow=3);this.adjustTiles()}},"checkTilesTagOverflow":function(){var e=this,t=this.queueList.children(".item:not(.adjusted)");$.each(t,function(t,i){e.checkTileTagOverflow(i)})},"checkTileTagOverflow":function(e,t){var i=$(e),n=i.find(".tag_container"),a=i.hasClass("item_withoverflowtags"),s=t?t:500;if(n.width()>=s){i.addClass("item_withoverflowtags");for(var r=n.find(".tag"),o='<div class="tag-overflow-container clearfix">',l=0,c=r.length-1;c>0;c--)r.eq(c).position().left<=0&&c>0&&(l=c);for(var c=l;c<r.length;c++)r.eq(c).addClass("tag-overflow"),o+=r[c].outerHTML;o+="</div>";var u=i.find(".tag-overflow-link");u.length&&u.remove();var d=$('<a class="tag-overflow-link" href="#">'+Pt.callTrans("queue.moretags").replace(/{(.*)}/i,r.length-l)+"</a>");d.click(function(e){e.preventDefault();var t=$(this).data("content"),i=new Mt("tagMenu",t,$("#container"),{"onShow":function(){$(".tag-overflow-container").on("click.chromehack",".tag-overflow",function(e){e.preventDefault();var t=$(".tag-overflow").filter('[href="'+$(this).attr("href")+'"]');t.each(function(e,t){return $(t).parent(".tag-overflow-container").length?void 0:($(t).trigger("click"),!1)})})},"onHide":function(){$(".tag-overflow-container").off("click.chromehack")},"positions":["bottom","top"],"hideOnClickInPopover":!1,"xOffset":0,"disableHideOnScroll":!0});i.show($(this))}),d.data("content",o),n.after(d)}else a&&(i.removeClass("item_withoverflowtags"),i.find(".tag-overflow-link").remove())},"listIsDoneLoading":function(){this.queueList.parent().removeClass("loading"),this.notificationRow&&this.notificationRow.removeClass("hidden"),this.loading=!1,this.loadingRow&&this.loadingRow.hide()},"reloadListError":function(){this.showEmpty(!0,{"img":!1,"title":"Uh oh.","message":'There was a problem when trying to make a request to the server. Please try refreshing the page.<br><br>If this keeps happening, <a href="http://help.getpocket.com" target="_blank">let us know</a> and we\'ll be happy to get it sorted!'}),this.listIsDoneLoading(!1)},"listIsEmpty":function(){var e=this.queueList.children(".item").size(),t=this.queueList.children(".item.removed").size();return 0>=e-t},"checkIfRunningLow":function(){this.listIsEmpty()&&(this.remaining?this.reloadList({"append":!0}):this.showEmpty(!0))},"startLazyLoadImages":function(){this.processLazyLoadScroll(),$(document).smartscroll(function(){this.processLazyLoadScroll()}.bind(this))},"processLazyLoadScroll":function(){this.imagesLoading=this.imagesLoading||{};var e=$(".lazy-load");$.each(e,function(e,t){var i=$(t),n=i.attr("data-lazy-type"),a=n+":"+i.attr("data-lazy-key"),s="undefined"!=typeof this.imagesLoading[a];if(!s&&b(t)){this.imagesLoading[a]=!0;var r=function(){i.removeClass("lazy-load").addClass("lazy-active"),delete this.imagesLoading[a]}.bind(this);"thumbnail"===n?this.loadThumbnailImageLazy(i,r):"favicon"===n&&this.loadFaviconLazy(i,r)}}.bind(this))},"loadFaviconLazy":function(e,t){Vt.loadFavicon(e.attr("data-favicon-url"),function(e,i){"undefined"!=typeof i&&e.attr("src",i.src),t()}.bind(this,e))},"loadThumbnailImageLazy":function(e,t){var i,n,a=e.attr("data-thumburl"),s=parseInt(e.attr("data-thumbvariant"),10),r="true"===e.attr("data-shouldcache"),c=window.devicePixelRatio||1;if(1===s)i=l("i/tile_graphic_site@1x.png"),n=l("i/tile_fallback@1x.jpg"),Vt.loadImageCached(a,r,function(a){var s="";"undefined"!=typeof a&&(s+="url('"+a.src+"'),",e.addClass("thumb-wimage")),s+=i+","+n,c>1&&(s=s.replace("1x.jpg","2x.jpg").replace("1x.png","2x.png")),e.css("background-image",s),t()});else if(2===s){var u=e.attr("data-tileclass");Vt.loadImageCached(a,r,function(i){var n,a=l("i/play@1x.png")+",",s="normal_video"==u?a:"";"undefined"!=typeof i?n="url('"+i.src+"')":(n=l("i/tile_fallback@1x.jpg"),e.css("background-size","auto auto"),c>1&&(n=n.replace("1x.jpg","2x.jpg").replace("1x.png","2x.png"),e.css("background-size","844px 591px")));var r=s+n;c>1&&(r=r.replace("1x.png","2x.png")),e.css("background-image",r),t()})}else if(3===s){n=o()?"url("+chrome.runtime.getURL("a/i/tile_fallback@1x.jpg")+")":"url(i/tile_fallback@1x.jpg)",c>1&&(n=n.replace("1x.jpg","2x.jpg").replace("1x.png","2x.png"));var d="true"===e.attr("data-hasplaybutton");Vt.loadImageCached(a,r,function(i){var a=l("i/play@1x.png")+",",s=d?a:"",r="";"undefined"!=typeof i&&(r="url('"+i.src+"'),"),r+=n;var o=s+r;c>1&&(o=o.replace("1x.png","2x.png")),e.css("background-image",o);var u=(d?"50px 50px, ":"")+"cover, auto";c>1&&(u=(d?"50px 50px, ":"")+"cover, 844px 591px");var h=(d?"center, ":"")+"center, center";e.css("background-size",u),e.css("background-position",h),t()})}},"getTaggedWithMessage":function(e){return e?e==X.UNTAGGED?" "+Pt.callTrans("tag.areuntagged"):" "+Pt.callTrans("tag.havebeentaggedwith")+" <em>"+k(e)+"</em>":""},"showEmpty":function(e,t){if(e){var i,n,a,s=this.contentTypeControl.key();if(s=s?Pt.callTrans("search."+s+"s"):Pt.callTrans("search.items"),t)a=t.img,i=t.title,n=t.message;else{var r=this.getCurrentLocation().state;this.searchField.val().length?(a="search",i=Pt.callTrans("search.noresultsfound"),n="allitems"==this.searchSectionFilter?Pt.callTrans("search.nomatchesforsearch"):Zt.selectedTag?Pt.callTrans("search.matchedyoursearchforwtags").replace("xxxxx",s).replace("yyyyy",Pt.callTrans("queue.search_"+this.searchSectionFilter)).replace("zzzzz",this.getTaggedWithMessage(Zt.selectedTag)).replace("aaaaa",k(this.searchField.val().trim())):Pt.callTrans("search.matchedyoursearchfor").replace("xxxxx",s).replace("yyyyy",Pt.callTrans("queue.search_"+this.searchSectionFilter)).replace("aaaaa",k(this.searchField.val().trim()))):Zt.selectedTag?(a="tag",i=Zt.selectedTag==X.UNTAGGED?Pt.callTrans("tag.nountaggeditems"):Pt.callTrans("tag.nottagged"),n=Pt.callTrans("search.nobeentagged").replace("xxxxx",s).replace("yyyyy",Pt.callTrans("queue.section_"+r.section.toLowerCase())).replace("zzzzz",this.getTaggedWithMessage(Zt.selectedTag))):s!=Pt.callTrans("search.items")?(a=r.section,i=Pt.callTrans("search.nofound",null,null,s),n=Pt.callTrans("search.thereareno")+" "+s+" "+Pt.callTrans("search.inyour")+" "+Pt.callTrans("queue.section_"+r.section.toLowerCase())+"."):"queue"==r.section||"home"==r.section?(a="queue",i=Pt.callTrans("search.yourqueueisempty"),n=Pt.callTrans("search.learnhowexpanded","<a href='http://getpocket.com/add' target='_blank'>","</a>")):"favorites"==r.section?(a="favorites",i=Pt.callTrans("search.youhavenofavorites"),n=Pt.callTrans("search.favoritesemptymsg")):"archive"==r.section&&(a="archive",i=Pt.callTrans("search.yourarchiveismpty"),n=Pt.callTrans("search.archiveemptymsg").replace("*","")),"queue"!=r.section&&"home"!=r.section||!zt.GSFStatus.active||this.searchField.val().length||$(".item_placeholder").length||($("#queue").prepend('<li class="item item_placeholder"></li>'),this.gsfAddPlaceholderEvents()),"queue"!=r.section&&"home"!=r.section||zt.externalUserSettings.sawemptynotice||this.searchField.val().length||Zt.selectedTag||s!=Pt.callTrans("search.items")||(n=Handlebars.templates.queue_noticecontainer(dictJSON),n=n.replace(/\*(.*)\*/i,"<strong>$1</strong>").replace(/\*(.*)\*/i,'<a href="http://getpocket.com/add?sb=1" target="_blank">$1</a>'),zt.externalUserSettings.sawemptynotice=!0,Kt.saveExternalUserSettings())}this.emptyCell||(this.emptyCell=$('<div id="queue_empty"></div>'),this.emptyCell.html("<h3></h3><p></p>"),$("#queue_list_wrapper").append(this.emptyCell));var o=this.emptyCell.children("h3");o.html((a?'<img src="/a/i/icon_m_'+a.toLowerCase()+'.png" />':"")+i),a&&this.emptyCell.find("img").addClass("img-"+a),this.emptyCell.children("p").html(n),n.indexOf("notice_container")>-1&&setTimeout(function(){$(".notice_container").addClass("notice_container_active")},50)}(!zt.GSFStatus.active||"queue"!=this.state.section&&"home"!=this.state.section||this.searchField.val().length||Zt.selectedTag)&&$("#queue_list_wrapper").toggleClass("empty",e),this.notificationRow&&this.notificationRow.removeClass("hidden")},"setView":function(e){this.selectedView!=e&&(("undefined"==typeof zt.externalUserSettings.lastQueueView||zt.externalUserSettings.lastQueueView!==e)&&(zt.externalUserSettings.lastQueueView=e,Kt.saveExternalUserSettings()),this.queueList.parent().addClass("loading"),this.notificationRow&&this.notificationRow.addClass("hidden"),this.selectedView&&($("#page_queue").removeClass(this.selectedView),$("#page .pkt-nav .leftItem .selected").removeClass("selected")),$("#page_queue").addClass(e),$("#pagenav_gridlist").removeClass("pagenav_gridview pagenav_listview").addClass("pagenav_"+e+"view"),this.showBulkEdit(!1),this.selectedView=e)},"showArticleFilterMenu":function(e){!this.articleFilterMenu,this.articleFilterMenu.show(e),this.articleFilterMenu.object.css("display","block")},"showShareMenu":function(e){var i=this;if(e){e=$(e);var n=e.parents(".item");if(this.sharedItem=i.itemsByID[e.parents(".item").attr("id").replace(/i([0-9]+)/,"$1")],this.shareAnchor=e,!this.shareMenu){for(var a=[],s=0;s<Qt.sharers.length;s++){var r=Qt.sharers[s];a.push(t(s,r.name))}var o=new wt({"id":"shareMenuContents","class":"titleItem shareMenuSelector","nodeName":"h2","append":$("#container"),"list":a,"selectCallback":function(e,t){var n=$(t).attr("val"),a=Qt.sharers[n];return a?(i.shareMenu.show(!1),a.share(i.sharedItem,i.shareAnchor),!0):!1},"callback":function(){},"hideUntilSet":!0});this.shareMenu=new Mt("shareMenu",o.ul,$("#container"),{"onHide":function(){$(".pendingDialog").removeClass("pendingDialog")},"positions":["bottom","bottomright","bottomleft","top","topleft","topright"],"xOffset":0}),this.shareMenu.sizeObject=o.ul;for(var l=this.shareMenu.object.find("li"),s=0;s<l.length;s++){var c=$(l[s]),u=c.find("a"),d=Qt.sharers[parseInt(c.attr("val"),10)],h=d.iconname;u.addClass("share-"+h)}o.object.remove(),this.shareMenu.object.addClass("titleSelector")}var f=$(this.shareMenu.sizeObject).find(".share-permanent").parent("li");if(f.length){var r=Qt.sharers[f.attr("val")];r&&r.setPermanentLink("http://getpocket.com/library/?pl_i="+i.sharedItem.item_id,f)}var p=$(this.shareMenu.sizeObject).find(".share-original").parent("li");if(p.length){var r=Qt.sharers[p.attr("val")];if(r){var g=i.sharedItem.resolved_url||i.sharedItem.given_url||i.sharedItem.original_url||i.sharedItem.url;r.setExternalLink(g,p)}}}n.toggleClass("pendingDialog",void 0!=e),this.shareMenu.show(e)},"confirmDelete":function(e){var t=$(e).closest(".item"),i=t.attr("id").replace(/^i/,""),n=this;s({"anchor":$(e),"title":Pt.callTrans("confirm.areyousure"),"message":!1,"xOffset":4,"confirm":{"title":Pt.callTrans("cta.delete"),"action":function(){n.takeActionOnItem("delete",!0,i,void 0,!0)}},"onShow":function(){t.addClass("pendingDialog")},"onHide":function(){t.removeClass("pendingDialog")}})},"showConfirmDialog":function(e,t,i,n,a){if("string"==typeof e||"string"==typeof t){var s='<div class="overlay_detail ';if(s+="string"==typeof i?'overlay_detail_confirm">':'webview_warning">',"string"==typeof e&&(s+="<h3>"+e+"</h3>"),"string"==typeof t)for(var r=t.split("|"),o=0;o<r.length;o++)s+="<p>"+r[o]+"</p>";"string"==typeof i?(dictJSON.manual.confirmbuttontext=i,s+=Handlebars.templates.queue_confirmdialog_cancel(dictJSON)):s+=Handlebars.templates.queue_confirmdialog_nocancel(dictJSON),At.setDetail(s),At.show();var l=$(".overlay_detail");"string"==typeof i&&l.find(".button-cancel").click(function(e){e.preventDefault(),At.hide(),"function"==typeof a&&a()}),l.find(".button-confirm").click(function(e){e.preventDefault(),At.hide(),"function"==typeof n&&n()})}},"tagsReady":function(e){this.buildPopoverTagList(e)},"buildPopoverTagList":function(e){"/a/queue/"==ai.tagUrlPrefix&&(ai.tagUrlPrefix="/a/queue/grid/"),this.tagList=[];var t=$("#pagenav_tagfilter ul");t.children().remove(),t.append('<li val="all"><a href="'+ai.tagUrlPrefix+'">'+Pt.callTrans("queue.allitems")+"</a></li>"),t.append('<li val="untagged"><a href="'+ai.tagUrlPrefix+'_untagged_">'+Pt.callTrans("queue.tag_untaggeditems")+"</a></li>");for(var i=0;i<e.length;i++)$.trim(k(e[i])).length&&(this.tagList.push(k(e[i])),t.append('<li val="'+encodeURIComponent(k(e[i]))+'"><a href="'+ai.tagUrlPrefix+encodeURIComponent(k(e[i]))+'">'+k(e[i])+"</a></li>"));$(".tag_clear").attr("href",ai.tagUrlPrefix)},"actionToggle":function(e,t){var i=$(t).closest(".item"),n=i.attr("id").replace(/^i/,"");this.takeActionOnItem(e,!$(t).parent().hasClass("selected"),n,void 0,!0)},"takeActionOnItem":function(e,t,i,n,a){if(i){var n=n?n:0,s=this,r=this.inited?$("#i"+i):!1,o=!1,l=this.itemsByID[i],c={"itemId":i,"item":l};"mark"==e?(c.action="mark",c.on=t?1:0,r&&(r.addClass("marked"),(!this.searchStateMode&&("queue"==this.stateSelector.value&&t||"archive"==this.stateSelector.value&&!t)||this.searchStateMode&&("allitems"!==s.searchSectionFilter||"mylist"==s.searchSectionFilter&&t||"archive"==s.searchSectionFilter&&!t))&&(o=!0,this.items.splice($.inArray(l,this.items),1),delete this.itemsByID[l.item_id]),r.find(".action_mark").toggleClass("selected",t).toggleClass("action_mark_archived",t),c.on?(gt.show(Pt.callTrans("notification.itemarchived")),zt.GSFStatus.active&&(zt.externalUserSettings.sawarchivetooltip?s.gsfRecenterTooltip(2e3):s.gsfCheckArchiveTooltip(2e3))):gt.show(Pt.callTrans("notification.addedtolist")))):"favorite"==e?(c.action="favorite",c.on=t?1:0,r&&(l.favorite=c.on,r.addClass("marked"),"favorites"!=this.stateSelector.value||t||(o=!0),r.find(".action_favorite").toggleClass("selected",t))):"delete"==e&&t&&(c.action="delete",c.on=1,r&&(this.items.splice($.inArray(l,this.items),1),delete this.itemsByID[l.item_id],r.addClass("marked"),o=!0,r.find(".action_delete").toggleClass("selected",t),gt.show(Pt.callTrans("notification.itemdeleted")),zt.GSFStatus.active&&s.gsfRecenterTooltip(2e3))),!this.batch&&a&&ai.data.itemAction({"data":c}),r&&(o?(setTimeout(function(){var e=r.find(".thumb");if(e.length){var t=e.css("background-size");-1==t.indexOf(",")&&e.css("background-size",r.width()+"px auto")}var i=r;i.on("webkitTransitionEnd transitionend msTransitionEnd oTransitionEnd",function(e){$(e.target).hasClass("item")&&($(e.target).off("webkitTransitionEnd transitionend msTransitionEnd oTransitionEnd").hide(),s.reflowTiles(),s.highlightItemCheckDeletedMarked(),s.processLazyLoadScroll())}),i.addClass("item-column-hidden")},n),clearTimeout(this.checkIfNeedsMoreTO),this.checkIfNeedsMoreTO=setTimeout(function(){s.checkIfRunningLow()},n+100)):this.addButtonsToRow(!1,r),this.batch||this.checkIfRunningLow())}},"addButtonsToRow":function(e,t,i){function n(e){return a.bulkEditMode||e.metaKey||e.ctrlKey||e.altKey||e.shiftKey}var a=this,t=t||$(e),i=i||{};0===t.children("ul.buttons").size()&&(dictJSON.manual.item_buttonarchived=i.archived?"selected":"",dictJSON.manual.item_buttonfavorited=i.favorite?"selected":"",t.append(Handlebars.templates.queue_itembuttons(dictJSON)),t.find(".action_mark a").click(function(e){e.preventDefault(),n(e)||a.actionToggle("mark",this)}),t.find(".action_delete a").click(function(e){e.preventDefault(),n(e)||a.confirmDelete(this)}),t.find(".action_tag a").click(function(e){e.preventDefault(),n(e)||a.editItemTags(this)}),t.find(".action_favorite a").click(function(e){e.preventDefault(),n(e)||a.actionToggle("favorite",this)}),t.find(".action_share a").click(function(e){e.preventDefault(),n(e)||a.showShareMenu(this)}),t.find(".buttons a").click(function(e){!n(e)&&a.searchStateMode&&a.saveSearchStateToPrevSearches()}))},"checkUserValidPassword":function(){function e(e,t){var i=$("#"+e).parents(".form-field"),n=i.find(".error-bubble");if(t){var a=n.height();a>16?n.addClass("error-bubble-twoliner"):n.removeClass("error-bubble-twoliner"),i.hasClass("form-field-error")||i.removeClass("form-field-verified"),i.addClass("form-field-error")}else i.hasClass("form-field-verified")||(i.addClass("form-field-verified"),PocketAnalytics.action("verified_"+$("#"+e).attr("id"),"interact","packagedapp")),i.removeClass("form-field-error")}function t(t){if("undefined"==typeof t||"blur"==t.type&&$(this).val().length||$(t.target).parent().hasClass("form-field-error")){var i=this;return"undefined"==typeof t&&(i=$("#password")),$.trim($(i).val()).length<6?(e("password",!0),!1):(e("password",!1),!0)}}var i=this;if(!$(At.overlayDetail).hasClass("overlay_createpasswordcontainer")){PocketAnalytics.action("addpassword","view","packagedapp");var n;d("PromptPasswordDetails",function(e){n=JSON.parse(e.PromptPasswordDetails);var a=function(e,t){var i=new XMLHttpRequest;i.responseType="blob",i.onload=function(){t(window.URL.createObjectURL(i.response),e)},i.open("GET",e,!0),i.send()},s=$(Handlebars.templates.init_requirepassword(dictJSON));if(s.find(".email").html(n.email),s.find(".name").html(n.name),"string"==typeof n.avatar){var r=n.avatar.split("?")[0]+"?sz=160";a(r,function(e){s.find(".avatar").css("backgroundImage","url("+e+")")})}At.setDetail(s),At.show(),s.find(".form-changepassword").append($('input[name="ct"]'),$(".onetimetoken")),At.overlayScreen.addClass("overlay_screen_light"),setTimeout(function(){$(".overlay_createpasswordcontainer").find("#password").focus()
},50),$("#password").on("keyup blur",t).on("focus",function(){PocketAnalytics.action("addpassword_focus","interact","packagedapp")}).on("blur",function(){PocketAnalytics.action("addpassword_blur","interact","packagedapp")}),$(".password-btn-add").click(function(e){if(e.preventDefault(),!$(this).hasClass("button-disabled")){var a=this;if($(this).addClass("button-disabled"),$(".form-changepassword").addClass("password-processing"),t()){var s={"source":"google_chromeapp","access_token":Wt.accessToken,"sso_access_token":n.token,"newpassword":$("#password").val(),"consumer_key":PKTConsumerKey};LoginPage.apiRequest({"path":"acctchange","data":s,"success":function(){i.promptPassword=!1,f("PromptPassword"),f("PromptPasswordDetails"),$(".overlay_createpasswordcontainer .form-error").remove(),$(".overlay_createpasswordcontainer .form-msg").addClass("form-msg-active"),PocketAnalytics.action("addpassword_form_success","interact","packagedapp"),setTimeout(function(){i.showEmpty(!1),At.overlayScreen.find(".content_detail").html(""),At.overlayScreen.removeClass("overlay_screen_light"),At.hide(),setTimeout(function(){i.reloadList()},500)},2e3)},"error":function(e){var t=Pt.callTrans("login.servererror");"object"==typeof e&&"string"==typeof e.getResponseHeader("X-Error")&&(t=e.getResponseHeader("X-Error")),PocketAnalytics.action("addpassword_form_error","interact","packagedapp"),$(".overlay_createpasswordcontainer .form-error").remove(),$(".overlay_createpasswordcontainer h2").after('<div class="form-error">'+t+"</div>"),$(".form-changepassword").removeClass("password-processing"),$(a).removeClass("button-disabled")}})}else PocketAnalytics.action("addpassword_error","interact","packagedapp"),$(".form-changepassword").removeClass("password-processing"),$(a).removeClass("button-disabled"),$("#password").focus()}})})}},"gsfInitialize":function(){this.queueFetching||("undefined"==typeof zt.GSFStatus.active&&(zt.GSFStatus={"active":!1,"sawinitoverlay":!1,"extinstalled":!1,"articleview":!1,"articleviewconfirm":!1,"articleviewitemactions":!1,"webviewconfirm":!1,"saveditems":[]},"string"==typeof LoginPage.action&&"signup"==LoginPage.action?(zt.GSFStatus.active=!0,zt.externalUserSettings.sawpremupsell=!0,zt.externalUserSettings.sawarchivetooltip=!1,Kt.saveExternalUserSettings()):(zt.externalUserSettings.sawpremupsell=!0,Kt.saveExternalUserSettings()),Kt.saveGSFStatus()),!zt.GSFStatus.active||!Kt.pages.queue.isOpen||"queue"!=this.state.section&&"home"!=this.state.section||this.searchField.val().length||($("#queue_list_wrapper").hasClass("empty")&&($("#queue_list_wrapper").removeClass("empty"),".item_placeholder".length||($("#queue").prepend('<li class="item item_placeholder"></li>'),this.gsfAddPlaceholderEvents())),zt.GSFStatus.sawinitoverlay||$(".overlay_detail").is(":visible")?this.gsfCheckLogic():this.gsfOpenInitOverlay()))},"gsfOpenInitOverlay":function(e){function t(){window.open("http://getpocket.com/welcome_packagedredirect"),zt.GSFStatus.extinstalled=!0,Kt.saveGSFStatus(),zt.externalUserSettings.extinstalled=!0,Kt.saveExternalUserSettings(),At.hide(),i.gsfCheckLogic()}var i=this;At.setDetail(Handlebars.templates.gsf_overlayone(dictJSON)),e?t():setTimeout(function(){Kt.hideNotification(),At.show(),PocketAnalytics.action("gsf_congrats","view","packagedapp"),$(".gsf_one .button").click(function(e){e.preventDefault(),PocketAnalytics.action("gsf_congrats_getstarted","click","packagedapp"),zt.GSFStatus.sawinitoverlay=!0,Kt.saveGSFStatus(),PocketUserApps.ready&&PocketUserApps.installedExtension()&&(zt.GSFStatus.extinstalled=!0,Kt.saveGSFStatus(),zt.externalUserSettings.extinstalled=!0,Kt.saveExternalUserSettings(),At.hide(),i.gsfCheckLogic()),$(".gsf_one").removeClass("gsf_active"),$(".gsf_two").addClass("gsf_active"),PocketAnalytics.action("gsf_savethings","view","packagedapp");var t=$(".gsf_progress").find("li");t.first().removeClass("selected"),t.last().addClass("selected")}),$(".gsf_two .button").click(function(){t(),PocketAnalytics.action("gsf_savethings_connectnow","click","packagedapp")}),$(".gsf_two .skip_link, .gsf_three .button").click(function(e){e.preventDefault(),At.hide(),i.gsfCheckLogic(),PocketAnalytics.action("gsf_savethings_exit","click","packagedapp")})},1e3)},"gsfCheckLogic":function(){function e(e){var t=e.attr("id").substring(1),i=r.itemsByID[t],n=/youtube.com\/watch|vimeo.com\/\d/;return"object"==typeof i&&2==i.has_video||n.test(i.given_url)?"video":"article"}function t(e){var t=!1;for(i=0;i<zt.GSFStatus.saveditems.length;i++)zt.GSFStatus.saveditems[i].id==e&&(t=!0);return t}function a(){var e=!1;for(i=0;i<zt.GSFStatus.saveditems.length;i++)"article"==zt.GSFStatus.saveditems[i].type&&(e=!0);return e}function s(){var e=!1;for(i=0;i<zt.GSFStatus.saveditems.length;i++)"video"==zt.GSFStatus.saveditems[i].type&&(e=!0);return e}var r=this;if(zt.GSFStatus.active&&!r.archiveTooltipPending){"object"==typeof this.gsftooltip&&this.gsftooltip.show(!1);var o=this.queueList.children(".item"),l=o.not(".removed,.item_placeholder"),c=l.length,u=zt.GSFStatus.saveditems.length;if(u>=0&&c>0&&!t(l.first().attr("id").substring(1))&&(zt.GSFStatus.saveditems.push({"id":l.first().attr("id").substring(1),"type":e(l.first())}),u++,Kt.saveGSFStatus()),3>u||5>u&&(!s()||!a())?$(".item_placeholder").length||($(".item").length?$(".item").last().after('<li class="item item_placeholder"></li>'):$("#queue").prepend('<li class="item item_placeholder"></li>'),this.gsfAddPlaceholderEvents()):$(".item_placeholder").length&&$(".item_placeholder").remove(),0==u)this.gsftooltip=zt.GSFStatus.extinstalled||PocketUserApps.ready&&PocketUserApps.installedExtension()?n($(".item_placeholder"),Pt.callTrans("gsf.savefirstitem"),Pt.callTrans("gsf.ventureoutandsave")):n($("#pagenav_addarticle"),Pt.callTrans("gsf.savefirstitem"),Pt.callTrans("gsf.addtopockethere")),"gsf_tooltip_savefirst"!=PocketAnalytics.prevAction&&PocketAnalytics.action("gsf_tooltip_savefirst","view","packagedapp");else if(u>0&&!zt.GSFStatus.articleview&&$(".item").not(".removed,.item_placeholder").length){var d=Pt.callTrans("gsf.savedfirstitemclick");u>1&&(d=Pt.callTrans("gsf.savedfirstitemclickalt")),this.gsftooltip=n($(".item").not(".removed,.item_placeholder").first(),Pt.callTrans("gsf.success")+"!",d),"gsf_tooltip_success"!=PocketAnalytics.prevAction&&PocketAnalytics.action("gsf_tooltip_success","view","packagedapp")}else if(1==u)this.gsftooltip=n($(".item_placeholder"),Pt.callTrans("gsf.savemore"),Pt.callTrans("gsf.findarticlevideo")),"gsf_tooltip_savemore"!=PocketAnalytics.prevAction&&PocketAnalytics.action("gsf_tooltip_savemore","view","packagedapp");else if(2==u||u>0&&5>u&&(!s()||!a())){var h="";u>2&&(h="_"+(u-1)),s()?a()?(this.gsftooltip=n($(".item_placeholder"),Pt.callTrans("gsf.savemore"),Pt.callTrans("gsf.findarticlevideo")),"gsf_tooltip_savemoreagain"!=PocketAnalytics.prevAction&&PocketAnalytics.action("gsf_tooltip_savemoreagain","view","packagedapp")):(this.gsftooltip=n($(".item_placeholder"),Pt.callTrans("gsf.savedfewnice"),Pt.callTrans("gsf.perfectarticles")),PocketAnalytics.prevAction!="gsf_tooltip_savearticles"+h&&PocketAnalytics.action("gsf_tooltip_savearticles"+h,"view","packagedapp")):(this.gsftooltip=n($(".item_placeholder"),Pt.callTrans("gsf.greatplacesavevideos"),Pt.callTrans("gsf.savefromyoutube")),PocketAnalytics.prevAction!="gsf_tooltip_savevideos"+h&&PocketAnalytics.action("gsf_tooltip_savevideos"+h,"view","packagedapp"))}else $(".gsf_device_reminder_container").length&&(this.gsftooltip=n($(".gsf_device_reminder_container"),Pt.callTrans("gsf.pockettogo"),Pt.callTrans("gsf.connectmobile"),["top"]),"gsf_tooltip_taketogo"!=PocketAnalytics.prevAction&&PocketAnalytics.action("gsf_tooltip_taketogo","view","packagedapp"),$("body").one("click",function(){"object"==typeof r.gsftooltip&&r.gsftooltip.show(!1)})),zt.GSFStatus.active=!1,Kt.saveGSFStatus(),zt.externalUserSettings.newreleasewelcome=!0,Kt.saveExternalUserSettings()}},"gsfAddPlaceholderEvents":function(){$(".item_placeholder").click(function(e){e.preventDefault();var t=$(".alt-tooltip");t.length&&!t.hasClass("tooltip-wiggle")&&t.is(":visible")&&(t.addClass("tooltip-wiggle"),t.one("webkitAnimationEnd animationend msAnimationEnd oAnimationEnd",function(){$(this).removeClass("tooltip-wiggle")}))})},"gsfRecenterTooltip":function(e){this.gsftooltip.show(!1);var t=this;setTimeout(function(){t.gsfCheckLogic()},e)},"gsfCheckArchiveTooltip":function(e){var t=this;t.archiveTooltipPending||(zt.externalUserSettings.sawarchivetooltip=!0,Kt.saveExternalUserSettings(),t.archiveTooltipPending=!0,setTimeout(function(){var e=n($("#queue_title > a"),Pt.callTrans("notification.itemarchived"),Pt.callTrans("gsf.toviewarchived"));e.object.css("marginTop","10px"),$("#queue_title > a").one("click",function(){t.archiveTooltipPending=!1,e.show(!1),t.gsfCheckLogic()}),PocketAnalytics.action("gsf_tooltip_itemarchived","view","packagedapp")},e))},"showSearchState":function(e,t){var i=this;if(e){$.trim(i.searchField.val()).length||($(".searchtoolbar_screen").addClass("searchtoolbar_screen_active"),i.showRecentSearchesList(),$("#searchnav_sortby > a").addClass("searchnav-sortby-disabled"),$(".section-filter").addClass("section-filter-disabled")),$(".searchtoolbar_screenbar").addClass("searchtoolbar_screen_active"),$("#page_queue").hasClass("list")?$(".searchtoolbar_queue").addClass("searchtoolbar-listmode"):$(".searchtoolbar_queue").removeClass("searchtoolbar-listmode"),$(".searchtoolbar_queue").addClass("active"),Kt.pages.queue.isOpen&&$("#queue_title").hide();var n=i.contentTypeControl.key()?i.contentTypeControl.key():"",a=Zt.selectedTag?Zt.selectedTag:"";if(!t){var s=zt.externalUserSettings.prevnewsearchstates;s?s++:s=1,4>s&&(zt.externalUserSettings.prevnewsearchstates=s,Kt.saveExternalUserSettings()),i.clearSearchChips(),n.length&&i.insertSearchChip(i.deriveTagNameFromContentTypeFilter(n),"contenttype"),a.length&&i.insertSearchChip(a,"tag"),"favorites"==i.state.section&&i.insertSearchChip(Pt.callTrans("queue.mainmenu_favorites"),"favorite"),i.searchChipLength>1?($(".wrapper_search").addClass("wrapper_search_expanded"),$(".search-instr-recent").addClass("search-instr-recent-expanded")):($(".wrapper_search").removeClass("wrapper_search_expanded"),$(".search-instr-recent").removeClass("search-instr-recent-expanded")),"archive"==i.state.section?(i.searchSectionFilter="archive",$(".section-filter-value").text(Pt.callTrans("queue.search_archive"))):i.premiumMode?(i.searchSectionFilter="allitems",$(".section-filter-value").text(Pt.callTrans("queue.search_allitems"))):(i.searchSectionFilter="mylist",$(".section-filter-value").text(Pt.callTrans("queue.search_mylist"))),i.searchRecentSearch=!1}setTimeout(function(){if(i.searchField.focus(),!$(".searchtoolbar_queue").data("init")){$("#search_close").on("click","a",function(e){e.preventDefault(),PocketAnalytics.action("search_close","interact","packagedapp"),i.showSearchState(!1)}),$(".searchtoolbar_screen").click(function(e){e.preventDefault(),i.showSearchState(!1)}),i.searchField.focus(function(){$(".search-chip-selected").removeClass("search-chip-selected"),$(window).off("keydown.removechip")}),$(".searchtoolbar_queue").find(".section-filter").click(function(e){if(e.preventDefault(),!$(this).hasClass("section-filter-disabled")){var t=$(this).find(".section-filter-options");t.hasClass("section-filter-options-active")?$(".searchtoolbar_screen,.searchtoolbar_screenbar").off("click.closeSectionFilter"):$(".searchtoolbar_screen,.searchtoolbar_screenbar").off("click.closeSectionFilter").one("click.closeSectionFilter",function(){$(".searchtoolbar_queue").find(".section-filter").trigger("click")}),$(this).toggleClass("section-filter-active"),t.toggleClass("section-filter-options-active")}}),i.searchSectionFilter=i.premiumMode?"archive"==i.state.section?"archive":"allitems":"archive"==i.state.section?"archive":"mylist",$(".section-filter-options").find("a").click(function(e){e.preventDefault(),e.stopImmediatePropagation();var t=$(".section-filter-value"),n=$(this).attr("class");i.searchSectionFilter!=n&&(t.text($(this).text()),i.searchSectionFilter=n,$(".section-filter-options").hasClass("section-filter-options-active")&&($(".searchtoolbar_queue").find(".section-filter").trigger("click"),$.trim(i.searchField.val()).length&&i.reloadList()))}),i.searchSortBy=i.premiumMode?"relevance":"newest",dictJSON.manual.premium=i.premiumMode?1:0;var e=Handlebars.templates.queue_sortsearchdialog(dictJSON);i.sortSearchMenu=new Mt("searchSortMenu",e,$(".searchtoolbar_screenbar"),{"positions":["bottom"],"hideOnClickInPopover":!0,"xOffset":0,"disableHideOnScroll":!0,"fixedPosition":!0,"onShow":function(){$(".section-filter-options").hasClass("section-filter-options-active")&&$(".searchtoolbar_queue").find(".section-filter").trigger("click"),$("#searchSortMenu").data("init")||($("#searchSortMenu").find("a").click(function(e){e.preventDefault(),$(this).hasClass("search-sortby-selected")||($(".search-sortby-options").find("a").removeClass("search-sortby-selected"),i.searchSortBy=$(this).attr("class"),$(this).addClass("search-sortby-selected"),$.trim(i.searchField.val()).length&&i.reloadList())}),$("#searchSortMenu").data("init",!0)),$("#searchnav_sortby > a").addClass("searchnav-sortby-active")},"onHide":function(){$("#searchnav_sortby > a").removeClass("searchnav-sortby-active")}}),$("#searchnav_sortby > a").click(function(e){e.preventDefault(),$(this).hasClass("searchnav-sortby-disabled")||i.sortSearchMenu.show($("#searchnav_sortby > a"))})}$(".searchtoolbar_queue").data("init",!0)},100),this.searchStateMode=!0,this.searchStateFirstSearch=!0}else if($(".searchtoolbar_screen,.searchtoolbar_screenbar").removeClass("searchtoolbar_screen_active"),i.hideRecentSearchesList(),$(".searchtoolbar_queue").removeClass("active"),$(".search-chip-selected").removeClass("search-chip-selected"),$(".section-filter-options").removeClass("section-filter-options-active"),$(window).off("keydown.removechip"),Kt.pages.queue.isOpen&&$("#queue_title").show(),this.searchStateMode=!1,!t){i.saveSearchStateToPrevSearches(),$("#searchnav_sortby > a").addClass("searchnav-sortby-disabled"),$(".section-filter").addClass("section-filter-disabled");var r=i.searchSectionFilter,o=$.trim(i.searchField.val());"archive"==i.state.section?$(".section-filter-options").find(".archive").trigger("click"):$(".section-filter-options").find(".all").trigger("click"),$(".searchtoolbar_queue").find("h2").text(Pt.callTrans("queue.search")),i.searchField.val(""),i.searchFieldEmptyState=!0,$(".wrapper_search").removeClass("wrapper_search_loading"),("allitems"!==r&&"archive"!==i.state.section||"archive"!==r&&"archive"==i.state.section||o.length)&&i.reloadList()}},"insertSearchChip":function(e,t){var i=this,n=$(Handlebars.templates.queue_searchchip(dictJSON));n.find("p").text(e),n.find(".search-chip-icon").addClass("search-chip-"+t),n.find(".search-chip-delete").click(function(e){e.preventDefault(),e.stopImmediatePropagation(),$(this).parents(".search-chip").remove(),i.searchRecentSearch=!1,i.searchChipLength--,i.adjustInputAreaForChips(),i.reloadList()}),n.click(function(){$(".search-chip-selected").removeClass("search-chip-selected"),$(this).addClass("search-chip-selected"),$(window).off("keydown.removechip").on("keydown.removechip",function(e){var t=e.keyCode||e.which,n=$(".search-chip-selected");n.length?8==t&&(e.preventDefault(),e.stopImmediatePropagation(),n.remove(),i.searchField.focus(),$(window).off("keydown.removechip")):$(window).off("keydown.removechip")})}),$(".search-input").before(n),this.searchChipLength++,i.adjustInputAreaForChips(),this.searchField.attr("placeholder","")},"adjustInputAreaForChips":function(){},"clearSearchChips":function(){$(".search-input").siblings().remove(),this.searchChipLength=0,this.searchField.attr("placeholder",Pt.callTrans("queue.search"))},"deriveTagNameFromContentTypeFilter":function(e){var t="";return"video"==e&&(t=Pt.callTrans("queue.filter_videos")),"image"==e&&(t=Pt.callTrans("queue.filter_images")),"article"==e&&(t=Pt.callTrans("queue.filter_articles")),t},"deriveContentTypeFilterFromTagName":function(e){var t="";return e==Pt.callTrans("queue.filter_videos")&&(t="video"),e==Pt.callTrans("queue.filter_images")&&(t="image"),e==Pt.callTrans("queue.filter_articles")&&(t="article"),t},"deriveTagNameFromContentTypeFilter":function(e){var t="";return"video"==e&&(t=Pt.callTrans("queue.filter_videos")),"image"==e&&(t=Pt.callTrans("queue.filter_images")),"article"==e&&(t=Pt.callTrans("queue.filter_articles")),t},"saveSearchStateToPrevSearches":function(){this.saveSearchTO&&clearTimeout(this.saveSearchTO);var e={"search":$.trim(this.searchField.val())};if(e.search.length){if(this.searchChipLength){var t={};if($(".search-input-list .search-chip").each(function(){var e=$(this).find(".search-chip-icon");if(e.length){var i=e.attr("class").match(/icon\s*search-chip-(.*)/);i&&i.length>1&&(t["chip-"+i[1]]=$.trim($(this).find("p").text()))}}),t["chip-favorite"]?(e.scxt_key="in",e.scxt_val="favorites"):t["chip-tag"]?(e.scxt_key="tag",e.scxt_val=t["chip-tag"]):t["chip-contenttype"]&&(e.scxt_key="in",e.scxt_val=this.deriveContentTypeFilterFromTagName(t["chip-contenttype"])),this.searchChipLength>1){var i=t["chip-tag"]?t["chip-tag"]:"",n=t["chip-contenttype"]?this.deriveContentTypeFilterFromTagName(t["chip-contenttype"]):"";t["chip-favorite"]?e.search+=" "+$.trim(i+" "+n):t["chip-tag"]&&(e.search+=" "+$.trim(n))}}else e.scxt_key="",e.scxt_val="";Kt.data.send("saveRecentSearch",{"data":e},!0);for(var a=-1,s=0;s<this.recentSearches.length;s++){var r=this.recentSearches[s];if(r.search==e.search&&r.context_key==e.scxt_key&&r.context_value==e.scxt_val){a=s;break}}if(a>-1){for(var s=0;s<this.recentSearches.length;s++)a==s?this.recentSearches[s].sort_id=this.recentSearches.length-1:this.recentSearches[s].sort_id--;this.recentSearches=this.recentSearches.sort(function(e,t){return parseInt(t.sort_id)-parseInt(e.sort_id)})}else this.recentSearches=this.recentSearches.sort(function(e,t){return parseInt(t.sort_id)-parseInt(e.sort_id)}),this.recentSearches.pop(),this.recentSearches.unshift({"context_key":e.scxt_key,"context_value":e.scxt_val,"search":e.search,"sort_id":this.recentSearches.length?this.recentSearches[0].sort_id+1:0});u("recentSearches",JSON.stringify(self.recentSearches))}},"showRecentSearchesList":function(){var e=this,t=$(".search-instr-recent");if(this.premiumMode&&(t.find(".recentsearch").find("a").text(""),this.recentSearches)){this.recentSearches=this.recentSearches.sort(function(e,t){return parseInt(t.sort_id)-parseInt(e.sort_id)}),t.find(".recentsearch").removeClass("recentsearch-active");for(var i=0;i<this.recentSearches.length;i++){var n=this.recentSearches[i],a="",s=0,r=t.find(".recentsearch-"+(i+1)),o={};for(var l in n)"context_key"!=l&&"context_value"!=l||!n[l]?"search"==l&&(a+='<span class="search-fieldcontent">'+k(n[l])+"</span>"):o[l]=n[l];if(o.context_key&&o.context_value){var c=Handlebars.templates.queue_searchchip(dictJSON);"tag"==o.context_key?c=c.replace(/(-icon)(.*)("><\/span>.*\n.*<p>)(.*)(<\/p>)/,"$1 search-chip-tag$3"+k(o.context_value)+"$5"):"in"==o.context_key&&("favorites"==o.context_value?c=c.replace(/(-icon)(.*)("><\/span>.*\n.*<p>)(.*)(<\/p>)/,"$1 search-chip-favorite$3"+Pt.callTrans("queue.mainmenu_favorites")+"$5"):"shared"!=o.context_value&&(c=c.replace(/(-icon)(.*)("><\/span>.*\n.*<p>)(.*)(<\/p>)/,"$1 search-chip-contenttype$3"+e.deriveTagNameFromContentTypeFilter(o.context_value)+"$5"))),a=c+a}r.addClass("recentsearch-active").find("a").html(a).off("click").on("click",function(t){t.preventDefault(),e.clearSearchChips(),$(this).find(".search-chip").each(function(){var t=$(this).find(".search-chip-icon").attr("class").match(/icon\s*search-chip-(.*)/);t&&t.length>1&&e.insertSearchChip($(this).find("p").text(),t[1])}),e.searchField.val($(this).find(".search-fieldcontent").text()),e.searchFieldEmptyState=!1,/Trident/.test(navigator.userAgent)&&(e.searchFieldPrevLength=$.trim(e.searchField.val()).length),$(".searchtoolbar_screen").removeClass("searchtoolbar_screen_active"),e.hideRecentSearchesList(),$(".searchnav-sortby-disabled").removeClass("searchnav-sortby-disabled"),$(".section-filter-disabled").removeClass("section-filter-disabled"),e.searchChipLength&&e.searchField.css("width",12*$.trim(e.searchField.val()).length+"px"),e.searchField.focus(),e.searchRecentSearch=!0,e.reloadList()}),0==s?(r.addClass("recentsearch-nochips").removeClass("recentsearch-wchips"),r.find(".search-fieldcontent").removeClass("search-fieldcontentlimited")):(r.removeClass("recentsearch-nochips").addClass("recentsearch-wchips"),r.find(".search-fieldcontent").addClass("search-fieldcontentlimited"))}}var u="nonpremium";this.premiumMode?(t.attr("class","search-instr-recent search-instr-premium"),u="premium"):t.attr("class","search-instr-recent"),zt.externalUserSettings.prevnewsearchstates?t.addClass("search-"+u+"-prevsearches-"+zt.externalUserSettings.prevnewsearchstates):t.addClass("search-"+u+"-prevsearches-0"),t.addClass("search-instr-recent-active")},"hideRecentSearchesList":function(){$(".search-instr-recent").removeClass("search-instr-recent-active")},"highlightItemMove":function(e){var t=$("#queue").find(".item").not(".removed");if(t.length){if(this.itemHighlight){this.itemHighlight.removeClass("item-highlight");var i=null;do this.itemHighlight&&this.itemHighlight.length&&!this.itemHighlight.hasClass("removed")&&(i=this.itemHighlight),this.itemHighlight=e?this.itemHighlight.next():this.itemHighlight.prev(),this.itemHighlight.length&&this.itemHighlight.hasClass("loadingRow")&&(this.itemHighlight=e?this.itemHighlight.next():this.itemHighlight.prev()),this.itemHighlight.length&&!this.itemHighlight.hasClass("item")&&(this.itemHighlight=[]);while(this.itemHighlight.length&&this.itemHighlight.hasClass("removed"));if(!this.itemHighlight.length||this.itemHighlight.hasClass("removed")){if(!i)return this.resetHighlight(),void 0;this.itemHighlight=i}}else this.itemHighlight=t.first();this.itemHighlight.addClass("item-highlight"),this.itemHighlight.find(".buttons").length||this.addButtonsToRow(this.itemHighlight);var n=$("body"),a=n.scrollTop(),s=a,r=$(window).height()+a,o=this.itemHighlight.offset().top,l=this.itemHighlight.height(),c=20;o+c>r?n.animate({"scrollTop":a+(o-r+c+l)},300):s>o-c&&n.animate({"scrollTop":a-(s-o+c+l)},300)}},"highlightItemCheckDeletedMarked":function(){this.itemHighlight&&this.itemHighlight.length&&this.itemHighlight.hasClass("removed")&&(this.itemHighlight.next(".item").not(".removed").length?this.highlightItemMove(!0):this.highlightItemMove(!1))},"resetHighlight":function(){this.itemHighlight&&this.itemHighlight.removeClass("item-highlight"),this.itemHighlight=null},"highlightItemAction":function(e){if(this.itemHighlight){if("open"==e&&(PocketAnalytics.action("open_original","interact","packagedapp",1),this.itemHighlight.children("a").trigger("click")),"mark"==e&&(this.itemHighlight.find(".action_mark a").trigger("click"),PocketAnalytics.action("archive","interact","packagedapp",1)),"favorite"==e&&(this.itemHighlight.find(".action_favorite a").trigger("click"),PocketAnalytics.action("favorite","interact","packagedapp",1)),"delete"==e&&this.itemHighlight.find(".action_delete a").trigger("click"),"browseropen"==e){var t=this.itemForItemID(ai.itemHighlight.attr("id").replace("i",""));if("string"==typeof t.item_id){var i=t.resolved_url?t.resolved_url:t.given_url;window.open(I(i))}PocketAnalytics.action("item_open","interact","packagedapp",1)}"tag"==e&&this.itemHighlight.find(".action_tag a").trigger("click")}},"editItemTags":function(e){var t=$(e).parents(".item").get(),i=$(t),n=i.find(".tags"),a=$(n).find(".tag"),s=[];if(a.length)for(var r=0;r<a.length;r++)s.push($.trim($(a.get(r)).text()));this.showBulkTagsDialog(!1,!1,s,this.premiumMode?[]:null,i)},"validateTags":function(e){if(e.length)for(var t=0;t<e.length;t++)if(e[t].length>25)return Kt.showErrorNotification(Pt.callTrans("notification.tagsarelimited")+" "+e[t]+'"'),!1;return!0},"updateItemTags":function(e,t,i){if(e&&t){var n=e.find(".tags").children(".tag_container"),a=!1;if("tags_replace"==i)a=t;else{for(var s=t,r=n.find("a"),o=[],l=0;l<r.length;l++)o.push($(r.get(l)).text());if("tags_add"==i&&t.length){a=o;for(var l=0;l<t.length;l++)-1==$.inArray(t[l],o)&&a.push(t[l])}else"tags_remove"==i&&o.length&&(a=$.grep(o,function(e){return-1==$.inArray(e,s)}))}a&&(a.sort(),n.html(it(a,!0,!0)),this.checkTileTagOverflow(e)),e.find(".tags").toggleClass("hasTags",0!=a);for(var c=this.itemsByID[e.attr("id").replace(/^i/,"")],u={},l=0;l<a.length;l++){var d=a[l];u[d]={"item_id":c.item_id,"tag":d}}c.tags=u}},"tagRenamed":function(e,t){var e=e,t=t;this.queueList.find(".tags .tag_container a").each(function(){var i=$(this);i.text()==e&&(i.text(t),i.attr("href",ai.tagUrlPrefix+encodeURIComponent(t)))})},"tagDeleted":function(e){this.queueList.find(".tags .tag_container").each(function(){if(-1!=this.innerHTML.indexOf(e,0)){for(var t=$(this),i=[],n=t.find("a"),a=0;a<n.length;a++){var s=$(n.get(a)).text();s!=e&&i.push($(n.get(a)).text())}t.html(it(i,!0,!0))}})},"scrolled":function(){if(this.isOpen&&!$(document.body).hasClass("editing")){this.contentEl=this.contentEl||document.getElementById("content");var e=$(window).scrollTop(),t=$(window).width(),i=this.contentEl.scrollHeight;i&&e+t>=.8*i&&!this.loading&&(!this.searchStateMode&&this.remaining||this.searchStateMode&&this.searchHasMore)&&this.reloadList({"append":!0})}},"actionForName":function(e){var t,i;switch(e){case"mark":t="mark",i=!0;break;case"unmark":t="mark",i=!1;break;case"delete":t="delete",i=!0;break;case"favorite":t="favorite",i=!0;break;case"unfavorite":t="favorite",i=!1}return t?{"action":t,"on":i}:!1},"showBulkEdit":function(e){var t=this;if(e)this.bulkEditMode=!0,PocketAnalytics.action("bulk_edit_open","interact","webapp"),$("#page_queue").hasClass("list")&&this.bulkEditContainer.addClass("container-bulkedit-listmode"),$(".notifications-shares").is(":visible")||this.queueList.addClass("queue_list_mode_bulkedit"),this.bulkEditContainer.addClass("container-bulkedit-active");else{if(this.bulkEditMode=!1,!this.bulkEditContainer.hasClass("container-bulkedit-active"))return;this.bulkEditContainer.one("webkitTransitionEnd transitionend msTransitionEnd oTransitionEnd",function(){t.bulkEditContainer.removeClass("container-bulkedit-listmode"),t.bulkEditContainer.find(".bulkedit-status").children("p").text("")}),this.queueList.removeClass("queue_list_mode_bulkedit"),this.bulkEditContainer.removeClass("container-bulkedit-active"),this.queueList.children(".item").filter(".bulkeditselected").removeClass("bulkeditselected")}},"updateBulkEditWording":function(e){if("object"==typeof e&&e.length){var t=e.length,i=Pt.callTrans("queue.itemsselected");1==t&&(i=Pt.callTrans("queue.itemselected")),this.bulkEditContainer.find(".bulkedit-status").children("p").text(t+" "+i);var n=!0;e.each(function(e,t){$(t).find(".action_favorite").hasClass("selected")||(n=!1)}),this.bulkEditUnfavoriteMode=n,this.bulkEditContainer.find(".bulkedit-favorite").children("a").text(n?Pt.callTrans("queue.unfavorite"):Pt.callTrans("queue.favorite")),this.bulkEditContainer.find(".bulkedit-archive").children("a").text("archive"==this.state.section?Pt.callTrans("queue.readd"):Pt.callTrans("queue.archive"));var a=this.bulkEditContainer.find(".bulkedit-archive");"archive"==this.state.section?a.addClass("bulkedit-archive-readd").children("a").attr("title",Pt.callTrans("queue.readd")).text(Pt.callTrans("queue.readd")):a.removeClass("bulkedit-archive-readd").children("a").attr("title",Pt.callTrans("queue.archive")).text(Pt.callTrans("queue.archive"))}},"showBulkTagsDialog":function(e,t,i,n,a,s){function r(){e&&(h.find(".token-input-token").length?h.find(".button").removeClass("button-disabled"):h.find(".button").addClass("button-disabled"))}function o(){var e="|";$(".token-input-token").each(function(t,i){e+=$(i).find("p").text()+"|"});var t=$(".suggestedtag_detail").find(".token-suggestedtag-inactive");t.each(function(t,i){-1==e.indexOf("|"+$(i).text()+"|")&&$(i).removeClass("token-suggestedtag-inactive")})}function l(){var e="|";$(".token-input-token").each(function(t,i){e+=$(i).find("p").text()+"|"});var t=$(".token-suggestedtag").not(".token-suggestedtag-inactive");t.each(function(t,i){e.indexOf("|"+$(i).text()+"|")>-1&&$(i).addClass("token-suggestedtag-inactive")})}var c,u=this;if(u.tag_cxt_tags_cnt=0,u.tag_cxt_suggested_available=n?n.length:0,u.tag_cxt_entered=0,u.tag_cxt_suggested=0,u.tag_cxt_removed=0,e?(c+="Add tags <span>("+s+(1==s?" item":" items")+")</span>",dictJSON.manual.tags_count=s,dictJSON.manual.items_singular=1==s,c=Handlebars.templates.queue_bulktagdialog(dictJSON)):(dictJSON.manual.suggestedtags=n?1:null,c=Handlebars.templates.tag_edittagdialog(dictJSON)),At.setDetail(c),At.show(),n)if($(".suggestedtag_detail").on("click",".token-suggestedtag",function(e){e.preventDefault();var t=$(e.target);$("#edit-tags-input").tokenInput("add",{"id":h.find(".token-input-token").length,"name":t.text()}),t.addClass("token-suggestedtag-inactive"),u.tag_cxt_suggested++,u.tag_cxt_entered--,$(".token-input-input-token input").focus()}),n.length)u.fillSuggestedTags(n);else{$(".suggestedtag_detail").addClass("suggestedtag_detail_loading");var d=a;t||(d=u.itemsByID[a.attr("id").replace(/^i/,"")]),Kt.data.get("getSuggestedTags",{"data":{"url":d.given_url},"delegate":u,"doneSelector":"suggestedTagsCallback","errorSelector":"suggestedTagsError"})}var h=$(".overlay_detail");h.find(".close").click(function(e){e.preventDefault(),At.hide(),$("body").off("keydown.tags"),PocketAnalytics.action("bulk_edit_tag_exit","interact","webapp")}),h.find(".button").click(function(i){if(i.preventDefault(),!($(this).hasClass("button-disabled")||p&&Date.now()-p<250)){if(e)u.commitBulkEdit("tags");else{for(var n=$(".overlay_detail .token-input-token"),s=[],r=0;r<n.length;r++){var o=n.eq(r).text();o.length>1&&s.push(o.substring(0,o.length-1))}if(u.validateTags(s)){if(t){s?(si.layout.tags.find(".tag_container").html(it(s.sort(),!0,!0)),ai.checkTileTagOverflow(si.layout.tags,parseInt(si.layout.tags.find(".tag_container").css("maxWidth"))),si.layout.tags.addClass("hasTags")):si.layout.tags.removeClass("hasTags"),si.item.tags=s;var l=$("#i"+a.item_id);l.length&&u.updateItemTags(l,s,"tags_replace");var c={"tag_cxt_tags_cnt":u.tag_cxt_tags_cnt,"tag_cxt_suggested_available":u.tag_cxt_suggested_available,"tag_cxt_suggested":u.tag_cxt_suggested,"tag_cxt_entered":u.tag_cxt_entered,"tag_cxt_removed":u.tag_cxt_removed};u.data.updateItemTags(a,s,c)}else{u.updateItemTags(a,s,"tags_replace");var c={"tag_cxt_tags_cnt":u.tag_cxt_tags_cnt,"tag_cxt_suggested_available":u.tag_cxt_suggested_available,"tag_cxt_suggested":u.tag_cxt_suggested,"tag_cxt_entered":u.tag_cxt_entered,"tag_cxt_removed":u.tag_cxt_removed},d=u.itemsByID[a.attr("id").replace(/^i/,"")];u.data.updateItemTags(d,s,c)}if($(".token-input-dropdown").data("modified"))if($(".token-input-dropdown").data("manualadd")){gt.show(Pt.callTrans("tag.itemtagged"));for(var h=!1,r=0;r<s.length;r++)-1==$.inArray(s[r],u.tagList)&&(u.tagList.push(s[r]),h=!0);h&&(u.tagList.sort(),u.buildPopoverTagList(u.tagList))}else gt.show(Pt.callTrans("tag.itemtagsremoved"))}}At.hide(),$("body").off("keydown.tags")}});var f=0,p=0;$("#edit-tags-input").tokenInput([],{"searchDelay":200,"minChars":1,"animateDropdown":!1,"noResultsHideDropdown":!0,"search_function":function(e,t){searching=!0,u.tagSearch(e,t),$(".token-input-dropdown-tag").data("init")||$(".token-input-dropdown-tag").css("width",$(".token-input-list").outerWidth()-2+"px").data("init")},"textToData":function(e){return $.trim(e).length>25||!$.trim(e).length?($.trim(e).length>25&&(gt.show(Pt.callTrans("notification.tagsarelimited")),f=Date.now(),p=Date.now()),null):{"name":k(e.toLowerCase())}},"onReady":function(){$(".token-input-dropdown").addClass("token-input-dropdown-tag"),setTimeout(function(){if(!e&&"object"==typeof i){var t=zt.externalUserSettings.recentlyaccessedtags;"object"!=typeof t&&(t=[]);for(var n=0;n<i.length;n++)$("#edit-tags-input").tokenInput("add",{"id":n,"name":i[n]}),-1==$.inArray(i[n],t)&&t.push(i[n]);
u.tag_cxt_entered=0,u.tag_cxt_tags_cnt=i.length,t.sort(),zt.externalUserSettings.recentlyaccessedtags=t,Kt.saveExternalUserSettings()}$(".token-input-dropdown").data("modified",!1),$(".token-input-dropdown").data("manualadd",!1)},10),$("body").on("keydown.tags",function(e){if($(e.target).hasClass("page-queue")){var t=e.keyCode||e.which;if(8==t){e.preventDefault(),e.stopImmediatePropagation();var i=$(".token-input-selected-token");i.length&&$("#edit-tags-input").tokenInput("remove",{"name":i.find("p").text()})}}})},"onAdd":function(){r(),f=Date.now(),$(".token-input-dropdown").data("modified",!0),$(".token-input-dropdown").data("manualadd",!0),u.tag_cxt_entered++,n&&l()},"onDelete":function(){r(),f=Date.now(),$(".token-input-dropdown").data("modified",!0),n&&o(),u.tag_cxt_removed++}}),setTimeout(function(){h.find(".token-input-input-token").children("input").focus()},500),$(".token-input-list").keypress(function(e){13==e.which&&Date.now()-f>250&&(e.preventDefault(),h.find(".button").trigger("click"))})},"tagSearch":function(e,t){var i=[];if(e.length){if(!this.tagList)return;this.tagList.sort();for(var n=15,a=new RegExp("^"+e),s=0;s<this.tagList.length;s++)a.test(this.tagList[s])&&n>0&&(i.push({"name":this.tagList[s]}),n--)}else{var r=zt.externalUserSettings.recentlyaccessedtags;if("object"==typeof r)for(var s=0;s<r.lenght;s++)i.push({"name":r[s]})}i.length||(i=null),t(i)},"fillSuggestedTags":function(e){for(var t='<ul class="clearfix">',i=0;i<e.length;i++)t+='<li><a href="#" class="token-suggestedtag">'+e[i]+"</a></li>";t+="</ul>",this.tag_cxt_suggested_available=e.length,$(".suggestedtag_detail").append(t),$(".suggestedtag_detail").removeClass("suggestedtag_detail_loading").height($(".suggestedtag_detail").height())},"suggestedTagsCallback":function(e){if(e.status)if(e.suggested_tags.length){for(var t=[],i=0;i<e.suggested_tags.length;i++)t.push(e.suggested_tags[i].tag);this.fillSuggestedTags(t)}else $(".suggestedtag_detail").removeClass("suggestedtag_detail_loading").append('<p class="suggestedtag_msg">'+Pt.callTrans("tag.suggestedtagserror")+"</p>");else this.suggestedTagsError(e)},"suggestedTagsError":function(e,t){var i=Pt.callTrans("tag.suggestedtagserror");t&&(i=t),$(".suggestedtag_detail").removeClass("suggestedtag_detail_loading").append('<p class="suggestedtag_msg">'+i+"</p>")},"checkBulkEditLogic":function(){var e=this.queueList.children(".item").filter(".bulkeditselected").not(".removed");e.length?(this.showBulkEdit(!0),this.updateBulkEditWording(e)):this.showBulkEdit(!1)},"commitBulkEdit":function(e){var t=this,i="tags_add",n=[],a=null;if("tags"==e){a=[];for(var s=$(".overlay_detail .token-input-token"),r=0;r<s.length;r++){var o=s.eq(r).text();o.length>1&&a.push(o.substring(0,o.length-1))}if(!this.validateTags(a))return;n=a;for(var l=!1,r=0;r<a.length;r++)-1==$.inArray(a[r],t.tagList)&&(t.tagList.push(a[r]),l=!0);l&&(t.tagList.sort(),t.buildPopoverTagList(t.tagList))}var c={"action":e,"on":!0};("mark"==e&&"archive"==this.state.section||"favorite"==e&&this.bulkEditUnfavoriteMode)&&(c.on=!1),"tags"==e&&(c=!1),this.batch=!0;var u=[],d=[],h=this.queueList.children(".item").filter(".bulkeditselected").not(".removed");if(h.length){for(var r=0;r<h.length;r++){var f=h[r].id.replace(/^i/,"");u.push(f);var p=this.itemsByID[f];d.push(p),1!=c&&this.takeActionOnItem(c.action,c.on,$(h[r]).attr("id").replace(/^i/,""),void 0,!0),a&&this.updateItemTags($(h[r]),a,i)}this.batch=!1,this.reflowTiles(),this.data.bulkEdit({"data":{"items":u,"itemObjects":d,"status":c.action,"on":c.on,"tagType":i,"tags":n}});var g=h.length;g+=h.length>1?" Items ":" Item ","favorite"==e&&this.bulkEditUnfavoriteMode?(g+=" "+Pt.callTrans("notification.unfavorited"),PocketAnalytics.action("bulk_edit_favorite","interact","webapp")):"favorite"==e?(g+=" "+Pt.callTrans("notification.favorited"),PocketAnalytics.action("bulk_edit_favorite","interact","webapp")):"mark"==e&&"archive"==this.state.section?g+=" "+Pt.callTrans("notification.savedtolist"):"mark"==e?(g+=" "+Pt.callTrans("notification.archived"),PocketAnalytics.action("bulk_edit_archive","interact","webapp")):"delete"==e?(g+=" "+Pt.callTrans("notification.deleted"),PocketAnalytics.action("bulk_edit_delete","interact","webapp")):(g+=" "+Pt.callTrans("notification.tagged"),PocketAnalytics.action("bulk_edit_tag_save","interact","webapp")),gt.show(g),this.showBulkEdit(!1),this.checkIfRunningLow()}},"commitMassTagChange":function(e,t,i){function n(t,i){e.find(".itemtext").text(k(i)),e.attr("href",e.attr("href").replace(encodeURIComponent(k(t)),encodeURIComponent(k(i)))),e.attr("val",encodeURIComponent(k(i))),ai.data.renameTag({"data":{"oldTag":t,"newTag":i}});for(var n=!1,s=0;s<a.tagList.length;s++)a.tagList[s]==t&&(a.tagList.splice(s,1),s--),a.tagList[s]==i&&(n=!0);n||(a.tagList.push(i),a.tagList.sort()),a.buildPopoverTagList(a.tagList),ai.tagRenamed(t,i),a.massTagChanging=!1,gt.show(Pt.callTrans("tag.tagrenamedfrom").replace("xxxxx",t).replace("yyyyy",i)),t==Zt.selectedTag&&setTimeout(function(){var e=$("#pagenav_tagfilter li").filter("[val='"+encodeURIComponent(k(i))+"']");e.length&&Kt.loadStateFromUrl(e.children("a").attr("href"))},1e3)}var a=this;this.massTagChanging=!0;var s=t;if(t=$.trim(t),i=$.trim(i),i.length&&t!=i&&a.validateTags([i])){for(var r=$("#pagenav_tagfilter ul"),o=r.children(),l=!1,c=0;c<o.length;c++)if(o.eq(c).text()==i){l=!0;break}l?a.showConfirmDialog(Pt.callTrans("tag.tagalreadyexists"),Pt.callTrans("tag.tagexistswouldyoulikemerge",["<strong>","<strong>","<strong>"],["</strong>","</strong>","</strong>"]).replace("xxxxx",k(i)).replace("yyyyy",t).replace("zzzzz",k(i)),Pt.callTrans("cta.merge"),function(){n(s,i)},function(){a.massTagChanging=!1}):n(s,i)}else e.find(".itemtext").text(s),a.massTagChanging=!1;e.find(".deletetag").removeClass("deletetag_active"),e.parent().find(".edittaginput").remove(),e.removeClass("editmode"),e.find(".itemtext").show()},"commitMassTagDelete":function(e,t){var i=this;this.massTagChanging=!0,this.showConfirmDialog(Pt.callTrans("tag.deletetag"),Pt.callTrans("tag.thiswillremove",null,null,"<strong>"+k(t)+"</strong>"),Pt.callTrans("cta.delete"),function(){e.remove(),ai.data.deleteTag({"data":{"tag":t}}),ai.tagDeleted(t);for(var n=!1,a=0;a<i.tagList.length;a++)if(i.tagList[a]==t){i.tagList.splice(a,1),n=!0;break}n&&(i.tagList.sort(),i.buildPopoverTagList(i.tagList)),i.massTagChanging=!1,gt.show("Tag '"+t+"' deleted"),t==Zt.selectedTag&&setTimeout(function(){Kt.loadStateFromUrl(ai.tagUrlPrefix)},500)},function(){i.massTagChanging=!1})},"showInbox":function(e){return"undefined"!=typeof e?("undefined"==typeof this.inboxPopover&&(this.inboxView=new ti($("<div class='inbox'></div>"),this.notifications,this.unconfirmedNotifications),this.inboxPopover=new Mt("notifications_list",this.inboxView.view,$("#container"),{"onShow":function(){setTimeout(function(){$("#page").prepend($("#notifications_list"))},100)},"onHide":function(){$("#container").append($("#notifications_list"))},"disableHideOnScroll":!0})),this.inboxView.reloadData(this.notifications,this.unconfirmedNotifications),this.inboxPopover.show(e),void 0):(this.inboxPopover.show(!1),void 0)}};var ti=function(e,t,i){this.view=e,this.notifications=t,this.unconfirmedNotifications=i};ti.prototype.reloadData=function(e,t){this.unconfirmedNotifications=t,this.notifications=e,this.view.find(".notification").remove();for(var i in this.unconfirmedNotifications){var n=this.unconfirmedNotifications[i],a=this.cellForUnconfirmedNotification(n);this.view.append(a),a.css("height",a.height()+14)}for(var s=0;s<this.notifications.length;s++){var n=this.notifications[s],a=this.cellForNotification(n);this.view.append(a),a.css("height",a.height()+14)}setTimeout(function(){this.view.find("a.notification").addClass("canAnimate")}.bind(this),1)},ti.prototype.cellForUnconfirmedNotification=function(e){var t=$("<div class='unconfirmed notification'></div>"),i=$("<div></div>"),n=$("<div class='item'></div>"),a=$("<div class='title'></div>");a.text(Pt.callTrans("queue.confirmyouremail"));var s=$("<div class='description'></div>");s.text(""+(e.name||Pt.callTrans("queue.afriend"))+" "+Pt.callTrans("queue.hassharedconfirm")+" "+e.email);var r=$("<div class='buttons'></div>"),o=$("<a class='resend yellow button'>"+Pt.callTrans("queue.resendconfirmation")+"</a>");return o.click(function(i){return Kt.helper.sync.makeAPIRequest("resendEmailConfirmation",{"email":e.email}).done(function(){delete ai.unconfirmedNotifications[e.email],ai.receivedNotifications(ai.notifications,ai.unconfirmedNotifications),t.addClass("hidden");var i=!1;for(var n in ai.unconfirmedNotifications){i=!0;break}0!==ai.notifications.length||i||ai.inboxPopover.show(!1),gt.show(Pt.callTrans("notification.sent"))}).fail(function(e){200!=e.status?alert(Pt.callTrans("queue.couldntresend")):e.success()}),i.preventDefault(),!1}),n.append(a).append(s),r.append(o),i.append(n).append(r),t.append(i),t};var ii=ti.prototype.cellForNotification=function(e,t,i,n){t=t||e.item,i=i||!1;var a=t.resolved_url?t.resolved_url:t.given_url,s=e.from_friend;s||(s=ai.friends[e.from_friend_id]);var r,l=a;n?r=$("<div class='notification'></div>"):(r=$("<a class='notification' target='_blank'></a>"),r.click(function(){ai.data.opened(t.item_id,13)}),r.attr("href",k(l)));var c=$("<div></div>"),u=$("<div class='attribution'></div>"),d=$("<div class='avatar'></div>"),h="undefind"!=typeof s?M(s.avatar_url,"w90-h90-nc"):void 0;if("undefined"!=typeof h)Vt.loadAvatar(h,function(e,t){var i="";"undefined"!=typeof t&&(i+="url('"+t.src+"')"),e.css("backgroundImage",i)}.bind(this,d));else{var f;o()?(f="a/i/empty_avatar"+(window.devicePixelRatio>1?"-2x":"")+".png",f=chrome.runtime.getURL(f)):f="i/empty_avatar"+(window.devicePixelRatio>1?"-2x":"")+".png",d.css("backgroundImage","url('"+f+"')")}var g=$("<div class='full_name'></div>");g.text(s&&s.name?s.name:"A friend");var m=$("<div class='time_since'></div>");"string"==typeof e.time_shared&&(e.time_shared=new Date(1e3*parseInt(e.time_shared,10)));var v=e.time_shared;m.text(""+p(v));var _=$();e.comment&&e.comment.length&&(_=$("<div class='comment'></div>"),_.text(e.comment));var y=$();if(e.quote&&e.quote.length>0&&(y=$("<div class='quote'></div>"),y.text(e.quote)),!n){var b=$("<div class='caret'></div>"),w=$("<div class='item'></div>"),S=$("<div class='title'></div>");S.text(t.resolved_title);var T=$("<div class='domain'></div>");T.text(L(a));var x=$("<div class='buttons'></div>"),C=$("<div class='ignore button button-secondary button-mini'>"+Pt.callTrans("cta.ignore")+"</div>"),D=$("<div class='addToList button button-important button-mini'>"+Pt.callTrans("cta.addtolist")+"</div>");D.text().length>13&&D.text(Pt.callTrans("cta.add"));var I=function(){ai.notifications.splice(ai.notifications.indexOf(e),1),ai.receivedNotifications(ai.notifications,ai.unconfirmedNotifications),r.addClass("hidden"),0===ai.notifications.length&&ai.inboxPopover.show(!1)};C.click(function(i){return i.preventDefault(),t=ai.itemsByID[e.item_id]||e.item,t.shares=t.shares||{},e.item=void 0,"string"==typeof e.time_shared&&(e.time_shared=new Date(1e3*parseInt(e.time_shared,10))),e.status="2",t.shares[e.share_id]=e,ai.data.itemAction({"data":{"action":"share_ignored","share_id":e.share_id,"itemId":e.item_id,"item":t}}),I(),!1}),D.click(function(i){i.preventDefault(),t=ai.itemsByID[e.item_id]||e.item,t.shares=t.shares||{},e.item=void 0,"string"==typeof e.time_shared&&(e.time_shared=new Date(1e3*parseInt(e.time_shared,10))),e.status="1",t.shares[e.share_id]=e;var n=ai.items.indexOf(t);return n>=0&&ai.items.splice(n,1),ai.data.itemAction({"data":{"action":"share_added","share_id":e.share_id,"itemId":e.item_id,"item":t}}),ai.items.splice(0,0,t),ai.itemsByID[t.item_id]=t,ai.rebuildList(void 0,{"o":{"append":!1}}),I(),!1})}return u.append(d).append(g).append(m).append(_),c.append(u),n?u.append(y):(u.append(b),w.append(S).append(T).append(y),x.append(C).append(D),c.append(w).append(x)),r.append(c),r};imgScale=1;try{imgScale=window.devicePixelRatio?window.devicePixelRatio:1}catch(ni){}var ai=new et;Kt.pages.queue=ai,pt.prototype={"init":function(){var e=this;this.data=ai.data,zt.premiumStatus&&(ai.premiumMode=!0);var t=Handlebars.templates.reader_navitempackaged;this.navigationItem=$(t(dictJSON)),$("#page .pkt-nav").append(this.navigationItem),this.styleMenuContent=$(Handlebars.templates.reader_stylemenu(dictJSON)),this.styleMenuContent.find("#submenu_font_serif a").click(function(t){t.preventDefault(),(!$("#subnav").hasClass("inactive")||$(t.target).hasClass("selected"))&&e.setFont("serif")}),this.styleMenuContent.find("#submenu_font_sans a").click(function(t){t.preventDefault(),(!$("#subnav").hasClass("inactive")||$(t.target).hasClass("selected"))&&e.setFont("sans")}),this.styleMenuContent.find("#submenu_font_down a").click(function(t){t.preventDefault(),$("#subnav").hasClass("inactive")||(PocketAnalytics.action("font_decrease","interact","webapp"),e.fontInc(-1))}),this.styleMenuContent.find("#submenu_font_up a").click(function(t){t.preventDefault(),$("#subnav").hasClass("inactive")||(PocketAnalytics.action("font_increase","interact","webapp"),e.fontInc(1))}),this.styleMenuContent.find("#submenu_theme_light a").click(function(t){t.preventDefault(),(!$("#subnav").hasClass("inactive")||$(t.target).hasClass("selected"))&&e.setSkin("light")}),this.styleMenuContent.find("#submenu_theme_dark a").click(function(t){t.preventDefault(),(!$("#subnav").hasClass("inactive")||$(t.target).hasClass("selected"))&&e.setSkin("dark")}),this.styleMenuContent.find("#submenu_theme_sepia a").click(function(t){t.preventDefault(),(!$("#subnav").hasClass("inactive")||$(t.target).hasClass("selected"))&&e.setSkin("sepia")}),this.styleMenuContent.find("li").children("a").each(function(e,t){r($(t))}),this.page=$(Handlebars.templates.reader_pageshell(dictJSON)),$("#content").append(this.page),this.articleview=this.page.find(".reader_content_wrapper"),this.page.append(this.articleview),this.initWebView(),this.content=this.page.find(".reader_content"),$("#pagenav_back a").click(function(t){zt.GSFStatus.active&&$(".tooltip-reader").is(":visible")&&"object"==typeof It&&It.hideOpenPopover(),t.preventDefault(),e.goBack()}),$("#pagenav_mark a").click(function(t){e.actionToggle("mark"),t.preventDefault()}),$("#pagenav_add a").click(function(t){e.addURLToPocket(),t.preventDefault()}),$("#pagenav_delete a").click(function(t){e.confirmDelete(),t.preventDefault()}),$("#pagenav_tag a").click(function(t){e.editItemTags(),t.preventDefault()}),$("#pagenav_favorite a").click(function(t){e.actionToggle("favorite"),t.preventDefault()}),$("#pagenav_articleview a").click(function(t){e.switchToArticleView(),t.preventDefault()}),$("#pagenav_webview a").click(function(t){e.switchToWebView(),t.preventDefault()}),$("#pagenav_share a").click(function(t){e.showShareMenu(this),t.preventDefault()}),$("#pagenav_style a").click(function(t){e.showStyleMenu(this),t.preventDefault()}),$(window).resize(function(){"object"==typeof e.webview&&e.webview.css("height",$(window).height()-$("#page .pkt-nav").height()-$("#PKT_header").height()+"px")}),$(document).on("itemNeedsUpdate",function(t,i){var n=i.action,a=i.item,s=i.updateDom;"undefined"!=typeof a&&"undefined"!=typeof e.item&&e.item.item_id===a.item_id&&(e.item=a,s&&($("#pagenav_favorite").toggleClass("selected","1"==a.favorite),("mark"==n||"delete"==n)&&setTimeout(e.goBackToQueue,0)))}),this.inited=!0},"goBackToQueue":function(){ai.inited?Kt.goBack():Kt.loadStateFromUrl("/a/"),Gt.sendAction({"action":"left_item"},!1)},"goBack":function(){if(this.viewqueue=this.viewqueue||[],this.viewqueue&&this.viewqueue.length>1){this.viewqueue.pop(),this.viewnotmovingforward=!0,1===this.viewqueue.length&&$(".toolbar_reader").removeClass("toolbar_reader_addmode");var e=this.viewqueue[this.viewqueue.length-1];return e.item?(this.item=e.item,this.itemId=e.item.item_id):(this.item=void 0,this.itemId=void 0),"web"===e.currentview?$("#pagenav_webview").hasClass("selected")?this.webview.attr("src",e.url):this.switchToWebView():this.switchToArticleView(),void 0}this.viewqueue=[],this.goBackToQueue()},"currentLoadedView":function(){return this.viewqueue[this.viewqueue.length-1].currentview},"setCurrentLoadedView":function(e){this.viewqueue.length&&(this.viewqueue[this.viewqueue.length-1].currentview=e)},"currentLoadedURL":function(){return"undefined"!=typeof this.item?this.item.given_url||this.item.original_url||this.item.url||this.viewqueue[this.viewqueue.length-1].url:this.viewqueue[this.viewqueue.length-1].url},"loadState":function(e){this.inited||this.init(),this.itemId=e.sections[1],this.item=ai.itemForItemID(this.itemId);var t="/a/read/"+this.itemId;window.location!=t&&Kt.pushState("Pocket",t);var i=$("#i"+this.itemId);1==i.size()&&($("#pagenav_mark").toggleClass("archived selected","1"==i.attr("status")),"1"==i.attr("status")?$("#pagenav_mark a").attr("title",Pt.callTrans("cta.addtolist")).text(Pt.callTrans("cta.addtolist")):$("#pagenav_mark a").attr("title",Pt.callTrans("cta.archive")).text(Pt.callTrans("cta.archive")),$("#pagenav_favorite").toggleClass("selected","1"==i.attr("favorite"))),window.navigator.onLine?$("#pagenav_share").removeClass("inactive"):$("#pagenav_share").addClass("inactive"),this.stateChanged()},"stateChanged":function(){this.viewqueue=[],this.addScrollEventHandler(),this.addGesturEventHandler(),this.loadItem(),Kt.showPage(this)},"willHide":function(){this.saveScroll(!0),this.showStyleMenu(!1),this.item=void 0,this.itemId=void 0,this.removeScrollEventHandler(),this.removeGestureEventHandler()},"didHide":function(){this.navigationItem.find(".leftItem li").removeClass("selected"),this.isOpen=!1},"didShow":function(){this.isOpen=!0,c()},"loadItem":function(){logger.log("Load item: "+JSON.stringify(this.item)),this.page.addClass("loading"),this.loadLayout(),2==this.item.has_video?this.loadVideoItem():2==this.item.has_image?this.loadImageItem():0==this.item.is_article?this.loadExternalPageItem():this.loadArticleItem()},"loadArticle":function(){return"undefined"==typeof this.item||"undefined"==typeof this.item.status?(this.loadArticleItemByUrl(this.currentLoadedURL()),void 0):(this.loadArticleItem(),void 0)},"loadArticleItem":function(){this.item&&this.data.getArticle({"data":{"itemId":this.itemId,"item":this.item},"delegate":this,"doneSelector":"articleLoaded"})},"loadArticleItemByUrl":function(e){this.data.getArticle({"data":{"url":e},"delegate":this,"doneSelector":"articleLoadedUrl"})},"articleLoadedUrl":function(e,t){this.item=e.item,this.itemId=e.item.item_id,this.item.time_added=e.timePublished,$("body").scrollTop(0),this.articleLoaded(e,t)},"articleLoaded":function(e){var t=this,i=this.item;if(i){var n,a=i.resolved_title||i.given_title||i.title,s=z(i.resolved_url),r=s.host;"string"==typeof i.time_added?n=new Date(1e3*i.time_added):"string"==typeof i.time_updated&&(n=new Date(1e3*i.time_updated));var l=n?moment(n).lang(dictsuffix).format("MMMM Do, YYYY"):"",c=this.replaceVideos(e.article,i.videos);this.fillLayout(a,r,i.authors,l,i.given_url,i.tags,c);var u=0==this.item.is_article&&2!=this.item.has_image&&2!=this.item.has_video;if(u){var d=Handlebars.templates.reader_noarticlewarning(dictJSON);d=d.replace(/\*(.*)\*(.*)\n(.*)\*(.*)\*/,'<a class="fullwebswitch" href="#">$1</a>$2\n$3<a href="http://getpocket.com/report_item?consumer_key='+PKTConsumerKey+"&url="+k(i.given_url)+'" target="_blank">$4</a>'),$(".text_body").prepend(d);var t=this;$(".fullwebswitch").click(function(){t.switchToWebView()})}$("#pagenav_mark").toggleClass("archived selected",1==i.status),1==i.status?$("#pagenav_mark a").attr("title",Pt.callTrans("cta.addtolist")).text(Pt.callTrans("cta.addtolist")):$("#pagenav_mark a").attr("title",Pt.callTrans("cta.archive")).text(Pt.callTrans("cta.archive")),$("#pagenav_favorite").toggleClass("selected",1==i.favorite),this.loadImages(i.images),o()&&this.loadVideos(i.videos);var h=i.positions;if(h&&h[1]){var f=h[1].node_index;setTimeout(function(){si.ignoreScroll=!0,t.scrollToNodeIndex(f),setTimeout(function(){si.ignoreScroll=!1},250)},100)}this.page.removeClass("content-article content-video content-image").addClass("content-article"),this.page.removeClass("loading"),this.layout.tags.hasClass("hasTags")&&ai.checkTileTagOverflow(this.layout.tags,parseInt(this.layout.tags.find(".tag_container").css("maxWidth"))),setTimeout(function(){si.tryTocheckForMessageView()},750),this.hasSeenMessage=!1,this._messageWrapper=void 0,$(this.getMessageWrapper()).find("a").mousedown(function(){ai.data.itemAction({"data":{"itemId":si.itemId,"action":"pmc","click_url":this.href,"pkta":si.getMessageWrapper().getAttribute("pkta")}})}),this.gsfInitialize()}},"loadVideoItem":function(){var e,t=this.item,i=t.resolved_title||t.given_title||t.title,n=z(t.resolved_url),a=n.host;if("string"==typeof t.time_published_formatted)e=t.time_published_formatted;else{var s=new Date(1e3*t.time_added);e=s?moment(s).lang(dictsuffix).format("MMMM Do, YYYY"):""}var r=this.replaceVideos("<!--VIDEO_1-->",t.videos);this.fillLayout(i,a,t.authors,e,t.given_url,t.tags,r),this.loadVideos(t.videos),$("#pagenav_mark").toggleClass("archived selected",1==t.status),1==t.status?$("#pagenav_mark a").attr("title",Pt.callTrans("cta.addtolist")).text(Pt.callTrans("cta.addtolist")):$("#pagenav_mark a").attr("title",Pt.callTrans("cta.archive")).text(Pt.callTrans("cta.archive")),$("#pagenav_favorite").toggleClass("selected",1==t.favorite),this.page.removeClass("content-article content-video content-image").addClass("content-video"),this.page.removeClass("loading"),this.gsfInitialize()},"loadImageItem":function(){var e,t=this.item,i=t.resolved_title||t.given_title||t.title,n=z(t.resolved_url),a=n.host;if("string"==typeof t.time_published_formatted)e=t.time_published_formatted;else{var s=new Date(1e3*t.time_added);e=s?moment(s).lang(dictsuffix).format("MMMM Do, YYYY"):""}var r=Handlebars.templates.reader_imageshell(dictJSON);this.fillLayout(i,a,t.authors,e,t.given_url,t.tags,r),this.loadImages(t.images),$("#pagenav_mark").toggleClass("archived selected",1==t.status),1==t.status?$("#pagenav_mark a").attr("title",Pt.callTrans("cta.addtolist")).text(Pt.callTrans("cta.addtolist")):$("#pagenav_mark a").attr("title",Pt.callTrans("cta.archive")).text(Pt.callTrans("cta.archive")),$("#pagenav_favorite").toggleClass("selected",1==t.favorite),this.page.removeClass("content-article content-video content-image").addClass("content-image"),this.page.removeClass("loading"),this.gsfInitialize()},"loadExternalPageItem":function(){var e=this.item,t=z(e.resolved_url),i=t.host;this.fillWebViewLayout(e.resolved_title,i,e.given_url),this.page.removeClass("loading")},"loadLayout":function(){if(!this.layout){var e={},t=$(Handlebars.templates.reader_headarticleshell(dictJSON));e.head=t.filter(".reader_head"),e.title=e.head.find("h1"),e.subline=e.head.find(".sub"),e.domain=e.subline.find(".domain"),e.authors=e.subline.find(".authors"),e.date=e.subline.children(".date"),e.original=e.subline.children(".original"),e.tags=e.subline.children(".tags"),e.article=t.filter(".text_body"),this.content.append(t),this.layout=e,this.loadStyles()}this.forceLoadStyles&&(this.loadStyles(),this.forceLoadStyles=!1)},"fillLayout":function(e,t,i,n,a,s,r){this.page.removeClass("webview").addClass("articleview"),this.offlinePageWarning&&this.offlinePageWarning.hide(),this.articleview.css("display","block"),this.hideWebView(),$("#pagenav_articleview").addClass("selected"),$("#pagenav_webview").removeClass("selected"),$("#pagenav_style").removeClass("inactive"),this.layout.title.text(e?e:Pt.callTrans("reader.untitledfrom")+" "+t),document.title="Pocket : "+this.layout.title.text(),Vt.loadFavicon(st(t),function(e){"undefined"!=typeof e&&this.layout.domain.children(".favicon").attr("src",e.src)}.bind(this)),this.layout.domain.children("a").attr("href",k(I(a))).text(t),this.layout.domain.children(".favicon").attr("src","");var i=tt(i),o="By ",l=", ";i.length||(o="",l=""),this.layout.authors.html(o+i+l),this.layout.authors.toggle(this.layout.authors.text().length>0),this.layout.date.html(n),this.layout.date.toggleClass("date_empty",0==this.layout.date.text().length),this.layout.original.children("a").attr("href",k(I(a))),s?(Array.isArray(s)?this.layout.tags.find(".tag_container").html(it(s,!0,!0)).on("click",".tag",function(){$.trim(ai.searchField.val()).length&&ai.searchField.val("")}):this.layout.tags.find(".tag_container").html(it(s,!1,!0)),this.layout.tags.addClass("hasTags")):this.layout.tags.removeClass("hasTags"),this.layout.article.html(r),this.viewnotmovingforward?this.viewnotmovingforward=!1:(this.viewqueue.push({"item":this.item,"url":a,"currentview":"article","timestamp":Date.now()}),this.updateToolbarUI(),this.viewqueue.length>1&&Gt.sendAction({"action":"left_item"},!1));var c=this;this.layout.article.find("a").click(function(e){var t=$(this).attr("target");"_pktbrowser"!=t&&"_pktweb"!=t&&"_pktarticle"!=t&&(e.preventDefault(),c.loadArticleItemByUrl($(this).attr("href")))})},"fillWebViewLayout":function(e,t){document.title="Pocket : "+this.layout.title.text(),this.layout.domain.children("a").attr("href","http://"+t).text(t),$("#pagenav_webview").addClass("selected"),$("#pagenav_articleview").removeClass("selected"),$("#pagenav_style").addClass("inactive"),this.page.removeClass("articleview").addClass("webview"),this.articleview.hide();var i=this.item.resolved_url||this.item.given_url,n=I(i);this.showWebView(n)},"loadImages":function(e){if(e){var t=this;$.each(e,function(e,i){t.loadImage(i.image_id,i.src,i.caption,i.credit,window.devicePixelRatio||1)})}},"loadImage":function(e,t,i,n,a){a=1*a;var s=$("#RIL_IMG_"+e);s.html("<caption>"+i+" <cite>"+(n?Pt.callTrans("reader.photoby")+": ":"")+n+"</cite></caption>");var r=s;if(i&&(i.length||n.length)){s.addClass("hasCaption");var o=s.parent("a");1==o.size()&&(s.prepend('<a href="'+o.attr("href")+'"></a>'),s.parent("a").replaceWith(s),r=s.children("a"))}Vt.loadImageCached(t,"0"==this.item.status,function(e){if("undefined"!=typeof e){a>1&&(this.width*=1/a);var t=$(e);r.prepend(t);var n=t.parents(".RIL_IMG");if(i){var s=si.content.width();e.width>s?n.css("maxWidth",s-2+"px"):n.css("maxWidth",(e.width>175?e.width:175)+"px")}n.addClass("loaded")}})},"replaceVideos":function(e,t){return t?($.each(t,function(t,i){var n="<!--VIDEO_"+i.video_id+"-->",a=new RegExp(n,"gi"),s='<div id="RIL_VIDEO_'+i.video_id+'" class="RIL_VIDEO"></div>';e=e.replace(a,s)}),e):e},"loadVideos":function(e){if(e){var t=this;$.each(e,function(e,i){t.loadVideo(i.video_id,i.src,i.height,i.width,i.type,i.vid)})}},"loadVideo":function(e,t,i,n,a,s){n=0!==n&&"0"!==n?n:640,i=0!==i&&"0"!==i?i:390;var r=k(t);"1"==a?r="http://www.youtube.com/embed/"+s:("2"==a||"3"==a||"4"==a)&&(r="http://player.vimeo.com/video/"+s+"?title=0&amp;byline=0&amp;portrait=0");var l=$("#RIL_VIDEO_"+e),c=this.articleview.children().width();if(0==c){var u=this.articleview.children().css("maxWidth");"none"!==u&&(c=parseInt(u))}c>0&&n>c&&(i=c/n*i,n=c);var d;if(window.navigator.onLine&&o())d='<webview src="'+r+'"style="width: 100%;height:'+i+'px"></webview>';else{var h=o()?chrome.runtime.getURL("a/i/OfflineVideoImage.png"):"i/OfflineVideoImage.png";d='<img src="'+h+'" />'}setTimeout(function(){l.append($(d))},100)},"gsfInitialize":function(){var e=this;if(zt.GSFStatus.active&&/Chrome/.test(navigator.userAgent))if(zt.GSFStatus.active&&!this.viewcheck&&(this.viewcheck=setInterval(function(){Kt.pages.queue.isOpen&&!ai.loading&&(clearTimeout(e.viewcheck),e.viewcheck=null,$(".tooltip-reader").is(":visible")&&"object"==typeof It&&It.hideOpenPopover(),ai.inited&&ai.gsfCheckLogic())},1e3)),zt.GSFStatus.active&&!zt.GSFStatus.articleviewconfirm&&this.page.hasClass("articleview")){var t=n($(".pkt-nav"),Pt.callTrans("gsf.thisisarticleview"),Pt.callTrans("gsf.pocketdisplaysoptimized")+"|"+Pt.callTrans("gsf.toseeoriginal"),["bottom"],!0,function(){zt.GSFStatus.articleviewconfirm=!0,Kt.saveGSFStatus(),si.gsfInitialize(),PocketAnalytics.action("gsf_tooltip_articleview_ok","click","packagedapp")});t.object.addClass("tooltip-reader"),PocketAnalytics.action("gsf_tooltip_articleview","view","packagedapp"),zt.GSFStatus.articleview=!0,Kt.saveGSFStatus()}else if(zt.GSFStatus.active&&!zt.GSFStatus.webviewconfirm&&this.page.hasClass("webview")){var t=n($(".external_reader"),Pt.callTrans("gsf.thisiswebview"),Pt.callTrans("gsf.openpagenotarticle"),["centered"],!0,function(){zt.GSFStatus.webviewconfirm=!0,Kt.saveGSFStatus(),si.gsfInitialize(),PocketAnalytics.action("gsf_tooltip_webview_ok","click","packagedapp")});t.object.addClass("tooltip-reader"),PocketAnalytics.action("gsf_tooltip_webview","view","packagedapp"),zt.GSFStatus.articleview=!0,Kt.saveGSFStatus()}else if(zt.GSFStatus.active&&!zt.GSFStatus.articleviewitemactions){var t=n($(".active .leftItem"),Pt.callTrans("gsf.itemactions"),Pt.callTrans("gsf.youarchivefavshare")+"|"+Pt.callTrans("gsf.readingpositionsaved"),["bottom","right","bottomleft","bottomright"],!0,function(){zt.GSFStatus.articleviewitemactions=!0,Kt.saveGSFStatus(),PocketAnalytics.action("gsf_tooltip_itemactions_ok","click","packagedapp")});t.object.addClass("tooltip-reader"),PocketAnalytics.action("gsf_tooltip_itemactions","view","packagedapp")}},"confirmDelete":function(){var e=this;s({"anchor":$("#pagenav_delete"),"title":Pt.callTrans("confirm.areyousure"),"message":!1,"confirm":{"title":Pt.callTrans("cta.delete"),"action":function(){e.actionToggle("delete")}}})},"addURLToPocket":function(){var e=$("#pagenav_add");if(!e.hasClass("selected")){e.addClass("selected");var t;t="object"==typeof this.item?this.item.resolved_url||this.item.given_url:this.viewqueue[this.viewqueue.length-1].url,ai.forceBadgeAdjust=!0,ai.addURL(t)}},"editItemTags":function(){var e=[];this.item.tags&&(e=Array.isArray(this.item.tags)?this.item.tags:Object.keys(this.item.tags)),ai.showBulkTagsDialog(!1,!0,e,ai.premiumMode?[]:null,this.item)},"actionToggle":function(e){var t=this,i=$("#pagenav_"+e);if("mark"==e){if(t.markActionActive)return;t.markActionActive=!0}i.toggleClass("selected");var n=i.hasClass("selected"),a={"action":e,"on":n,"itemId":this.itemId},s=333;setTimeout(function(){ai.takeActionOnItem(a.action,a.on,a.itemId,s+100,!0)},s),("mark"==e||"delete"==e)&&(s+=333,setTimeout(function(){t.goBackToQueue(),"mark"==e&&(t.markActionActive=!1,a.on?(gt.show(Pt.callTrans("notification.itemarchived")),zt.GSFStatus.active&&d("sawarchivetooltip",function(e){"string"!=typeof e.sawarchivetooltip&&ai.gsfCheckArchiveTooltip(4e3)})):gt.show(Pt.callTrans("notification.addedtolist"))),"delete"==e&&gt.show(Pt.callTrans("notification.itemdeleted")),ai.highlightItemCheckDeletedMarked()},s))},"showShareMenu":function(e){var i=this;if(e){e=$(e);var n=e.parents(".item");if(this.shareAnchor=e,this.shareMenu){if("object"==typeof this.shareMenu.object){var a=this.shareMenu.object.find(".share-permanent").parent("li");if(a.length){var s=Qt.sharers[a.attr("val")];s&&s.setPermanentLink("http://getpocket.com/library/?pl_i="+i.item.item_id,a)}var r=this.shareMenu.object.find(".share-original").parent("li");if(r.length){var s=Qt.sharers[r.attr("val")];s&&s.setExternalLink(i.currentLoadedURL(),r)}}}else{for(var o=[],l=0;l<Qt.sharers.length;l++){var s=Qt.sharers[l];o.push(t(l,s.name))}var c=new wt({"id":"shareMenuContents","class":"titleItem shareMenuSelector","nodeName":"h2","append":$("#container"),"list":o,"selectCallback":function(e,t){if($("#pagenav_share").hasClass("inactive"))return!1;var n=$(t).attr("val"),a=Qt.sharers[n];return a?(i.shareMenu.show(!1),"undefined"!=typeof i.item?a.share(i.item,i.shareAnchor):a.share({"url":i.currentLoadedURL()},i.shareAnchor),!0):!1},"callback":function(){},"hideUntilSet":!0});this.shareMenu=new Mt("shareMenu",c.ul,$("#container"),{"onHide":function(){$(".pendingDialog").removeClass("pendingDialog")},"positions":["bottomleft","bottomright","topleft","topright"],"xOffset":0,"disableHideOnScroll":!0,"fixedPosition":!0});for(var u=this.shareMenu.object.find("li"),l=0;l<u.length;l++){var d=$(u[l]),h=d.find("a"),f=Qt.sharers[parseInt(d.attr("val"),10)],p=f.iconname;
h.addClass("share-"+p)}c.object.remove(),this.shareMenu.object.addClass("titleSelector");var a=$(c.ul).find(".share-permanent").parent("li");if(a.length){var s=Qt.sharers[a.attr("val")];s&&s.setPermanentLink("http://getpocket.com/library/?pl_i="+i.item.item_id,a)}var r=$(c.ul).find(".share-original").parent("li");if(r.length){var s=Qt.sharers[r.attr("val")];s&&s.setExternalLink(i.currentLoadedURL(),r)}}$("#pagenav_share").hasClass("inactive")?this.shareMenu.object.addClass("inactive"):this.shareMenu.object.removeClass("inactive")}n.toggleClass("pendingDialog",void 0!==e),this.shareMenu.show(e)},"showStyleMenu":function(e){if(e){e=$(e);{e.parents(".item")}this.shareAnchor=e,this.styleMenu||(this.styleMenu=new Mt("styleMenu",this.styleMenuContent,$("#container"),{"positions":["bottomleft","bottomright","topleft","topright"],"hideOnClickInPopover":!1,"xOffset":0,"disableHideOnScroll":!0,"fixedPosition":!0})),e.parents(".inactive").length?this.styleMenuContent.addClass("inactive"):this.styleMenuContent.removeClass("inactive"),this.styleMenu.show(e)}},"loadStyles":function(){var e=this,t=zt.externalUserSettings.styles;t||(t={"font":"serif","fontSize":"2","skin":"light"}),"night"==t.skin&&(t.skin="dark"),e.setFont(t.font,!0),e.setFontSize(t.fontSize,!0),e.setSkin(t.skin,!0)},"saveStyles":function(e){if(!e){var t={"font":this.page.data("font"),"fontSize":this.page.data("fontSize"),"skin":this.page.data("skin")};zt.externalUserSettings.styles=t,Kt.saveExternalUserSettings(),this.page.toggleClass("toggleStyles")}},"toggleFont":function(){this.setFont("serif"==this.page.data("font")?"sans":"serif")},"setFont":function(e,t){this.page.data("font",e),this.page.removeClass("font-serif font-sans").addClass("font-"+e);var i=this.page.attr("class").match(/fontserifsize-\d+/);"object"==typeof i&&i&&this.page.removeClass(i[0]),"serif"==e&&"undefined"!=typeof this.page.data("fontSize")&&this.page.addClass("fontserifsize-"+this.page.data("fontSize")),this.styleMenuContent.find(".textoptions_font a").removeClass("selected"),"serif"==e?this.styleMenuContent.find("#submenu_font_serif").children("a").addClass("selected"):this.styleMenuContent.find("#submenu_font_sans").children("a").addClass("selected"),this.saveStyles(t)},"fontInc":function(e){this.setFontSize(1*this.page.data("fontSize")+e)},"setFontSize":function(e,t){if(isNaN(e)&&(e=1),!(0>e||e>9)){this.styleMenuContent.find("#submenu_font_down").toggleClass("inactive",0===e),this.styleMenuContent.find("#submenu_font_up").toggleClass("inactive",9==e),this.styleMenuContent.find("#submenu_font_down").children("a").toggleClass("inactive",0===e),this.styleMenuContent.find("#submenu_font_up").children("a").toggleClass("inactive",9==e),this.page.data("fontSize",e),this.page.removeClass("fontsize-0 fontsize-1 fontsize-2 fontsize-3 fontsize-4 fontsize-5 fontsize-6 fontsize-7 fontsize-8 fontsize-9").addClass("fontsize-"+e);var i=this.page.attr("class").match(/fontserifsize-\d+/);"object"==typeof i&&i&&this.page.removeClass(i[0]),/font-serif/.test(this.page.attr("class"))&&this.page.addClass("fontserifsize-"+e),this.saveStyles(t)}},"toggleSkin":function(){var e="light",t=this.page.data("skin");"night"==t&&(e="sepia"),"light"==t&&(e="night"),"sepia"==t&&(e="light"),this.setSkin(e)},"setSkin":function(e,t){this.page.data("skin",e),$("body").removeClass("page-readerlight page-readerdark page-readersepia page-readerfullscreen").addClass("page-reader"+e),this.styleMenuContent.find(".textoptions_theme a").removeClass("selected"),this.styleMenuContent.find("#submenu_theme_"+e).children("a").addClass("selected"),this.saveStyles(t)},"toggleFullScreenMode":function(){var e=$("body");if(e.toggleClass("page-readerfullscreen"),e.hasClass("page-readerfullscreen")){if(PocketAnalytics.action("distractionfree_mode","interact","packagedapp"),!zt.externalUserSettings.runfullscreenmode){var t=n($(".pkt-nav"),Pt.callTrans("gsf.fullscreenmode"),Pt.callTrans("gsf.thismodehidestoolbar")+"|"+Pt.callTrans("gsf.leavefullscreenmode")+"|"+Pt.callTrans("gsf.activatefullscreenmodeagain"),["left"],!0,function(){zt.externalUserSettings.runfullscreenmode=!0,Kt.saveExternalUserSettings()});t.object.addClass("tooltip-reader").css("top","150px")}e.on("mouseover.fullscreenmode",function(t){t.clientY<100&&(e.removeClass("page-readerfullscreen"),e.off("mouseover.fullscreenmode"))})}else e.off("mouseover.fullscreenmode")},"addGesturEventHandler":function(){var e=document.getElementById("page");this.gestureJammer=jester(e,{"swipeDistance":150,"preventDefault":!1}),this.gestureJammer.flick(function(e,t){"right"===t&&1==e.numTouches()&&setTimeout(function(){Kt.goBack()},0)})},"removeGestureEventHandler":function(){this.gestureJammer.halt()},"addScrollEventHandler":function(){$(window).bind("scroll",this.scrollEventHandler)},"removeScrollEventHandler":function(){$(window).unbind("scroll",this.scrollEventHandler)},"scrollEventHandler":function(){clearTimeout(si.scrollTO),si.scrollTO=setTimeout(function(){si.scrolled()},150)},"scrolled":function(){if(!this.ignoreScroll){this.saveScroll(),this.tryTocheckForMessageView()}},"tryTocheckForMessageView":function(){this.hasSeenMessage||(this.checkMessageViewTO&&clearTimeout(this.checkMessageViewTO),this.checkMessageViewTO=setTimeout(function(){this.checkForMessageView()}.bind(this),33))},"checkForMessageView":function(){if(!this.hasSeenMessage){var e=this.getMessageWrapper();e&&y(e)&&(this.hasSeenMessage=!0,ai.data.itemAction({"data":{"itemId":si.itemId,"action":"pmv","pkta":e.getAttribute("pkta")}}))}},"getMessageWrapper":function(){if(this._messageWrapper)return this._messageWrapper;var e=$("#PKT_footer_message");return e&&e.length&&(this._messageWrapper=e[0]),this._messageWrapper},"saveScroll":function(e){{var t,i,n=ot($(window)),a=$(window).scrollTop();"screen"==this.yHitMethod?this.topY+20:a}if(150>a)a=0,i=0;else{var s,r;$("[nodeindex]").each(function(){var e=$(this);return e.offset().top>a?(s=this,r=this,!1):void 0});var o=s?s.getAttribute("nodeindex"):null,l=r?r.getAttribute("nodeindex"):null;o&&1*o>1*l?(t=s,i=o):l&&(t=r,i=l)}if(a==this.lastY)return this.pendingPosition&&e&&this.commitPosition(),void 0;var c=$("#container")[0].scrollHeight,u=n.height,d=Math.ceil((parseInt(a,10)+parseInt(u,10))/parseInt(c,10)*100);if(0>d?d=0:d>100&&(d=100),this.pendingPosition=void 0,"undefined"!=typeof this.item){var h="1";this.viewqueue.length>0&&"web"===this.currentLoadedView()&&(h="2"),this.pendingPosition={"itemId":this.itemId,"item":this.item,"item_id":this.itemId,"local_item_id":this.item.local_item_id,"view":h,"page":"1","section":"0","node_index":""+i,"percent":""+d}}clearTimeout(this.scrollTO),e?this.commitPosition():this.scrollTO=setTimeout(function(){this.commitPosition()}.bind(this),2e3),this.lastY=a},"commitPosition":function(){this.pendingPosition&&(this.data.savePosition({"data":this.pendingPosition}),this.pendingPosition=void 0)},"scrollToNodeIndex":function(e){$("[nodeindex]").each(function(t,i){return i.getAttribute("nodeindex")==e?(i.scrollIntoView(!0),!1):void 0})},"updateToolbarUI":function(){$("#pagenav_add").removeClass("selected"),this.viewqueue.length>1?$(".toolbar_reader").addClass("toolbar_reader_addmode"):$(".toolbar_reader").removeClass("toolbar_reader_addmode")},"switchToArticleView":function(){$("#pagenav_webview").removeClass("selected"),$("#pagenav_articleview").addClass("selected"),$("#pagenav_style").removeClass("inactive"),this.hideWebView(),zt.GSFStatus.active&&$(".tooltip-reader").is(":visible")&&"object"==typeof It&&It.hideOpenPopover(),this.viewnotmovingforward=!0,this.setCurrentLoadedView("article"),this.loadArticle()},"switchToWebView":function(){$("#pagenav_articleview").removeClass("selected"),$("#pagenav_webview").addClass("selected"),$("#pagenav_style").addClass("inactive"),$("body").removeClass("page-readerfullscreen"),this.page.removeClass("articleview").addClass("webview"),this.articleview.hide(),$("body").scrollTop(0),this.viewnotmovingforward=!0,zt.GSFStatus.active&&$(".tooltip-reader").is(":visible")&&"object"==typeof It&&It.hideOpenPopover(),this.setCurrentLoadedView("web"),this.showWebView(I(this.currentLoadedURL()))},"initWebView":function(){this.webviewprogress||(this.webviewprogress=$('<div class="external_reader_progress progress-detail external_reader_progress_inactive"></div>'),$("#content").append(this.webviewprogress)),this.webview||(this.webview=$('<webview class="external_reader" src=""></webview>'),$("#content").append(this.webview)),this.webview.css("height",$(window).height()-$("#page .pkt-nav").height()-$("#PKT_header").height()+"px");var e=this;this.webview[0].addEventListener("loadstart",function(){e.webviewprogress.addClass("progress-detail-active external_reader_progress_active")}),this.webview[0].addEventListener("loadcommit",function(t){if(t.isTopLevel&&-1==t.url.indexOf("about:blank")&&-1==t.url.indexOf("getpocket.com/redirect?")&&-1==t.url.indexOf("getpocket.com/s/"))if(e.viewnotmovingforward||0!==e.viewqueue.length&&e.viewqueue[e.viewqueue.length-1].url===t.url)e.viewnotmovingforward=!1;else{if(e.viewqueue.length&&"object"==typeof e.viewqueue[e.viewqueue.length-1].item&&(e.viewqueue[e.viewqueue.length-1].item.given_url==t.url||e.viewqueue[e.viewqueue.length-1].item.resolved_url==t.url))return;e.viewqueue.length&&t.timeStamp-e.viewqueue[e.viewqueue.length-1].timestamp<1e3&&e.viewqueue.pop(),0!==e.viewqueue.length&&(e.item=void 0,e.itemId=void 0),e.viewqueue.push({"item":e.item,"url":t.url,"currentview":"web","timestamp":t.timeStamp}),e.updateToolbarUI(),e.viewqueue.length>1&&Gt.sendAction({"action":"left_item"},!1)}}),this.webview[0].addEventListener("loadstop",function(){e.webviewprogress.removeClass("progress-detail-active external_reader_progress_active")})},"showWebView":function(e){if(window.navigator.onLine){if(this.offlinePageWarning&&this.offlinePageWarning.hide(),this.webview)if(Gt.sendAction({"action":"opened_web"},!1),e){this.webview.addClass("webview-activeinterim webview-active").attr("src",e);var t=this;setTimeout(function(){t.webview.removeClass("webview-activeinterim")},50)}else this.webview.addClass("webview-active");this.webviewprogress&&this.webviewprogress.removeClass("external_reader_progress_inactive")}else this.offlinePageWarning?this.offlinePageWarning.show():(this.offlinePageWarning=$("<div class='offlinepage_warning'>											 <h3>Page Not Available</h3>											 <p>You are not connected to the internet and this page											  has not been downloaded for offline viewing.</p></div>"),$("#page_reader").append(this.offlinePageWarning));this.gsfInitialize()},"hideWebView":function(){this.webview&&this.webview.attr("src","about:blank").removeClass("webview-active"),this.webviewprogress&&this.webviewprogress.addClass("external_reader_progress_inactive"),this.offlinePageWarning&&this.offlinePageWarning.hide()}};var si=new pt;Kt.pages.reader=si,LoginPage={"apiRequest":function(e){var t="https://getpocket.com/v3/"+e.path,i=e.data||{};i.consumer_key=PKTConsumerKey,$.ajax({"url":t,"type":"POST","data":i,"success":e.success,"error":e.error})},"fetchGUID":function(e,t){this.apiRequest({"path":"guid","success":function(t){var i=t.guid;u("guid",i),e(i)},"error":t})},"processLoginSignupResponse":function(e,t){var i,n,a;if("string"==typeof e){var s=e.split("&");i=s[0].split("=")[1],n=s[1].split("=")[1],a=s[2].split("=")[1]}else i=e.access_token,n=e.friend_meta_data.username,a=e.uid;Wt.setUsername(n),Wt.setAccessToken(i),Wt.setUID(a),t()},"login":function(e,t){this.action="login";var i=this;i.apiRequest({"path":"oauth/authorize","data":e,"success":function(e){logger.log("login success"),logger.log(e),i.processLoginSignupResponse(e,t.success)},"error":function(){t.error.apply(t,Array.apply(null,arguments))}})},"loginGoogle":function(e,t){this.action="login";var i=this;i.apiRequest({"path":"ssoauth","data":e,"success":function(e){logger.log("login success"),logger.log(e),e.is_existing_user&&(f("PromptPassword"),f("PromptPasswordDetails")),i.processLoginSignupResponse(e,t.success)},"error":function(){t.error.apply(t,Array.apply(null,arguments))}})},"signup":function(e,t){this.action="signup";var i=this;i.apiRequest({"path":"signup","data":e,"success":function(e){logger.log("signup success"),logger.log(e),i.processLoginSignupResponse(e,t.success)},"error":function(){t.error.apply(t,Array.apply(null,arguments))}})},"init":function(){function e(e,t){var i=$("#"+e);if(!i.length)return e+"_"+t;var n=i.parents(".loginform-container").length?"login":"signup";return n+"_"+i.attr("name").replace("_","")+"_"+t}function t(t,i,n){var a=$("#"+t).parents(".form-field"),s=a.find(".error-bubble"),r=a.find(".error-msg");if(i){r.html(n);var o=s.height();o>16?s.addClass("error-bubble-twoliner"):s.removeClass("error-bubble-twoliner"),a.hasClass("form-field-error")||(a.removeClass("form-field-verified"),PocketAnalytics.action(e(t,"error"),"interact","core")),a.addClass("form-field-error")}else a.hasClass("form-field-verified")||(a.addClass("form-field-verified"),PocketAnalytics.action(e(t,"verified"),"interact","core")),a.removeClass("form-field-error")}function i(e){var i=!1;if(("first_name"==e||"feed_id"==e||"login_password"==e)&&(i=$.trim($("#"+e).val()).length),"signup_email"==e){var n=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;i=n.test($.trim($("#"+e).val()))}if("signup_password"==e&&(i=$.trim($("#"+e).val()).length>=6),i)t(e,!1);else{var a;"first_name"==e?a=Pt.callTrans("error.enteryourname"):"signup_email"==e?a=Pt.callTrans("error.emailinvalidalt"):"signup_password"==e?a=Pt.callTrans("error.invalidpassword"):"signup_server"==e?a=Pt.callTrans("error.troubleprocessingsignup",null,['<a href="http://help.getpocket.com/customer/portal/emails/new?email%5Bsubject%5D=Trouble%20signing%20up%20for%20Pocket">'],["</a>"]):"feed_id"==e?a=Pt.callTrans("error.enteremailusername"):"login_password"==e?a=Pt.callTrans("error.invalidpasswordalt"):"login_server"==e&&(a=Pt.callTrans("error.troubleprocessinglogin",null,['<a href="http://help.getpocket.com/customer/portal/emails/new?email%5Bsubject%5D=Trouble%20logging%20into%20Pocket">'],["</a>"])),a&&t(e,!0,a)}}var n=this;$.fn.serializeObject=function(){var e={},t=this.serializeArray();return $.each(t,function(){e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e};var a={"initFieldsInteraction":function(t,n){t.on("focus",function(t){PocketAnalytics.action(e($(t.target).attr("id"),"focus"),"interact","core")}),t.on("keyup blur",function(t){var a=$.trim($(t.target).val()),s=$(t.target).attr("id");"blur"==t.type&&PocketAnalytics.action(e($(t.target).attr("id"),"blur"),"interact","core"),("blur"==t.type&&a.length||n||$(t.target).parent().hasClass("form-field-error"))&&i(s)})},"initSubmitInteraction":function(e){return e.each(function(e,t){var n=$(t).attr("id");i(n)}),!$(".coreform-container .form-field-error").length&&!$(".coreform-container .form-field-emailinvalid").length},"setGlobalFormMessage":function(e,t,i){if(t){$(e).find(".login-msg,.login-error").remove();var n="login-msg";i&&(n="login-error");var a=$('<p class="'+n+'">');a.html(t),$(e).find("h2,h3").last().after(a),$(".loginform-container").length?e.addClass("loginform-containererror"):e.addClass("signupform-containererror")}},"resetForm":function(e){f("PromptPassword"),f("PromptPasswordDetails"),e.find("input").filter('[type="password"],[type="text"]').val(""),e.find(".form-field").removeClass("form-field-error form-field-emailvalid form-field-emailinvalid form-field-emailprocessing"),e.find(".login-msg,.login-error").remove(),e.find(".button").removeClass("button-disabled button-secondary-disabled"),e.find(".button").off(),e.find("input").off()},"authGoogle":function(e){chrome.identity.getAuthToken({"interactive":!0},function(t){function i(){if(!this.error&&200==this.status){for(var i,s=JSON.parse(this.response),r=s.emails,l=0;l<r.length;l++)"account"==r[l].type&&(i=r[l].value);if("string"!=typeof i)return;var c={"type":e?"signup":"login","source":"google_chromeapp","get_uid":"true","friend_meta":1,"email":i,"sso_access_token":t,"sso_firstname":s.name.givenName,"sso_lastname":s.name.familyName,"sso_gender":s.gender,"sso_avatar":s.image.url},d={"email":i,"name":c.sso_firstname+" "+c.sso_lastname,"avatar":c.sso_avatar,"token":t};e?($(".signup-btn-google").addClass("button-disabled"),$(".content-opener").addClass("signupgoogleform-processing"),u("PromptPassword",1),u("PromptPasswordDetails",JSON.stringify(d))):($(".login-btn-google").addClass("button-disabled button-secondary-disabled"),$(".loginform-container").addClass("logingoogleform-processing")),n.loginGoogle(c,{"success":function(){chrome.runtime.getBackgroundPage(function(e){e.checkIfUserIsLoggedInAndLogoutIf=!1,o.removeClass("login-container-active"),PocketAnalytics.accessToken=Wt.accessToken,PocketAnalytics.action("form_login_success","interact","packagedapp"),Gt.sendAction({"action":"logged_in"},!1),Kt.preInit()})},"error":function(t){e?($(".signup-btn-google").removeClass("button-disabled"),$(".content-opener").removeClass("signupgoogleform-processing")):($(".login-btn-google").removeClass("button-disabled button-secondary-disabled"),$(".loginform-container").removeClass("logingoogleform-processing"));var i=$(".loginform-container");if(e&&(i=$(".content-opener")),navigator.onLine){if("object"!=typeof t)a.setGlobalFormMessage(i,Pt.callTrans("login.servererror"),!0);else if("string"==typeof t.getResponseHeader("X-Error")){var n=t.getResponseHeader("X-Error");a.setGlobalFormMessage(i,_(n),!0)}}else a.setGlobalFormMessage(i,Pt.callTrans("login.cantbecompleted"),!0),PocketAnalytics.action("form_login_error_offline","interact","packagedapp")}})}}if(!chrome.runtime.lastError){var s=new XMLHttpRequest;s.open("GET","https://www.googleapis.com/plus/v1/people/me"),s.setRequestHeader("Authorization","Bearer "+t),s.onload=i,s.send()}})}},s={"init":function(){var e=!1,t=$("#first_name,#last_name,#signup_email,#signup_password");a.initFieldsInteraction(t),$(".signupform-container input").keypress(function(e){13==e.which&&$(this).parent().hasClass("form-field")&&(e.preventDefault(),$(".signup-btn-formstate").trigger("click"))}),$(".signup-btn-formstate").click(function(i){if(i.preventDefault(),!$(this).hasClass("button-disabled")){if(e=!0,$(this).addClass("button-disabled"),PocketAnalytics.action("signup_click_email","click","packagedapp"),$(".signupform-container").addClass("signupform-processing"),!a.initSubmitInteraction(t))return PocketAnalytics.action("signup_form_error","interact","packagedapp"),$(this).removeClass("button-disabled"),$(".signupform-container").removeClass("signupform-processing"),$(".signupform-container .form-field-error").first().find("input").focus(),void 0;var s={"email":$("#signup_email").val(),"first_name":$("#first_name").val(),"last_name":$("#last_name").val(),"password":$("#signup_password").val(),"get_access_token":1,"get_uid":"true","friend_meta":1,"guid":n.guid,"source":"email","locale_lang":zt.language},r=this;n.signup(s,{"success":function(){chrome.runtime.getBackgroundPage(function(e){e.checkIfUserIsLoggedInAndLogoutIf=!1,PocketAnalytics.accessToken=Wt.accessToken,PocketAnalytics.action("form_signup_success","interact","packagedapp"),o.removeClass("login-container-active"),Kt.preInit()})},"error":function(e){if($(r).removeClass("button-disabled"),$(".signupform-container").removeClass("signupform-processing"),navigator.onLine){if("object"!=typeof e)a.setGlobalFormMessage($(".signupform-container"),Pt.callTrans("login.servererror"),!0);else if("string"==typeof e.getResponseHeader("X-Error")){var t=e.getResponseHeader("X-Error");a.setGlobalFormMessage($(".signupform-container"),_(t),!0)}}else a.setGlobalFormMessage($(".signupform-container"),Pt.callTrans("login.cantbecompleted"),!0),PocketAnalytics.action("form_signup_error_offline","interact","packagedapp")}})}}),$(".button-cancel",".signupform-container").click(function(){$(".signup-btn-google").removeClass("button-disabled"),$(".content-opener").removeClass("signupgoogleform-processing"),$(".content-login,.content-signup-email",o).removeClass("content-active"),$(".content-opener",o).addClass("content-active"),PocketAnalytics.action("/home","view","packagedapp")})},"reset":function(){$(".signupform-container").removeClass("signupform-processing signupgoogleform-processing"),$(".signupform-container").hasClass("signupform-formstatestart")||($(".signupform-formemail").removeClass("signupform-anicompleted"),$(".signupform-container").removeClass("signupform-formstate")),a.resetForm($(".signupform-container"))}},r={"init":function(){var e=!1,t=$("#feed_id,#login_password");a.initFieldsInteraction(t),$(".login-btn-google").click(function(e){e.preventDefault(),PocketAnalytics.action("login_click_google","click","packagedapp"),a.authGoogle(!1)}),$(".login-btn-email").click(function(i){if(i.preventDefault(),!$(this).hasClass("button-disabled")){if(e=!0,$(this).addClass("button-disabled"),$(".loginform-container").addClass("loginform-processing"),!a.initSubmitInteraction(t))return PocketAnalytics.action("login_form_error","interact","packagedapp"),$(this).removeClass("button-disabled"),$(".loginform-container").removeClass("loginform-processing"),$(".loginform-formemail .form-field-error").first().find("input").focus(),void 0;var s={"username":$("#feed_id").val(),"password":$("#login_password").val(),"get_uid":"true","friend_meta":1,"grant_type":"credentials","guid":n.guid,"locale_lang":dictsuffix},r=this;n.login(s,{"success":function(){chrome.runtime.getBackgroundPage(function(e){e.checkIfUserIsLoggedInAndLogoutIf=!1,o.removeClass("login-container-active"),PocketAnalytics.accessToken=Wt.accessToken,PocketAnalytics.action("form_login_success","interact","packagedapp"),Gt.sendAction({"action":"logged_in"},!1),Kt.preInit()})},"error":function(e){if($(r).removeClass("button-disabled"),$(".loginform-container").removeClass("loginform-processing"),navigator.onLine){if("object"!=typeof e)a.setGlobalFormMessage($(".loginform-container"),Pt.callTrans("login.servererror"),!0);else if("string"==typeof e.getResponseHeader("X-Error")){var t=e.getResponseHeader("X-Error");a.setGlobalFormMessage($(".loginform-container"),_(t),!0)}}else a.setGlobalFormMessage($(".loginform-container"),Pt.callTrans("login.cantbecompleted"),!0),PocketAnalytics.action("form_login_error_offline","interact","packagedapp")}})}}),$(".button-cancel",".loginform-container").click(function(){$(".signup-btn-google").removeClass("button-disabled"),$(".content-opener").removeClass("signupgoogleform-processing"),$(".content-login,.content-signup-email",o).removeClass("content-active"),$(".content-opener",o).addClass("content-active"),PocketAnalytics.action("/home","view","packagedapp")})},"reset":function(){$(".loginform-container").removeClass("loginform-processing logingoogleform-processing loginform-containererror"),a.resetForm($(".loginform-container"))}},o=$("#login-container");o.length||(o=$(Handlebars.templates.login_containershell(dictJSON)),$("body").append(o)),this.eventsSet||($(".signup-btn-google").click(function(e){e.preventDefault(),$(this).hasClass("button-disabled")||(PocketAnalytics.action("signup_click_google","click","packagedapp"),a.authGoogle(!0))}),$(".signupemail-btn-menu",o).click(function(){s.reset(),s.init(),$(".content-opener,.content-login",o).removeClass("content-active"),$(".content-signup-email",o).addClass("content-active").one("webkitTransitionEnd transitionEnd msTransitionEnd oTransitionEnd",function(){$("#first_name",o).focus()}),PocketAnalytics.action("/signup","view","packagedapp")}),$(".login-btn-menu",o).click(function(){r.reset(),r.init(),$(".content-opener,.content-signup",o).removeClass("content-active"),$(".content-login",o).addClass("content-active").one("webkitTransitionEnd transitionEnd msTransitionEnd oTransitionEnd",function(){$("#feed_id",o).focus()}),PocketAnalytics.action("/login","view","packagedapp")}),this.eventsSet=!0),this.fetchGUID(function(e){n.guid=e,PocketAnalytics.init(PKTConsumerKey,null,e),PocketAnalytics.action("/home","view","packagedapp")},function(){}),$(".signup-btn-google").removeClass("button-disabled"),$(".content-opener").removeClass("signupgoogleform-processing"),r.reset(),s.reset(),$(".content-login,.content-signup-email",o).removeClass("content-active"),$(".content-opener",o).addClass("content-active"),o.addClass("login-container-active")}},PocketAnalytics={"consumerKey":null,"accessToken":null,"guid":null,"prevAction":null,"init":function(e,t,i){"string"==typeof e&&(this.consumerKey=e),this.accessToken="string"==typeof t?t:null,"string"==typeof i&&(this.guid=i)},"action":function(e,t,i,n,a){if(this.consumerKey&&this.guid){this.prevAction=e;var s={"view":"web","type_id":t,"section":i,"page":this.getPage(),"identifier":e,"extra_int_data":n},r={"consumer_key":this.consumerKey,"access_token":this.accessToken,"type":"web","guid":this.guid,"session_id":null,"actions":JSON.stringify([s])};$.ajax({"url":"https://getpocket.com/v3/pv","type":"POST","dataType":"json","data":r,"complete":function(){"function"==typeof a&&a()}})}},"actionWithExtraString":function(e,t,i,n,a){if(this.consumerKey&&this.guid){this.prevAction=e;var s={"view":"web","type_id":t,"section":i,"page":this.getPage(),"identifier":e,"extra_content":n},r={"consumer_key":this.consumerKey,"access_token":this.accessToken,"type":"web","guid":this.guid,"session_id":null,"actions":JSON.stringify([s])};$.ajax({"url":"https://getpocket.com/v3/pv","type":"POST","dataType":"json","data":r,"complete":function(){"function"==typeof a&&a()}})}},"formattedHrefParams":function(e){return"string"==typeof e?-1==e.indexOf("?")?"":e.slice(e.indexOf("?")+1):void 0},"getQueryVariable":function(e){for(var t=window.location.search.substring(1),i=t.split("&"),n=0;n<i.length;n++){var a=i[n].split("=");if(decodeURIComponent(a[0])==e)return decodeURIComponent(a[1])}return!1},"getPage":function(){var e=document.location.pathname;return e.length>1&&"/"==e.charAt(e.length-1)?e.slice(0,-1):e}},PocketUserApps={"consumerKey":null,"accessToken":null,"ready":!1,"appTypes":null,"init":function(e,t){"string"==typeof e&&(this.consumerKey=e),"string"==typeof t&&(this.accessToken=t),this.poll()},"poll":function(){var e=this,t={"consumer_key":this.consumerKey,"access_token":this.accessToken,"type":"summary"};$.ajax({"url":"https://getpocket.com/v3/getuserapps","type":"POST","dataType":"json","data":t,"complete":function(){e.ready=!0},"success":function(t){"object"==typeof t.app_types&&(e.appTypes=t.app_types)}})},"installedExtension":function(){return this.appTypes&&"number"==typeof this.appTypes.pocket_extension},"installedMobile":function(){return this.appTypes&&"number"==typeof this.appTypes.pocket_mobile}};